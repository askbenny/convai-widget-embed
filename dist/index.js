var w8=Object.defineProperty;var x8=(Pn,he,Ci)=>he in Pn?w8(Pn,he,{enumerable:!0,configurable:!0,writable:!0,value:Ci}):Pn[he]=Ci;var ge=(Pn,he,Ci)=>x8(Pn,typeof he!="symbol"?he+"":he,Ci);(function(){"use strict";var hu;var Pn,he,Ci,Em,Pi,wm,xm,Cm,Pm,fu,mu,Ou,Rm,Oa={},Am=[],hw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ga=Array.isArray;function Zn(e,t){for(var n in t)e[n]=t[n];return e}function gu(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function lt(e,t,n){var r,i,s,a={};for(s in t)s=="key"?r=t[s]:s=="ref"?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?Pn.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return va(e,a,r,i,null)}function va(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ci,__i:-1,__u:0};return i==null&&he.vnode!=null&&he.vnode(s),s}function Im(){return{current:null}}function Xe(e){return e.children}function Sn(e,t){this.props=e,this.context=t}function us(e,t){if(t==null)return e.__?us(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?us(e):null}function Qm(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Qm(e)}}function vu(e){(!e.__d&&(e.__d=!0)&&Pi.push(e)&&!qo.__r++||wm!=he.debounceRendering)&&((wm=he.debounceRendering)||xm)(qo)}function qo(){for(var e,t,n,r,i,s,a,o=1;Pi.length;)Pi.length>o&&Pi.sort(Cm),e=Pi.shift(),o=Pi.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,s=[],a=[],t.__P&&((n=Zn({},r)).__v=r.__v+1,he.vnode&&he.vnode(n),bu(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,s,i??us(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,Mm(s,n,a),r.__e=r.__=null,n.__e!=i&&Qm(n)));qo.__r=0}function Nm(e,t,n,r,i,s,a,o,c,l,u){var d,h,p,O,m,b,v,k=r&&r.__k||Am,y=t.length;for(c=pw(n,t,k,c,y),d=0;d<y;d++)(p=n.__k[d])!=null&&(h=p.__i==-1?Oa:k[p.__i]||Oa,p.__i=d,b=bu(e,p,h,i,s,a,o,c,l,u),O=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&ku(h.ref,null,p),u.push(p.ref,p.__c||O,p)),m==null&&O!=null&&(m=O),(v=!!(4&p.__u))||h.__k===p.__k?c=Dm(p,c,e,v):typeof p.type=="function"&&b!==void 0?c=b:O&&(c=O.nextSibling),p.__u&=-7);return n.__e=m,c}function pw(e,t,n,r,i){var s,a,o,c,l,u=n.length,d=u,h=0;for(e.__k=new Array(i),s=0;s<i;s++)(a=t[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[s]=va(null,a,null,null,null):ga(a)?a=e.__k[s]=va(Xe,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=e.__k[s]=va(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[s]=a,c=s+h,a.__=e,a.__b=e.__b+1,(l=a.__i=fw(a,n,c,d))!=-1&&(d--,(o=n[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(i>u?h--:i<u&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=c&&(l==c-1?h--:l==c+1?h++:(l>c?h--:h++,a.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<u;s++)(o=n[s])!=null&&(2&o.__u)==0&&(o.__e==r&&(r=us(o)),qm(o,o));return r}function Dm(e,t,n,r){var i,s;if(typeof e.type=="function"){for(i=e.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=e,t=Dm(i[s],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=us(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function gr(e,t){return t=t||[],e==null||typeof e=="boolean"||(ga(e)?e.some(function(n){gr(n,t)}):t.push(e)),t}function fw(e,t,n,r){var i,s,a,o=e.key,c=e.type,l=t[n],u=l!=null&&(2&l.__u)==0;if(l===null&&o==null||u&&o==l.key&&c==l.type)return n;if(r>(u?1:0)){for(i=n-1,s=n+1;i>=0||s<t.length;)if((l=t[a=i>=0?i--:s++])!=null&&(2&l.__u)==0&&o==l.key&&c==l.type)return a}return-1}function $m(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||hw.test(t)?n:n+"px"}function Xo(e,t,n,r,i){var s,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||$m(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||$m(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Pm,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=fu,e.addEventListener(t,s?Ou:mu,s)):e.removeEventListener(t,s?Ou:mu,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Lm(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=fu++;else if(t.t<n.u)return;return n(he.event?he.event(t):t)}}}function bu(e,t,n,r,i,s,a,o,c,l){var u,d,h,p,O,m,b,v,k,y,T,_,S,C,N,$,x,D=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),s=[o=t.__e=n.__e]),(u=he.__b)&&u(t);e:if(typeof D=="function")try{if(v=t.props,k="prototype"in D&&D.prototype.render,y=(u=D.contextType)&&r[u.__c],T=u?y?y.props.value:u.__:r,n.__c?b=(d=t.__c=n.__c).__=d.__E:(k?t.__c=d=new D(v,T):(t.__c=d=new Sn(v,T),d.constructor=D,d.render=Ow),y&&y.sub(d),d.state||(d.state={}),d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),k&&d.__s==null&&(d.__s=d.state),k&&D.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Zn({},d.__s)),Zn(d.__s,D.getDerivedStateFromProps(v,d.__s))),p=d.props,O=d.state,d.__v=t,h)k&&D.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),k&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(k&&D.getDerivedStateFromProps==null&&v!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,T),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,T)===!1){for(t.__v!=n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(L){L&&(L.__=t)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,T),k&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,O,m)})}if(d.context=T,d.props=v,d.__P=e,d.__e=!1,S=he.__r,C=0,k){for(d.state=d.__s,d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(r=Zn(Zn({},r),d.getChildContext())),k&&!h&&d.getSnapshotBeforeUpdate!=null&&(m=d.getSnapshotBeforeUpdate(p,O)),$=u,u!=null&&u.type===Xe&&u.key==null&&($=Um(u.props.children)),o=Nm(e,ga($)?$:[$],t,n,r,i,s,a,o,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),b&&(d.__E=d.__=null)}catch(L){if(t.__v=null,c||s!=null)if(L.then){for(t.__u|=c?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,t.__e=o}else{for(x=s.length;x--;)gu(s[x]);Tu(t)}else t.__e=n.__e,t.__k=n.__k,L.then||Tu(t);he.__e(L,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=mw(n.__e,t,n,r,i,s,a,c,l);return(u=he.diffed)&&u(t),128&t.__u?void 0:o}function Tu(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Tu)}function Mm(e,t,n){for(var r=0;r<n.length;r++)ku(n[r],n[++r],n[++r]);he.__c&&he.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){he.__e(s,i.__v)}})}function Um(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ga(e)?e.map(Um):Zn({},e)}function mw(e,t,n,r,i,s,a,o,c){var l,u,d,h,p,O,m,b=n.props||Oa,v=t.props,k=t.type;if(k=="svg"?i="http://www.w3.org/2000/svg":k=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((p=s[l])&&"setAttribute"in p==!!k&&(k?p.localName==k:p.nodeType==3)){e=p,s[l]=null;break}}if(e==null){if(k==null)return document.createTextNode(v);e=document.createElementNS(i,k,v.is&&v),o&&(he.__m&&he.__m(t,s),o=!1),s=null}if(k==null)b===v||o&&e.data==v||(e.data=v);else{if(s=s&&Pn.call(e.childNodes),!o&&s!=null)for(b={},l=0;l<e.attributes.length;l++)b[(p=e.attributes[l]).name]=p.value;for(l in b)if(p=b[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=p;else if(!(l in v)){if(l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v)continue;Xo(e,l,null,p,i)}}for(l in v)p=v[l],l=="children"?h=p:l=="dangerouslySetInnerHTML"?u=p:l=="value"?O=p:l=="checked"?m=p:o&&typeof p!="function"||b[l]===p||Xo(e,l,p,b[l],i);if(u)o||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),Nm(t.type=="template"?e.content:e,ga(h)?h:[h],t,n,r,k=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:n.__k&&us(n,0),o,c),s!=null)for(l=s.length;l--;)gu(s[l]);o||(l="value",k=="progress"&&O==null?e.removeAttribute("value"):O!=null&&(O!==e[l]||k=="progress"&&!O||k=="option"&&O!=b[l])&&Xo(e,l,O,b[l],i),l="checked",m!=null&&m!=e[l]&&Xo(e,l,m,b[l],i))}return e}function ku(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){he.__e(i,n)}}function qm(e,t,n){var r,i;if(he.unmount&&he.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ku(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){he.__e(s,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&qm(r[i],t,n||typeof e.type!="function");n||gu(e.__e),e.__c=e.__=e.__e=void 0}function Ow(e,t,n){return this.constructor(e,n)}function Vr(e,t,n){var r,i,s,a;t==document&&(t=document.documentElement),he.__&&he.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,s=[],a=[],bu(t,e=(!r&&n||t).__k=lt(Xe,null,[e]),i||Oa,Oa,t.namespaceURI,!r&&n?[n]:i?null:t.firstChild?Pn.call(t.childNodes):null,s,!r&&n?n:i?i.__e:t.firstChild,r,a),Mm(s,e,a)}function yu(e,t){Vr(e,t,yu)}function Su(e,t,n){var r,i,s,a,o=Zn({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?r=t[s]:s=="ref"?i=t[s]:o[s]=t[s]===void 0&&a!=null?a[s]:t[s];return arguments.length>2&&(o.children=arguments.length>3?Pn.call(arguments,2):n),va(e.type,o,r||e.key,i||e.ref,null)}function it(e){function t(n){var r,i;return this.getChildContext||(r=new Set,(i={})[t.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(a){a.__e=!0,vu(a)})},this.sub=function(s){r.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),a&&a.call(s)}}),n.children}return t.__c="__cC"+Rm++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,r){return n.children(r)}).contextType=t,t}Pn=Am.slice,he={__e:function(e,t,n,r){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(o){e=o}throw e}},Ci=0,Em=function(e){return e!=null&&e.constructor==null},Sn.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Zn({},this.state),typeof e=="function"&&(e=e(Zn({},n),this.props)),e&&Zn(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),vu(this))},Sn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),vu(this))},Sn.prototype.render=Xe,Pi=[],xm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Cm=function(e,t){return e.__v.__b-t.__v.__b},qo.__r=0,Pm=/(PointerCapture)$|Capture$/i,fu=0,mu=Lm(!1),Ou=Lm(!0),Rm=0;function Fo(){return Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fo.apply(this,arguments)}function Xm(e,t){if(e==null)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}var gw=["context","children"],vw=["useFragment"];function bw(e,t,n,r){function i(){var s,a=Reflect.construct(HTMLElement,[],i);return a._vdomComponent=e,r&&r.shadow?(a._root=a.attachShadow({mode:r.mode||"open",serializable:(s=r.serializable)!=null&&s}),r.adoptedStyleSheets&&(a._root.adoptedStyleSheets=r.adoptedStyleSheets)):a._root=a,a}return(i.prototype=Object.create(HTMLElement.prototype)).constructor=i,i.prototype.connectedCallback=function(){kw.call(this,r)},i.prototype.attributeChangedCallback=yw,i.prototype.disconnectedCallback=Sw,n=n||e.observedAttributes||Object.keys(e.propTypes||{}),i.observedAttributes=n,e.formAssociated&&(i.formAssociated=!0),n.forEach(function(s){Object.defineProperty(i.prototype,s,{get:function(){return this._vdom?this._vdom.props[s]:this._props[s]},set:function(a){this._vdom?this.attributeChangedCallback(s,null,a):(this._props||(this._props={}),this._props[s]=a);var o=typeof a;a!=null&&o!=="string"&&o!=="boolean"&&o!=="number"||this.setAttribute(s,a)}})}),customElements.define(t||e.tagName||e.displayName||e.name,i),i}function Tw(e){this.getChildContext=function(){return e.context};var t=e.children,n=Xm(e,gw);return Su(t,n)}function kw(e){var t=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(t),this._vdom=lt(Tw,Fo({},this._props,{context:t.detail.context}),zm(this,this._vdomComponent,e)),(this.hasAttribute("hydrate")?yu:Vr)(this._vdom,this._root)}function Fm(e){return e.replace(/-(\w)/g,function(t,n){return n?n.toUpperCase():""})}function yw(e,t,n){if(this._vdom){var r={};r[e]=n=n??void 0,r[Fm(e)]=n,this._vdom=Su(this._vdom,r),Vr(this._vdom,this._root)}}function Sw(){Vr(this._vdom=null,this._root)}function Bm(e,t){var n=this,r=e.useFragment,i=Xm(e,vw);return lt(r?Xe:"slot",Fo({},i,{ref:function(s){s?(n.ref=s,n._listener||(n._listener=function(a){a.stopPropagation(),a.detail.context=t},s.addEventListener("_preact",n._listener))):n.ref.removeEventListener("_preact",n._listener)}}))}function zm(e,t,n){if(e.nodeType===3)return e.data;if(e.nodeType!==1)return null;var r=[],i={},s=0,a=e.attributes,o=e.childNodes;for(s=a.length;s--;)a[s].name!=="slot"&&(i[a[s].name]=a[s].value,i[Fm(a[s].name)]=a[s].value);for(s=o.length;s--;){var c=zm(o[s],null,n),l=o[s].slot;l?i[l]=lt(Bm,{name:l},c):r[s]=c}var u=!(!n||!n.shadow),d=t?lt(Bm,{useFragment:!u},r):r;return!u&&t&&(e.innerHTML=""),lt(t||e.nodeName.toLowerCase(),i,d)}var _w=0;function g(e,t,n,r,i,s){t||(t={});var a,o,c=t;if("ref"in c)for(o in c={},t)o=="ref"?a=t[o]:c[o]=t[o];var l={type:e,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_w,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(o in a)c[o]===void 0&&(c[o]=a[o]);return he.vnode&&he.vnode(l),l}var vr,Je,_u,Zm,ds=0,jm=[],ht=he,Vm=ht.__b,Gm=ht.__r,Wm=ht.diffed,Ym=ht.__c,Hm=ht.unmount,Km=ht.__;function Ri(e,t){ht.__h&&ht.__h(Je,e,ds||t),ds=0;var n=Je.__H||(Je.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function fe(e){return ds=1,Bo(eO,e)}function Bo(e,t,n){var r=Ri(vr++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):eO(void 0,t),function(o){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,o);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=Je,!Je.__f)){var i=function(o,c,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!s||s.call(this,o,c,l);var d=r.__c.props!==o;return u.forEach(function(h){if(h.__N){var p=h.__[0];h.__=h.__N,h.__N=void 0,p!==h.__[0]&&(d=!0)}}),s&&s.call(this,o,c,l)||d};Je.__f=!0;var s=Je.shouldComponentUpdate,a=Je.componentWillUpdate;Je.componentWillUpdate=function(o,c,l){if(this.__e){var u=s;s=void 0,i(o,c,l),s=u}a&&a.call(this,o,c,l)},Je.shouldComponentUpdate=i}return r.__N||r.__}function ve(e,t){var n=Ri(vr++,3);!ht.__s&&Cu(n.__H,t)&&(n.__=e,n.u=t,Je.__H.__h.push(n))}function br(e,t){var n=Ri(vr++,4);!ht.__s&&Cu(n.__H,t)&&(n.__=e,n.u=t,Je.__h.push(n))}function ue(e){return ds=5,Ne(function(){return{current:e}},[])}function Eu(e,t,n){ds=6,br(function(){if(typeof e=="function"){var r=e(t());return function(){e(null),r&&typeof r=="function"&&r()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function Ne(e,t){var n=Ri(vr++,7);return Cu(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function oe(e,t){return ds=8,Ne(function(){return e},t)}function cn(e){var t=Je.context[e.__c],n=Ri(vr++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(Je)),t.props.value):e.__}function wu(e,t){ht.useDebugValue&&ht.useDebugValue(t?t(e):e)}function Ew(e){var t=Ri(vr++,10),n=fe();return t.__=e,Je.componentDidCatch||(Je.componentDidCatch=function(r,i){t.__&&t.__(r,i),n[1](r)}),[n[0],function(){n[1](void 0)}]}function zo(){var e=Ri(vr++,11);if(!e.__){for(var t=Je.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function ww(){for(var e;e=jm.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Zo),e.__H.__h.forEach(xu),e.__H.__h=[]}catch(t){e.__H.__h=[],ht.__e(t,e.__v)}}ht.__b=function(e){Je=null,Vm&&Vm(e)},ht.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Km&&Km(e,t)},ht.__r=function(e){Gm&&Gm(e),vr=0;var t=(Je=e.__c).__H;t&&(_u===Je?(t.__h=[],Je.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Zo),t.__h.forEach(xu),t.__h=[],vr=0)),_u=Je},ht.diffed=function(e){Wm&&Wm(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(jm.push(t)!==1&&Zm===ht.requestAnimationFrame||((Zm=ht.requestAnimationFrame)||xw)(ww)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),_u=Je=null},ht.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Zo),n.__h=n.__h.filter(function(r){return!r.__||xu(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],ht.__e(r,n.__v)}}),Ym&&Ym(e,t)},ht.unmount=function(e){Hm&&Hm(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Zo(r)}catch(i){t=i}}),n.__H=void 0,t&&ht.__e(t,n.__v))};var Jm=typeof requestAnimationFrame=="function";function xw(e){var t,n=function(){clearTimeout(r),Jm&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);Jm&&(t=requestAnimationFrame(n))}function Zo(e){var t=Je,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Je=t}function xu(e){var t=Je;e.__c=e.__(),Je=t}function Cu(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function eO(e,t){return typeof t=="function"?t(e):t}function tO(e,t){for(var n in t)e[n]=t[n];return e}function Pu(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Ru(e,t){var n=t(),r=fe({t:{__:n,u:t}}),i=r[0].t,s=r[1];return br(function(){i.__=n,i.u=t,Au(i)&&s({t:i})},[e,n,t]),ve(function(){return Au(i)&&s({t:i}),e(function(){Au(i)&&s({t:i})})},[e]),n}function Au(e){var t,n,r=e.u,i=e.__;try{var s=r();return!((t=i)===(n=s)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function Iu(e){e()}function Qu(e){return e}function Nu(){return[!1,Iu]}var Du=br;function jo(e,t){this.props=e,this.context=t}function Fe(e,t){function n(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),t?!t(this.props,i)||!a:Pu(this.props,i)}function r(i){return this.shouldComponentUpdate=n,lt(e,i)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=e,r}(jo.prototype=new Sn).isPureReactComponent=!0,jo.prototype.shouldComponentUpdate=function(e,t){return Pu(this.props,e)||Pu(this.state,t)};var nO=he.__b;he.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),nO&&nO(e)};var Cw=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _e(e){function t(n){var r=tO({},n);return delete r.ref,e(r,n.ref||null)}return t.$$typeof=Cw,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var rO=function(e,t){return e==null?null:gr(gr(e).map(t))},ln={map:rO,forEach:rO,count:function(e){return e?gr(e).length:0},only:function(e){var t=gr(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:gr},Pw=he.__e;he.__e=function(e,t,n,r){if(e.then){for(var i,s=t;s=s.__;)if((i=s.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}Pw(e,t,n,r)};var iO=he.unmount;function sO(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=tO({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return sO(r,t,n)})),e}function aO(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return aO(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function ba(){this.__u=0,this.o=null,this.__b=null}function oO(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function cO(e){var t,n,r,i=null;function s(a){if(t||(t=e()).then(function(o){o&&(i=o.default||o),r=!0},function(o){n=o,r=!0}),n)throw n;if(!r)throw t;return i?lt(i,a):null}return s.displayName="Lazy",s.__f=!0,s}function hs(){this.i=null,this.l=null}he.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),iO&&iO(e)},(ba.prototype=new Sn).__c=function(e,t){var n=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=oO(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(o):o())};n.__R=a;var o=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=aO(c,c.__c.__P,c.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.o.pop();)l.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},ba.prototype.componentWillUnmount=function(){this.o=[]},ba.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=sO(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&lt(Xe,null,e.fallback);return i&&(i.__u&=-33),[lt(Xe,null,t.__a?null:e.children),i]};var lO=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function Rw(e){return this.getChildContext=function(){return e.context},e.children}function Aw(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Vr(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var r=t.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(i,s){this.childNodes.push(i),t.h.insertBefore(i,s)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),t.h.removeChild(i)}}}Vr(lt(Rw,{context:t.context},e.__v),t.v)}function Vo(e,t){var n=lt(Aw,{__v:e,h:t});return n.containerInfo=t,n}(hs.prototype=new Sn).__a=function(e){var t=this,n=oO(t.__v),r=t.l.get(e);return r[0]++,function(i){var s=function(){t.props.revealOrder?(r.push(i),lO(t,e,r)):i()};n?n(s):s()}},hs.prototype.render=function(e){this.i=null,this.l=new Map;var t=gr(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},hs.prototype.componentDidUpdate=hs.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){lO(e,n,t)})};var uO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Iw=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Qw=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Nw=/[A-Z0-9]/g,Dw=typeof document<"u",$w=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function dO(e,t,n){return t.__k==null&&(t.textContent=""),Vr(e,t),typeof n=="function"&&n(),e?e.__c:null}function hO(e,t,n){return yu(e,t),typeof n=="function"&&n(),e?e.__c:null}Sn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Sn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var pO=he.event;function Lw(){}function Mw(){return this.cancelBubble}function Uw(){return this.defaultPrevented}he.event=function(e){return pO&&(e=pO(e)),e.persist=Lw,e.isPropagationStopped=Mw,e.isDefaultPrevented=Uw,e.nativeEvent=e};var $u,qw={enumerable:!1,configurable:!0,get:function(){return this.class}},fO=he.vnode;he.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={},s=r.indexOf("-")===-1;for(var a in n){var o=n[a];if(!(a==="value"&&"defaultValue"in n&&o==null||Dw&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&o===!0?o="":c==="translate"&&o==="no"?o=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||$w(n.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":Qw.test(a)&&(a=c):c=a="oninput":s&&Iw.test(a)?a=a.replace(Nw,"-$&").toLowerCase():o===null&&(o=void 0),c==="oninput"&&i[a=c]&&(a="oninputCapture"),i[a]=o}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=gr(n.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=gr(n.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",qw)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=uO,fO&&fO(e)};var mO=he.__r;he.__r=function(e){mO&&mO(e),$u=e.__c};var OO=he.diffed;he.diffed=function(e){OO&&OO(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),$u=null};var gO={ReactCurrentDispatcher:{current:{readContext:function(e){return $u.__n[e.__c].props.value},useCallback:oe,useContext:cn,useDebugValue:wu,useDeferredValue:Qu,useEffect:ve,useId:zo,useImperativeHandle:Eu,useInsertionEffect:Du,useLayoutEffect:br,useMemo:Ne,useReducer:Bo,useRef:ue,useState:fe,useSyncExternalStore:Ru,useTransition:Nu}}},Xw="18.3.1";function vO(e){return lt.bind(null,e)}function xt(e){return!!e&&e.$$typeof===uO}function bO(e){return xt(e)&&e.type===Xe}function TO(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Ai(e){return xt(e)?Su.apply(null,arguments):e}function kO(e){return!!e.__k&&(Vr(null,e),!0)}function yO(e){return e&&(e.base||e.nodeType===1&&e)||null}var SO=function(e,t){return e(t)},Go=function(e,t){return e(t)},_O=Xe,EO=xt,Tr={useState:fe,useId:zo,useReducer:Bo,useEffect:ve,useLayoutEffect:br,useInsertionEffect:Du,useTransition:Nu,useDeferredValue:Qu,useSyncExternalStore:Ru,startTransition:Iu,useRef:ue,useImperativeHandle:Eu,useMemo:Ne,useCallback:oe,useContext:cn,useDebugValue:wu,version:"18.3.1",Children:ln,render:dO,hydrate:hO,unmountComponentAtNode:kO,createPortal:Vo,createElement:lt,createContext:it,createFactory:vO,cloneElement:Ai,createRef:Im,Fragment:Xe,isValidElement:xt,isElement:EO,isFragment:bO,isMemo:TO,findDOMNode:yO,Component:Sn,PureComponent:jo,memo:Fe,forwardRef:_e,flushSync:Go,unstable_batchedUpdates:SO,StrictMode:_O,Suspense:ba,SuspenseList:hs,lazy:cO,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:gO};const Lu=Object.freeze(Object.defineProperty({__proto__:null,Children:ln,Component:Sn,Fragment:Xe,PureComponent:jo,StrictMode:_O,Suspense:ba,SuspenseList:hs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:gO,cloneElement:Ai,createContext:it,createElement:lt,createFactory:vO,createPortal:Vo,createRef:Im,default:Tr,findDOMNode:yO,flushSync:Go,forwardRef:_e,hydrate:hO,isElement:EO,isFragment:bO,isMemo:TO,isValidElement:xt,lazy:cO,memo:Fe,render:dO,startTransition:Iu,unmountComponentAtNode:kO,unstable_batchedUpdates:SO,useCallback:oe,useContext:cn,useDebugValue:wu,useDeferredValue:Qu,useEffect:ve,useErrorBoundary:Ew,useId:zo,useImperativeHandle:Eu,useInsertionEffect:Du,useLayoutEffect:br,useMemo:Ne,useReducer:Bo,useRef:ue,useState:fe,useSyncExternalStore:Ru,useTransition:Nu,version:Xw},Symbol.toStringTag,{value:"Module"}));var Fw=Symbol.for("preact-signals");function Wo(){if(Gr>1)Gr--;else{for(var e,t=!1;Ta!==void 0;){var n=Ta;for(Ta=void 0,Mu++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&PO(n))try{n.c()}catch(i){t||(e=i,t=!0)}n=r}}if(Mu=0,Gr--,t)throw e}}function wO(e){if(Gr>0)return e();Gr++;try{return e()}finally{Wo()}}var Ve=void 0;function xO(e){var t=Ve;Ve=void 0;try{return e()}finally{Ve=t}}var Ta=void 0,Gr=0,Mu=0,Yo=0;function CO(e){if(Ve!==void 0){var t=e.n;if(t===void 0||t.t!==Ve)return t={i:0,S:e,p:Ve.s,n:void 0,t:Ve,e:void 0,x:void 0,r:t},Ve.s!==void 0&&(Ve.s.n=t),Ve.s=t,e.n=t,32&Ve.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Ve.s,t.n=void 0,Ve.s.n=t,Ve.s=t),t}}function $t(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched,this.name=t==null?void 0:t.name}$t.prototype.brand=Fw,$t.prototype.h=function(){return!0},$t.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n!==void 0?n.e=e:xO(function(){var r;(r=t.W)==null||r.call(t)}))},$t.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,r=e.x;n!==void 0&&(n.x=r,e.e=void 0),r!==void 0&&(r.e=n,e.x=void 0),e===this.t&&(this.t=r,r===void 0&&xO(function(){var i;(i=t.Z)==null||i.call(t)}))}},$t.prototype.subscribe=function(e){var t=this;return fs(function(){var n=t.value,r=Ve;Ve=void 0;try{e(n)}finally{Ve=r}},{name:"sub"})},$t.prototype.valueOf=function(){return this.value},$t.prototype.toString=function(){return this.value+""},$t.prototype.toJSON=function(){return this.value},$t.prototype.peek=function(){var e=Ve;Ve=void 0;try{return this.value}finally{Ve=e}},Object.defineProperty($t.prototype,"value",{get:function(){var e=CO(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(Mu>100)throw new Error("Cycle detected");this.v=e,this.i++,Yo++,Gr++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Wo()}}}});function un(e,t){return new $t(e,t)}function PO(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function RO(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function AO(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function Ii(e,t){$t.call(this,void 0),this.x=e,this.s=void 0,this.g=Yo-1,this.f=4,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched,this.name=t==null?void 0:t.name}Ii.prototype=new $t,Ii.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Yo))return!0;if(this.g=Yo,this.f|=1,this.i>0&&!PO(this))return this.f&=-2,!0;var e=Ve;try{RO(this),Ve=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return Ve=e,AO(this),this.f&=-2,!0},Ii.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}$t.prototype.S.call(this,e)},Ii.prototype.U=function(e){if(this.t!==void 0&&($t.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}},Ii.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(Ii.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=CO(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Ft(e,t){return new Ii(e,t)}function IO(e){var t=e.u;if(e.u=void 0,typeof t=="function"){Gr++;var n=Ve;Ve=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,Uu(e),r}finally{Ve=n,Wo()}}}function Uu(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,IO(e)}function Bw(e){if(Ve!==this)throw new Error("Out-of-order effect");AO(this),Ve=e,this.f&=-2,8&this.f&&Uu(this),Wo()}function ps(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t==null?void 0:t.name}ps.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}},ps.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,IO(this),RO(this),Gr++;var e=Ve;return Ve=this,Bw.bind(this,e)},ps.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ta,Ta=this)},ps.prototype.d=function(){this.f|=8,1&this.f||Uu(this)},ps.prototype.dispose=function(){this.d()};function fs(e,t){var n=new ps(e,t);try{n.c()}catch(i){throw n.d(),i}var r=n.d.bind(n);return r[Symbol.dispose]=r,r}var qu,Ho,Xu,Ko=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__,QO=[],NO=[];fs(function(){qu=this.N})();function ms(e,t){he[e]=t.bind(null,he[e]||function(){})}function Jo(e){Xu&&Xu(),Xu=e&&e.S()}function DO(e){var t=this,n=e.data,r=Ze(n);r.value=n;var i=Ne(function(){for(var o=t,c=t.__v;c=c.__;)if(c.__c){c.__c.__$f|=4;break}var l=Ft(function(){var p=r.value.value;return p===0?0:p===!0?"":p||""}),u=Ft(function(){return!Array.isArray(l.value)&&!Em(l.value)}),d=fs(function(){if(this.N=$O,u.value){var p=l.value;o.__v&&o.__v.__e&&o.__v.__e.nodeType===3&&(o.__v.__e.data=p)}}),h=t.__$u.d;return t.__$u.d=function(){d(),h.call(this)},[u,l]},[]),s=i[0],a=i[1];return s.value?a.peek():a.value}DO.displayName="ReactiveTextNode",Object.defineProperties($t.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:DO},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),ms("__b",function(e,t){if(Ko&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var n,r=t.props;for(var i in r)if(i!=="children"){var s=r[i];s instanceof $t&&(n||(t.__np=n={}),n[i]=s,r[i]=s.peek())}}e(t)}),ms("__r",function(e,t){if(Ko&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t),t.type!==Xe){Jo();var n,r=t.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(i){var s;return fs(function(){s=this}),s.c=function(){r.__$f|=1,r.setState({})},s}())),Ho=r,Jo(n)}e(t)}),ms("__e",function(e,t,n,r){Ko&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Jo(),Ho=void 0,e(t,n,r)}),ms("diffed",function(e,t){Ko&&typeof t.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Jo(),Ho=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var r=t.__np,i=t.props;if(r){var s=n.U;if(s)for(var a in s){var o=s[a];o!==void 0&&!(a in r)&&(o.d(),s[a]=void 0)}else s={},n.U=s;for(var c in r){var l=s[c],u=r[c];l===void 0?(l=zw(n,c,u,i),s[c]=l):l.o(u,i)}}}e(t)});function zw(e,t,n,r){var i=t in e&&e.ownerSVGElement===void 0,s=un(n);return{o:function(a,o){s.value=a,r=o},d:fs(function(){this.N=$O;var a=s.value.value;r[t]!==a&&(r[t]=a,i?e[t]=a:a!=null&&(a!==!1||t[4]==="-")?e.setAttribute(t,a):e.removeAttribute(t))})}}ms("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var i in r){var s=r[i];s&&s.d()}}}}else{var a=t.__c;if(a){var o=a.__$u;o&&(a.__$u=void 0,o.d())}}e(t)}),ms("__h",function(e,t,n,r){(r<3||r===9)&&(t.__$f|=2),e(t,n,r)}),Sn.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,r=n&&n.s!==void 0;for(var i in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(r||s||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var a in e)if(a!=="__source"&&e[a]!==this.props[a])return!0;for(var o in this.props)if(!(o in e))return!0;return!1};function Ze(e,t){return fe(function(){return un(e,t)})[0]}function Te(e,t){var n=ue(e);return n.current=e,Ho.__$f|=4,Ne(function(){return Ft(function(){return n.current()},t)},[])}var Zw=typeof requestAnimationFrame>"u"?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(r),e()},n=setTimeout(t,35),r=requestAnimationFrame(t)},jw=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Vw(){wO(function(){for(var e;e=QO.shift();)qu.call(e)})}function Gw(){QO.push(this)===1&&(he.requestAnimationFrame||Zw)(Vw)}function Ww(){wO(function(){for(var e;e=NO.shift();)qu.call(e)})}function $O(){NO.push(this)===1&&(he.requestAnimationFrame||jw)(Ww)}function jn(e,t){var n=ue(e);n.current=e,ve(function(){return fs(function(){return this.N=Gw,n.current()},t)},[])}function Yw(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var Hw=Object.defineProperty,Kw=(e,t,n)=>t in e?Hw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LO=(e,t,n)=>Kw(e,typeof t!="symbol"?t+"":t,n);let Gt=class{constructor(){LO(this,"_locking"),LO(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(i=>t=()=>{this._locks-=1,i()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}};function pt(e,t){if(!e)throw new Error(t)}const Jw=34028234663852886e22,ex=-34028234663852886e22,tx=4294967295,nx=2147483647,rx=-2147483648;function ec(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>nx||e<rx)throw new Error("invalid int 32: "+e)}function Fu(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>tx||e<0)throw new Error("invalid uint 32: "+e)}function MO(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Jw||e<ex))throw new Error("invalid float 32: "+e)}const UO=Symbol("@bufbuild/protobuf/enum-type");function ix(e){const t=e[UO];return pt(t,"missing enum type on enum object"),t}function qO(e,t,n,r){e[UO]=XO(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})))}function XO(e,t,n){const r=Object.create(null),i=Object.create(null),s=[];for(const a of t){const o=FO(a);s.push(o),r[a.name]=o,i[a.no]=o}return{typeName:e,values:s,findName(a){return r[a]},findNumber(a){return i[a]}}}function sx(e,t,n){const r={};for(const i of t){const s=FO(i);r[s.localName]=s.no,r[s.no]=s.localName}return qO(r,e,t),r}function FO(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Bu{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,t,s,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(t),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t==null?void 0:t.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function ax(e,t,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),a={[s]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[s];return Object.setPrototypeOf(a.prototype,new Bu),Object.assign(a,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(o,c){return new a().fromBinary(o,c)},fromJson(o,c){return new a().fromJson(o,c)},fromJsonString(o,c){return new a().fromJsonString(o,c)},equals(o,c){return e.util.equals(a,o,c)}}),a}function ox(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function zu(e,t,n){for(let s=0;s<28;s=s+7){const a=e>>>s,o=!(!(a>>>7)&&t==0),c=(o?a|128:a)&255;if(n.push(c),!o)return}const r=e>>>28&15|(t&7)<<4,i=t>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const a=t>>>s,o=!!(a>>>7),c=(o?a|128:a)&255;if(n.push(c),!o)return}n.push(t>>>31&1)}}const tc=4294967296;function BO(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(a,o){const c=Number(e.slice(a,o));i*=n,r=r*n+c,r>=tc&&(i=i+(r/tc|0),r=r%tc)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?ZO(r,i):Zu(r,i)}function cx(e,t){let n=Zu(e,t);const r=n.hi&2147483648;r&&(n=ZO(n.lo,n.hi));const i=zO(n.lo,n.hi);return r?"-"+i:i}function zO(e,t){if({lo:e,hi:t}=lx(e,t),t<=2097151)return String(tc*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535;let s=n+r*6777216+i*6710656,a=r+i*8147497,o=i*2;const c=1e7;return s>=c&&(a+=Math.floor(s/c),s%=c),a>=c&&(o+=Math.floor(a/c),a%=c),o.toString()+jO(a)+jO(s)}function lx(e,t){return{lo:e>>>0,hi:t>>>0}}function Zu(e,t){return{lo:e|0,hi:t|0}}function ZO(e,t){return t=~t,e?e=~e+1:t+=1,Zu(e,t)}const jO=e=>{const t=String(e);return"0000000".slice(t.length)+t};function VO(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function ux(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function dx(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),a=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<a)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return e.setBigInt64(0,this.parse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(c){return e.setBigInt64(0,this.uParse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}const n=i=>pt(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>pt(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),BO(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),BO(i)},dec(i,s){return cx(i,s)},uDec(i,s){return zO(i,s)}}}const ut=dx();var j;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(j||(j={}));var Wr;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(Wr||(Wr={}));function Yr(e,t,n){if(t===n)return!0;if(e==j.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return t==n}return!1}function Os(e,t){switch(e){case j.BOOL:return!1;case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return t==0?ut.zero:"0";case j.DOUBLE:case j.FLOAT:return 0;case j.BYTES:return new Uint8Array(0);case j.STRING:return"";default:return 0}}function GO(e,t){switch(e){case j.BOOL:return t===!1;case j.STRING:return t==="";case j.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var gt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(gt||(gt={}));class hx{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Fu(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return ec(t),VO(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){MO(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Fu(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){ec(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return ec(t),t=(t<<1^t>>31)>>>0,VO(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ut.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ut.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=ut.enc(t);return zu(n.lo,n.hi,this.buf),this}sint64(t){let n=ut.enc(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return zu(i,s,this.buf),this}uint64(t){let n=ut.uEnc(t);return zu(n.lo,n.hi,this.buf),this}}class px{constructor(t,n){this.varint64=ox,this.uint32=ux,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case gt.Varint:for(;this.buf[this.pos++]&128;);break;case gt.Bit64:this.pos+=4;case gt.Bit32:this.pos+=4;break;case gt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case gt.StartGroup:for(;;){const[s,a]=this.tag();if(a===gt.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(a,s)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return ut.dec(...this.varint64())}uint64(){return ut.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,ut.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ut.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ut.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function fx(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=t.split(".").pop(),s.jsonName="[".concat(t,"]"),i=e.util.newFieldList([s]).list()[0]}return i},runtime:e}}function WO(e){const t=e.field.localName,n=Object.create(null);return n[t]=mx(e),[n,()=>n[t]]}function mx(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Os(t.T,t.L);case"message":const n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Ox(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),nc=[];for(let e=0;e<kr.length;e++)nc[kr[e].charCodeAt(0)]=e;nc[45]=kr.indexOf("+"),nc[95]=kr.indexOf("/");const YO={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,a=0;for(let o=0;o<e.length;o++){if(s=nc[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=s,i=1;break;case 1:n[r++]=a<<2|(s&48)>>4,a=s,i=2;break;case 2:n[r++]=(a&15)<<4|(s&60)>>2,a=s,i=3;break;case 3:n[r++]=(a&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=kr[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=kr[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=kr[i|r>>6],t+=kr[r&63],n=0;break}return n&&(t+=kr[i],t+="=",n==1&&(t+="=")),t}};function gx(e,t,n){KO(t,e);const r=t.runtime.bin.makeReadOptions(n),i=Ox(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,a]=WO(t);for(const o of i)t.runtime.bin.readField(s,r.readerFactory(o.data),t.field,o.wireType,r);return a()}function vx(e,t,n,r){KO(t,e);const i=t.runtime.bin.makeReadOptions(r),s=t.runtime.bin.makeWriteOptions(r);if(HO(e,t)){const l=e.getType().runtime.bin.listUnknownFields(e).filter(u=>u.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const u of l)e.getType().runtime.bin.onUnknownField(e,u.no,u.wireType,u.data)}const a=s.writerFactory();let o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,n,a,s);const c=i.readerFactory(a.finish());for(;c.pos<c.len;){const[l,u]=c.tag(),d=c.skip(u,l);e.getType().runtime.bin.onUnknownField(e,l,u,d)}}function HO(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function KO(e,t){pt(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function JO(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!GO(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function eg(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?Os(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function yr(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(Bu.prototype).every(r=>r in e&&typeof e[r]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function tg(e,t){return yr(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}j.DOUBLE,j.FLOAT,j.INT64,j.UINT64,j.INT32,j.UINT32,j.BOOL,j.STRING,j.BYTES;const ng={ignoreUnknownFields:!1},rg={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function bx(e){return e?Object.assign(Object.assign({},ng),e):ng}function Tx(e){return e?Object.assign(Object.assign({},rg),e):rg}const rc=Symbol(),ic=Symbol();function kx(){return{makeReadOptions:bx,makeWriteOptions:Tx,readMessage(e,t,n,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Vn(t)));r=r??new e;const i=new Map,s=n.typeRegistry;for(const[a,o]of Object.entries(t)){const c=e.fields.findJsonName(a);if(c){if(c.oneof){if(o===null&&c.kind=="scalar")continue;const l=i.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(a,'"'));i.set(c.oneof,a)}ig(r,o,c,n,e)}else{let l=!1;if(s!=null&&s.findExtension&&a.startsWith("[")&&a.endsWith("]")){const u=s.findExtension(a.substring(1,a.length-1));if(u&&u.extendee.typeName==e.typeName){l=!0;const[d,h]=WO(u);ig(d,o,u.field,n,u),vx(r,u,h(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return r},writeMessage(e,t){const n=e.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!JO(i,e)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!Sx(i))continue}const a=i.oneof?e[i.oneof.localName].value:e[i.localName],o=sg(i,a,t);o!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=o)}const s=t.typeRegistry;if(s!=null&&s.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(e)){const o=s.findExtensionFor(n.typeName,a.no);if(o&&HO(e,o)){const c=gx(e,o,t),l=sg(o.field,c,t);l!==void 0&&(r[o.field.jsonName]=l)}}}catch(s){const a=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),o=s instanceof Error?s.message:String(s);throw new Error(a+(o.length>0?": ".concat(o):""))}return r},readScalar(e,t,n){return ka(e,t,n??Wr.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||GO(e,t)))return sc(e,t)},debug:Vn}}function Vn(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function ig(e,t,n,r,i){let s=n.localName;if(n.repeated){if(pt(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(t)));const a=e[s];for(const o of t){if(o===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(o)));switch(n.kind){case"message":a.push(n.T.fromJson(o,r));break;case"enum":const c=ju(n.T,o,r.ignoreUnknownFields,!0);c!==ic&&a.push(c);break;case"scalar":try{a.push(ka(n.T,o,n.L,!0))}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(o));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(t)));const a=e[s];for(const[o,c]of Object.entries(t)){if(c===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=yx(n.K,o)}catch(u){let d="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(t));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":a[l]=n.V.T.fromJson(c,r);break;case"enum":const u=ju(n.V.T,c,r.ignoreUnknownFields,!0);u!==ic&&(a[l]=u);break;case"scalar":try{a[l]=ka(n.V.T,c,Wr.BIGINT,!0)}catch(d){let h="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(t));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const a=n.T;if(t===null&&a.typeName!="google.protobuf.Value")return;let o=e[s];yr(o)?o.fromJson(t,r):(e[s]=o=a.fromJson(t,r),a.fieldWrapper&&!n.oneof&&(e[s]=a.fieldWrapper.unwrapField(o)));break;case"enum":const c=ju(n.T,t,r.ignoreUnknownFields,!1);switch(c){case rc:eg(n,e);break;case ic:break;default:e[s]=c;break}break;case"scalar":try{const l=ka(n.T,t,n.L,!1);switch(l){case rc:eg(n,e);break;default:e[s]=l;break}}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Vn(t));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}function yx(e,t){if(e===j.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return ka(e,t,Wr.BIGINT,!0).toString()}function ka(e,t,n,r){if(t===null)return r?Os(e,n):rc;switch(e){case j.DOUBLE:case j.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==j.FLOAT&&MO(i),i;case j.INT32:case j.FIXED32:case j.SFIXED32:case j.SINT32:case j.UINT32:let s;if(typeof t=="number"?s=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),s===void 0)break;return e==j.UINT32||e==j.FIXED32?Fu(s):ec(s),s;case j.INT64:case j.SFIXED64:case j.SINT64:if(typeof t!="number"&&typeof t!="string")break;const a=ut.parse(t);return n?a.toString():a;case j.FIXED64:case j.UINT64:if(typeof t!="number"&&typeof t!="string")break;const o=ut.uParse(t);return n?o.toString():o;case j.BOOL:if(typeof t!="boolean")break;return t;case j.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case j.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return YO.dec(t)}throw new Error}function ju(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].no:rc;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(i!==void 0)return i.no;if(n)return ic;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Vn(t)))}function Sx(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function sg(e,t,n){if(e.kind=="map"){pt(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(e.V.kind){case"scalar":for(const[a,o]of i)r[a.toString()]=sc(e.V.T,o);break;case"message":for(const[a,o]of i)r[a.toString()]=o.toJson(n);break;case"enum":const s=e.V.T;for(const[a,o]of i)r[a.toString()]=Vu(s,o,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){pt(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(sc(e.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(Vu(e.T,t[i],n.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return sc(e.T,t);case"enum":return Vu(e.T,t,n.enumAsInteger);case"message":return tg(e.T,t).toJson(n)}}function Vu(e,t,n){var r;if(pt(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const i=e.findNumber(t);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:t}function sc(e,t){switch(e){case j.INT32:case j.SFIXED32:case j.SINT32:case j.FIXED32:case j.UINT32:return pt(typeof t=="number"),t;case j.FLOAT:case j.DOUBLE:return pt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case j.STRING:return pt(typeof t=="string"),t;case j.BOOL:return pt(typeof t=="boolean"),t;case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return pt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case j.BYTES:return pt(t instanceof Uint8Array),YO.enc(t)}}const gs=Symbol("@bufbuild/protobuf/unknown-fields"),ag={readUnknownFields:!0,readerFactory:e=>new px(e)},og={writeUnknownFields:!0,writerFactory:()=>new hx};function _x(e){return e?Object.assign(Object.assign({},ag),e):ag}function Ex(e){return e?Object.assign(Object.assign({},og),e):og}function wx(){return{makeReadOptions:_x,makeWriteOptions:Ex,listUnknownFields(e){var t;return(t=e[gs])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[gs]},writeUnknownFields(e,t){const r=e[gs];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,r){const i=e;Array.isArray(i[gs])||(i[gs]=[]),i[gs].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){const s=e.getType(),a=i?t.len:t.pos+n;let o,c;for(;t.pos<a&&([o,c]=t.tag(),!(i===!0&&c==gt.EndGroup));){const l=s.fields.find(o);if(!l){const u=t.skip(c,o);r.readUnknownFields&&this.onUnknownField(e,o,c,u);continue}cg(e,t,l,c,r)}if(i&&(c!=gt.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:cg,writeMessage(e,t,n){const r=e.getType();for(const i of r.fields.byNumber()){if(!JO(i,e)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?e[i.oneof.localName].value:e[i.localName];lg(i,s,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){t!==void 0&&lg(e,t,n,r)}}}function cg(e,t,n,r,i){let{repeated:s,localName:a}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=a&&delete e.value,e.case=a,a="value"),n.kind){case"scalar":case"enum":const o=n.kind=="enum"?j.INT32:n.T;let c=oc;if(n.kind=="scalar"&&n.L>0&&(c=Cx),s){let h=e[a];if(r==gt.LengthDelimited&&o!=j.STRING&&o!=j.BYTES){let O=t.uint32()+t.pos;for(;t.pos<O;)h.push(c(t,o))}else h.push(c(t,o))}else e[a]=c(t,o);break;case"message":const l=n.T;s?e[a].push(ac(t,new l,i,n)):yr(e[a])?ac(t,e[a],i,n):(e[a]=ac(t,new l,i,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(e[a]=l.fieldWrapper.unwrapField(e[a])));break;case"map":let[u,d]=xx(n,t,i);e[a][u]=d;break}}function ac(e,t,n,r){const i=t.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(t,e,s?r.no:e.uint32(),n,s),t}function xx(e,t,n){const r=t.uint32(),i=t.pos+r;let s,a;for(;t.pos<i;){const[o]=t.tag();switch(o){case 1:s=oc(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=oc(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=ac(t,new e.V.T,n,void 0);break}break}}if(s===void 0&&(s=Os(e.K,Wr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(e.V.kind){case"scalar":a=Os(e.V.T,Wr.BIGINT);break;case"enum":a=e.V.T.values[0].no;break;case"message":a=new e.V.T;break}return[s,a]}function Cx(e,t){const n=oc(e,t);return typeof n=="bigint"?n.toString():n}function oc(e,t){switch(t){case j.STRING:return e.string();case j.BOOL:return e.bool();case j.DOUBLE:return e.double();case j.FLOAT:return e.float();case j.INT32:return e.int32();case j.INT64:return e.int64();case j.UINT64:return e.uint64();case j.FIXED64:return e.fixed64();case j.BYTES:return e.bytes();case j.FIXED32:return e.fixed32();case j.SFIXED32:return e.sfixed32();case j.SFIXED64:return e.sfixed64();case j.SINT64:return e.sint64();case j.UINT32:return e.uint32();case j.SINT32:return e.sint32()}}function lg(e,t,n,r){pt(t!==void 0);const i=e.repeated;switch(e.kind){case"scalar":case"enum":let s=e.kind=="enum"?j.INT32:e.T;if(i)if(pt(Array.isArray(t)),e.packed)Rx(n,s,e.no,t);else for(const a of t)ya(n,s,e.no,a);else ya(n,s,e.no,t);break;case"message":if(i){pt(Array.isArray(t));for(const a of t)ug(n,r,e,a)}else ug(n,r,e,t);break;case"map":pt(typeof t=="object"&&t!=null);for(const[a,o]of Object.entries(t))Px(n,r,e,a,o);break}}function Px(e,t,n,r,i){e.tag(n.no,gt.LengthDelimited),e.fork();let s=r;switch(n.K){case j.INT32:case j.FIXED32:case j.UINT32:case j.SFIXED32:case j.SINT32:s=Number.parseInt(r);break;case j.BOOL:pt(r=="true"||r=="false"),s=r=="true";break}switch(ya(e,n.K,1,s),n.V.kind){case"scalar":ya(e,n.V.T,2,i);break;case"enum":ya(e,j.INT32,2,i);break;case"message":pt(i!==void 0),e.tag(2,gt.LengthDelimited).bytes(i.toBinary(t));break}e.join()}function ug(e,t,n,r){const i=tg(n.T,r);n.delimited?e.tag(n.no,gt.StartGroup).raw(i.toBinary(t)).tag(n.no,gt.EndGroup):e.tag(n.no,gt.LengthDelimited).bytes(i.toBinary(t))}function ya(e,t,n,r){pt(r!==void 0);let[i,s]=dg(t);e.tag(n,i)[s](r)}function Rx(e,t,n,r){if(!r.length)return;e.tag(n,gt.LengthDelimited).fork();let[,i]=dg(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}function dg(e){let t=gt.Varint;switch(e){case j.BYTES:case j.STRING:t=gt.LengthDelimited;break;case j.DOUBLE:case j.FIXED64:case j.SFIXED64:t=gt.Bit64;break;case j.FIXED32:case j.SFIXED32:case j.FLOAT:t=gt.Bit32;break}const n=j[e].toLowerCase();return[t,n]}function Ax(){return{setEnumType:qO,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const i=r.localName,s=t,a=e;if(a[i]!=null)switch(r.kind){case"oneof":const o=a[i].case;if(o===void 0)continue;const c=r.findField(o);let l=a[i].value;c&&c.kind=="message"&&!yr(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===j.BYTES&&(l=Sa(l)),s[i]={case:o,value:l};break;case"scalar":case"enum":let u=a[i];r.T===j.BYTES&&(u=r.repeated?u.map(Sa):Sa(u)),s[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===j.BYTES)for(const[p,O]of Object.entries(a[i]))s[i][p]=Sa(O);else Object.assign(s[i],a[i]);break;case"message":const h=r.V.T;for(const p of Object.keys(a[i])){let O=a[i][p];h.fieldWrapper||(O=new h(O)),s[i][p]=O}break}break;case"message":const d=r.T;if(r.repeated)s[i]=a[i].map(h=>yr(h,d)?h:new d(h));else{const h=a[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[i]=Sa(h):s[i]=h:s[i]=yr(h,d)?h:new d(h)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const i=t[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((a,o)=>r.T.equals(a,s[o]));case"scalar":return i.every((a,o)=>Yr(r.T,a,s[o]));case"enum":return i.every((a,o)=>Yr(j.INT32,a,s[o]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let a=i,o=s;return r.T.fieldWrapper&&(a!==void 0&&!yr(a)&&(a=r.T.fieldWrapper.wrapField(a)),o!==void 0&&!yr(o)&&(o=r.T.fieldWrapper.wrapField(o))),r.T.equals(a,o);case"enum":return Yr(j.INT32,i,s);case"scalar":return Yr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const c=r.findField(i.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(i.value,s.value);case"enum":return Yr(j.INT32,i.value,s.value);case"scalar":return Yr(c.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const l=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const u=r.V.T;return l.every(h=>u.equals(i[h],s[h]));case"enum":return l.every(h=>Yr(j.INT32,i[h],s[h]));case"scalar":const d=r.V.T;return l.every(h=>Yr(d,i[h],s[h]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const i of t.fields.byMember()){const s=e[i.localName];let a;if(i.repeated)a=s.map(cc);else if(i.kind=="map"){a=r[i.localName];for(const[o,c]of Object.entries(s))a[o]=cc(c)}else i.kind=="oneof"?a=i.findField(s.case)?{case:s.case,value:cc(s.value)}:{case:void 0}:a=cc(s);r[i.localName]=a}for(const i of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function cc(e){if(e===void 0)return e;if(yr(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Sa(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Ix(e,t,n){return{syntax:e,json:kx(),bin:wx(),util:Object.assign(Object.assign({},Ax()),{newFieldList:t,initFields:n}),makeMessageType(r,i,s){return ax(this,r,i,s)},makeEnum:sx,makeEnumType:XO,getEnumType:ix,makeExtension(r,i,s){return fx(this,r,i,s)}}}class Qx{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function hg(e,t){const n=pg(e);return t?n:Ux(Mx(n))}function Nx(e){return hg(e,!1)}const Dx=pg;function pg(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const $x=new Set(["constructor","toString","toJSON","valueOf"]),Lx=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),fg=e=>"".concat(e,"$"),Mx=e=>Lx.has(e)?fg(e):e,Ux=e=>$x.has(e)?fg(e):e;class qx{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=Nx(t)}addField(t){pt(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function Xx(e,t){var n,r,i,s,a,o;const c=[];let l;for(const u of typeof e=="function"?e():e){const d=u;if(d.localName=hg(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:Dx(u.name),d.repeated=(r=u.repeated)!==null&&r!==void 0?r:!1,u.kind=="scalar"&&(d.L=(i=u.L)!==null&&i!==void 0?i:Wr.BIGINT),d.delimited=(s=u.delimited)!==null&&s!==void 0?s:!1,d.req=(a=u.req)!==null&&a!==void 0?a:!1,d.opt=(o=u.opt)!==null&&o!==void 0?o:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=j.BYTES&&u.T!=j.STRING),u.oneof!==void 0){const h=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!l||l.name!=h)&&(l=new qx(h)),d.oneof=l,l.addField(d)}c.push(d)}return c}const q=Ix("proto3",e=>new Qx(e,t=>Xx(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Os(t.T,t.L);break}}});class Jt extends Bu{constructor(t){super(),this.seconds=ut.zero,this.nanos=0,q.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(q.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ut.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Jt.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new Jt({seconds:ut.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new Jt().fromBinary(t,n)}static fromJson(t,n){return new Jt().fromJson(t,n)}static fromJsonString(t,n){return new Jt().fromJsonString(t,n)}static equals(t,n){return q.util.equals(Jt,t,n)}}Jt.runtime=q,Jt.typeName="google.protobuf.Timestamp",Jt.fields=q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Fx=q.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Jt},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Bx,repeated:!0},{no:5,name:"events",kind:"message",T:Zx,repeated:!0}]),Bx=q.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:zx,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),zx=q.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Jt},{no:3,name:"value",kind:"scalar",T:2}]),Zx=q.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Jt},{no:7,name:"normalized_end_timestamp",kind:"message",T:Jt,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),mg=q.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Rn=q.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),yt=q.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Gu=q.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),_a=q.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Ea=q.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),An=q.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),vs=q.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),jx=q.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),At=q.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),lc=q.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:uc,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:Pg}]),uc=q.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),Vx=q.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:q.getEnumType(yt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Qi=q.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(bs)},{no:4,name:"tracks",kind:"message",T:Ts,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Vx},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:q.getEnumType(wa)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:q.getEnumType(An)},{no:18,name:"kind_details",kind:"enum",T:q.getEnumType(Gx),repeated:!0}]),bs=q.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),wa=q.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Gx=q.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),dn=q.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),Wx=q.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ni,repeated:!0}]),Ts=q.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:q.getEnumType(Rn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:q.getEnumType(yt)},{no:10,name:"layers",kind:"message",T:Ni,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Wx,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:q.getEnumType(dn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:Pg},{no:19,name:"audio_features",kind:"enum",T:q.getEnumType(At),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:q.getEnumType(mg)}]),Ni=q.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(Gu)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),en=q.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:q.getEnumType(ye)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:gg,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Yx,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:vg,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Hx,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Fx,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Wu,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:bg,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Tg,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:kg,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Hu,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Ku,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Ju,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),ye=q.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),Yx=q.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:Og,repeated:!0}]),Og=q.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),gg=q.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),vg=q.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),Hx=q.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:Kx,repeated:!0}]),Kx=q.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Wu=q.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),bg=q.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Tg=q.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),kg=q.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:yg,oneof:"value"}]),yg=q.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),Sg=q.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),_g=q.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:q.getEnumType(Eg)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),Eg=q.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),Jx=q.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:q.getEnumType(wg)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),wg=q.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),xg=q.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Cg},{no:2,name:"screen",kind:"message",T:Cg},{no:3,name:"resume_connection",kind:"enum",T:q.getEnumType(Ea)},{no:4,name:"disabled_codecs",kind:"message",T:eC},{no:5,name:"force_relay",kind:"enum",T:q.getEnumType(Ea)}]),Cg=q.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:q.getEnumType(Ea)}]),eC=q.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:uc,repeated:!0},{no:2,name:"publish",kind:"message",T:uc,repeated:!0}]),Pg=q.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Yu=q.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),Rg=q.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:q.getEnumType(Yu)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),Ag=q.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Hu=q.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:q.getEnumType(dn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:Rg,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:Ag,oneof:"content_header"}],{localName:"DataStream_Header"}),Ku=q.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Ju=q.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),In=q.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),ed=q.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),tC=q.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),nC=q.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Di,oneof:"message"},{no:2,name:"answer",kind:"message",T:Di,oneof:"message"},{no:3,name:"trickle",kind:"message",T:rd,oneof:"message"},{no:4,name:"add_track",kind:"message",T:nd,oneof:"message"},{no:5,name:"mute",kind:"message",T:id,oneof:"message"},{no:6,name:"subscription",kind:"message",T:dc,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Qg,oneof:"message"},{no:8,name:"leave",kind:"message",T:hc,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Dg,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Ug,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:qg,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Gn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:$g,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Bg,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Ng,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:oC,oneof:"message"}]),Ig=q.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:rC,oneof:"message"},{no:2,name:"answer",kind:"message",T:Di,oneof:"message"},{no:3,name:"offer",kind:"message",T:Di,oneof:"message"},{no:4,name:"trickle",kind:"message",T:rd,oneof:"message"},{no:5,name:"update",kind:"message",T:aC,oneof:"message"},{no:6,name:"track_published",kind:"message",T:sd,oneof:"message"},{no:8,name:"leave",kind:"message",T:hc,oneof:"message"},{no:9,name:"mute",kind:"message",T:id,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:cC,oneof:"message"},{no:11,name:"room_update",kind:"message",T:lC,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:dC,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:pC,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:mC,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:OC,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:sC,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:iC,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:vC,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:kC,oneof:"message"},{no:22,name:"request_response",kind:"message",T:yC,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:SC,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:gC,oneof:"message"}]),td=q.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),nd=q.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:q.getEnumType(Rn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:q.getEnumType(yt)},{no:9,name:"layers",kind:"message",T:Ni,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:td,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:q.getEnumType(dn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:q.getEnumType(mg)},{no:17,name:"audio_features",kind:"enum",T:q.getEnumType(At),repeated:!0}]),rd=q.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:q.getEnumType(In)},{no:3,name:"final",kind:"scalar",T:8}]),id=q.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),rC=q.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:lc},{no:2,name:"participant",kind:"message",T:Qi},{no:3,name:"other_participants",kind:"message",T:Qi,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Lg,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:xg},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:_g},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:uc,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),iC=q.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:Lg,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:xg},{no:3,name:"server_info",kind:"message",T:_g},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),sd=q.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Ts}]),sC=q.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Di=q.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),aC=q.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Qi,repeated:!0}]),dc=q.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Sg,repeated:!0}]),Qg=q.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:q.getEnumType(Gu)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Ng=q.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:q.getEnumType(At),repeated:!0}]),oC=q.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),hc=q.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:q.getEnumType(An)},{no:3,name:"action",kind:"enum",T:q.getEnumType(ks)},{no:4,name:"regions",kind:"message",T:bC}]),ks=q.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),Dg=q.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Ni,repeated:!0}]),$g=q.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),Lg=q.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),cC=q.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:Og,repeated:!0}]),lC=q.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:lc}]),uC=q.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:q.getEnumType(_a)},{no:3,name:"score",kind:"scalar",T:2}]),dC=q.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:uC,repeated:!0}]),hC=q.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(ed)}]),pC=q.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:hC,repeated:!0}]),ad=q.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(Gu)},{no:2,name:"enabled",kind:"scalar",T:8}]),fC=q.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:ad,repeated:!0}]),mC=q.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:ad,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:fC,repeated:!0}]),Mg=q.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),Ug=q.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:Mg,repeated:!0}]),OC=q.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),gC=q.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:lc},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Qi},{no:4,name:"other_participants",kind:"message",T:Qi,repeated:!0}]),qg=q.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Di},{no:2,name:"subscription",kind:"message",T:dc},{no:3,name:"publish_tracks",kind:"message",T:sd,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Fg,repeated:!0},{no:5,name:"offer",kind:"message",T:Di},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:Xg,repeated:!0}]),Xg=q.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),Fg=q.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:q.getEnumType(In)}]),Gn=q.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:q.getEnumType(tC),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),Bg=q.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),vC=q.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),bC=q.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:TC,repeated:!0}]),TC=q.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),kC=q.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:q.getEnumType(jx)}]),yC=q.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:q.getEnumType(od)},{no:3,name:"message",kind:"scalar",T:9}]),od=q.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),SC=q.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function _C(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pc={exports:{}},EC=pc.exports,zg;function wC(){return zg||(zg=1,function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(EC,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function o(m,b){var v=m[b];if(typeof v.bind=="function")return v.bind(m);try{return Function.prototype.bind.call(v,m)}catch{return function(){return Function.prototype.apply.apply(v,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):t}function u(){for(var m=this.getLevel(),b=0;b<i.length;b++){var v=i[b];this[v]=b<m?t:this.methodFactory(v,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function h(m,b,v){return l(m)||d.apply(this,arguments)}function p(m,b){var v=this,k,y,T,_="loglevel";typeof m=="string"?_+=":"+m:typeof m=="symbol"&&(_=void 0);function S(D){var L=(i[D]||"silent").toUpperCase();if(!(typeof window===n||!_)){try{window.localStorage[_]=L;return}catch{}try{window.document.cookie=encodeURIComponent(_)+"="+L+";"}catch{}}}function C(){var D;if(!(typeof window===n||!_)){try{D=window.localStorage[_]}catch{}if(typeof D===n)try{var L=window.document.cookie,V=encodeURIComponent(_),F=L.indexOf(V+"=");F!==-1&&(D=/^([^;]+)/.exec(L.slice(F+V.length+1))[1])}catch{}return v.levels[D]===void 0&&(D=void 0),D}}function N(){if(!(typeof window===n||!_)){try{window.localStorage.removeItem(_)}catch{}try{window.document.cookie=encodeURIComponent(_)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function $(D){var L=D;if(typeof L=="string"&&v.levels[L.toUpperCase()]!==void 0&&(L=v.levels[L.toUpperCase()]),typeof L=="number"&&L>=0&&L<=v.levels.SILENT)return L;throw new TypeError("log.setLevel() called with invalid level: "+D)}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=b||h,v.getLevel=function(){return T??y??k},v.setLevel=function(D,L){return T=$(D),L!==!1&&S(T),u.call(v)},v.setDefaultLevel=function(D){y=$(D),C()||v.setLevel(D,!1)},v.resetLevel=function(){T=null,N(),u.call(v)},v.enableAll=function(D){v.setLevel(v.levels.TRACE,D)},v.disableAll=function(D){v.setLevel(v.levels.SILENT,D)},v.rebuild=function(){if(a!==v&&(k=$(a.getLevel())),u.call(v),a===v)for(var D in s)s[D].rebuild()},k=$(a?a.getLevel():"WARN");var x=C();x!=null&&(T=$(x)),u.call(v)}a=new p,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var v=s[b];return v||(v=s[b]=new p(b,a.methodFactory)),v};var O=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=O),a},a.getLoggers=function(){return s},a.default=a,a})}(pc)),pc.exports}var fc=wC(),cd;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(cd||(cd={}));var Qn;(function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(Qn||(Qn={}));let Ie=fc.getLogger("livekit");Object.values(Qn).map(e=>fc.getLogger(e)),Ie.setDefaultLevel(cd.info);function Sr(e){const t=fc.getLogger(e);return t.setDefaultLevel(Ie.getLevel()),t}const xC=fc.getLogger("lk-e2ee"),xa=7e3,CC=[0,300,4*300,9*300,16*300,xa,xa,xa,xa,xa];class PC{constructor(t){this._retryDelays=t!==void 0?[...t]:CC}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function RC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function I(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?s(u.value):i(u.value).then(o,c)}l((r=r.apply(e,t||[])).next())})}function Zg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _r(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Zg=="function"?Zg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),i(o,c,a.done,a.value)})}}function i(s,a,o,c){Promise.resolve(c).then(function(l){s({value:l,done:o})},a)}}typeof SuppressedError=="function"&&SuppressedError;var mc={exports:{}},jg;function AC(){if(jg)return mc.exports;jg=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(_,S,C){return Function.prototype.apply.call(_,S,C)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:n=function(_){return Object.getOwnPropertyNames(_)};function r(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(_){return _!==_};function s(){s.init.call(this)}mc.exports=s,mc.exports.once=v,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");a=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function c(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(_){for(var S=[],C=1;C<arguments.length;C++)S.push(arguments[C]);var N=_==="error",$=this._events;if($!==void 0)N=N&&$.error===void 0;else if(!N)return!1;if(N){var x;if(S.length>0&&(x=S[0]),x instanceof Error)throw x;var D=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw D.context=x,D}var L=$[_];if(L===void 0)return!1;if(typeof L=="function")t(L,this,S);else for(var V=L.length,F=O(L,V),C=0;C<V;++C)t(F[C],this,S);return!0};function l(T,_,S,C){var N,$,x;if(o(S),$=T._events,$===void 0?($=T._events=Object.create(null),T._eventsCount=0):($.newListener!==void 0&&(T.emit("newListener",_,S.listener?S.listener:S),$=T._events),x=$[_]),x===void 0)x=$[_]=S,++T._eventsCount;else if(typeof x=="function"?x=$[_]=C?[S,x]:[x,S]:C?x.unshift(S):x.push(S),N=c(T),N>0&&x.length>N&&!x.warned){x.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=T,D.type=_,D.count=x.length,r(D)}return T}s.prototype.addListener=function(_,S){return l(this,_,S,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(_,S){return l(this,_,S,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(T,_,S){var C={fired:!1,wrapFn:void 0,target:T,type:_,listener:S},N=u.bind(C);return N.listener=S,C.wrapFn=N,N}s.prototype.once=function(_,S){return o(S),this.on(_,d(this,_,S)),this},s.prototype.prependOnceListener=function(_,S){return o(S),this.prependListener(_,d(this,_,S)),this},s.prototype.removeListener=function(_,S){var C,N,$,x,D;if(o(S),N=this._events,N===void 0)return this;if(C=N[_],C===void 0)return this;if(C===S||C.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete N[_],N.removeListener&&this.emit("removeListener",_,C.listener||S));else if(typeof C!="function"){for($=-1,x=C.length-1;x>=0;x--)if(C[x]===S||C[x].listener===S){D=C[x].listener,$=x;break}if($<0)return this;$===0?C.shift():m(C,$),C.length===1&&(N[_]=C[0]),N.removeListener!==void 0&&this.emit("removeListener",_,D||S)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(_){var S,C,N;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[_]),this;if(arguments.length===0){var $=Object.keys(C),x;for(N=0;N<$.length;++N)x=$[N],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=C[_],typeof S=="function")this.removeListener(_,S);else if(S!==void 0)for(N=S.length-1;N>=0;N--)this.removeListener(_,S[N]);return this};function h(T,_,S){var C=T._events;if(C===void 0)return[];var N=C[_];return N===void 0?[]:typeof N=="function"?S?[N.listener||N]:[N]:S?b(N):O(N,N.length)}s.prototype.listeners=function(_){return h(this,_,!0)},s.prototype.rawListeners=function(_){return h(this,_,!1)},s.listenerCount=function(T,_){return typeof T.listenerCount=="function"?T.listenerCount(_):p.call(T,_)},s.prototype.listenerCount=p;function p(T){var _=this._events;if(_!==void 0){var S=_[T];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function O(T,_){for(var S=new Array(_),C=0;C<_;++C)S[C]=T[C];return S}function m(T,_){for(;_+1<T.length;_++)T[_]=T[_+1];T.pop()}function b(T){for(var _=new Array(T.length),S=0;S<_.length;++S)_[S]=T[S].listener||T[S];return _}function v(T,_){return new Promise(function(S,C){function N(x){T.removeListener(_,$),C(x)}function $(){typeof T.removeListener=="function"&&T.removeListener("error",N),S([].slice.call(arguments))}y(T,_,$,{once:!0}),_!=="error"&&k(T,N,{once:!0})})}function k(T,_,S){typeof T.on=="function"&&y(T,"error",_,S)}function y(T,_,S,C){if(typeof T.on=="function")C.once?T.once(_,S):T.on(_,S);else if(typeof T.addEventListener=="function")T.addEventListener(_,function N($){C.once&&T.removeEventListener(_,N),S($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return mc.exports}var Wn=AC();let Vg=!0,Gg=!0;function Ca(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function $i(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,o){if(a!==t)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(o.handleEvent?o.handleEvent(u):o(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(o,c),i.apply(this,[a,c])};const s=r.removeEventListener;r.removeEventListener=function(a,o){if(a!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(o))return s.apply(this,arguments);const c=this._eventMap[t].get(o);return this._eventMap[t].delete(o),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function IC(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Vg=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function QC(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Gg=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Wg(){if(typeof window=="object"){if(Vg)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ld(e,t){Gg&&console.warn(e+" is deprecated, please use "+t+" instead.")}function NC(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ca(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ca(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Ca(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Ca(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Yg(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hg(e){return Yg(e)?Object.keys(e).reduce(function(t,n){const r=Yg(e[n]),i=r?Hg(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function ud(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?ud(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{ud(e,e.get(i),n)})}))}function Kg(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&s.push(a)}),s.forEach(a=>{e.forEach(o=>{o.type===r&&o.trackId===a.id&&ud(e,o,i)})}),i}const Jg=Wg;function ev(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const c={};return Object.keys(o).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof o[l]=="object"?o[l]:{ideal:o[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,p){return h?h+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){c.optional=c.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",l)]=u.ideal,c.optional.push(h),h={},h[d("max",l)]=u.ideal,c.optional.push(h)):(h[d("",l)]=u.ideal,c.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(h,l)]=u[h])})}),o.advanced&&(c.optional=(c.optional||[]).concat(o.advanced)),c},i=function(o,c){if(t.version>=61)return c(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const l=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};o=JSON.parse(JSON.stringify(o)),l(o.audio,"autoGainControl","googAutoGainControl"),l(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=r(o.audio)}if(o&&typeof o.video=="object"){let l=o.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete o.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(O=>O.kind==="videoinput");let p=h.find(O=>d.some(m=>O.label.toLowerCase().includes(m)));return!p&&h.length&&d.includes("back")&&(p=h[h.length-1]),p&&(o.video.deviceId=l.exact?{exact:p.deviceId}:{ideal:p.deviceId}),o.video=r(o.video),Jg("chrome: "+JSON.stringify(o)),c(o)})}o.video=r(o.video)}return Jg("chrome: "+JSON.stringify(o)),c(o)},s=function(o){return t.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,c,l){i(o,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>o(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function tv(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function nv(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.track.id):s={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.id):s={track:i};const a=new Event("track");a.track=i,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else $i(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function rv(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,c){let l=i.apply(this,arguments);return l||(l=t(this,o),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const c=this._senders.indexOf(o);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(c=>c.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function iv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>Kg(a,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),$i(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>Kg(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,a;return this.getSenders().forEach(o=>{o.track===r&&(i?a=!0:i=o)}),this.getReceivers().forEach(o=>(o.track===r&&(s?a=!0:s=o),o.track===r)),a||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function sv(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(c)===-1&&this._shimmedLocalStreams[o.id].push(c):this._shimmedLocalStreams[o.id]=[o,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>o.indexOf(l)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const c=this._shimmedLocalStreams[o].indexOf(a);c!==-1&&this._shimmedLocalStreams[o].splice(c,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),i.apply(this,arguments)}}function av(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return sv(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const O=this._streams[d.id];if(O)O.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],O=l._streams[p.id];d=d.replace(new RegExp(O.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function a(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],O=l._streams[p.id];d=d.replace(new RegExp(p.id,"g"),O.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[O=>{const m=s(this,O);h[0].apply(null,[m])},O=>{h[1]&&h[1].apply(null,O)},arguments[2]]):u.apply(this,arguments).then(O=>s(this,O))}};e.RTCPeerConnection.prototype[l]=d[l]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(m=>u.track===m)&&(h=this._streams[p])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function dd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function ov(e,t){$i(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var cv=Object.freeze({__proto__:null,fixNegotiationNeeded:ov,shimAddTrackRemoveTrack:av,shimAddTrackRemoveTrackWithNative:sv,shimGetSendersWithDtmf:rv,shimGetUserMedia:ev,shimMediaStream:tv,shimOnTrack:nv,shimPeerConnection:dd,shimSenderReceiverGetStats:iv});function lv(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,a){ld("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,a)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,o,c){o in a&&!(c in a)&&(a[c]=a[o],delete a[o])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const o=a.apply(this,arguments);return i(o,"mozAutoGainControl","autoGainControl"),i(o,"mozNoiseSuppression","noiseSuppression"),o}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o,"autoGainControl","mozAutoGainControl"),i(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function DC(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function uv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hd(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!a)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(a,o)}}function dv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function hv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),$i(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function pv(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){ld("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function fv(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function mv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function Ov(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function gv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function vv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var bv=Object.freeze({__proto__:null,shimAddTransceiver:mv,shimCreateAnswer:vv,shimCreateOffer:gv,shimGetDisplayMedia:DC,shimGetParameters:Ov,shimGetUserMedia:lv,shimOnTrack:uv,shimPeerConnection:hd,shimRTCDataChannel:fv,shimReceiverGetStats:hv,shimRemoveStream:pv,shimSenderGetStats:dv});function Tv(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function kv(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,r.dispatchEvent(a)})}),t.apply(r,arguments)}}}function yv(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h};let o=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=o,o=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=o,o=function(c,l,u){const d=a.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=o}function Sv(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(_v(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function _v(e){return e&&e.video!==void 0?Object.assign({},e,{video:Hg(e.video)}):e}function Ev(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let a=0;a<r.iceServers.length;a++){let o=r.iceServers[a];o.urls===void 0&&o.url?(ld("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(r.iceServers[a])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function wv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xv(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Cv(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Pv=Object.freeze({__proto__:null,shimAudioContext:Cv,shimCallbacksAPI:yv,shimConstraints:_v,shimCreateOfferLegacy:xv,shimGetUserMedia:Sv,shimLocalStreamsAPI:Tv,shimRTCIceServerUrls:Ev,shimRemoteStreamsAPI:kv,shimTrackEventTransceiver:wv}),pd={exports:{}},Rv;function $C(){return Rv||(Rv=1,function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)i=s[a].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?s.push(a+"="+n.parameters[a]):s.push(a)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let o=3;o<s.length;o++){const c=s[o],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(o=>{r.headerExtensions.push(t.parseExtmap(o))});const a=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(o=>{a.forEach(c=>{o.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||o.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let s=0;return r.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=o.length>0&&o[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(O=>parseInt(O,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(p.rtx={ssrc:l}),r.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const a=t.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const a=t.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const o=t.matchPrefix(n,"a=sctpmap:");if(o.length>0){const c=o[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const a=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t}(pd)),pd.exports}var Av=$C(),ys=_C(Av),LC=Yw({__proto__:null,default:ys},[Av]);function Oc(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=ys.parseCandidate(r.candidate);for(const a in s)a in i||Object.defineProperty(i,a,{value:s[a]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,$i(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function fd(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||$i(e,"icecandidate",t=>{if(t.candidate){const n=ys.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function gc(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(o){if(!o||!o.sdp)return!1;const c=ys.splitSections(o.sdp);return c.shift(),c.some(l=>{const u=ys.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(o){const c=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(o){let c=65536;return t.browser==="firefox"&&(t.version<57?o===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(o,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=ys.matchPrefix(o.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return a.apply(this,arguments)}}function vc(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const o=arguments[0],c=o.length||o.size||o.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},$i(e,"datachannel",r=>(t(r.channel,r.target),r))}function md(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",i);s.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Od(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function bc(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Tc(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var MC=Object.freeze({__proto__:null,removeExtmapAllowMixed:Od,shimAddIceCandidateNullOrEmpty:bc,shimConnectionState:md,shimMaxMessageSize:gc,shimParameterlessSetLocalDescription:Tc,shimRTCIceCandidate:Oc,shimRTCIceCandidateRelayProtocol:fd,shimSendThrowTypeError:vc});function UC(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Wg,r=NC(e),i={browserDetails:r,commonShim:MC,extractVersion:Ca,disableLog:IC,disableWarnings:QC,sdp:LC};switch(r.browser){case"chrome":if(!cv||!dd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=cv,bc(e,r),Tc(e),ev(e,r),tv(e),dd(e,r),nv(e),av(e,r),rv(e),iv(e),ov(e,r),Oc(e),fd(e),md(e),gc(e,r),vc(e),Od(e,r);break;case"firefox":if(!bv||!hd||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=bv,bc(e,r),Tc(e),lv(e,r),hd(e,r),uv(e),pv(e),dv(e),hv(e),fv(e),mv(e),Ov(e),gv(e),vv(e),Oc(e),md(e),gc(e,r),vc(e);break;case"safari":if(!Pv||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Pv,bc(e,r),Tc(e),Ev(e),xv(e),yv(e),Tv(e),kv(e),wv(e),Sv(e),Cv(e),Oc(e),fd(e),gc(e,r),vc(e),Od(e,r);break;default:n("Unsupported browser!");break}return i}UC({window:typeof window>"u"?void 0:window});const qC=10,Pa="lk_e2ee",XC={sharedKey:!1,ratchetSalt:"LKFrameEncryptionKey",ratchetWindowSize:8,failureTolerance:qC,keyringSize:16};var Hr;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(Hr||(Hr={}));var Iv;(function(e){e.KeyRatcheted="keyRatcheted"})(Iv||(Iv={}));var Kr;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Kr||(Kr={}));var Qv;(function(e){e.Error="cryptorError"})(Qv||(Qv={}));function FC(){return BC()||gd()}function gd(){return typeof window.RTCRtpScriptTransform<"u"}function BC(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class P8 extends Wn.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{Ie.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},XC),t),this.on(Hr.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const i={key:t,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Hr.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(Hr.RatchetRequest,t,n)}}class Jr extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var De;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(De||(De={}));class et extends Jr{constructor(t,n,r,i){super(1,t),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=De[n]}}class vd extends Jr{constructor(t){super(21,t??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Er extends Jr{constructor(t){super(20,t??"track is invalid"),this.name="TrackInvalidError"}}class zC extends Jr{constructor(t){super(10,t??"unsupported server"),this.name="UnsupportedServer"}}class Ct extends Jr{constructor(t){super(12,t??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class bd extends Jr{constructor(t){super(13,t??"unable to negotiate"),this.name="NegotiationError"}}class Nv extends Jr{constructor(t,n){super(15,t),this.name="PublishTrackError",this.status=n}}class Dv extends Jr{constructor(t,n){super(15,t),this.reason=n,this.reasonName=typeof n=="string"?n:od[n]}}var kc;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(kc||(kc={})),function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t}(kc||(kc={}));var $v;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})($v||($v={}));var W;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(W||(W={}));var re;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackCpuConstrained="localTrackCpuConstrained",e.LocalSenderCreated="localSenderCreated",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.TrackCpuConstrained="trackCpuConstrained",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"})(re||(re={}));var te;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"})(te||(te={}));var J;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.CpuConstrained="cpuConstrained",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"})(J||(J={}));function ZC(e){return typeof e>"u"?e:typeof structuredClone=="function"?typeof e=="object"&&e!==null?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}const jC=/version\/(\d+(\.?_?\d+)+)/i;let Td;function hn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Td===void 0||t){const r=VC.find(i=>{let{test:s}=i;return s.test(n)});Td=r==null?void 0:r.describe(n)}return Td}const VC=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:yc(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:kd(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:yc(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:kd(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:yc(jC,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:kd(e)}}}];function yc(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}function kd(e){return e.includes("mac os")?yc(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var GC="2.15.3";const WC=GC,YC=16;class Lt{}Lt.setTimeout=function(){return setTimeout(...arguments)},Lt.setInterval=function(){return setInterval(...arguments)},Lt.clearTimeout=function(){return clearTimeout(...arguments)},Lt.clearInterval=function(){return clearInterval(...arguments)};const HC=5e3,Ra=[];var pn;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(pn||(pn={}));class Z extends Wn.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Z.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ie,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),HC):this.handleAppVisibilityChanged()},this.log=Sr((i=r.loggerName)!==null&&i!==void 0?i:Qn.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=Z.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ce(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===Z.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===Z.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(Ra.forEach(s=>{s.parentElement===null&&!t&&(t=s)}),t&&Ra.splice(Ra.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),Ss(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return t.play().then(()=>{this.emit(i?J.AudioPlaybackStarted:J.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?J.AudioPlaybackFailed:J.VideoPlaybackFailed,s):s.name==="AbortError"?Ie.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Ie.warn("could not playback ".concat(i?"audio":"video"),s),i&&t&&r.some(a=>a.kind==="video")&&s.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(J.ElementAttached,t),t}detach(t){try{if(t){_s(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(J.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{_s(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(J.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=Sr(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),Ra.forEach(r=>{r.parentElement||(n=!1)}),n&&Ra.push(t)}}handleAppVisibilityChanged(){return I(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Z.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){nn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){nn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ss(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(e)),(!Li()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(Li()||Es())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function _s(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function i(l){switch(l){case t.Audio:return Rn.AUDIO;case t.Video:return Rn.VIDEO;default:return Rn.DATA}}e.kindToProto=i;function s(l){switch(l){case Rn.AUDIO:return t.Audio;case Rn.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=s;function a(l){switch(l){case n.Camera:return yt.CAMERA;case n.Microphone:return yt.MICROPHONE;case n.ScreenShare:return yt.SCREEN_SHARE;case n.ScreenShareAudio:return yt.SCREEN_SHARE_AUDIO;default:return yt.UNKNOWN}}e.sourceToProto=a;function o(l){switch(l){case yt.CAMERA:return n.Camera;case yt.MICROPHONE:return n.Microphone;case yt.SCREEN_SHARE:return n.ScreenShare;case yt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=o;function c(l){switch(l){case ed.ACTIVE:return r.Active;case ed.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=c})(Z||(Z={}));class Ye{constructor(t,n,r,i,s){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&r!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const KC=["vp8","h264"],JC=["vp8","h264","vp9","av1","h265"];function eP(e){return!!KC.find(t=>t===e)}var Lv;(function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"})(Lv||(Lv={}));var yd;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}})(yd||(yd={}));const Aa={h90:new Ye(160,90,9e4,20),h180:new Ye(320,180,16e4,20),h216:new Ye(384,216,18e4,20),h360:new Ye(640,360,45e4,20),h540:new Ye(960,540,8e5,25),h720:new Ye(1280,720,17e5,30),h1080:new Ye(1920,1080,3e6,30),h1440:new Ye(2560,1440,5e6,30),h2160:new Ye(3840,2160,8e6,30)},Sd={h120:new Ye(160,120,7e4,20),h180:new Ye(240,180,125e3,20),h240:new Ye(320,240,14e4,20),h360:new Ye(480,360,33e4,20),h480:new Ye(640,480,5e5,20),h540:new Ye(720,540,6e5,25),h720:new Ye(960,720,13e5,30),h1080:new Ye(1440,1080,23e5,30),h1440:new Ye(1920,1440,38e5,30)},_d={h360fps3:new Ye(640,360,2e5,3,"medium"),h360fps15:new Ye(640,360,4e5,15,"medium"),h720fps5:new Ye(1280,720,8e5,5,"medium"),h720fps15:new Ye(1280,720,15e5,15,"medium"),h720fps30:new Ye(1280,720,2e6,30,"medium"),h1080fps15:new Ye(1920,1080,25e5,15,"medium"),h1080fps30:new Ye(1920,1080,5e6,30,"medium"),original:new Ye(0,0,7e6,30,"medium")},tP="|",Mv="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function nP(e){const t=e.split(tP);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function tn(e){return I(this,void 0,void 0,function*(){return new Promise(t=>Lt.setTimeout(t,e))})}function Ed(){return"addTransceiver"in RTCPeerConnection.prototype}function wd(){return"addTrack"in RTCPeerConnection.prototype}function rP(){if(!("getCapabilities"in RTCRtpSender)||Li())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){t=!0;break}}return t}function iP(){if(!("getCapabilities"in RTCRtpSender)||Es())return!1;if(Li()){const n=hn();if(n!=null&&n.version&&Kn(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Kn(n.osVersion,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/VP9"){t=!0;break}}return t}function Yn(e){return e==="av1"||e==="vp9"}function xd(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}function sP(){return typeof RTCPeerConnection>"u"?!1:Ed()||wd()}function Es(){var e;return((e=hn())===null||e===void 0?void 0:e.name)==="Firefox"}function Li(){var e;return((e=hn())===null||e===void 0?void 0:e.name)==="Safari"}function Cd(){const e=hn();return(e==null?void 0:e.name)==="Safari"||(e==null?void 0:e.os)==="iOS"}function aP(){const e=hn();return(e==null?void 0:e.name)==="Safari"&&e.version.startsWith("17.")||(e==null?void 0:e.os)==="iOS"&&!!(e!=null&&e.osVersion)&&Kn(e.osVersion,"17")>=0}function oP(e){return e||(e=hn()),(e==null?void 0:e.name)==="Safari"&&Kn(e.version,"18.3")>0||(e==null?void 0:e.os)==="iOS"&&!!(e!=null&&e.osVersion)&&Kn(e.osVersion,"18.3")>0}function Uv(){var e,t;return nn()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function cP(){const e=hn(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&Kn(t,e.osVersion)>=0?!0:e.name==="Safari"&&Kn(t,e.version)>=0}function nn(){return typeof document<"u"}function Hn(){return navigator.product=="ReactNative"}function Pd(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function qv(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function Xv(){if(!Hn())return;let e=qv();if(e)return e.platform}function Fv(){if(nn())return window.devicePixelRatio;if(Hn()){let e=qv();if(e)return e.devicePixelRatio}return 1}function Kn(e,t){const n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const a=parseInt(n[s],10),o=parseInt(r[s],10);if(a>o)return 1;if(a<o)return-1;if(s===i-1&&a===o)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function lP(e){for(const t of e)t.target.handleResize(t)}function uP(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Rd=null;const Bv=()=>(Rd||(Rd=new ResizeObserver(lP)),Rd);let Ad=null;const zv=()=>(Ad||(Ad=new IntersectionObserver(uP,{root:null,rootMargin:"0px"})),Ad);function dP(){var e;const t=new Jx({sdk:wg.JS,protocol:YC,version:WC});return Hn()&&(t.os=(e=Xv())!==null&&e!==void 0?e:""),t}function Zv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=e,i.height=t;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(e/2,t/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const a=i.captureStream(),[o]=a.getTracks();if(!o)throw Error("Could not get empty media stream video track");return o.enabled=n,o}let Ia;function Id(){if(!Ia){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[Ia]=r.stream.getAudioTracks(),!Ia)throw Error("Could not get empty media stream audio track");Ia.enabled=!1}return Ia.clone()}class ws{get isResolved(){return this._isResolved}constructor(t,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>I(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,t&&(yield t(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function hP(e){return JC.includes(e)}function ei(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function pP(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function Qd(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function fP(e,t){return e.segments.map(n=>{let{id:r,text:i,language:s,startTime:a,endTime:o,final:c}=n;var l;const u=(l=t.get(r))!==null&&l!==void 0?l:Date.now(),d=Date.now();return c?t.delete(r):t.set(r,u),{id:r,text:i,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(o.toString()),final:c,language:s,firstReceivedTime:u,lastReceivedTime:d}})}function mP(e){const{id:t,timestamp:n,message:r,editTimestamp:i}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function jv(e){switch(e.reason){case De.LeaveRequest:return e.context;case De.Cancelled:return An.CLIENT_INITIATED;case De.NotAllowed:return An.USER_REJECTED;case De.ServerUnreachable:return An.JOIN_FAILURE;default:return An.UNKNOWN_REASON}}function Sc(e){return e!==void 0?Number(e):void 0}function Mi(e){return e!==void 0?BigInt(e):void 0}function xs(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function Jn(e){return!!e&&e.kind==Z.Kind.Audio}function Ui(e){return!!e&&e.kind==Z.Kind.Video}function ti(e){return xs(e)&&Ui(e)}function wr(e){return xs(e)&&Jn(e)}function Nd(e){return!!e&&!e.isLocal}function OP(e){return!!e&&!e.isLocal}function Dd(e){return Nd(e)&&Ui(e)}function gP(e){return e.isLocal}function vP(e,t){const n=[];let r=new TextEncoder().encode(e);for(;r.length>t;){let i=t;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function Vv(e,t,n){var r,i,s,a;const{optionsWithoutProcessor:o,audioProcessor:c,videoProcessor:l}=Yv(e??{}),u=t==null?void 0:t.processor,d=n==null?void 0:n.processor,h=o??{};return h.audio===!0&&(h.audio={}),h.video===!0&&(h.video={}),h.audio&&($d(h.audio,t),(r=(s=h.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(c||u)&&(h.audio.processor=c??u)),h.video&&($d(h.video,n),(i=(a=h.video).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(l||d)&&(h.video.processor=l??d)),h}function $d(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function Ld(e){var t,n,r,i;const s={};if(e.video)if(typeof e.video=="object"){const a={},o=a,c=e.video;Object.keys(c).forEach(l=>{switch(l){case"resolution":$d(o,c.resolution);break;default:o[l]=c[l]}}),s.video=a,(t=(r=s.video).deviceId)!==null&&t!==void 0||(r.deviceId={ideal:"default"})}else s.video=e.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return e.audio?typeof e.audio=="object"?(s.audio=e.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function Gv(e){return I(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=Wv();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,a=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(i),yield tn(n),i.getByteTimeDomainData(a);const c=a.some(l=>l!==128&&l!==0);return r.close(),!c}return!1}()})}function Wv(){var e;const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((e=window.document)===null||e===void 0)&&e.body)){const r=()=>I(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)});window.document.body.addEventListener("click",r)}return n}}function bP(e){return e==="audioinput"?Z.Source.Microphone:e==="videoinput"?Z.Source.Camera:Z.Source.Unknown}function Md(e){return e===Z.Source.Microphone?"audioinput":e===Z.Source.Camera?"videoinput":void 0}function TP(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Li()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function _c(e){return e.split("/")[1].toLowerCase()}function kP(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new sd({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function Ce(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?Ce(e.track):{})}}function yP(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function SP(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const r=[...Object.keys(t),...Object.keys(e)],i={};for(const s of r)e[s]!==t[s]&&(i[s]=(n=t[s])!==null&&n!==void 0?n:"");return i}function Yv(e){const t=Object.assign({},e);let n,r;return typeof t.audio=="object"&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),typeof t.video=="object"&&t.video.processor&&(r=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:ZC(t)}}function _P(e){switch(e){case yt.CAMERA:return Z.Source.Camera;case yt.MICROPHONE:return Z.Source.Microphone;case yt.SCREEN_SHARE:return Z.Source.ScreenShare;case yt.SCREEN_SHARE_AUDIO:return Z.Source.ScreenShareAudio;default:return Z.Source.Unknown}}function Hv(e,t){return e.width*e.height<t.width*t.height}function EP(e,t){var n;return(n=e.layers)===null||n===void 0?void 0:n.find(r=>r.quality===t)}class wP extends Wn.EventEmitter{constructor(t){super(),this.onWorkerMessage=n=>{var r,i;const{kind:s,data:a}=n.data;switch(s){case"error":Ie.error(a.error.message),this.emit(Kr.EncryptionError,a.error);break;case"initAck":a.enabled&&this.keyProvider.getKeys().forEach(o=>{this.postKey(o)});break;case"enable":if(a.enabled&&this.keyProvider.getKeys().forEach(o=>{this.postKey(o)}),this.encryptionEnabled!==a.enabled&&a.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Kr.ParticipantEncryptionStatusChanged,a.enabled,this.room.localParticipant),this.encryptionEnabled=a.enabled;else if(a.participantIdentity){const o=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(a.participantIdentity);if(!o)throw TypeError("couldn't set encryption status, participant not found".concat(a.participantIdentity));this.emit(Kr.ParticipantEncryptionStatusChanged,a.enabled,o)}break;case"ratchetKey":this.keyProvider.emit(Hr.KeyRatcheted,a.ratchetResult,a.participantIdentity,a.keyIndex);break}},this.onWorkerError=n=>{Ie.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Kr.EncryptionError,n.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1}setup(t){if(!FC())throw new vd("tried to setup end-to-end encryption on an unsupported browser");if(Ie.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:xC.getLevel()}};this.worker&&(Ie.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){Ie.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?Ie.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(te.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(W.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==dn.NONE,i.identity)),t.on(W.ConnectionStateChanged,r=>{r===Be.Connected&&t.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==dn.NONE,i.identity)})})}).on(W.TrackUnsubscribed,(r,i,s)=>{var a;const o={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(o)}).on(W.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(W.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(re.LocalSenderCreated,(r,i)=>I(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),n.on(Hr.SetKey,r=>this.postKey(r)).on(Hr.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:i}=t;var s;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(a)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?_c(r.mimeType):void 0)}}setupE2EESender(t,n){if(!xs(t)||!n){n||Ie.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,i){return I(this,void 0,void 0,function*(){if(this.worker){if(gd()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Pa in t&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let s=t.writableStream,a=t.readableStream;if(!s||!a){const c=t.createEncodedStreams();t.writableStream=c.writable,s=c.writable,t.readableStream=c.readable,a=c.readable}const o={kind:"decode",data:{readableStream:a,writableStream:s,trackId:n,codec:i,participantIdentity:r,isReuse:Pa in t}};this.worker.postMessage(o,[a,s])}t[Pa]=!0}})}handleSender(t,n,r){var i;if(!(Pa in t||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(gd()){Ie.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{Ie.info("initialize encoded streams");const s=t.createEncodedStreams(),a={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(a,[s.readable,s.writable])}t[Pa]=!0}}}const Ud="default";class It{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new It),this.instance}get previousDevices(){return this._previousDevices}getDevices(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=It.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){Ie.debug("awaiting getUserMedia promise");try{n?yield It.userMediaPromiseMap.get(n):yield Promise.all(It.userMediaPromiseMap.values())}catch{Ie.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Li()&&r.hasDeviceInUse(n))&&(a.filter(c=>c.kind===n).length===0||a.some(c=>{const l=c.label==="",u=n?c.kind===n:!0;return l&&u}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},l=yield navigator.mediaDevices.getUserMedia(c);a=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(u=>{u.stop()})}return r._previousDevices=a,n&&(a=a.filter(o=>o.kind===n)),a}()})}normalizeDeviceId(t,n,r){return I(this,void 0,void 0,function*(){if(n!==Ud)return n;const i=yield this.getDevices(t),s=i.find(o=>o.deviceId===Ud);if(!s){Ie.warn("could not reliably determine default device");return}const a=i.find(o=>o.deviceId!==Ud&&o.groupId===(r??s.groupId));if(!a){Ie.warn("could not reliably determine default device");return}return a==null?void 0:a.deviceId})}hasDeviceInUse(t){return t?It.userMediaPromiseMap.has(t):It.userMediaPromiseMap.size>0}}It.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],It.userMediaPromiseMap=new Map;var Qa;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(Qa||(Qa={}));class xP{constructor(){this.pendingTasks=new Map,this.taskMutex=new Gt,this.nextTaskIndex=0}run(t){return I(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Qa.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Qa.RUNNING,yield t()}finally{n.status=Qa.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return I(this,void 0,void 0,function*(){return this.run(()=>I(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function CP(e,t){const n=new URL(pP(e));return t.forEach((r,i)=>{n.searchParams.set(i,r)}),Kv(n,"rtc")}function PP(e){const t=new URL(Qd(e));return Kv(t,"validate")}function RP(e){return e.endsWith("/")?e:"".concat(e,"/")}function Kv(e,t){return e.pathname="".concat(RP(e.pathname)).concat(t),e.toString()}const AP=["syncState","trickle","offer","answer","simulate","leave"];function IP(e){const t=AP.indexOf(e.case)>=0;return Ie.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var st;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(st||(st={}));class qd{get currentState(){return this.state}get isDisconnected(){return this.state===st.DISCONNECTING||this.state===st.DISCONNECTED}get isEstablishingConnection(){return this.state===st.CONNECTING||this.state===st.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=st.DISCONNECTED,this.log=Ie,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Sr((r=n.loggerName)!==null&&r!==void 0?r:Qn.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new xP,this.queuedRequests=[],this.closingLock=new Gt,this.connectionLock=new Gt,this.state=st.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,r,i){return I(this,void 0,void 0,function*(){return this.state=st.CONNECTING,this.options=r,yield this.connect(t,n,r,i)})}reconnect(t,n,r,i){return I(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=st.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(t,n,r,i){this.connectOptions=r;const s=dP(),a=QP(n,s,r),o=CP(t,a),c=PP(o);return new Promise((l,u)=>I(this,void 0,void 0,function*(){const d=yield this.connectionLock.lock();try{const h=()=>I(this,void 0,void 0,function*(){this.close(),clearTimeout(p),u(new et("room connection has been cancelled (signal)",De.Cancelled))}),p=setTimeout(()=>{this.close(),u(new et("room connection has timed out (signal)",De.ServerUnreachable))},r.websocketTimeout);i!=null&&i.aborted&&h(),i==null||i.addEventListener("abort",h);const O=new URL(o);O.searchParams.has("access_token")&&O.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(O),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(p)},this.ws.onerror=m=>I(this,void 0,void 0,function*(){if(this.state!==st.CONNECTED){this.state=st.DISCONNECTED,clearTimeout(p);try{const b=yield fetch(c);if(b.status.toFixed(0).startsWith("4")){const v=yield b.text();u(new et(v,De.NotAllowed,b.status))}else u(new et("Encountered unknown websocket error during connection: ".concat(m.toString()),De.InternalError,b.status))}catch(b){u(new et(b instanceof Error?b.message:"server was not reachable",De.ServerUnreachable))}return}this.handleWSError(m)}),this.ws.onmessage=m=>I(this,void 0,void 0,function*(){var b,v,k;let y;if(typeof m.data=="string"){const T=JSON.parse(m.data);y=Ig.fromJson(T,{ignoreUnknownFields:!0})}else if(m.data instanceof ArrayBuffer)y=Ig.fromBinary(new Uint8Array(m.data));else{this.log.error("could not decode websocket message: ".concat(typeof m.data),this.logContext);return}if(this.state!==st.CONNECTED){let T=!1;if(((b=y.message)===null||b===void 0?void 0:b.case)==="join"?(this.state=st.CONNECTED,i==null||i.removeEventListener("abort",h),this.pingTimeoutDuration=y.message.value.pingTimeout,this.pingIntervalDuration=y.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),l(y.message.value)):this.state===st.RECONNECTING&&y.message.case!=="leave"?(this.state=st.CONNECTED,i==null||i.removeEventListener("abort",h),this.startPingInterval(),((v=y.message)===null||v===void 0?void 0:v.case)==="reconnect"?l(y.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),l(void 0),T=!0)):this.isEstablishingConnection&&y.message.case==="leave"?u(new et("Received leave request while trying to (re)connect",De.LeaveRequest,void 0,y.message.value.reason)):r.reconnect||u(new et("did not receive join response, got ".concat((k=y.message)===null||k===void 0?void 0:k.case," instead"),De.InternalError)),!T)return}this.signalLatency&&(yield tn(this.signalLatency)),this.handleSignalResponse(y)}),this.ws.onclose=m=>{this.isEstablishingConnection&&u(new et("Websocket got closed during a (re)connection attempt",De.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:m.reason,code:m.code,wasClean:m.wasClean,state:this.state})),this.handleOnClose(m.reason)}}finally{d()}}))}close(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=st.DISCONNECTING),t.ws){t.ws.onmessage=null,t.ws.onopen=null,t.ws.onclose=null;const i=new Promise(s=>{t.ws?t.ws.onclose=()=>{s()}:s()});t.ws.readyState<t.ws.CLOSING&&(t.ws.close(),yield Promise.race([i,tn(250)])),t.ws=void 0}}finally{n&&(t.state=st.DISCONNECTED),r()}}()})}sendOffer(t,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:Ec(t,n)})}sendAnswer(t,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:Ec(t,n)})}sendIceCandidate(t,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new rd({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new id({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return I(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const o=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new $g({requestId:o,metadata:r,name:i,attributes:a})}),o}()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new Dg({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new Ug({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ut.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Bg({timestamp:ut.parse(Date.now()),rtt:ut.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new Ng({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new hc({reason:An.CLIENT_INITIATED,action:ks.DISCONNECT})})}sendRequest(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!IP(n)&&r.state===st.RECONNECTING){r.queuedRequests.push(()=>I(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield tn(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const a=new nC({message:n});try{r.useJSON?r.ws.send(a.toJsonString()):r.ws.send(a.toBinary())}catch(o){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:o}))}}()})}handleSignalResponse(t){var n,r;const i=t.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const a=Jv(i.value);this.onAnswer&&this.onAnswer(a,i.value.id)}else if(i.case==="offer"){const a=Jv(i.value);this.onOffer&&this.onOffer(a,i.value.id)}else if(i.case==="trickle"){const a=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(a,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return I(this,void 0,void 0,function*(){if(this.state===st.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Lt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Lt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Lt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Lt.clearInterval(this.pingInterval)}}function Jv(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function Ec(e,t){return new Di({sdp:e.sdp,type:e.type,id:t})}function QP(e,t,n){var r;const i=new URLSearchParams;return i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Hn()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}class eb{constructor(){this.buffer=[],this._totalSize=0}push(t){this.buffer.push(t),this._totalSize+=t.data.byteLength}pop(){const t=this.buffer.shift();return t&&(this._totalSize-=t.data.byteLength),t}getAll(){return this.buffer.slice()}popToSequence(t){for(;this.buffer.length>0&&this.buffer[0].sequence<=t;)this.pop()}alignBufferedAmount(t){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=t)break;this.pop()}}get length(){return this.buffer.length}}class NP{constructor(t){this._map=new Map,this._lastCleanup=0,this.ttl=t}set(t,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(t,{value:n,expiresAt:i}),this}get(t){const n=this._map.get(t);if(n){if(n.expiresAt<Date.now()){this._map.delete(t);return}return n.value}}has(t){const n=this._map.get(t);return n?n.expiresAt<Date.now()?(this._map.delete(t),!1):!0:!1}delete(t){return this._map.delete(t)}clear(){this._map.clear()}cleanup(){const t=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<t&&this._map.delete(n);this._lastCleanup=t}get size(){return this.cleanup(),this._map.size}forEach(t){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t(r.value,n,this.asValueMap())}map(t){this.cleanup();const n=[],r=this.asValueMap();for(const[i,s]of r.entries())n.push(t(s,i,r));return n}asValueMap(){const t=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t.set(n,r.value);return t}}var Nn={},Xd={},Fd={exports:{}},tb;function Bd(){if(tb)return Fd.exports;tb=1;var e=Fd.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Fd.exports}var nb;function DP(){return nb||(nb=1,function(e){var t=function(o){return String(Number(o))===o?Number(o):o},n=function(o,c,l,u){if(u&&!l)c[u]=t(o[1]);else for(var d=0;d<l.length;d+=1)o[d+1]!=null&&(c[l[d]]=t(o[d+1]))},r=function(o,c,l){var u=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:u&&!c[o.name]&&(c[o.name]={});var d=o.push?{}:u?c[o.name]:c;n(l.match(o.reg),d,o.names,o.name),o.push&&c[o.push].push(d)},i=Bd(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var c={},l=[],u=c;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var h=d[0],p=d.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var O=0;O<(i[h]||[]).length;O+=1){var m=i[h][O];if(m.reg.test(p))return r(m,u,p)}}),c.media=l,c};var a=function(o,c){var l=c.split(/=(.+)/,2);return l.length===2?o[l[0]]=t(l[1]):l.length===1&&c.length>1&&(o[l[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var c=[],l=o.split(" ").map(t),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},e.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}}(Xd)),Xd}var zd,rb;function $P(){if(rb)return zd;rb=1;var e=Bd(),t=/%[sdv%]/g,n=function(a){var o=1,c=arguments,l=c.length;return a.replace(t,function(u){if(o>=l)return u;var d=c[o];switch(o+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},r=function(a,o,c){var l=o.format instanceof Function?o.format(o.push?c:c[o.name]):o.format,u=[a+"="+l];if(o.names)for(var d=0;d<o.names.length;d+=1){var h=o.names[d];o.name?u.push(c[o.name][h]):u.push(c[o.names[d]])}else u.push(c[o.name]);return n.apply(null,u)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return zd=function(a,o){o=o||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var c=o.outerOrder||i,l=o.innerOrder||s,u=[];return c.forEach(function(d){e[d].forEach(function(h){h.name in a&&a[h.name]!=null?u.push(r(d,h,a)):h.push in a&&a[h.push]!=null&&a[h.push].forEach(function(p){u.push(r(d,h,p))})})}),a.media.forEach(function(d){u.push(r("m",e.m[0],d)),l.forEach(function(h){e[h].forEach(function(p){p.name in d&&d[p.name]!=null?u.push(r(h,p,d)):p.push in d&&d[p.push]!=null&&d[p.push].forEach(function(O){u.push(r(h,p,O))})})})}),u.join(`\r
`)+`\r
`},zd}var ib;function LP(){if(ib)return Nn;ib=1;var e=DP(),t=$P(),n=Bd();return Nn.grammar=n,Nn.write=t,Nn.parse=e.parse,Nn.parseParams=e.parseParams,Nn.parseFmtpConfig=e.parseFmtpConfig,Nn.parsePayloads=e.parsePayloads,Nn.parseRemoteCandidates=e.parseRemoteCandidates,Nn.parseImageAttributes=e.parseImageAttributes,Nn.parseSimulcastStreamList=e.parseSimulcastStreamList,Nn}var ni=LP();function Zd(e,t,n){var r,i,s;t===void 0&&(t=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,o=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var p=Date.now()-l;if(p+t>=c)return c-p}return t}var h=function(){var p=[].slice.call(arguments),O=this;return new Promise(function(m,b){var v=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!a){var y=e.apply(O,p);o&&o(y),u.forEach(function(T){return(0,T.resolve)(y)}),u=[]}},d()),v){var k=e.apply(O,p);return o&&o(k),m(k)}u.push({resolve:m,reject:b})})};return h.cancel=function(p){s!==void 0&&clearTimeout(s),u.forEach(function(O){return(0,O.reject)(p)}),u=[]},h}const MP=.7,UP=20,Cs={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class sb extends Wn.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=Ie,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Zd(i=>I(this,void 0,void 0,function*(){this.emit(Cs.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),UP),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Sr((r=n.loggerName)!==null&&r!==void 0?r:Qn.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC(),this.offerLock=new Gt}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return I(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t,n){return I(this,void 0,void 0,function*(){var r;if(t.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(t.type==="offer"){let{stereoMids:s,nackMids:a}=qP(t);this.remoteStereoMids=s,this.remoteNackMids=a}else if(t.type==="answer"){const s=ni.parse((r=t.sdp)!==null&&r!==void 0?r:"");s.media.forEach(a=>{a.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||a.mid!=o.transceiver.mid)return!1;let c=0;if(a.rtp.some(u=>u.codec.toUpperCase()===o.codec.toUpperCase()?(c=u.payload,!0):!1),c===0)return!0;let l=!1;for(const u of a.fmtp)if(u.payload===c){u.config=u.config.split(";").filter(d=>!d.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(u.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),l=!0;break}return l||o.maxbr>0&&a.fmtp.push({payload:c,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),i=ni.write(s)}return yield this.setMungedSDP(t,i,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(Cs.NegotiationComplete),t.sdp&&ni.parse(t.sdp).media.forEach(a=>{a.type==="video"&&this.emit(Cs.RTPVideoPayloadTypes,a.rtp)})),!0})}createAndSendOffer(t){return I(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(t!=null&&t.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(t!=null&&t.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const s=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const a=ni.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(a.media.forEach(o=>{ob(o),o.type==="audio"?ab(o,[],[]):o.type==="video"&&this.trackBitrates.some(c=>{if(!o.msid||!c.cid||!o.msid.includes(c.cid))return!1;let l=0;if(o.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0||(Yn(c.codec)&&!Li()&&this.ensureVideoDDExtensionForSVC(o,a),c.codec!=="av1"))return!0;const u=Math.round(c.maxbr*MP);for(const d of o.fmtp)if(d.payload===l){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(s,ni.write(a)),this.onOffer(s,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),r=ni.parse((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(i=>{ob(i),i.type==="audio"&&ab(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,ni.write(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new Ct("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new Ct("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return I(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(o=>{switch(o.type){case"transport":n=o.selectedCandidatePairId;break;case"candidate-pair":n===""&&o.selected&&(n=o.id),r.set(o.id,o);break;case"remote-candidate":i.set(o.id,"".concat(o.address,":").concat(o.port));break}}),n==="")return;const a=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(a!==void 0)return i.get(a)})}setMungedSDP(t,n,r){return I(this,void 0,void 0,function*(){if(n){const i=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(s){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),t.sdp=i}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const a={error:s,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new bd(s)}})}ensureVideoDDExtensionForSVC(t,n){var r,i;if(!((r=t.ext)===null||r===void 0?void 0:r.some(a=>a.uri===Mv))){if(this.ddExtID===0){let a=0;n.media.forEach(o=>{var c;o.type==="video"&&((c=o.ext)===null||c===void 0||c.forEach(l=>{l.value>a&&(a=l.value)}))}),this.ddExtID=a+1}(i=t.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:Mv})}}}function ab(e,t,n){let r=0;e.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(e.mid)&&e.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function qP(e){var t;const n=[],r=[],i=ni.parse((t=e.sdp)!==null&&t!==void 0?t:"");let s=0;return i.media.forEach(a=>{var o;a.type==="audio"&&(a.rtp.some(c=>c.codec==="opus"?(s=c.payload,!0):!1),!((o=a.rtcpFb)===null||o===void 0)&&o.some(c=>c.payload===s&&c.type==="nack")&&r.push(a.mid),a.fmtp.some(c=>c.payload===s?(c.config.includes("sprop-stereo=1")&&n.push(a.mid),!0):!1))}),{stereoMids:n,nackMids:r}}function ob(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(e.connection.version===4&&t||e.connection.version===6&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}const jd="vp8",XP={audioPreset:yd.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:_d.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:jd,backupCodec:!0,preConnectBuffer:!1},cb={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},lb={deviceId:{ideal:"default"},resolution:Aa.h720.resolution},FP={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new PC,disconnectOnPageLeave:!0,webAudioMix:!1},Vd={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var ft;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(ft||(ft={}));class BP{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,r){var i;this.peerConnectionTimeout=Vd.peerConnectionTimeout,this.log=Ie,this.updateState=()=>{var s;const a=this.state,o=this.requiredTransports.map(c=>c.getConnectionState());o.every(c=>c==="connected")?this.state=ft.CONNECTED:o.some(c=>c==="failed")?this.state=ft.FAILED:o.some(c=>c==="connecting")?this.state=ft.CONNECTING:o.every(c=>c==="closed")?this.state=ft.CLOSED:o.some(c=>c==="closed")?this.state=ft.CLOSING:o.every(c=>c==="new")&&(this.state=ft.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(ft[a]," to ").concat(ft[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Sr((i=r.loggerName)!==null&&i!==void 0?i:Qn.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new sb(t,r),this.subscriber=new sb(t,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,In.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,In.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=(s,a)=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,s,a)},this.state=ft.NEW,this.connectionLock=new Gt,this.remoteOfferLock=new Gt}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}requireSubscriber(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t,n){return this.publisher.setRemoteDescription(t,n)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return I(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const t=this.publisher;for(const n of t.getSenders())try{t.canRemoveTrack()&&t.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return I(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return I(this,void 0,void 0,function*(){n===In.PUBLISHER?yield this.publisher.addIceCandidate(t):yield this.subscriber.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t,n){return I(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const r=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(t,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{r()}})}updateConfiguration(t,n){this.publisher.setConfiguration(t),this.subscriber.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return I(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,t,n)))}finally{i()}})}negotiate(t){return I(this,void 0,void 0,function*(){return new Promise((n,r)=>I(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};t.signal.addEventListener("abort",s),this.publisher.once(Cs.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(Cs.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(i),r(a)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===In.PUBLISHER?this.publisher.getConnectedAddress():t===In.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return I(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((c,l)=>I(s,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),Lt.clearTimeout(d),l(new et("room connection has been cancelled",De.Cancelled))};i!=null&&i.signal.aborted&&u(),i==null||i.signal.addEventListener("abort",u);const d=Lt.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",u),l(new et("could not establish pc connection",De.InternalError))},a);for(;this.state!==ft.CONNECTED;)if(yield tn(50),i!=null&&i.signal.aborted){l(new et("room connection has been cancelled",De.Cancelled));return}Lt.clearTimeout(d),i==null||i.signal.removeEventListener("abort",u),c()}))}()})}}class mt extends Error{constructor(t,n,r){super(n),this.code=t,this.message=db(n,mt.MAX_MESSAGE_BYTES),this.data=r?db(r,mt.MAX_DATA_BYTES):void 0}static fromProto(t){return new mt(t.code,t.message,t.data)}toProto(){return new yg({code:this.code,message:this.message,data:this.data})}static builtIn(t,n){return new mt(mt.ErrorCode[t],mt.ErrorMessage[t],n)}}mt.MAX_MESSAGE_BYTES=256,mt.MAX_DATA_BYTES=15360,mt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},mt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const ub=15360;function Gd(e){return new TextEncoder().encode(e).length}function db(e,t){if(Gd(e)<=t)return e;let n=0,r=e.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(e.slice(0,s)).length<=t?n=s:r=s-1}return e.slice(0,n)}const Wd=2e3;function wc(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}const Yd=typeof MediaRecorder<"u";class zP{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const ZP=Yd?MediaRecorder:zP;class jP extends ZP{constructor(t,n){if(!Yd)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([t.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,a=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",o),i==null||i.close(),i=void 0},o=c=>{i==null||i.error(c),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",o),i=void 0};this.byteStream=new ReadableStream({start:c=>{i=c,r=l=>I(this,void 0,void 0,function*(){const u=yield l.data.arrayBuffer();s()||c.enqueue(new Uint8Array(u))}),this.addEventListener("dataavailable",r)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",o)}}function VP(){return Yd}const GP=1e3,WP=1e4;class hb extends Z{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(t,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Zd(()=>I(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>I(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(J.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Gt,this.pauseUpstreamLock=new Gt,this.processorLock=new Gt,this.restartLock=new Gt,this.setMediaStreamTrack(t,!0),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Z.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(t,n){return I(this,void 0,void 0,function*(){var r;if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{_s(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let i;if(this.processor&&t){const s=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Ss(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{s()}}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Ss(i??t,s)}))})}waitForDimensions(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:GP;return function*(){var r;if(t.kind===Z.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=hn())===null||r===void 0?void 0:r.os)==="iOS"&&(yield tn(10));const i=Date.now();for(;Date.now()-i<n;){const s=t.dimensions;if(s)return s;yield tn(50)}throw new Er("unable to get track dimensions after timeout")}()})}setDeviceId(t){return I(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===ei(t)||(this._constraints.deviceId=t,this.isMuted)?!0:(yield this.restartTrack(),ei(t)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(t.source===Z.Source.ScreenShare)return;const{deviceId:r,groupId:i}=t._mediaStreamTrack.getSettings(),s=t.kind===Z.Kind.Audio?"audioinput":"videoinput";return n?It.getInstance().normalizeDeviceId(s,r,i):r}()})}mute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return I(this,void 0,void 0,function*(){if(!this.sender)throw new Er("unable to replace an unpublished track");let r,i;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,i=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),i&&this.processor&&(yield this.stopProcessor()),this})}restart(t){return I(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{t||(t=this._constraints);const{deviceId:r,facingMode:i}=t,s=RC(t,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const a={audio:!1,video:!1};this.kind===Z.Kind.Video?a.video=r||i?{deviceId:r,facingMode:i}:!0:a.audio=r?{deviceId:r}:!0,this.attachedElements.forEach(l=>{_s(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return yield c.applyConstraints(s),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=t,this.emit(J.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?J.Muted:J.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Uv()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(J.UpstreamPaused,this);const r=hn();if((r==null?void 0:r.name)==="Safari"&&Kn(r.version,"12.0")<0)throw new vd("pauseUpstream is not supported on Safari < 12.");((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return I(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(J.UpstreamResumed,this),((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const a=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const o=document.createElement(r.kind),c={kind:r.kind,track:r._mediaStreamTrack,element:o,audioContext:r.audioContext};if(yield n.init(c),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Ss(r._mediaStreamTrack,o),o.muted=!0,o.play().catch(l=>{l instanceof DOMException&&l.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:l})),setTimeout(()=>{o.play().catch(u=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:u}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:l}))}),r.processor=n,r.processorElement=o,r.processor.processedTrack){for(const l of r.attachedElements)l!==r.processorElement&&i&&(_s(r._mediaStreamTrack,l),Ss(r.processor.processedTrack,l));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(J.TrackProcessorUpdate,r.processor)}finally{a()}}()})}getProcessor(){return this.processor}stopProcessor(){return I(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;t.processor&&(t.log.debug("stopping processor",t.logContext),(r=t.processor.processedTrack)===null||r===void 0||r.stop(),yield t.processor.destroy(),t.processor=void 0,n||((i=t.processorElement)===null||i===void 0||i.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(J.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!VP()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(!this.localTrackRecorder)this.localTrackRecorder=new jP(this,{mimeType:"audio/webm;codecs=opus"});else{this.log.warn("preconnect buffer already started");return}this.localTrackRecorder.start(t),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},WP)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.byteStream}}class xc extends hb{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(t,Z.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(o){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:o}));return}a&&this.prevStats&&(this._currentBitrate=wc(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,At.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,At.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Z.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==ei(this._constraints.deviceId);return this.source===Z.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return I(this,void 0,void 0,function*(){let n;if(t){const r=Ld({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return I(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){nn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Wd)))}setProcessor(t){return I(this,void 0,void 0,function*(){var n;const r=yield this.processorLock.lock();try{if(!Hn()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(i),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(J.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return I(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return I(this,void 0,void 0,function*(){const t=yield Gv(this);return t&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(J.AudioSilenceDetected)),t})}}function YP(e,t,n){switch(e.kind){case"audio":return new xc(e,t,!1,void 0,n);case"video":return new Cc(e,t,!1,n);default:throw new Er("unsupported track type: ".concat(e.kind))}}const HP=Object.values(Aa),KP=Object.values(Sd),JP=Object.values(_d),eR=[Aa.h180,Aa.h360],tR=[Sd.h180,Sd.h360],nR=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var r,i;return new Ye(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,e.encoding.priority)}),Hd=["q","h","f"];function Kd(e,t,n,r){var i,s;let a=r==null?void 0:r.videoEncoding;e&&(a=r==null?void 0:r.screenShareEncoding);const o=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!a&&!o&&!c||!t||!n)return[{}];a||(a=iR(e,t,n,l),Ie.debug("using video encoding",a));const u=a.maxFramerate,d=new Ye(t,n,a.maxBitrate,a.maxFramerate,a.priority);if(c&&Yn(l)){const O=new mb(c),m=[];if(O.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const b=hn();if(Cd()||Hn()||(b==null?void 0:b.name)==="Chrome"&&Kn(b==null?void 0:b.version,"113")<0){const v=O.suffix=="h"?2:3,k=oP(b);for(let y=0;y<O.spatial;y+=1)m.push({rid:Hd[2-y],maxBitrate:a.maxBitrate/Math.pow(v,y),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:k?Math.pow(2,y):void 0});m[0].scalabilityMode=c}else m.push({maxBitrate:a.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:c});return d.encoding.priority&&(m[0].priority=d.encoding.priority,m[0].networkPriority=d.encoding.priority),Ie.debug("using svc encoding",{encodings:m}),m}if(!o)return[a];let h=[];e?h=(i=fb(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:pb(e,d):h=(s=fb(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:pb(e,d);let p;if(h.length>0){const O=h[0];h.length>1&&([,p]=h);const m=Math.max(t,n);if(m>=960&&p)return Jd(t,n,[O,p,d],u);if(m>=480)return Jd(t,n,[O,d],u)}return Jd(t,n,[d])}function rR(e,t,n){var r,i,s,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&Ie.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const o=e.mediaStreamTrack.getSettings(),c=(r=o.width)!==null&&r!==void 0?r:(i=e.dimensions)===null||i===void 0?void 0:i.width,l=(s=o.height)!==null&&s!==void 0?s:(a=e.dimensions)===null||a===void 0?void 0:a.height;return e.source===Z.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Kd(e.source===Z.Source.ScreenShare,c,l,n)}function iR(e,t,n,r){const i=sR(e,t,n);let{encoding:s}=i[0];const a=Math.max(t,n);for(let o=0;o<i.length;o+=1){const c=i[o];if(s=c.encoding,c.width>=a)break}if(r)switch(r){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function sR(e,t,n){if(e)return JP;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?HP:KP}function pb(e,t){if(e)return nR(t);const{width:n,height:r}=t,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?eR:tR}function Jd(e,t,n,r){const i=[];if(n.forEach((s,a)=>{if(a>=Hd.length)return;const o=Math.min(e,t),l={rid:Hd[a],scaleResolutionDownBy:Math.max(1,o/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},u=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;u&&(l.maxFramerate=u);const d=Es()||a===0;s.encoding.priority&&d&&(l.priority=s.encoding.priority,l.networkPriority=s.encoding.priority),i.push(l)}),Hn()&&Xv()==="ios"){let s;i.forEach(o=>{s?o.maxFramerate&&o.maxFramerate>s&&(s=o.maxFramerate):s=o.maxFramerate});let a=!0;i.forEach(o=>{var c;o.maxFramerate!=s&&(a&&(a=!1,Ie.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ie.info('Setting framerate of encoding "'.concat((c=o.rid)!==null&&c!==void 0?c:"",'" to ').concat(s)),o.maxFramerate=s)})}return i}function fb(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class mb{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function aR(e){return e.source===Z.Source.ScreenShare||e.constraints.height&&ei(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const oR=5e3;class Cc extends hb{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(t,Z.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const a=new Map(s.map(c=>[c.rid,c])),o=s.some(c=>c.qualityLimitationReason==="cpu");if(o!==this.isCpuConstrained&&(this.isCpuConstrained=o,this.isCpuConstrained&&this.emit(J.CpuConstrained)),this.prevStats){let c=0;a.forEach((l,u)=>{var d;const h=(d=this.prevStats)===null||d===void 0?void 0:d.get(u);c+=wc(l,h)}),this._currentBitrate=c}this.prevStats=a}),this.senderLock=new Gt}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!nn())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Wd))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return I(this,void 0,void 0,function*(){var n,r,i,s,a;yield t.pauseUpstream.call(this);try{for(var o=!0,c=_r(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0)s=l.value,o=!1,yield(a=s.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(u){r={error:u}}finally{try{!o&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return I(this,void 0,void 0,function*(){var n,r,i,s,a;yield t.resumeUpstream.call(this);try{for(var o=!0,c=_r(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0){s=l.value,o=!1;const u=s;yield(a=u.sender)===null||a===void 0?void 0:a.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!o&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Z.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===Z.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return I(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const a={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},o=r.get(i.remoteId);o&&(a.jitter=o.jitter,a.packetsLost=o.packetsLost,a.roundTripTime=o.roundTripTime),n.push(a)}}),n.sort((i,s)=>{var a,o;return((a=s.frameWidth)!==null&&a!==void 0?a:0)-((o=i.frameWidth)!==null&&o!==void 0?o:0)}),n})}setPublishingQuality(t){const n=[];for(let r=pn.LOW;r<=pn.HIGH;r+=1)n.push(new ad({quality:r,enabled:r<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(Yn(this.codec),n)}restartTrack(t){return I(this,void 0,void 0,function*(){var n,r,i,s,a;let o;if(t){const d=Ld({video:t});typeof d.video!="boolean"&&(o=d.video)}yield this.restart(o),this.isCpuConstrained=!1;try{for(var c=!0,l=_r(this.simulcastCodecs.values()),u;u=yield l.next(),n=u.done,!n;c=!0){s=u.value,c=!1;const d=s;d.sender&&((a=d.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){r={error:d}}finally{try{!c&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return I(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a,o,c,l,u,d;if(yield n.setProcessor.call(i,r,s),!((u=i.processor)===null||u===void 0)&&u.processedTrack)try{for(var h=!0,p=_r(i.simulcastCodecs.values()),O;O=yield p.next(),a=O.done,!a;h=!0)l=O.value,h=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(i.processor.processedTrack)}catch(m){o={error:m}}finally{try{!h&&!a&&(c=p.return)&&(yield c.call(p))}finally{if(o)throw o.error}}}()})}setDegradationPreference(t){return I(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},oR))}setPublishingCodecs(t){return I(this,void 0,void 0,function*(){var n,r,i,s,a,o,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(Yn(t[0].codec),t[0].qualities),[];this.subscribedCodecs=t;const l=[];try{for(n=!0,r=_r(t);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(Yn(u.codec),u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield Ob(d.sender,d.encodings,u.qualities,this.senderLock,Yn(u.codec),this.log,this.logContext))}}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=r.return)&&(yield o.call(r))}finally{if(a)throw a.error}}return l})}setPublishingLayers(t,n){return I(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Ob(this.sender,this.encodings,n,this.senderLock,t,this.log,this.logContext))})}prioritizePerformance(){return I(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const t=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var s;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:i===0&&Yn(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{t()}})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Uv()&&this.isInBackground&&this.source===Z.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Ob(e,t,n,r,i,s,a){return I(this,void 0,void 0,function*(){const o=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:e,qualities:n,senderEncodings:t}));try{const c=e.getParameters(),{encodings:l}=c;if(!l)return;if(l.length!==t.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:l,senderEncodings:t}));return}let u=!1;!1&&l[0].scalabilityMode||(i&&n.some(p=>p.enabled)&&n.forEach(p=>p.enabled=!0),l.forEach((h,p)=>{var O;let m=(O=h.rid)!==null&&O!==void 0?O:"";m===""&&(m="q");const b=gb(m),v=n.find(k=>k.quality===b);v&&h.active!==v.enabled&&(u=!0,h.active=v.enabled,s.debug("setting layer ".concat(v.quality," to ").concat(h.active?"enabled":"disabled"),a),Es()&&(v.enabled?(h.scaleResolutionDownBy=t[p].scaleResolutionDownBy,h.maxBitrate=t[p].maxBitrate,h.maxFrameRate=t[p].maxFrameRate):(h.scaleResolutionDownBy=4,h.maxBitrate=10,h.maxFrameRate=2)))})),u&&(c.encodings=l,s.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:c.encodings})),yield e.setParameters(c))}finally{o()}})}function gb(e){switch(e){case"f":return pn.HIGH;case"h":return pn.MEDIUM;case"q":return pn.LOW;default:return pn.HIGH}}function vb(e,t,n,r){if(!n)return[new Ni({quality:pn.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new mb(i),a=[],o=s.suffix=="h"?1.5:2,c=s.suffix=="h"?2:3;for(let l=0;l<s.spatial;l+=1)a.push(new Ni({quality:Math.min(pn.HIGH,s.spatial-1)-l,width:Math.ceil(e/Math.pow(o,l)),height:Math.ceil(t/Math.pow(o,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return a}return n.map(i=>{var s,a,o;const c=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let l=gb((a=i.rid)!==null&&a!==void 0?a:"");return new Ni({quality:l,width:Math.ceil(e/c),height:Math.ceil(t/c),bitrate:(o=i.maxBitrate)!==null&&o!==void 0?o:0,ssrc:0})})}const bb="_lossy",Tb="_reliable",cR=2*1e3,eh="leave-reconnect",lR=3e4;var Dn;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(Dn||(Dn={}));class uR extends Wn.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=Vd.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Dn.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ie,this.reliableDataSequence=1,this.reliableMessageBuffer=new eb,this.reliableReceivedState=new NP(lR),this.handleDataChannel=r=>I(this,[r],void 0,function(i){var s=this;let{channel:a}=i;return function*(){if(a){if(a.label===Tb)s.reliableDCSub=a;else if(a.label===bb)s.lossyDCSub=a;else return;s.log.debug("on data channel ".concat(a.id,", ").concat(a.label),s.logContext),a.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=r=>I(this,void 0,void 0,function*(){var i,s;const a=yield this.dataProcessLock.lock();try{let o;if(r.data instanceof ArrayBuffer)o=r.data;else if(r.data instanceof Blob)o=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=en.fromBinary(new Uint8Array(o));if(c.sequence>0&&c.participantSid!==""){const l=this.reliableReceivedState.get(c.participantSid);if(l&&c.sequence<=l)return;this.reliableReceivedState.set(c.participantSid,c.sequence)}((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(te.ActiveSpeakersUpdate,c.value.value.speakers):(((s=c.value)===null||s===void 0?void 0:s.case)==="user"&&hR(c,c.value.value),this.emit(te.DataPacketReceived,c))}finally{a()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:a}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?ye.LOSSY:ye.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(te.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let o=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(o===null){s(a);return}r===eh&&(o=0),this.log.debug("reconnecting in ".concat(o,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Lt.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),o)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Dn.Connected&&r();const s=()=>{this.off(te.Disconnected,a),r()},a=()=>{this.off(te.Restarted,s),i()};this.once(te.Restarted,s),this.once(te.Disconnected,a)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(te.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return r===ye.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(i.bufferedAmount),i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===st.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(vs.RR_SIGNAL_DISCONNECTED))},this.log=Sr((n=t.loggerName)!==null&&n!==void 0?n:Qn.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new qd(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Gt,this.dataProcessLock=new Gt,this.dcBufferStatus=new Map([[ye.LOSSY,!0],[ye.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(te.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(te.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(te.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(te.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(te.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(te.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(te.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(te.SignalRequestResponse,r)}get logContext(){var t,n,r,i,s,a;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(a=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(t,n,r,i){return I(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(t,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate(),this.clientConfiguration=s.clientConfiguration,this.emit(te.SignalConnected,s),s}catch(s){if(s instanceof et&&s.reason===De.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,i);throw s}})}close(){return I(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(te.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return I(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new eb,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return I(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new Er("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new et("publication of local track timed out, no response from server",De.Timeout))},1e4);this.pendingTrackResolvers[t.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return I(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return I(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==ft.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(t);this.pcManager=new BP(i,t.subscriberPrimary,this.loggerOptions),this.emit(te.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,a)=>{this.client.sendIceCandidate(s,a)},this.pcManager.onPublisherOffer=(s,a)=>{this.client.sendOffer(s,a)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,a,o)=>I(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(a)&&(this.publisherConnectionPromise=void 0),s===ft.CONNECTED){const u=this.pcState===Dn.New;this.pcState=Dn.Connected,u&&this.emit(te.Connected,t)}else s===ft.FAILED&&this.pcState===Dn.Connected&&(this.pcState=Dn.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?vs.RR_SUBSCRIBER_FAILED:vs.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===st.RECONNECTING,l=[ft.FAILED,ft.CLOSING,ft.CLOSED].includes(s);c&&l&&!this._isClosed&&this.emit(te.Offline)}),this.pcManager.onTrack=s=>{this.emit(te.MediaTrackAdded,s.track,s.streams[0],s.receiver)},dR((r=t.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(t,n)=>I(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type})),yield this.pcManager.setPublisherAnswer(t,n))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=(t,n)=>I(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const r=yield this.pcManager.createSubscriberAnswerFromOffer(t,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:r}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],r(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(te.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(te.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(te.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(te.SubscribedQualityUpdate,t)},this.client.onRoomMoved=t=>{var n;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=t.room),this.emit(te.RoomMoved,t)},this.client.onClose=()=>{this.handleDisconnect("signal",vs.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t==null?void 0:t.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case ks.DISCONNECT:this.emit(te.Disconnected,t==null?void 0:t.reason),this.close();break;case ks.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(eh);break;case ks.RESUME:this.handleDisconnect(eh)}}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const i=[];t.iceServers.forEach(s=>{const a={urls:s.urls};s.username&&(a.username=s.username),s.credential&&(a.credential=s.credential),i.push(a)}),r.iceServers=i}return t.clientConfiguration&&t.clientConfiguration.forceRelay===Ea.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(bb,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Tb,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,r){return I(this,void 0,void 0,function*(){if(Ed())return yield this.createTransceiverRTCRtpSender(t,n,r);if(wd())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new Ct("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,i){return I(this,void 0,void 0,function*(){if(Ed())return this.createSimulcastTransceiverSender(t,n,r,i);if(wd())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new Ct("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ct("publisher is closed");const i=[];t.mediaStream&&i.push(t.mediaStream),Ui(t)&&(t.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(t,n,r,i){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ct("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return t.setSimulcastTrackSender(r.videoCodec,a.sender),a.sender})}createRTCRtpSender(t){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ct("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return I(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){Ie.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Ea.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:ft.NEW)===ft.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let a=!0;s instanceof Ct?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),a=!1):s instanceof Ps||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",vs.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(te.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return I(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new Ct("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(te.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Ps;s=yield this.join(t??this.url,this.token,this.signalOpts)}catch(a){throw a instanceof et&&a.reason===De.NotAllowed?new Ct("could not reconnect, token might be expired"):new Ps}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(te.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==st.CONNECTED)throw new Ps("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(te.Restarted)}catch(s){const a=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(t){return I(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Ct("could not reconnect, url or token not saved");if(!this.pcManager)throw new Ct("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(te.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof et&&i.reason===De.NotAllowed?new Ct("could not reconnect, token might be expired"):i instanceof et&&i.reason===De.LeaveRequest?i:new Ps(s)}if(this.emit(te.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==st.CONNECTED)throw new Ps("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(te.Resumed)})}waitForPCInitialConnection(t,n){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ct("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return I(this,void 0,void 0,function*(){this.pcState=Dn.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield tn(cR),!this.pcManager)throw new Ct("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Dn.Connected}catch(t){throw this.pcState=Dn.Disconnected,new et("could not establish PC connection, ".concat(t.message),De.InternalError)}})}publishRpcResponse(t,n,r,i){return I(this,void 0,void 0,function*(){const s=new en({destinationIdentities:[t],kind:ye.RELIABLE,value:{case:"rpcResponse",value:new kg({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,ye.RELIABLE)})}publishRpcAck(t,n){return I(this,void 0,void 0,function*(){const r=new en({destinationIdentities:[t],kind:ye.RELIABLE,value:{case:"rpcAck",value:new Tg({requestId:n})}});yield this.sendDataPacket(r,ye.RELIABLE)})}sendDataPacket(t,n){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===ye.RELIABLE&&(t.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=t.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===ye.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:t.sequence}),this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(t){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(ye.RELIABLE);const n=this.dataChannelForKind(ye.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(t),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(ye.RELIABLE)})}waitForBufferStatusLow(t){return new Promise((n,r)=>I(this,void 0,void 0,function*(){if(this.isBufferStatusLow(t))n();else{const i=()=>r("Engine closed");for(this.once(te.Closing,i);!this.dcBufferStatus.get(t);)yield tn(10);this.off(te.Closing,i),n()}}))}ensureDataTransportConnected(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!r.pcManager)throw new Ct("PC manager is closed");const a=i?r.pcManager.subscriber:r.pcManager.publisher,o=i?"Subscriber":"Publisher";if(!a)throw new et("".concat(o," connection not set"),De.InternalError);let c=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),c=!0),!c&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&r.negotiate();const l=r.dataChannelForKind(n,i);if((l==null?void 0:l.readyState)==="open")return;const u=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<u;){if(a.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield tn(50)}throw new et("could not establish ".concat(o," connection, state: ").concat(a.getICEConnectionState()),De.InternalError)}()})}ensurePublisherConnected(t){return I(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==ft.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return I(this,void 0,void 0,function*(){return new Promise((t,n)=>I(this,void 0,void 0,function*(){if(!this.pcManager){n(new bd("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(te.Closing,i),this.pcManager.publisher.once(Cs.RTPVideoPayloadTypes,s=>{const a=new Map;s.forEach(o=>{const c=o.codec.toLowerCase();hP(c)&&a.set(o.payload,c)}),this.emit(te.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(r),t()}catch(s){s instanceof bd&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",vs.RR_UNKNOWN),n(s)}finally{this.off(te.Closing,i)}}))})}dataChannelForKind(t,n){if(n){if(t===ye.LOSSY)return this.lossyDCSub;if(t===ye.RELIABLE)return this.reliableDCSub}else{if(t===ye.LOSSY)return this.lossyDC;if(t===ye.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.subscriber.getLocalDescription(),a=this.pcManager.subscriber.getRemoteDescription(),o=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array,l=new Array;t.forEach(u=>{u.isDesired!==o&&c.push(u.trackSid),u.isEnabled||l.push(u.trackSid)}),this.client.sendSyncState(new qg({answer:s?Ec({sdp:s.sdp,type:s.type}):void 0,offer:a?Ec({sdp:a.sdp,type:a.type}):void 0,subscription:new dc({trackSids:c,subscribe:!o,participantTracks:[]}),publishTracks:kP(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l,datachannelReceiveStates:this.reliableReceivedState.map((u,d)=>new Xg({publisherSid:d,lastSeq:u}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&t.push(new Fg({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(ye.LOSSY),In.PUBLISHER),n(this.dataChannelForKind(ye.RELIABLE),In.PUBLISHER),n(this.dataChannelForKind(ye.LOSSY,!0),In.SUBSCRIBER),n(this.dataChannelForKind(ye.RELIABLE,!0),In.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Lt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){nn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){nn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Ps extends Error{}function dR(e){return e!==void 0&&e>13}function hR(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const r=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=r,t.destinationIdentities=r}class th{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return Pd(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return I(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Ie.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return I(this,void 0,void 0,function*(){const n=yield fetch("".concat(pR(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new et("Could not fetch region settings: ".concat(n.statusText),n.status===401?De.NotAllowed:De.InternalError,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function pR(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class kb{get info(){return this._info}constructor(t,n,r){this.reader=n,this.totalByteSize=r,this._info=t,this.bytesReceived=0}}class fR extends kb{handleChunkReceived(t){var n;this.bytesReceived+=t.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const t=this.reader.getReader();return{next:()=>I(this,void 0,void 0,function*(){try{const{done:n,value:r}=yield t.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:r.content})}catch{return{done:!0,value:void 0}}}),return(){return I(this,void 0,void 0,function*(){return t.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return I(this,void 0,void 0,function*(){var t,n,r,i;let s=new Set;try{for(var a=!0,o=_r(this),c;c=yield o.next(),t=c.done,!t;a=!0){i=c.value,a=!1;const l=i;s.add(l)}}catch(l){n={error:l}}finally{try{!a&&!t&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Array.from(s)})}}class mR extends kb{constructor(t,n,r){super(t,n,r),this.receivedChunks=new Map}handleChunkReceived(t){var n;const r=Sc(t.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>t.version)return;this.receivedChunks.set(r,t),this.bytesReceived+=t.content.byteLength;const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const t=this.reader.getReader(),n=new TextDecoder;return{next:()=>I(this,void 0,void 0,function*(){try{const{done:r,value:i}=yield t.read();return r?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:n.decode(i.content)})}catch{return{done:!0,value:void 0}}}),return(){return I(this,void 0,void 0,function*(){return t.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return I(this,void 0,void 0,function*(){var t,n,r,i;let s="";try{for(var a=!0,o=_r(this),c;c=yield o.next(),t=c.done,!t;a=!0)i=c.value,a=!1,s+=i}catch(l){n={error:l}}finally{try{!a&&!t&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return s})}}class yb{constructor(t,n,r){this.writableStream=t,this.defaultWriter=t.getWriter(),this.onClose=r,this.info=n}write(t){return this.defaultWriter.write(t)}close(){return I(this,void 0,void 0,function*(){var t;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(t=this.onClose)===null||t===void 0||t.call(this)})}}class OR extends yb{}class gR extends yb{}class Sb extends Z{constructor(t,n,r,i,s){super(t,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?J.Muted:J.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(J.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Wd)),yP()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(J.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};t()}}class vR extends Sb{constructor(t,n,r,i,s,a){super(t,n,Z.Kind.Audio,r,a),this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=wc(o,this.prevStats)),this.prevStats=o}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;Hn()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(Hn())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return I(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(xd(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&xd(t)&&t.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(J.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(J.AudioPlaybackFailed,i)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const nh=100;class bR extends Sb{constructor(t,n,r,i,s){super(t,n,Z.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=wc(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=Zd(()=>{this.updateDimensions()},nh),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?_s(this._mediaStreamTrack,n):Ss(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new TR(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",i=new Map;return t.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var t,n;const r=this.elementInfos.reduce((o,c)=>Math.max(o,c.visibilityChangedAt||0),0),i=!((n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(o=>o.pictureInPicture),a=this.elementInfos.some(o=>o.visible)&&!i||s;if(this.lastVisible!==a){if(!a&&Date.now()-r<nh){Lt.setTimeout(()=>{this.updateVisibility()},nh);return}this.lastVisible=a,this.emit(J.VisibilityChanged,a,this)}}updateDimensions(){var t,n;let r=0,i=0;const s=this.getPixelDensity();for(const a of this.elementInfos){const o=a.width()*s,c=a.height()*s;o+c>r+i&&(r=o,i=c)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(J.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?Fv():n||(Fv()>2?2:1)}}class TR{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:a}=r;s===this.element&&(this.isIntersecting=a,this.isPiP=Na(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Na(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Na(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??rh(t),this.isPiP=nn()&&Na(t),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var t,n,r;this.isIntersecting=rh(this.element),this.isPiP=Na(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,zv().observe(this.element),Bv().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(t=window.documentPictureInPicture)===null||t===void 0||t.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var t,n,r,i,s;(t=zv())===null||t===void 0||t.unobserve(this.element),(n=Bv())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Na(e){var t,n;return document.pictureInPictureElement===e?!0:!((t=window.documentPictureInPicture)===null||t===void 0)&&t.window?rh(e,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function rh(e,t){const n=t||window;let r=e.offsetTop,i=e.offsetLeft;const s=e.offsetWidth,a=e.offsetHeight,{hidden:o}=e,{display:c}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,r+=e.offsetTop,i+=e.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+a>n.pageYOffset&&i+s>n.pageXOffset&&!o&&c!=="none"}class xr extends Wn.EventEmitter{constructor(t,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=dn.NONE,this.log=Ie,this.handleMuted=()=>{this.emit(J.Muted)},this.handleUnmuted=()=>{this.emit(J.Unmuted)},this.log=Sr((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:Qn.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=Z.Source.Unknown}setTrack(t){this.track&&(this.track.off(J.Muted,this.handleMuted),this.track.off(J.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(J.Muted,this.handleMuted),t.on(J.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ce(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==dn.NONE}get audioTrack(){if(Jn(this.track))return this.track}get videoTrack(){if(Ui(this.track))return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=Z.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===Z.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(xr||(xr={}));class ih extends xr{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(J.Ended)},this.handleCpuConstrained=()=>{this.track&&Ui(this.track)&&this.emit(J.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&(this.track.off(J.Ended,this.handleTrackEnded),this.track.off(J.CpuConstrained,this.handleCpuConstrained)),super.setTrack(t),t&&(t.on(J.Ended,this.handleTrackEnded),t.on(J.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return I(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return I(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return I(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return I(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(Jn(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(At.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(At.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(At.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(At.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||r.add(At.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(At.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Pc(e,t){return I(this,void 0,void 0,function*(){e??(e={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=Yv(e);let a=s.audio,o=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),e.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const d=s.audio.deviceId;s.audio.deviceId={exact:d},n=!0,a=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:d}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const d=s.video.deviceId;s.video.deviceId={exact:d},n=!0,o=Object.assign(Object.assign({},s.video),{deviceId:{ideal:d}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const c=Vv(s,cb,lb),l=Ld(c),u=navigator.mediaDevices.getUserMedia(l);s.audio&&(It.userMediaPromiseMap.set("audioinput",u),u.catch(()=>It.userMediaPromiseMap.delete("audioinput"))),s.video&&(It.userMediaPromiseMap.set("videoinput",u),u.catch(()=>It.userMediaPromiseMap.delete("videoinput")));try{const d=yield u;return yield Promise.all(d.getTracks().map(h=>I(this,void 0,void 0,function*(){const p=h.kind==="audio";let O=p?c.audio:c.video;(typeof O=="boolean"||!O)&&(O={});let m;const b=p?l.audio:l.video;typeof b!="boolean"&&(m=b);const v=h.getSettings().deviceId;m!=null&&m.deviceId&&ei(m.deviceId)!==v?m.deviceId=v:m||(m={deviceId:v});const k=YP(h,m,t);return k.kind===Z.Kind.Video?k.source=Z.Source.Camera:k.kind===Z.Kind.Audio&&(k.source=Z.Source.Microphone),k.mediaStream=d,Jn(k)&&r?yield k.setProcessor(r):Ui(k)&&i&&(yield k.setProcessor(i)),k})))}catch(d){if(!n)throw d;return Pc(Object.assign(Object.assign({},e),{audio:a,video:o}),t)}})}function kR(e){return I(this,void 0,void 0,function*(){return(yield Pc({audio:!1,video:!0}))[0]})}function _b(e){return I(this,void 0,void 0,function*(){return(yield Pc({audio:e??!0,video:!1}))[0]})}var ri;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(ri||(ri={}));function yR(e){switch(e){case _a.EXCELLENT:return ri.Excellent;case _a.GOOD:return ri.Good;case _a.POOR:return ri.Poor;case _a.LOST:return ri.Lost;default:return ri.Unknown}}class Eb extends Wn.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===wa.AGENT}get isActive(){var t;return((t=this.participantInfo)===null||t===void 0?void 0:t.state)===bs.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,r,i,s,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:wa.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ri.Unknown,this.log=Ie,this.log=Sr((c=a==null?void 0:a.loggerName)!==null&&c!==void 0?c:Qn.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=o,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new ws,this.once(re.Active,()=>{var t,n;(n=(t=this.activeFuture)===null||t===void 0?void 0:t.resolve)===null||n===void 0||n.call(t),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(Z.Source.Camera);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(Z.Source.Microphone);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(Z.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){var n;return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.state===bs.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==bs.ACTIVE&&this.emit(re.Active),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit(re.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(re.ParticipantNameChanged,t)}_setAttributes(t){const n=SP(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(re.AttributesChanged,n)}setPermissions(t){var n,r,i,s,a,o;const c=this.permissions,l=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||t.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||t.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((u,d)=>{var h;return u!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishSources[d])})||t.canSubscribeMetrics!==((o=this.permissions)===null||o===void 0?void 0:o.canSubscribeMetrics);return this.permissions=t,l&&this.emit(re.ParticipantPermissionsChanged,c),l}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(re.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=yR(t),n!==this._connectionQuality&&this.emit(re.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var t,n;this.activeFuture&&((n=(t=this.activeFuture).reject)===null||n===void 0||n.call(t,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>Jn(n.track)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(J.Muted,()=>{this.emit(re.TrackMuted,t)}),t.on(J.Unmuted,()=>{this.emit(re.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case Z.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case Z.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function SR(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new Mg({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}const wb=15e3;class _R extends Eb{constructor(t,n,r,i,s){super(t,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=dn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ws)},this.handleReconnected=()=>{var a,o;(o=(a=this.reconnectFuture)===null||a===void 0?void 0:a.resolve)===null||o===void 0||o.call(a),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var a,o,c,l,u,d;this.reconnectFuture&&(this.reconnectFuture.promise.catch(h=>this.log.warn(h.message,this.logContext)),(o=(a=this.reconnectFuture)===null||a===void 0?void 0:a.reject)===null||o===void 0||o.call(a,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((l=(c=this.signalConnectedFuture).reject)===null||l===void 0||l.call(c,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(d=(u=this.activeAgentFuture)===null||u===void 0?void 0:u.reject)===null||d===void 0||d.call(u,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=a=>{var o,c;a.participant&&this.updateInfo(a.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ws),(c=(o=this.signalConnectedFuture).resolve)===null||c===void 0||c.call(o)},this.handleSignalRequestResponse=a=>{const{requestId:o,reason:c,message:l}=a,u=this.pendingSignalRequests.get(o);u&&(c!==od.OK&&u.reject(new Dv(l,c)),this.pendingSignalRequests.delete(o))},this.handleDataPacket=a=>{switch(a.value.case){case"rpcResponse":let o=a.value.value,c=null,l=null;o.value.case==="payload"?c=o.value.value:o.value.case==="error"&&(l=mt.fromProto(o.value.value)),this.handleIncomingRpcResponse(o.requestId,c,l);break;case"rpcAck":let u=a.value.value;this.handleIncomingRpcAck(u.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(a=>SR(a)))},this.onTrackUnmuted=a=>{this.onTrackMuted(a,a.isUpstreamPaused)},this.onTrackMuted=(a,o)=>{if(o===void 0&&(o=!0),!a.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ce(a)));return}this.engine.updateMuteStatus(a.sid,o)},this.onTrackUpstreamPaused=a=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ce(a))),this.onTrackMuted(a,!0)},this.onTrackUpstreamResumed=a=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ce(a))),this.onTrackMuted(a,a.isMuted)},this.onTrackFeatureUpdate=a=>{const o=this.audioTrackPublications.get(a.sid);if(!o){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(a.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(o.trackSid,o.getTrackFeatures())},this.onTrackCpuConstrained=(a,o)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),Ce(o))),this.emit(re.LocalTrackCpuConstrained,a,o)},this.handleSubscribedQualityUpdate=a=>I(this,void 0,void 0,function*(){var o,c,l,u,d;if(!(!((d=this.roomOptions)===null||d===void 0)&&d.dynacast))return;const h=this.videoTrackPublications.get(a.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}if(!h.videoTrack)return;const p=yield h.videoTrack.setPublishingCodecs(a.subscribedCodecs);try{for(var O=!0,m=_r(p),b;b=yield m.next(),o=b.done,!o;O=!0){u=b.value,O=!1;const v=u;eP(v)&&(this.log.debug("publish ".concat(v," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ce(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,v,h.options))}}catch(v){c={error:v}}finally{try{!O&&!o&&(l=m.return)&&(yield l.call(m))}finally{if(c)throw c.error}}}),this.handleLocalTrackUnpublished=a=>{const o=this.trackPublications.get(a.trackSid);if(!o){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}this.unpublishTrack(o.track)},this.handleTrackEnded=a=>I(this,void 0,void 0,function*(){if(a.source===Z.Source.ScreenShare||a.source===Z.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ce(a))),this.unpublishTrack(a);else if(a.isUserProvided)yield a.mute();else if(wr(a)||ti(a))try{if(nn())try{const o=yield navigator==null?void 0:navigator.permissions.query({name:a.source===Z.Source.Camera?"camera":"microphone"});if(o&&o.state==="denied")throw this.log.warn("user has revoked access to ".concat(a.source),Object.assign(Object.assign({},this.logContext),Ce(a))),o.onchange=()=>{o.state!=="denied"&&(a.isMuted||a.restartTrack(),o.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}a.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ce(a))),wr(a)?yield a.restartTrack({deviceId:"default"}):yield a.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ce(a))),yield a.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==dn.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){var n;this.engine=t,this.engine.on(te.RemoteMute,(r,i)=>{const s=this.trackPublications.get(r);!s||!s.track||(i?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(te.Connected,this.handleReconnected).on(te.SignalConnected,this.handleSignalConnected).on(te.SignalRestarted,this.handleReconnected).on(te.SignalResumed,this.handleReconnected).on(te.Restarting,this.handleReconnecting).on(te.Resuming,this.handleReconnecting).on(te.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(te.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(te.Disconnected,this.handleDisconnected).on(te.SignalRequestResponse,this.handleSignalRequestResponse).on(te.DataPacketReceived,this.handleDataPacket)}setMetadata(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return I(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:a}=n;return function*(){return new Promise((o,c)=>I(r,void 0,void 0,function*(){var l,u;try{let d=!1;const h=yield this.engine.client.sendUpdateLocalMetadata((l=i??this.metadata)!==null&&l!==void 0?l:"",(u=s??this.name)!==null&&u!==void 0?u:"",a),p=performance.now();for(this.pendingSignalRequests.set(h,{resolve:o,reject:O=>{c(O),d=!0},values:{name:s,metadata:i,attributes:a}});performance.now()-p<5e3&&!d;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!a||Object.entries(a).every(O=>{let[m,b]=O;return this.attributes[m]===b||b===""&&!this.attributes[m]}))){this.pendingSignalRequests.delete(h),o();return}yield tn(50)}c(new Dv("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&c(d)}}))}()})}setCameraEnabled(t,n,r){return this.setTrackEnabled(Z.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(Z.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(Z.Source.ScreenShare,t,n,r)}setPermissions(t){const n=this.permissions,r=super.setPermissions(t);return r&&n&&this.emit(re.ParticipantPermissionsChanged,n),r}setE2EEEnabled(t){return I(this,void 0,void 0,function*(){this.encryptionType=t?dn.GCM:dn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,i){return I(this,void 0,void 0,function*(){var s,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let o=this.getTrackPublication(t);if(n)if(o)yield o.unmute();else{let c;if(this.pendingPublishing.has(t)){const l=yield this.waitForPendingPublicationOfSource(t);return l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t})),yield l==null?void 0:l.unmute(),l}this.pendingPublishing.add(t);try{switch(t){case Z.Source.Camera:c=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case Z.Source.Microphone:c=yield this.createTracks({audio:(a=r)!==null&&a!==void 0?a:!0});break;case Z.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Er(t)}}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&this.emit(re.MediaDevicesError,l,Md(t)),this.pendingPublishing.delete(t),l}for(const l of c)t===Z.Source.Microphone&&Jn(l)&&(i!=null&&i.preConnectBuffer)&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),l.startPreConnectBuffer());try{const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ce(d))),l.push(this.publishTrack(d,i));[o]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l}finally{this.pendingPublishing.delete(t)}}else if(!(o!=null&&o.track)&&this.pendingPublishing.has(t)&&(o=yield this.waitForPendingPublicationOfSource(t),o||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t}))),o&&o.track)if(t===Z.Source.ScreenShare){o=yield this.unpublishTrack(o.track);const c=this.getTrackPublication(Z.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield o.mute();return o})}enableCameraAndMicrophone(){return I(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Z.Source.Camera)||this.pendingPublishing.has(Z.Source.Microphone))){this.pendingPublishing.add(Z.Source.Camera),this.pendingPublishing.add(Z.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Z.Source.Camera),this.pendingPublishing.delete(Z.Source.Microphone)}}})}createTracks(t){return I(this,void 0,void 0,function*(){var n,r;t??(t={});const i=Vv(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield Pc(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(o=>(Jn(o)&&(this.microphoneError=void 0,o.setAudioContext(this.audioContext),o.source=Z.Source.Microphone,this.emit(re.AudioStreamAcquired)),Ui(o)&&(this.cameraError=void 0,o.source=Z.Source.Camera),o))}catch(s){throw s instanceof Error&&(t.audio&&(this.microphoneError=s),t.video&&(this.cameraError=s)),s}})}createScreenTracks(t){return I(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new vd("getDisplayMedia not supported");t.resolution===void 0&&!aP()&&(t.resolution=_d.h1080fps30.resolution);const n=TP(t),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Er("no video track found");const s=new Cc(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=Z.Source.ScreenShare,t.contentHint&&(s.mediaStreamTrack.contentHint=t.contentHint);const a=[s];if(r.getAudioTracks().length>0){this.emit(re.AudioStreamAcquired);const o=new xc(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=Z.Source.ScreenShareAudio,a.push(o)}return a})}publishTrack(t,n){return I(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return I(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var o,c,l,u;wr(r)&&r.setAudioContext(s.audioContext),yield(o=s.reconnectFuture)===null||o===void 0?void 0:o.promise,s.republishPromise&&!a&&(yield s.republishPromise),xs(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let d;if(r instanceof MediaStreamTrack)d=r.getConstraints();else{d=r.constraints;let v;switch(r.source){case Z.Source.Microphone:v="audioinput";break;case Z.Source.Camera:v="videoinput"}v&&s.activeDeviceMap.has(v)&&(d=Object.assign(Object.assign({},d),{deviceId:s.activeDeviceMap.get(v)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new xc(r,d,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new Cc(r,d,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Er("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let h;if(s.trackPublications.forEach(v=>{v.track&&v.track===r&&(h=v)}),h)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),Ce(h))),h;const p="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,O=(c=i==null?void 0:i.forceStereo)!==null&&c!==void 0?c:p;O&&(i||(i={}),i.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),Ce(r))),i.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(l=i.dtx)!==null&&l!==void 0||(i.dtx=!1),(u=i.red)!==null&&u!==void 0||(i.red=!1));const m=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i);!cP()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),m.simulcast=!1),m.source&&(r.source=m.source);const b=new Promise((v,k)=>I(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==st.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Ce(r)}));const y=setTimeout(()=>{k(new Nv("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(y);const T=yield this.publish(r,m,O);v(T)}else try{const y=yield this.publish(r,m,O);v(y)}catch(y){k(y)}}catch(y){k(y)}}));s.pendingPublishPromises.set(r,b);try{return yield b}catch(v){throw v}finally{s.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ws),this.signalConnectedFuture.promise}hasPermissionsToPublish(t){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Ce(t))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>_P(i)).includes(t.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Ce(t))),!1)}publish(t,n,r){return I(this,void 0,void 0,function*(){var i,s,a,o,c,l,u,d,h,p;if(!this.hasPermissionsToPublish(t))throw new Nv("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find($=>xs(t)&&$.source===t.source)&&t.source!==Z.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),Ce(t))),n.stopMicTrackOnMute&&Jn(t)&&(t.stopOnMute=!0),t.source===Z.Source.ScreenShare&&Es()&&(n.simulcast=!1),n.videoCodec==="av1"&&!rP()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!iP()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=jd),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some($=>n.videoCodec===_c($.mime))||(n.videoCodec=_c(this.enabledPublishVideoCodecs[0].mime)));const m=n.videoCodec;t.on(J.Muted,this.onTrackMuted),t.on(J.Unmuted,this.onTrackUnmuted),t.on(J.Ended,this.handleTrackEnded),t.on(J.UpstreamPaused,this.onTrackUpstreamPaused),t.on(J.UpstreamResumed,this.onTrackUpstreamResumed),t.on(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=[],v=!(!((i=n.dtx)!==null&&i!==void 0)||i),k=t.getSourceTrackSettings();k.autoGainControl&&b.push(At.TF_AUTO_GAIN_CONTROL),k.echoCancellation&&b.push(At.TF_ECHO_CANCELLATION),k.noiseSuppression&&b.push(At.TF_NOISE_SUPPRESSION),k.channelCount&&k.channelCount>1&&b.push(At.TF_STEREO),v&&b.push(At.TF_NO_DTX),wr(t)&&t.hasPreConnectBuffer&&b.push(At.TF_PRECONNECT_BUFFER);const y=new nd({cid:t.mediaStreamTrack.id,name:n.name,type:Z.kindToProto(t.kind),muted:t.isMuted,source:Z.sourceToProto(t.source),disableDtx:v,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:b});let T;if(t.kind===Z.Kind.Video){let $={width:0,height:0};try{$=yield t.waitForDimensions()}catch{const D=(o=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&o!==void 0?o:Aa.h720.resolution;$={width:D.width,height:D.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(t)),{dims:$}))}y.width=$.width,y.height=$.height,ti(t)&&(Yn(m)&&(t.source===Z.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ce(t))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),y.simulcastCodecs=[new td({codec:m,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:jd}),n.backupCodec&&m!==n.backupCodec.codec&&y.encryption===dn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),y.simulcastCodecs.push(new td({codec:n.backupCodec.codec,cid:""})))),T=Kd(t.source===Z.Source.ScreenShare,y.width,y.height,n),y.layers=vb(y.width,y.height,T,Yn(n.videoCodec))}else t.kind===Z.Kind.Audio&&(T=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new Ct("cannot publish track when not connected");const _=()=>I(this,void 0,void 0,function*(){var $,x,D;if(!this.engine.pcManager)throw new Ct("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,T),this.emit(re.LocalSenderCreated,t.sender,t),ti(t)&&(($=n.degradationPreference)!==null&&$!==void 0||(n.degradationPreference=aR(t)),t.setDegradationPreference(n.degradationPreference)),T)if(Es()&&t.kind===Z.Kind.Audio){let L;for(const V of this.engine.pcManager.publisher.getTransceivers())if(V.sender===t.sender){L=V;break}L&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:L,codec:"opus",maxbr:!((x=T[0])===null||x===void 0)&&x.maxBitrate?T[0].maxBitrate/1e3:0})}else t.codec&&Yn(t.codec)&&(!((D=T[0])===null||D===void 0)&&D.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:y.cid,codec:t.codec,maxbr:T[0].maxBitrate/1e3});yield this.engine.negotiate()});let S;const C=new Promise(($,x)=>I(this,void 0,void 0,function*(){var D;try{S=yield this.engine.addTrack(y),$(S)}catch(L){t.sender&&(!((D=this.engine.pcManager)===null||D===void 0)&&D.publisher)&&(this.engine.pcManager.publisher.removeTrack(t.sender),yield this.engine.negotiate().catch(V=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(t)),{error:V}))})),x(L)}}));if(this.enabledPublishVideoCodecs.length>0)S=(yield Promise.all([C,_()]))[0];else{S=yield C;let $;if(S.codecs.forEach(x=>{$===void 0&&($=x.mimeType)}),$&&t.kind===Z.Kind.Video){const x=_c($);x!==m&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(t)),{codec:x})),n.videoCodec=x,T=Kd(t.source===Z.Source.ScreenShare,y.width,y.height,n))}yield _()}const N=new ih(t.kind,S,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(N.on(J.CpuConstrained,$=>this.onTrackCpuConstrained($,N)),N.options=n,t.sid=S.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:T,trackInfo:S})),ti(t)?t.startMonitor(this.engine.client):wr(t)&&t.startMonitor(),this.addTrackPublication(N),this.emit(re.LocalTrackPublished,N),wr(t)&&S.audioFeatures.includes(At.TF_PRECONNECT_BUFFER)){const $=t.getPreConnectBuffer();this.on(re.LocalTrackSubscribed,x=>{if(x.trackSid===S.sid){if(!t.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Ce(t))),t.stopPreConnectBuffer()}}),$&&new Promise((D,L)=>I(this,void 0,void 0,function*(){var V,F,U,H,se,B;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Ce(t)));const Ae=setTimeout(()=>{L(new Error("agent not active within 10 seconds"))},1e4),R=yield this.waitUntilActiveAgentPresent();clearTimeout(Ae),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Ce(t)));const Oe=yield this.streamBytes({name:"preconnect-buffer",mimeType:"audio/opus",topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[R.identity],attributes:{trackId:N.trackSid,sampleRate:String((se=k.sampleRate)!==null&&se!==void 0?se:"48000"),channels:String((B=k.channelCount)!==null&&B!==void 0?B:"1")}});try{for(var de=!0,A=_r($),xe;xe=yield A.next(),V=xe.done,!V;de=!0){H=xe.value,de=!1;const Ge=H;yield Oe.write(Ge)}}catch(Ge){F={error:Ge}}finally{try{!de&&!V&&(U=A.return)&&(yield U.call(A))}finally{if(F)throw F.error}}yield Oe.close(),D()}catch(Ae){L(Ae)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Ce(t)))}).catch(D=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(t)),{error:D}))})}return N})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){return I(this,void 0,void 0,function*(){var i;if(this.encryptionType!==dn.NONE)return;let s;if(this.trackPublications.forEach(p=>{p.track&&p.track===t&&(s=p)}),!s)throw new Er("track is not published");if(!ti(t))throw new Er("track is not a video track");const a=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),o=rR(t,n,a);if(!o){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ce(t)));return}const c=t.addSimulcastTrack(n,o);if(!c)return;const l=new nd({cid:c.mediaStreamTrack.id,type:Z.kindToProto(t.kind),muted:t.isMuted,source:Z.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:a.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=vb(l.width,l.height,o),!this.engine||this.engine.isClosed)throw new Ct("cannot publish track when not connected");const u=()=>I(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,c,a,o),yield this.engine.negotiate()}),h=(yield Promise.all([this.engine.addTrack(l),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:o,trackInfo:h}))})}unpublishTrack(t,n){return I(this,void 0,void 0,function*(){var r,i;if(xs(t)){const l=this.pendingPublishPromises.get(t);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ce(t))),yield l)}const s=this.getPublicationForTrack(t),a=s?Ce(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}t=s.track,t.off(J.Muted,this.onTrackMuted),t.off(J.Unmuted,this.onTrackUnmuted),t.off(J.Ended,this.handleTrackEnded),t.off(J.UpstreamPaused,this.onTrackUpstreamPaused),t.off(J.UpstreamResumed,this.onTrackUpstreamResumed),t.off(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?t.stop():t.stopMonitor();let o=!1;const c=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<ft.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",o=!0);if(this.engine.removeTrack(c)&&(o=!0),ti(t)){for(const[,l]of t.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(o=!0),l.sender=void 0);t.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:l}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case Z.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case Z.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(re.LocalTrackUnpublished,s),s.setTrack(void 0),o&&(yield this.engine.negotiate()),s})}unpublishTracks(t){return I(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,a)=>I(r,void 0,void 0,function*(){try{const o=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),o.push(c))}),yield Promise.all(o.map(c=>I(this,void 0,void 0,function*(){const l=c.track;yield this.unpublishTrack(l,!1),i&&!l.isMuted&&l.source!==Z.Source.ScreenShare&&l.source!==Z.Source.ScreenShareAudio&&(wr(l)||ti(l))&&!l.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield l.restartTrack()),yield this.publishOrRepublishTrack(l,c.options,!0)}))),s()}catch(o){a(o)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(t){return I(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=i.reliable?ye.RELIABLE:ye.LOSSY,a=i.destinationIdentities,o=i.topic,c=new en({kind:s,value:{case:"user",value:new gg({participantIdentity:r.identity,payload:n,destinationIdentities:a,topic:o})}});yield r.engine.sendDataPacket(c,s)}()})}publishDtmf(t,n){return I(this,void 0,void 0,function*(){const r=new en({kind:ye.RELIABLE,value:{case:"sipDtmf",value:new vg({code:t,digit:n})}});yield this.engine.sendDataPacket(r,ye.RELIABLE)})}sendChatMessage(t,n){return I(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:t,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new en({value:{case:"chatMessage",value:new Wu(Object.assign(Object.assign({},r),{timestamp:ut.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,ye.RELIABLE),this.emit(re.ChatMessage,r),r})}editChatMessage(t,n){return I(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),i=new en({value:{case:"chatMessage",value:new Wu(Object.assign(Object.assign({},r),{timestamp:ut.parse(r.timestamp),editTimestamp:ut.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,ye.RELIABLE),this.emit(re.ChatMessage,r),r})}sendText(t,n){return I(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),a=new TextEncoder().encode(t).byteLength,o=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),c=new Array(o?o.length+1:1).fill(0),l=(d,h)=>{var p;c[h]=d;const O=c.reduce((m,b)=>m+b,0);(p=n==null?void 0:n.onProgress)===null||p===void 0||p.call(n,O)},u=yield this.streamText({streamId:i,totalSize:a,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:o,attributes:n==null?void 0:n.attributes});return yield u.write(t),l(1,0),yield u.close(),n!=null&&n.attachments&&o&&(yield Promise.all(n.attachments.map((d,h)=>I(this,void 0,void 0,function*(){return this._sendFile(o[h],d,{topic:n.topic,mimeType:d.type,onProgress:p=>{l(p,h+1)}})})))),u.info})}streamText(t){return I(this,void 0,void 0,function*(){var n,r;const i=(n=t==null?void 0:t.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),s={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:(r=t==null?void 0:t.topic)!==null&&r!==void 0?r:"",size:t==null?void 0:t.totalSize,attributes:t==null?void 0:t.attributes},a=new Hu({streamId:i,mimeType:s.mimeType,topic:s.topic,timestamp:Mi(s.timestamp),totalLength:Mi(t==null?void 0:t.totalSize),attributes:s.attributes,contentHeader:{case:"textHeader",value:new Rg({version:t==null?void 0:t.version,attachedStreamIds:t==null?void 0:t.attachedStreamIds,replyToStreamId:t==null?void 0:t.replyToStreamId,operationType:(t==null?void 0:t.type)==="update"?Yu.UPDATE:Yu.CREATE})}}),o=t==null?void 0:t.destinationIdentities,c=new en({destinationIdentities:o,value:{case:"streamHeader",value:a}});yield this.engine.sendDataPacket(c,ye.RELIABLE);let l=0;const u=this,d=new WritableStream({write(O){return I(this,void 0,void 0,function*(){for(const m of vP(O,wb)){yield u.engine.waitForBufferStatusLow(ye.RELIABLE);const b=new Ku({content:m,streamId:i,chunkIndex:Mi(l)}),v=new en({destinationIdentities:o,value:{case:"streamChunk",value:b}});yield u.engine.sendDataPacket(v,ye.RELIABLE),l+=1}})},close(){return I(this,void 0,void 0,function*(){const O=new Ju({streamId:i}),m=new en({destinationIdentities:o,value:{case:"streamTrailer",value:O}});yield u.engine.sendDataPacket(m,ye.RELIABLE)})},abort(O){console.log("Sink error:",O)}});let h=()=>I(this,void 0,void 0,function*(){yield p.close()});u.engine.once(te.Closing,h);const p=new OR(d,s,()=>this.engine.off(te.Closing,h));return p})}sendFile(t,n){return I(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,t,n),{id:r}})}_sendFile(t,n,r){return I(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:t,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:o,value:c}=yield a.read();if(o)break;yield s.write(c)}return yield s.close(),s.info})}streamBytes(t){return I(this,void 0,void 0,function*(){var n,r,i,s,a;const o=(n=t==null?void 0:t.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),c=t==null?void 0:t.destinationIdentities,l={id:o,mimeType:(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=t==null?void 0:t.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:t==null?void 0:t.attributes,size:t==null?void 0:t.totalSize,name:(s=t==null?void 0:t.name)!==null&&s!==void 0?s:"unknown"},u=new Hu({totalLength:Mi((a=l.size)!==null&&a!==void 0?a:0),mimeType:l.mimeType,streamId:o,topic:l.topic,timestamp:Mi(Date.now()),attributes:l.attributes,contentHeader:{case:"byteHeader",value:new Ag({name:l.name})}}),d=new en({destinationIdentities:c,value:{case:"streamHeader",value:u}});yield this.engine.sendDataPacket(d,ye.RELIABLE);let h=0;const p=new Gt,O=this.engine,m=this.log,b=new WritableStream({write(k){return I(this,void 0,void 0,function*(){const y=yield p.lock();let T=0;try{for(;T<k.byteLength;){const _=k.slice(T,T+wb);yield O.waitForBufferStatusLow(ye.RELIABLE);const S=new en({destinationIdentities:c,value:{case:"streamChunk",value:new Ku({content:_,streamId:o,chunkIndex:Mi(h)})}});yield O.sendDataPacket(S,ye.RELIABLE),h+=1,T+=_.byteLength}}finally{y()}})},close(){return I(this,void 0,void 0,function*(){const k=new Ju({streamId:o}),y=new en({destinationIdentities:c,value:{case:"streamTrailer",value:k}});yield O.sendDataPacket(y,ye.RELIABLE)})},abort(k){m.error("Sink error:",k)}});return new gR(b,l)})}performRpc(t){return I(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:a,responseTimeout:o=1e4}=n;return function*(){return new Promise((l,u)=>I(r,void 0,void 0,function*(){var d,h,p,O;if(Gd(a)>ub){u(mt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((h=(d=this.engine.latestJoinResponse)===null||d===void 0?void 0:d.serverInfo)===null||h===void 0)&&h.version&&Kn((O=(p=this.engine.latestJoinResponse)===null||p===void 0?void 0:p.serverInfo)===null||O===void 0?void 0:O.version,"1.8.0")<0){u(mt.builtIn("UNSUPPORTED_SERVER"));return}const m=crypto.randomUUID();yield this.publishRpcRequest(i,m,s,a,o-2e3);const b=setTimeout(()=>{this.pendingAcks.delete(m),u(mt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(m),clearTimeout(v)},2e3);this.pendingAcks.set(m,{resolve:()=>{clearTimeout(b)},participantIdentity:i});const v=setTimeout(()=>{this.pendingResponses.delete(m),u(mt.builtIn("RESPONSE_TIMEOUT"))},o);this.pendingResponses.set(m,{resolve:(k,y)=>{clearTimeout(v),this.pendingAcks.has(m)&&(console.warn("RPC response received before ack",m),this.pendingAcks.delete(m),clearTimeout(b)),y?u(y):l(k??"")},participantIdentity:i})}))}()})}registerRpcMethod(t,n){this.rpcHandlers.has(t)&&this.log.warn("you're overriding the RPC handler for method ".concat(t,", in the future this will throw an error")),this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(t){const n=this.pendingAcks.get(t);n?(n.resolve(),this.pendingAcks.delete(t)):console.error("Ack received for unexpected RPC request",t)}handleIncomingRpcResponse(t,n,r){const i=this.pendingResponses.get(t);i?(i.resolve(n,r),this.pendingResponses.delete(t)):console.error("Response received for unexpected RPC request",t)}publishRpcRequest(t,n,r,i,s){return I(this,void 0,void 0,function*(){const a=new en({destinationIdentities:[t],kind:ye.RELIABLE,value:{case:"rpcRequest",value:new bg({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(a,ye.RELIABLE)})}handleParticipantDisconnected(t){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===t&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===t&&(i(null,mt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return super.updateInfo(t)?(t.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const a=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(s)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(t){var n,r,i,s;this.firstActiveAgent=t,t&&!this.firstActiveAgent&&(this.firstActiveAgent=t),t?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,t):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ws),this.activeAgentFuture.promise)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(t instanceof MediaStreamTrack?(wr(i)||ti(i))&&i.mediaStreamTrack===t&&(n=r):t===i&&(n=r))}),n}waitForPendingPublicationOfSource(t){return I(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[a]=s;return a.source===t});if(i)return i[1];yield tn(20)}})}}class ER extends xr{constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(J.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const i=new dc({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Sg({participantSid:"",trackSids:[this.trackSid]})]});this.emit(J.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?xr.SubscriptionStatus.Unsubscribed:super.isSubscribed?xr.SubscriptionStatus.Subscribed:xr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?xr.PermissionStatus.Allowed:xr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(t){!this.isManualOperationAllowed()||this.requestedDisabled===!t||(this.requestedDisabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.requestedMaxQuality===t||(this.requestedMaxQuality=t,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===t.height||(Dd(this.track)&&(this.requestedVideoDimensions=t),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&Dd(this.track)&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){var t;return(t=this.requestedMaxQuality)!==null&&t!==void 0?t:pn.HIGH}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==t&&(i&&(i.off(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(J.VisibilityChanged,this.handleVisibilityChange),i.off(J.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(J.Unsubscribed,i)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(J.VisibilityChanged,this.handleVisibilityChange),t.on(J.Ended,this.handleEnded),this.emit(J.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(J.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?J.Muted:J.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(J.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(J.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Dd(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new Qg({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Z.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)Hv(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=EP(this.trackInfo,this.requestedMaxQuality);r&&Hv(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(t.width=Math.ceil(n.width),t.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),t.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:pn.HIGH})),t.quality=pn.HIGH)}this.emit(J.UpdateSettings,t)}}class Rc extends Eb{static fromParticipantInfo(t,n,r){return new Rc(t,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,r,i,s,a,o){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:wa.STANDARD;super(n,r||"",i,s,a,o,c),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(J.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),Ce(t)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),t.on(J.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(J.SubscriptionPermissionChanged,n=>{this.emit(re.TrackSubscriptionPermissionChanged,t,n)}),t.on(J.SubscriptionStatusChanged,n=>{this.emit(re.TrackSubscriptionStatusChanged,t,n)}),t.on(J.Subscribed,n=>{this.emit(re.TrackSubscribed,n,t)}),t.on(J.Unsubscribed,n=>{this.emit(re.TrackUnsubscribed,n,t)}),t.on(J.SubscriptionFailed,n=>{this.emit(re.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,i,s,a){let o=this.getTrackPublicationBySid(n);if(o||n.startsWith("TR")||this.trackPublications.forEach(u=>{!o&&t.kind===u.kind.toString()&&(o=u)}),!o){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(re.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,i,s,a-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ce(o))),this.emit(re.TrackSubscriptionFailed,n);return}const c=t.kind==="video";let l;return c?l=new bR(t,n,i,s):l=new vR(t,n,i,this.audioContext,this.audioOutput),l.source=o.source,l.isMuted=o.isMuted,l.setMediaStream(r),l.start(),o.setTrack(l),this.volumeMap.has(o.source)&&Nd(l)&&Jn(l)&&l.setVolume(this.volumeMap.get(o.source)),o}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(i=>{var s,a;let o=this.getTrackPublicationBySid(i.sid);if(o)o.updateInfo(i);else{const c=Z.kindFromProto(i.type);if(!c)return;o=new ER(c,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),o.updateInfo(i),r.set(i.sid,o);const l=Array.from(this.trackPublications.values()).find(u=>u.source===(o==null?void 0:o.source));l&&o.source!==Z.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ce(l),newTrack:Ce(o)})),this.addTrackPublication(o)}n.set(i.sid,o)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ce(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(re.TrackPublished,i)}),!0}unpublishTrack(t,n){const r=this.trackPublications.get(t);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(t),r.kind){case Z.Kind.Audio:this.audioTrackPublications.delete(t);break;case Z.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(re.TrackUnpublished,r)}setAudioOutput(t){return I(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(r=>{var i;Jn(r.track)&&Nd(r.track)&&n.push(r.track.setSinkId((i=t.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:r})),super.emit(t,...r)}}var Be;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(Be||(Be={}));const wR=4*1e3;class Rs extends Wn.EventEmitter{constructor(t){var n,r,i,s;if(super(),n=this,this.state=Be.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ie,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(a,o,c)=>I(this,void 0,void 0,function*(){var l;if(!sP())throw Hn()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const u=yield this.disconnectLock.lock();if(this.state===Be.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),u(),Promise.resolve();if(this.connectFuture)return u(),this.connectFuture.promise;this.setAndEmitConnectionState(Be.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==a&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Pd(new URL(a))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new th(a,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().then(p=>{var O;(O=this.regionUrlProvider)===null||O===void 0||O.setServerReportedRegions(p)}).catch(p=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:p}))}));const d=(p,O,m)=>I(this,void 0,void 0,function*(){var b,v;this.abortController&&this.abortController.abort();const k=new AbortController;this.abortController=k,u==null||u();try{yield this.attemptConnection(m??a,o,c,k),this.abortController=void 0,p()}catch(y){if(this.regionUrlProvider&&y instanceof et&&y.reason!==De.Cancelled&&y.reason!==De.NotAllowed){let T=null;try{T=yield this.regionUrlProvider.getNextBestRegionUrl((b=this.abortController)===null||b===void 0?void 0:b.signal)}catch(_){if(_ instanceof et&&(_.status===401||_.reason===De.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),O(_);return}}T&&!(!((v=this.abortController)===null||v===void 0)&&v.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(y.message,". Retrying with another region: ").concat(T),this.logContext),this.recreateEngine(),yield d(p,O,T)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,jv(y)),O(y))}else{let T=An.UNKNOWN_REASON;y instanceof et&&(T=jv(y)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,T),O(y)}}}),h=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ws((p,O)=>{d(p,O,h)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(a,o,c,l,u,d)=>I(this,void 0,void 0,function*(){var h,p,O;const m=yield c.join(a,o,{autoSubscribe:l.autoSubscribe,adaptiveStream:typeof u.adaptiveStream=="object"?!0:u.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout},d.signal);let b=m.serverInfo;if(b||(b={version:m.serverVersion,region:m.serverRegion}),this.serverInfo=b,this.log.debug("connected to Livekit Server ".concat(Object.entries(b).map(v=>{let[k,y]=v;return"".concat(k,": ").concat(y)}).join(", ")),{room:(h=m.room)===null||h===void 0?void 0:h.name,roomSid:(p=m.room)===null||p===void 0?void 0:p.sid,identity:(O=m.participant)===null||O===void 0?void 0:O.identity}),!b.version)throw new zC("unknown server version");return b.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),u.dynacast=!1),m}),this.applyJoinResponse=a=>{const o=a.participant;if(this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.setEnabledPublishCodecs(a.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(a.sifTrailer)}catch(c){this.log.error(c instanceof Error?c.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:c}))}this.handleParticipantUpdates([o,...a.otherParticipants]),a.room&&this.handleRoomUpdate(a.room)},this.attemptConnection=(a,o,c,l)=>I(this,void 0,void 0,function*(){var u,d;this.state===Be.Reconnecting||this.isResuming||!((u=this.engine)===null||u===void 0)&&u.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((d=this.regionUrlProvider)===null||d===void 0)&&d.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Vd),c),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(a,o,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(W.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const p=new et("could not establish signal connection",De.ServerUnreachable);throw h instanceof Error&&(p.message="".concat(p.message,": ").concat(h.message)),h instanceof et&&(p.reason=h.reason,p.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),p}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new et("Connection attempt aborted",De.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}nn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),nn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Be.Connected),this.emit(W.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return I(n,[...o],void 0,function(){var l=this;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var d,h,p,O;const m=yield l.disconnectLock.lock();try{if(l.state===Be.Disconnected){l.log.debug("already disconnected",l.logContext);return}l.log.info("disconnect from room",Object.assign({},l.logContext)),(l.state===Be.Connecting||l.state===Be.Reconnecting||l.isResuming)&&(l.log.warn("abort connection attempt",l.logContext),(d=l.abortController)===null||d===void 0||d.abort(),(p=(h=l.connectFuture)===null||h===void 0?void 0:h.reject)===null||p===void 0||p.call(h,new et("Client initiated disconnect",De.Cancelled)),l.connectFuture=void 0),!((O=l.engine)===null||O===void 0)&&O.client.isDisconnected||(yield l.engine.client.sendLeave()),l.engine&&(yield l.engine.close()),l.handleDisconnect(u,An.CLIENT_INITIATED),l.engine=void 0}finally{m()}}()})},this.onPageLeave=()=>I(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>I(this,void 0,void 0,function*(){const a=[],o=hn();if(o&&o.os==="iOS"){const c="livekit-dummy-audio-el";let l=document.getElementById(c);if(!l){l=document.createElement("audio"),l.id=c,l.autoplay=!0,l.hidden=!0;const u=Id();u.enabled=!0;const d=new MediaStream([u]);l.srcObject=d,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:d,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(W.Disconnected,()=>{l==null||l.remove(),l=null})}a.push(l)}this.remoteParticipants.forEach(c=>{c.audioTrackPublications.forEach(l=>{l.track&&l.track.attachedElements.forEach(u=>{a.push(u)})})});try{yield Promise.all([this.acquireAudioContext(),...a.map(c=>(c.muted=!1,c.play()))]),this.handleAudioPlaybackStarted()}catch(c){throw this.handleAudioPlaybackFailed(c),c}}),this.startVideo=()=>I(this,void 0,void 0,function*(){const a=[];for(const o of this.remoteParticipants.values())o.videoTrackPublications.forEach(c=>{var l;(l=c.track)===null||l===void 0||l.attachedElements.forEach(u=>{a.includes(u)||a.push(u)})});yield Promise.all(a.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const a of this.remoteParticipants.values())this.handleParticipantDisconnected(a.identity,a);this.setAndEmitConnectionState(Be.Reconnecting)&&this.emit(W.Reconnecting)},this.handleSignalRestarted=a=>I(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(a.serverRegion),Object.assign(Object.assign({},this.logContext),{region:a.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(a);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:a.serverRegion}))}catch{return}this.setAndEmitConnectionState(Be.Connected),this.emit(W.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=a=>{a.forEach(o=>{var c;if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}o.identity===""&&(o.identity=(c=this.sidToIdentity.get(o.sid))!==null&&c!==void 0?c:"");let l=this.remoteParticipants.get(o.identity);o.state===bs.DISCONNECTED?this.handleParticipantDisconnected(o.identity,l):l=this.getOrCreateParticipant(o.identity,o)})},this.handleActiveSpeakersUpdate=a=>{const o=[],c={};a.forEach(l=>{if(c[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const u=this.getRemoteParticipantBySid(l.sid);u&&(u.audioLevel=l.level,u.setIsSpeaking(!0),o.push(u))}}),c[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(l=>{c[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(W.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=a=>{const o=new Map;this.activeSpeakers.forEach(l=>{const u=this.remoteParticipants.get(l.identity);u&&u.sid!==l.sid||o.set(l.sid,l)}),a.forEach(l=>{let u=this.getRemoteParticipantBySid(l.sid);l.sid===this.localParticipant.sid&&(u=this.localParticipant),u&&(u.audioLevel=l.level,u.setIsSpeaking(l.active),l.active?o.set(l.sid,u):o.delete(l.sid))});const c=Array.from(o.values());c.sort((l,u)=>u.audioLevel-l.audioLevel),this.activeSpeakers=c,this.emitWhenConnected(W.ActiveSpeakersChanged,c)},this.handleStreamStateUpdate=a=>{a.streamStates.forEach(o=>{const c=this.getRemoteParticipantBySid(o.participantSid);if(!c)return;const l=c.getTrackPublicationBySid(o.trackSid);if(!l||!l.track)return;const u=Z.streamStateFromProto(o.state);u!==l.track.streamState&&(l.track.streamState=u,c.emit(re.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(W.TrackStreamStateChanged,l,l.track.streamState,c))})},this.handleSubscriptionPermissionUpdate=a=>{const o=this.getRemoteParticipantBySid(a.participantSid);if(!o)return;const c=o.getTrackPublicationBySid(a.trackSid);c&&c.setAllowed(a.allowed)},this.handleSubscriptionError=a=>{const o=Array.from(this.remoteParticipants.values()).find(l=>l.trackPublications.has(a.trackSid));if(!o)return;const c=o.getTrackPublicationBySid(a.trackSid);c&&c.setSubscriptionError(a.err)},this.handleDataPacket=a=>{const o=this.remoteParticipants.get(a.participantIdentity);if(a.value.case==="user")this.handleUserPacket(o,a.value.value,a.kind);else if(a.value.case==="transcription")this.handleTranscription(o,a.value.value);else if(a.value.case==="sipDtmf")this.handleSipDtmf(o,a.value.value);else if(a.value.case==="chatMessage")this.handleChatMessage(o,a.value.value);else if(a.value.case==="metrics")this.handleMetrics(a.value.value,o);else if(a.value.case==="streamHeader")this.handleStreamHeader(a.value.value,a.participantIdentity);else if(a.value.case==="streamChunk")this.handleStreamChunk(a.value.value);else if(a.value.case==="streamTrailer")this.handleStreamTrailer(a.value.value);else if(a.value.case==="rpcRequest"){const c=a.value.value;this.handleIncomingRpcRequest(a.participantIdentity,c.id,c.method,c.payload,c.responseTimeoutMs,c.version)}},this.handleUserPacket=(a,o,c)=>{this.emit(W.DataReceived,o.payload,a,c,o.topic),a==null||a.emit(re.DataReceived,o.payload,c)},this.handleSipDtmf=(a,o)=>{this.emit(W.SipDTMFReceived,o,a),a==null||a.emit(re.SipDTMFReceived,o)},this.bufferedSegments=new Map,this.handleTranscription=(a,o)=>{const c=o.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(o.transcribedParticipantIdentity),l=c==null?void 0:c.trackPublications.get(o.trackId),u=fP(o,this.transcriptionReceivedTimes);l==null||l.emit(J.TranscriptionReceived,u),c==null||c.emit(re.TranscriptionReceived,u,l),this.emit(W.TranscriptionReceived,u,c,l)},this.handleChatMessage=(a,o)=>{const c=mP(o);this.emit(W.ChatMessage,c,a)},this.handleMetrics=(a,o)=>{this.emit(W.MetricsReceived,a,o)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(W.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=a=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:a})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(W.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(W.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(W.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>I(this,void 0,void 0,function*(){var a;((a=hn())===null||a===void 0?void 0:a.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(W.MediaDevicesChanged)}),this.handleRoomUpdate=a=>{const o=this.roomInfo;this.roomInfo=a,o&&o.metadata!==a.metadata&&this.emitWhenConnected(W.RoomMetadataChanged,a.metadata),(o==null?void 0:o.activeRecording)!==a.activeRecording&&this.emitWhenConnected(W.RecordingStatusChanged,a.activeRecording)},this.handleConnectionQualityUpdate=a=>{a.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const c=this.getRemoteParticipantBySid(o.participantSid);c&&c.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=a=>{this.emit(W.ParticipantMetadataChanged,a,this.localParticipant)},this.onLocalParticipantNameChanged=a=>{this.emit(W.ParticipantNameChanged,a,this.localParticipant)},this.onLocalAttributesChanged=a=>{this.emit(W.ParticipantAttributesChanged,a,this.localParticipant)},this.onLocalTrackMuted=a=>{this.emit(W.TrackMuted,a,this.localParticipant)},this.onLocalTrackUnmuted=a=>{this.emit(W.TrackUnmuted,a,this.localParticipant)},this.onTrackProcessorUpdate=a=>{var o;(o=a==null?void 0:a.onPublish)===null||o===void 0||o.call(a,this)},this.onLocalTrackPublished=a=>I(this,void 0,void 0,function*(){var o,c,l,u,d,h;(o=a.track)===null||o===void 0||o.on(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=a.track)===null||c===void 0||c.on(J.Restarted,this.onLocalTrackRestarted),(d=(u=(l=a.track)===null||l===void 0?void 0:l.getProcessor())===null||u===void 0?void 0:u.onPublish)===null||d===void 0||d.call(u,this),this.emit(W.LocalTrackPublished,a,this.localParticipant),wr(a.track)&&(yield a.track.checkForSilence())&&this.emit(W.LocalAudioSilenceDetected,a);const p=yield(h=a.track)===null||h===void 0?void 0:h.getDeviceId(!1),O=Md(a.source);O&&p&&p!==this.localParticipant.activeDeviceMap.get(O)&&(this.localParticipant.activeDeviceMap.set(O,p),this.emit(W.ActiveDeviceChanged,O,p))}),this.onLocalTrackUnpublished=a=>{var o,c;(o=a.track)===null||o===void 0||o.off(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=a.track)===null||c===void 0||c.off(J.Restarted,this.onLocalTrackRestarted),this.emit(W.LocalTrackUnpublished,a,this.localParticipant)},this.onLocalTrackRestarted=a=>I(this,void 0,void 0,function*(){const o=yield a.getDeviceId(!1),c=Md(a.source);c&&o&&o!==this.localParticipant.activeDeviceMap.get(c)&&(this.log.debug("local track restarted, setting ".concat(c," ").concat(o," active"),this.logContext),this.localParticipant.activeDeviceMap.set(c,o),this.emit(W.ActiveDeviceChanged,c,o))}),this.onLocalConnectionQualityChanged=a=>{this.emit(W.ConnectionQualityChanged,a,this.localParticipant)},this.onMediaDevicesError=(a,o)=>{this.emit(W.MediaDevicesError,a,o)},this.onLocalParticipantPermissionsChanged=a=>{this.emit(W.ParticipantPermissionsChanged,a,this.localParticipant)},this.onLocalChatMessageSent=a=>{this.emit(W.ChatMessage,a,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},FP),t),this.log=Sr((r=this.options.loggerName)!==null&&r!==void 0?r:Qn.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},cb),t==null?void 0:t.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},lb),t==null?void 0:t.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},XP),t==null?void 0:t.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Gt,this.localParticipant=new _R("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",ei(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",ei(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",ei(this.options.audioOutput.deviceId)).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),nn()){const a=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:a.signal}),Rs.cleanupRegistry&&Rs.cleanupRegistry.register(this,()=>{a.abort()})}}registerTextStreamHandler(t,n){if(this.textStreamHandlers.has(t))throw new TypeError('A text stream handler for topic "'.concat(t,'" has already been set.'));this.textStreamHandlers.set(t,n)}unregisterTextStreamHandler(t){this.textStreamHandlers.delete(t)}registerByteStreamHandler(t,n){if(this.byteStreamHandlers.has(t))throw new TypeError('A byte stream handler for topic "'.concat(t,'" has already been set.'));this.byteStreamHandlers.set(t,n)}unregisterByteStreamHandler(t){this.byteStreamHandlers.delete(t)}registerRpcMethod(t,n){if(this.rpcHandlers.has(t))throw Error("RPC handler already registered for method ".concat(t,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}handleIncomingRpcRequest(t,n,r,i,s,a){return I(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(t,n),a!==1){yield this.engine.publishRpcResponse(t,n,null,mt.builtIn("UNSUPPORTED_VERSION"));return}const o=this.rpcHandlers.get(r);if(!o){yield this.engine.publishRpcResponse(t,n,null,mt.builtIn("UNSUPPORTED_METHOD"));return}let c=null,l=null;try{const u=yield o({requestId:n,callerIdentity:t,payload:i,responseTimeout:s});Gd(u)>ub?(c=mt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):l=u}catch(u){u instanceof mt?c=u:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),u),c=mt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(t,n,l,c)})}setE2EEEnabled(t){return I(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new wP(this.options.e2ee),this.e2eeManager.on(Kr.ParticipantEncryptionStatusChanged,(n,r)=>{gP(r)&&(this.isE2EEEnabled=n),this.emit(W.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Kr.EncryptionError,n=>this.emit(W.EncryptionError,n)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return I(this,void 0,void 0,function*(){return this.state===Be.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(te.RoomUpdate,r),t(i.sid))};this.engine.on(te.RoomUpdate,r),this.once(W.Disconnected,()=>{this.engine.off(te.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new uR(this.options),this.engine.on(te.ParticipantUpdate,this.handleParticipantUpdates).on(te.RoomUpdate,this.handleRoomUpdate).on(te.SpeakersChanged,this.handleSpeakersChanged).on(te.StreamStateChanged,this.handleStreamStateUpdate).on(te.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(te.SubscriptionError,this.handleSubscriptionError).on(te.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(te.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(te.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(te.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(te.DataPacketReceived,this.handleDataPacket).on(te.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Be.SignalReconnecting)&&this.emit(W.SignalReconnecting)}).on(te.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Be.Connected)&&this.emit(W.Reconnected)}).on(te.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Be.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(te.Restarting,this.handleRestarting).on(te.SignalRestarted,this.handleSignalRestarted).on(te.Offline,()=>{this.setAndEmitConnectionState(Be.Reconnecting)&&this.emit(W.Reconnecting)}).on(te.DCBufferStatusChanged,(t,n)=>{this.emit(W.DCBufferStatusChanged,t,n)}).on(te.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(re.LocalTrackSubscribed,n),this.emitWhenConnected(W.LocalTrackSubscribed,n,this.localParticipant)}).on(te.RoomMoved,t=>{this.log.debug("room moved",t),t.room&&this.handleRoomUpdate(t.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(W.Moved,t.room.name),t.participant?this.handleParticipantUpdates([t.participant,...t.otherParticipants]):this.handleParticipantUpdates(t.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return It.getInstance().getDevices(t,n)}prepareConnection(t,n){return I(this,void 0,void 0,function*(){if(this.state===Be.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(Pd(new URL(t))&&n){this.regionUrlProvider=new th(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Be.Disconnected&&(this.regionUrl=r,yield fetch(Qd(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(Qd(t),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return I(this,void 0,void 0,function*(){let r=()=>{},i;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Gn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Gn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Gn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Gn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Gn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Gn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Gn({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>I(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new hc({reason:An.CLIENT_INITIATED,action:ks.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Gn({scenario:{case:"subscriberBandwidth",value:Mi(n)}});break;case"leave-full-reconnect":i=new Gn({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return I(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var o,c,l,u,d,h,p;let O=!0,m=!1;const b=a?{exact:i}:i;if(r==="audioinput"){m=s.localParticipant.audioTrackPublications.size===0;const v=(o=s.getActiveDevice(r))!==null&&o!==void 0?o:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=b;const k=Array.from(s.localParticipant.audioTrackPublications.values()).filter(T=>T.source===Z.Source.Microphone);try{O=(yield Promise.all(k.map(T=>{var _;return(_=T.audioTrack)===null||_===void 0?void 0:_.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.audioCaptureDefaults.deviceId=v,T}const y=k.some(T=>{var _,S;return(S=(_=T.track)===null||_===void 0?void 0:_.isMuted)!==null&&S!==void 0?S:!1});O&&y&&(m=!0)}else if(r==="videoinput"){m=s.localParticipant.videoTrackPublications.size===0;const v=(c=s.getActiveDevice(r))!==null&&c!==void 0?c:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=b;const k=Array.from(s.localParticipant.videoTrackPublications.values()).filter(T=>T.source===Z.Source.Camera);try{O=(yield Promise.all(k.map(T=>{var _;return(_=T.videoTrack)===null||_===void 0?void 0:_.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.videoCaptureDefaults.deviceId=v,T}const y=k.some(T=>{var _,S;return(S=(_=T.track)===null||_===void 0?void 0:_.isMuted)!==null&&S!==void 0?S:!1});O&&y&&(m=!0)}else if(r==="audiooutput"){if(m=!0,!xd()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");s.options.webAudioMix&&(i=(l=yield It.getInstance().normalizeDeviceId("audiooutput",i))!==null&&l!==void 0?l:""),(u=(p=s.options).audioOutput)!==null&&u!==void 0||(p.audioOutput={});const v=(d=s.getActiveDevice(r))!==null&&d!==void 0?d:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((h=s.audioContext)===null||h===void 0||h.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(k=>k.setAudioOutput({deviceId:i})))}catch(k){throw s.options.audioOutput.deviceId=v,k}}return m&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(W.ActiveDeviceChanged,r,i)),O}()})}setupLocalParticipantEvents(){this.localParticipant.on(re.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(re.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(re.AttributesChanged,this.onLocalAttributesChanged).on(re.TrackMuted,this.onLocalTrackMuted).on(re.TrackUnmuted,this.onLocalTrackUnmuted).on(re.LocalTrackPublished,this.onLocalTrackPublished).on(re.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(re.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(re.MediaDevicesError,this.onMediaDevicesError).on(re.AudioStreamAcquired,this.startAudio).on(re.ChatMessage,this.onLocalChatMessageSent).on(re.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===Be.Connecting||this.state===Be.Reconnecting){const u=()=>{this.onTrackAdded(t,n,r),d()},d=()=>{this.off(W.Reconnected,u),this.off(W.Connected,u),this.off(W.Disconnected,d)};this.once(W.Reconnected,u),this.once(W.Connected,u),this.once(W.Disconnected,d);return}if(this.state===Be.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(t.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=nP(n.id),s=i[0];let a=i[1],o=t.id;if(a&&a.startsWith("TR")&&(o=a),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(u=>u.sid===s);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(t,o,n,r,l)}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==Be.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,a,o;i.track&&this.localParticipant.unpublishTrack(i.track,t),t?((s=i.track)===null||s===void 0||s.detach(),(a=i.track)===null||a===void 0||a.stop()):(o=i.track)===null||o===void 0||o.stopMonitor()}),this.localParticipant.off(re.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(re.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(re.AttributesChanged,this.onLocalAttributesChanged).off(re.TrackMuted,this.onLocalTrackMuted).off(re.TrackUnmuted,this.onLocalTrackUnmuted).off(re.LocalTrackPublished,this.onLocalTrackPublished).off(re.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(re.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(re.MediaDevicesError,this.onMediaDevicesError).off(re.AudioStreamAcquired,this.startAudio).off(re.ChatMessage,this.onLocalChatMessageSent).off(re.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),nn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Be.Disconnected),this.emit(W.Disconnected,n)}}}handleParticipantDisconnected(t,n){var r;this.remoteParticipants.delete(t),n&&(n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(W.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleStreamHeader(t,n){return I(this,void 0,void 0,function*(){var r;if(t.contentHeader.case==="byteHeader"){const i=this.byteStreamHandlers.get(t.topic);if(!i){this.log.debug("ignoring incoming byte stream due to no handler for topic",t.topic);return}let s;const a={id:t.streamId,name:(r=t.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Sc(t.timestamp),attributes:t.attributes},o=new ReadableStream({start:c=>{s=c,this.byteStreamControllers.set(t.streamId,{info:a,controller:s,startTime:Date.now()})}});i(new fR(a,o,Sc(t.totalLength)),{identity:n})}else if(t.contentHeader.case==="textHeader"){const i=this.textStreamHandlers.get(t.topic);if(!i){this.log.debug("ignoring incoming text stream due to no handler for topic",t.topic);return}let s;const a={id:t.streamId,mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Number(t.timestamp),attributes:t.attributes},o=new ReadableStream({start:c=>{s=c,this.textStreamControllers.set(t.streamId,{info:a,controller:s,startTime:Date.now()})}});i(new mR(a,o,Sc(t.totalLength)),{identity:n})}})}handleStreamChunk(t){const n=this.byteStreamControllers.get(t.streamId);n&&t.content.length>0&&n.controller.enqueue(t);const r=this.textStreamControllers.get(t.streamId);r&&t.content.length>0&&r.controller.enqueue(t)}handleStreamTrailer(t){const n=this.textStreamControllers.get(t.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),t.attributes),n.controller.close(),this.textStreamControllers.delete(t.streamId));const r=this.byteStreamControllers.get(t.streamId);r&&(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),t.attributes),r.controller.close(),this.byteStreamControllers.delete(t.streamId))}selectDefaultDevices(){return I(this,void 0,void 0,function*(){var t,n,r;const i=It.getInstance().previousDevices,s=yield It.getInstance().getDevices(void 0,!1),a=hn();if((a==null?void 0:a.name)==="Chrome"&&a.os!=="iOS")for(let c of s){const l=i.find(u=>u.deviceId===c.deviceId);l&&l.label!==""&&l.kind===c.kind&&l.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(W.ActiveDeviceChanged,c.kind,c.deviceId)}const o=["audiooutput","audioinput","videoinput"];for(let c of o){const l=bP(c),u=this.localParticipant.getTrackPublication(l);if(u&&(!((t=u.track)===null||t===void 0)&&t.isUserProvided))continue;const d=s.filter(p=>p.kind===c),h=this.getActiveDevice(c);if(h===((n=i.filter(p=>p.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&d.length>0&&((r=d[0])===null||r===void 0?void 0:r.deviceId)!==h){yield this.switchActiveDevice(c,d[0].deviceId);continue}c==="audioinput"&&!Cd()||c==="videoinput"||d.length>0&&!d.find(p=>p.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!Cd())&&(yield this.switchActiveDevice(c,d[0].deviceId))}})}acquireAudioContext(){return I(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=Wv())!==null&&t!==void 0?t:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),tn(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(W.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let i;return n?i=Rc.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new Rc(this.engine.client,"",t,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const i=this.remoteParticipants.get(t);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(t,n);return this.remoteParticipants.set(t,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(W.ParticipantConnected,r),r.on(re.TrackPublished,i=>{this.emitWhenConnected(W.TrackPublished,i,r)}).on(re.TrackSubscribed,(i,s)=>{i.kind===Z.Kind.Audio?(i.on(J.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(J.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Z.Kind.Video&&(i.on(J.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(J.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(W.TrackSubscribed,i,s,r)}).on(re.TrackUnpublished,i=>{this.emit(W.TrackUnpublished,i,r)}).on(re.TrackUnsubscribed,(i,s)=>{this.emit(W.TrackUnsubscribed,i,s,r)}).on(re.TrackMuted,i=>{this.emitWhenConnected(W.TrackMuted,i,r)}).on(re.TrackUnmuted,i=>{this.emitWhenConnected(W.TrackUnmuted,i,r)}).on(re.ParticipantMetadataChanged,i=>{this.emitWhenConnected(W.ParticipantMetadataChanged,i,r)}).on(re.ParticipantNameChanged,i=>{this.emitWhenConnected(W.ParticipantNameChanged,i,r)}).on(re.AttributesChanged,i=>{this.emitWhenConnected(W.ParticipantAttributesChanged,i,r)}).on(re.ConnectionQualityChanged,i=>{this.emitWhenConnected(W.ConnectionQualityChanged,i,r)}).on(re.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(W.ParticipantPermissionsChanged,i,r)}).on(re.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(W.TrackSubscriptionStatusChanged,i,s,r)}).on(re.TrackSubscriptionFailed,(i,s)=>{this.emit(W.TrackSubscriptionFailed,i,r,s)}).on(re.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(W.TrackSubscriptionPermissionChanged,i,s,r)}).on(re.Active,()=>{this.emitWhenConnected(W.ParticipantActive,r),r.kind===wa.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&OP(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Lt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,An.STATE_MISMATCH))):t=0},wR)}clearConnectionReconcile(){this.connectionReconcileInterval&&Lt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(W.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,r]=t;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===Be.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,r]);else if(this.state===Be.Connected)return this.emit(t,...r);return!1}simulateParticipants(t){return I(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new lc({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ut.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Qi({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(W.SignalConnected),this.emit(W.Connected),this.setAndEmitConnectionState(Be.Connected),i.video){const a=new ih(Z.Kind.Video,new Ts({source:yt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Rn.AUDIO,name:"video-dummy"}),new Cc(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Zv(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(re.LocalTrackPublished,a)}if(i.audio){const a=new ih(Z.Kind.Audio,new Ts({source:yt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Rn.AUDIO}),new xc(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Id(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(re.LocalTrackPublished,a)}for(let a=0;a<s.count-1;a+=1){let o=new Qi({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(a),state:bs.ACTIVE,tracks:[],joinedAt:ut.parse(Date.now())});const c=this.getOrCreateParticipant(o.identity,o);if(s.video){const l=Zv(160*((r=s.aspectRatios[a%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new Ts({source:yt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Rn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,u]}if(s.audio){const l=Id(),u=new Ts({source:yt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Rn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,u]}c.updateInfo(o)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t!==W.ActiveSpeakersChanged&&t!==W.TranscriptionReceived){const s=xb(r).filter(a=>a!==void 0);this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:s}))}return super.emit(t,...r)}}Rs.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{e()});function xb(e){return e.map(t=>{if(t)return Array.isArray(t)?xb(t):typeof t=="object"?"logContext"in t?t.logContext:void 0:t})}var $n;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})($n||($n={}));class ii extends Wn.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=$n.IDLE,this.logs=[],this.options={},this.url=t,this.token=n,this.name=this.constructor.name,this.room=new Rs(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(t){return I(this,void 0,void 0,function*(){if(this.status!==$n.IDLE)throw Error("check is running already");this.setStatus($n.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==$n.SKIPPED&&this.setStatus(this.isSuccess()?$n.SUCCESS:$n.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(t){return I(this,void 0,void 0,function*(){return this.room.state===Be.Connected?this.room:(t||(t=this.url),yield this.room.connect(t,this.token,this.connectOptions),this.room)})}disconnect(){return I(this,void 0,void 0,function*(){this.room&&this.room.state!==Be.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus($n.SKIPPED)}switchProtocol(t){return I(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(W.Reconnecting,()=>{n=!0}),this.room.once(W.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(t)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield tn(100)}throw new Error("Could not reconnect using ".concat(t," protocol after 10 seconds"))})}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class xR extends ii{get description(){return"Cloud regions"}perform(){return I(this,void 0,void 0,function*(){const t=new th(this.url,this.token);if(!t.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const a=yield t.getNextBestRegionUrl();if(!a)break;if(r.has(a))continue;r.add(a);const o=yield this.checkCloudRegion(a);this.appendMessage("".concat(o.region," RTT: ").concat(o.rtt,"ms, duration: ").concat(o.duration,"ms")),n.push(o)}n.sort((s,a)=>(s.duration-a.duration)*.5+(s.rtt-a.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkCloudRegion(t){return I(this,void 0,void 0,function*(){var n,r;yield this.connect(t),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,c=1e6/a,l="A".repeat(a),u=Date.now();for(let O=0;O<c;O++)yield s.write(l);yield s.close();const d=Date.now(),h=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),p={region:i,rtt:1e4,duration:d-u};return h==null||h.forEach(O=>{O.type==="candidate-pair"&&O.nominated&&(p.rtt=O.currentRoundTripTime*1e3)}),yield this.disconnect(),p})}}const sh=1e4;class CR extends ii{get description(){return"Connection via UDP vs TCP"}perform(){return I(this,void 0,void 0,function*(){const t=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=t,t.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(t.packetsLost-n.packetsLost)/t.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(sh/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(sh/1e3)*100).toFixed(2),"%"))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkConnectionProtocol(t){return I(this,void 0,void 0,function*(){yield this.connect(),t==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const o=n.captureStream(30).getVideoTracks()[0],l=(yield this.room.localParticipant.publishTrack(o,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:t,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>I(this,void 0,void 0,function*(){const h=yield l.getRTCStatsReport();h==null||h.forEach(p=>{p.type==="outbound-rtp"?(u.packetsSent=p.packetsSent,u.qualityLimitationDurations=p.qualityLimitationDurations,u.bitrateTotal+=p.targetBitrate,u.count++):p.type==="remote-inbound-rtp"&&(u.packetsLost=p.packetsLost,u.rttTotal+=p.roundTripTime,u.jitterTotal+=p.jitter)})}),1e3);return yield new Promise(h=>setTimeout(h,sh)),clearInterval(d),o.stop(),n.remove(),yield this.disconnect(),u})}}class PR extends ii{get description(){return"Can publish audio"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield _b();if(yield Gv(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const s=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!s)throw new Error("Could not get RTCStats");let a=0;if(s.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="audio"||!o.kind&&o.mediaType==="audio")&&(a=o.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class RR extends ii{get description(){return"Can publish video"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield kR();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,5e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(s+=a.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(t){return I(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(t.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,a,o,c;const l=document.createElement("canvas"),u=t.getSettings(),d=(a=(s=u.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&a!==void 0?a:1280,h=(c=(o=u.height)!==null&&o!==void 0?o:r.videoHeight)!==null&&c!==void 0?c:720;l.width=d,l.height=h;const p=l.getContext("2d");p.drawImage(r,0,0);const m=p.getImageData(0,0,l.width,l.height).data;let b=!0;for(let v=0;v<m.length;v+=4)if(m[v]!==0||m[v+1]!==0||m[v+2]!==0){b=!1;break}b?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class AR extends ii{get description(){return"Resuming connection after interruption"}perform(){return I(this,void 0,void 0,function*(){var t;const n=yield this.connect();let r=!1,i=!1,s;const a=new Promise(l=>{setTimeout(l,5e3),s=l}),o=()=>{r=!0};n.on(W.SignalReconnecting,o).on(W.Reconnecting,o).on(W.Reconnected,()=>{i=!0,s(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const c=n.engine.client.onClose;if(c&&c(""),yield a,r){if(!i||n.state!==Be.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class IR extends ii{get description(){return"Can connect via TURN"}perform(){return I(this,void 0,void 0,function*(){var t,n;const r=new qd,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,a=!1,o=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(a=!0,o=!0):l.startsWith("turns:")&&(a=!0,o=!0,s=!0),l.startsWith("stun:")&&(o=!0);o?a&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||a?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class QR extends ii{get description(){return"Establishing WebRTC connection"}perform(){return I(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(W.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,s)=>{if(i.candidate){const a=new RTCIceCandidate(i);let o="".concat(a.protocol," ").concat(a.address,":").concat(a.port," ").concat(a.type);a.address&&(NR(a.address)?o+=" (private)":a.protocol==="tcp"&&a.tcpType==="passive"?(t=!0,o+=" (passive)"):a.protocol==="udp"&&(n=!0)),this.appendMessage(o)}r&&r(i,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Ie.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function NR(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class DR extends ii{get description(){return"Connecting to signal connection via WebSocket"}perform(){return I(this,void 0,void 0,function*(){var t,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new qd;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((t=s.serverInfo)===null||t===void 0?void 0:t.edition)===Eg.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class R8 extends Wn.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=r}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:$n.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==$n.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return I(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token,this.options),i=a=>{this.updateCheck(n,a)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(DR)})}checkWebRTC(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(QR)})}checkTURN(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(IR)})}checkReconnect(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(AR)})}checkPublishAudio(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(PR)})}checkPublishVideo(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(RR)})}checkConnectionProtocol(){return I(this,void 0,void 0,function*(){const t=yield this.createAndRunCheck(CR);if(t.data&&"protocol"in t.data){const n=t.data;this.options.protocol=n.protocol}return t})}checkCloudRegion(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(xR)})}}function Cr(){return Cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cr.apply(null,arguments)}const Cb=new Uint8Array(0);class Da{static getFullOptions(t){return Cr({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},t)}constructor(t,n){var r=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(i){r.status!=="connected"&&r.status!=="connecting"||(r.updateStatus("disconnecting"),await r.handleEndSession(),r.updateStatus("disconnected"),r.options.onDisconnect&&r.options.onDisconnect(i))},this.onMessage=async function(i){switch(i.type){case"interruption":return void r.handleInterruption(i);case"agent_response":return void r.handleAgentResponse(i);case"user_transcript":return void r.handleUserTranscript(i);case"internal_tentative_agent_response":return void r.handleTentativeAgentResponse(i);case"client_tool_call":try{await r.handleClientToolCall(i)}catch(s){r.onError(`Unexpected error in client tool call handling: ${s instanceof Error?s.message:String(s)}`,{clientToolName:i.client_tool_call.tool_name,toolCallId:i.client_tool_call.tool_call_id})}return;case"audio":return void r.handleAudio(i);case"vad_score":return void r.handleVadScore(i);case"ping":return void r.connection.sendMessage({type:"pong",event_id:i.ping_event.event_id});case"mcp_tool_call":return void r.handleMCPToolCall(i);case"mcp_connection_status":return void r.handleMCPConnectionStatus(i);case"agent_tool_request":return void r.handleAgentToolRequest(i);case"agent_tool_response":return void r.handleAgentToolResponse(i);case"conversation_initiation_metadata":return void r.handleConversationMetadata(i);case"asr_initiation_metadata":return void r.handleAsrInitiationMetadata(i);case"agent_chat_response_part":return void r.handleAgentChatResponsePart(i);case"error":return void r.handleErrorEvent(i);default:return void(r.options.onDebug&&r.options.onDebug(i))}},this.setVolume=({volume:i})=>{this.volume=i},this.options=t,this.connection=n,this.options.onConnect&&this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(i=>this.updateMode(i)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(t){t!==this.mode&&(this.mode=t,this.options.onModeChange&&this.options.onModeChange({mode:t}))}updateStatus(t){t!==this.status&&(this.status=t,this.options.onStatusChange&&this.options.onStatusChange({status:t}))}updateCanSendFeedback(){const t=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==t&&(this.canSendFeedback=t,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:t}))}handleInterruption(t){t.interruption_event&&(this.lastInterruptTimestamp=t.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:t.interruption_event.event_id}))}handleAgentResponse(t){this.options.onMessage&&this.options.onMessage({source:"ai",role:"agent",message:t.agent_response_event.agent_response})}handleUserTranscript(t){this.options.onMessage&&this.options.onMessage({source:"user",role:"user",message:t.user_transcription_event.user_transcript})}handleTentativeAgentResponse(t){this.options.onDebug&&this.options.onDebug({type:"tentative_agent_response",response:t.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(t){this.options.onVadScore&&this.options.onVadScore({vadScore:t.vad_score_event.vad_score})}async handleClientToolCall(t){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,t.client_tool_call.tool_name))try{var n;const r=(n=await this.options.clientTools[t.client_tool_call.tool_name](t.client_tool_call.parameters))!=null?n:"Client tool execution successful.",i=typeof r=="object"?JSON.stringify(r):String(r);this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:i,is_error:!1})}catch(r){this.onError(`Client tool execution failed with following error: ${r==null?void 0:r.message}`,{clientToolName:t.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:`Client tool execution failed: ${r==null?void 0:r.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(t.client_tool_call);this.onError(`Client tool with name ${t.client_tool_call.tool_name} is not defined on client`,{clientToolName:t.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:t.client_tool_call.tool_call_id,result:`Client tool with name ${t.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(t){}handleMCPToolCall(t){this.options.onMCPToolCall&&this.options.onMCPToolCall(t.mcp_tool_call)}handleMCPConnectionStatus(t){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(t.mcp_connection_status)}handleAgentToolRequest(t){this.options.onAgentToolRequest&&this.options.onAgentToolRequest(t.agent_tool_request)}handleAgentToolResponse(t){t.agent_tool_response.tool_name==="end_call"&&this.endSessionWithDetails({reason:"agent",context:new CloseEvent("end_call",{reason:"Agent ended the call"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(t.agent_tool_response)}handleConversationMetadata(t){this.options.onConversationMetadata&&this.options.onConversationMetadata(t.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(t){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(t.asr_initiation_metadata_event)}handleAgentChatResponsePart(t){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(t.text_response_part)}handleErrorEvent(t){const n=t.error_event.error_type,r=t.error_event.message||t.error_event.reason||"Unknown error";n!=="max_duration_exceeded"?this.onError(`Server error: ${r}`,{errorType:n,code:t.error_event.code,debugMessage:t.error_event.debug_message,details:t.error_event.details}):this.endSessionWithDetails({reason:"error",message:r,context:new Event("max_duration_exceeded")})}onError(t,n){console.error(t,n),this.options.onError&&this.options.onError(t,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(t){this.connection.setMicMuted(t)}getInputByteFrequencyData(){return Cb}getOutputByteFrequencyData(){return Cb}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(t){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:t?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(t){this.connection.sendMessage({type:"contextual_update",text:t})}sendUserMessage(t){this.connection.sendMessage({type:"user_message",text:t})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(t,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:t,is_approved:n})}}class Pb{constructor(t={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=t.onDebug}debug(t){this.onDebug&&this.onDebug(t)}onMessage(t){this.onMessageCallback=t;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(t)})}onDisconnect(t){this.onDisconnectCallback=t;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{t(n)})}onModeChange(t){this.onModeChangeCallback=t}updateMode(t){var n;(n=this.onModeChangeCallback)==null||n.call(this,t)}disconnect(t){var n;this.disconnectionDetails||(this.disconnectionDetails=t,(n=this.onDisconnectCallback)==null||n.call(this,t))}handleMessage(t){this.onMessageCallback?this.onMessageCallback(t):this.queue.push(t)}}function Ac(e){const[t,n]=e.split("_");if(!["pcm","ulaw"].includes(t))throw new Error(`Invalid format: ${e}`);const r=Number.parseInt(n);if(Number.isNaN(r))throw new Error(`Invalid sample rate: ${n}`);return{format:t,sampleRate:r}}const Rb="0.12.1";function ah(e){return!!e.type}const Ab="conversation_initiation_client_data";function Ib(e){var t;const n={type:Ab};var r,i,s,a,o;return e.overrides&&(n.conversation_config_override={agent:{prompt:(r=e.overrides.agent)==null?void 0:r.prompt,first_message:(i=e.overrides.agent)==null?void 0:i.firstMessage,language:(s=e.overrides.agent)==null?void 0:s.language},tts:{voice_id:(a=e.overrides.tts)==null?void 0:a.voiceId},conversation:{text_only:(o=e.overrides.conversation)==null?void 0:o.textOnly}}),e.customLlmExtraBody&&(n.custom_llm_extra_body=e.customLlmExtraBody),e.dynamicVariables&&(n.dynamic_variables=e.dynamicVariables),e.userId&&(n.user_id=e.userId),(t=e.overrides)!=null&&t.client&&(n.source_info={source:e.overrides.client.source,version:e.overrides.client.version}),n}class $a extends Pb{constructor(t,n,r,i){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=t,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.socket.addEventListener("error",s=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:s}),0)}),this.socket.addEventListener("close",s=>{this.disconnect(s.code===1e3?{reason:"agent",context:s}:{reason:"error",message:s.reason||"The connection was closed by the server.",context:s})}),this.socket.addEventListener("message",s=>{try{const a=JSON.parse(s.data);if(!ah(a))return void this.debug({type:"invalid_event",message:"Received invalid socket event",data:s.data});this.handleMessage(a)}catch(a){this.debug({type:"parsing_error",message:"Failed to parse socket message",error:a instanceof Error?a.message:String(a),data:s.data})}})}static async create(t){let n=null;try{var r,i,s;const o=(r=t.origin)!=null?r:"wss://api.elevenlabs.io";let c;const l=((i=t.overrides)==null||(i=i.client)==null?void 0:i.version)||Rb,u=((s=t.overrides)==null||(s=s.client)==null?void 0:s.source)||"js_sdk";if(t.signedUrl){const k=t.signedUrl.includes("?")?"&":"?";c=`${t.signedUrl}${k}source=${u}&version=${l}`}else c=`${o}/v1/convai/conversation?agent_id=${t.agentId}&source=${u}&version=${l}`;const d=["convai"];t.authorization&&d.push(`bearer.${t.authorization}`),n=new WebSocket(c,d);const h=await new Promise((k,y)=>{n.addEventListener("open",()=>{var T;const _=Ib(t);(T=n)==null||T.send(JSON.stringify(_))},{once:!0}),n.addEventListener("error",T=>{setTimeout(()=>y(T),0)}),n.addEventListener("close",y),n.addEventListener("message",T=>{const _=JSON.parse(T.data);ah(_)&&(_.type==="conversation_initiation_metadata"?k(_.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:p,agent_output_audio_format:O,user_input_audio_format:m}=h,b=Ac(m??"pcm_16000"),v=Ac(O);return new $a(n,p,b,v)}catch(o){var a;throw(a=n)==null||a.close(),o}}close(){this.socket.close(1e3,"User ended conversation")}sendMessage(t){this.socket.send(JSON.stringify(t))}async setMicMuted(t){console.warn(`WebSocket connection setMicMuted called with ${t}, but this is handled by VoiceConversation`)}}function Qb(e){const t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}function $R(e){const t=window.atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}const Ic=new Map;function Nb(e,t){return async(n,r)=>{const i=Ic.get(e);if(i)return n.addModule(i);if(r)try{return await n.addModule(r),void Ic.set(e,r)}catch(o){throw new Error(`Failed to load the ${e} worklet module from path: ${r}. Error: ${o}`)}const s=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(s);try{return await n.addModule(a),void Ic.set(e,a)}catch{URL.revokeObjectURL(a)}try{const o=`data:application/javascript;base64,${btoa(t)}`;await n.addModule(o),Ic.set(e,o)}catch{throw new Error(`Failed to load the ${e} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const Db=Nb("rawAudioProcessor",`/*
 * ulaw encoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 4;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("rawAudioProcessor", RawAudioProcessor);
`);class Pr extends Pb{constructor(t,n,r,i,s={}){super(s),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=t,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.setupRoomEventListeners()}static async create(t){let n;if("conversationToken"in t&&t.conversationToken)n=t.conversationToken;else{if(!("agentId"in t)||!t.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var r,i,s;const l=((r=t.overrides)==null||(r=r.client)==null?void 0:r.version)||Rb,u=((i=t.overrides)==null||(i=i.client)==null?void 0:i.source)||"js_sdk",d=`${a=(s=t.origin)!=null?s:"https://api.elevenlabs.io",a.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${t.agentId}&source=${u}&version=${l}`,h=await fetch(d);if(!h.ok)throw new Error(`ElevenLabs API returned ${h.status} ${h.statusText}`);if(n=(await h.json()).token,!n)throw new Error("No conversation token received from API")}catch(l){let u=l instanceof Error?l.message:String(l);throw l instanceof Error&&l.message.includes("401")&&(u="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${t.agentId}: ${u}`)}}var a;const o=new Rs;try{const l=`room_${Date.now()}`,u=Ac("pcm_48000"),d=Ac("pcm_48000"),h=new Pr(o,l,u,d,t),p=t.livekitUrl||"wss://livekit.rtc.elevenlabs.io";var c;await o.connect(p,n),await new Promise(m=>{if(h.isConnected)m();else{const b=()=>{o.off(W.Connected,b),m()};o.on(W.Connected,b)}}),o.name&&(h.conversationId=((c=o.name.match(/(conv_[a-zA-Z0-9]+)/))==null?void 0:c[0])||o.name),await o.localParticipant.setMicrophoneEnabled(!0);const O=Ib(t);return h.debug({type:Ab,message:O}),await h.sendMessage(O),h}catch(l){throw await o.disconnect(),l}}setupRoomEventListeners(){var t=this;this.room.on(W.Connected,async function(){t.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(W.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n==null?void 0:n.toString()})})}),this.room.on(W.ConnectionStateChanged,n=>{n===Be.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(W.DataReceived,(n,r)=>{try{const i=JSON.parse(new TextDecoder().decode(n));if(i.type==="audio")return;ah(i)?this.handleMessage(i):console.warn("Invalid socket event received:",i)}catch(i){console.warn("Failed to parse incoming data message:",i),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(W.TrackSubscribed,async function(n,r,i){if(n.kind===Z.Kind.Audio&&i.identity.includes("agent")){const s=n,a=s.attach();if(a.autoplay=!0,a.controls=!1,t.outputDeviceId&&a.setSinkId)try{await a.setSinkId(t.outputDeviceId)}catch(o){console.warn("Failed to set output device for new audio element:",o)}a.style.display="none",document.body.appendChild(a),t.audioElements.push(a),t.audioElements.length===1&&(t.onDebug==null||t.onDebug({type:"audio_element_ready"})),await t.setupAudioCapture(s)}}),this.room.on(W.ActiveSpeakersChanged,async function(n){t.updateMode(n.length>0&&n[0].identity.startsWith("agent")?"speaking":"listening")}),this.room.on(W.ParticipantDisconnected,n=>{var r;(r=n.identity)!=null&&r.startsWith("agent")&&this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:"agent disconnected"})})})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(t=>{t.track&&t.track.stop()})}catch(t){console.warn("Error stopping local tracks:",t)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(t=>{console.warn("Error closing audio capture context:",t)}),this.audioCaptureContext=null),this.audioElements.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(t){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in t))try{const n=new TextEncoder().encode(JSON.stringify(t));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:t,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(t){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(Z.Source.Microphone);if(n!=null&&n.track)try{t?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!t)}else await this.room.localParticipant.setMicrophoneEnabled(!t)}async setupAudioCapture(t){try{const n=new AudioContext;this.audioCaptureContext=n,this.outputAnalyser=n.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const r=new MediaStream([t.mediaStreamTrack]),i=n.createMediaStreamSource(r);i.connect(this.outputAnalyser),await Db(n.audioWorklet);const s=new AudioWorkletNode(n,"rawAudioProcessor");this.outputAnalyser.connect(s),s.port.postMessage({type:"setFormat",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),s.port.onmessage=a=>{const[o,c]=a.data;if(c>.01){const l=Qb(o.buffer),u=this.audioEventId++;this.handleMessage({type:"audio",audio_event:{audio_base_64:l,event_id:u}})}},i.connect(s)}catch(n){console.warn("Failed to set up audio capture:",n)}}setAudioVolume(t){this.audioElements.forEach(n=>{n.volume=t})}async setAudioOutputDevice(t){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");const n=this.audioElements.map(async function(r){try{await r.setSinkId(t)}catch(i){throw console.error("Failed to set sink ID for audio element:",i),i}});await Promise.all(n),this.outputDeviceId=t}async setAudioInputDevice(t){if(!this.isConnected||!this.room.localParticipant)throw new Error("Cannot change input device: room not connected or no local participant");try{const n=this.room.localParticipant.getTrackPublication(Z.Source.Microphone);n!=null&&n.track&&(await n.track.stop(),await this.room.localParticipant.unpublishTrack(n.track));const r={deviceId:{exact:t},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},i=await _b(r);await this.room.localParticipant.publishTrack(i,{name:"microphone",source:Z.Source.Microphone})}catch(n){console.error("Failed to change input device:",n);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(r){console.error("Failed to recover microphone after device switch error:",r)}throw n}}getOutputByteFrequencyData(){return this.outputAnalyser?(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}}async function $b(e){const t=function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"}(e);switch(t){case"websocket":return $a.create(e);case"webrtc":return Pr.create(e);default:throw new Error(`Unknown connection type: ${t}`)}}function oh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function Lb(e={default:0,android:3e3}){let t=e.default;var n;if(/android/i.test(navigator.userAgent))t=(n=e.android)!=null?n:t;else if(oh()){var r;t=(r=e.ios)!=null?r:t}t>0&&await new Promise(i=>setTimeout(i,t))}class ch extends Da{static async startSession(t){const n=Da.getFullOptions(t);n.onStatusChange&&n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1}),n.onModeChange&&n.onModeChange({mode:"listening"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let r=null;try{return await Lb(n.connectionDelay),r=await $b(t),new ch(n,r)}catch(s){var i;throw n.onStatusChange&&n.onStatusChange({status:"disconnected"}),(i=r)==null||i.close(),s}}}const Mb={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};class As{static async create({sampleRate:t,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:s,libsampleratePath:a}){let o=null,c=null;try{const d=Cr({sampleRate:{ideal:t}},Mb);if(oh()&&r){const v=(await window.navigator.mediaDevices.enumerateDevices()).find(k=>k.kind==="audioinput"&&["airpod","headphone","earphone"].find(y=>k.label.toLowerCase().includes(y)));v&&(d.deviceId={ideal:v.deviceId})}i&&(d.deviceId=As.getDeviceIdConstraint(i));const h=navigator.mediaDevices.getSupportedConstraints().sampleRate;o=new window.AudioContext(h?{sampleRate:t}:{});const p=o.createAnalyser();if(!h){const v=a||"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js";await o.audioWorklet.addModule(v)}await Db(o.audioWorklet,s==null?void 0:s.rawAudioProcessor);const O=Cr({voiceIsolation:!0},d);c=await navigator.mediaDevices.getUserMedia({audio:O});const m=o.createMediaStreamSource(c),b=new AudioWorkletNode(o,"rawAudioProcessor");return b.port.postMessage({type:"setFormat",format:n,sampleRate:t}),m.connect(p),p.connect(b),await o.resume(),new As(o,p,b,c,m)}catch(d){var l,u;throw(l=c)==null||l.getTracks().forEach(h=>{h.stop()}),(u=o)==null||u.close(),d}}static getDeviceIdConstraint(t){if(t)return oh()?{ideal:t}:{exact:t}}constructor(t,n,r,i,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.context=t,this.analyser=n,this.worklet=r,this.inputStream=i,this.mediaStreamSource=s}async close(){this.inputStream.getTracks().forEach(t=>{t.stop()}),this.mediaStreamSource.disconnect(),await this.context.close()}setMuted(t){this.worklet.port.postMessage({type:"setMuted",isMuted:t})}async setInputDevice(t){try{const n=Cr({},Mb);t&&(n.deviceId=As.getDeviceIdConstraint(t));const r=Cr({voiceIsolation:!0},n),i=await navigator.mediaDevices.getUserMedia({audio:r});this.inputStream.getTracks().forEach(s=>{s.stop()}),this.mediaStreamSource.disconnect(),this.inputStream=i,this.mediaStreamSource=this.context.createMediaStreamSource(i),this.mediaStreamSource.connect(this.analyser)}catch(n){throw console.error("Failed to switch input device:",n),n}}}const LR=Nb("audioConcatProcessor",`/*
 * ulaw decoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const decodeTable = [0,132,396,924,1980,4092,8316,16764];

function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audioConcatProcessor", AudioConcatProcessor);
`);class Qc{static async create({sampleRate:t,format:n,outputDeviceId:r,workletPaths:i}){let s=null,a=null;try{s=new AudioContext({sampleRate:t});const l=s.createAnalyser(),u=s.createGain();a=new Audio,a.src="",a.load(),a.autoplay=!0,a.style.display="none",document.body.appendChild(a);const d=s.createMediaStreamDestination();a.srcObject=d.stream,u.connect(l),l.connect(d),await LR(s.audioWorklet,i==null?void 0:i.audioConcatProcessor);const h=new AudioWorkletNode(s,"audioConcatProcessor");return h.port.postMessage({type:"setFormat",format:n}),h.connect(u),await s.resume(),r&&a.setSinkId&&await a.setSinkId(r),new Qc(s,l,u,h,a)}catch(l){var o,c;throw(o=a)!=null&&o.parentNode&&a.parentNode.removeChild(a),(c=a)==null||c.pause(),s&&s.state!=="closed"&&await s.close(),l}}constructor(t,n,r,i,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=t,this.analyser=n,this.gain=r,this.worklet=i,this.audioElement=s}async setOutputDevice(t){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");await this.audioElement.setSinkId(t||"")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class lh extends Da{static async startSession(t){var n;const r=Da.getFullOptions(t);r.onStatusChange&&r.onStatusChange({status:"connecting"}),r.onCanSendFeedbackChange&&r.onCanSendFeedbackChange({canSendFeedback:!1});let i=null,s=null,a=null,o=null,c=null;if((n=t.useWakeLock)==null||n)try{c=await navigator.wakeLock.request("screen")}catch{}try{var l;return o=await navigator.mediaDevices.getUserMedia({audio:!0}),await Lb(r.connectionDelay),s=await $b(t),[i,a]=await Promise.all([As.create(Cr({},s.inputFormat,{preferHeadphonesForIosDevices:t.preferHeadphonesForIosDevices,inputDeviceId:t.inputDeviceId,workletPaths:t.workletPaths,libsampleratePath:t.libsampleratePath})),Qc.create(Cr({},s.outputFormat,{outputDeviceId:t.outputDeviceId,workletPaths:t.workletPaths}))]),(l=o)==null||l.getTracks().forEach(m=>{m.stop()}),o=null,new lh(r,s,i,a,c)}catch(m){var u,d,h,p;r.onStatusChange&&r.onStatusChange({status:"disconnected"}),(u=o)==null||u.getTracks().forEach(b=>{b.stop()}),(d=s)==null||d.close(),await((h=i)==null?void 0:h.close()),await((p=a)==null?void 0:p.close());try{var O;await((O=c)==null?void 0:O.release()),c=null}catch{}throw m}}constructor(t,n,r,i,s){super(t,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=a=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:Qb(a.data[0].buffer)})},this.onOutputWorkletMessage=({data:a})=>{a.type==="process"&&this.updateMode(a.finished?"listening":"speaking")},this.addAudioBase64Chunk=a=>{this.output.gain.gain.cancelScheduledValues(this.output.context.currentTime),this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:$R(a)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=a=>{if(a.length===0)return 0;let o=0;for(let c=0;c<a.length;c++)o+=a[c]/255;return o/=a.length,o<0?0:o>1?1:o},this.setVolume=({volume:a})=>{const o=Number.isFinite(a)?Math.min(1,Math.max(0,a)):1;this.volume=o,this.connection instanceof Pr?this.connection.setAudioVolume(o):this.output.gain.gain.value=o},this.input=r,this.output=i,this.wakeLock=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var t;await((t=this.wakeLock)==null?void 0:t.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(t){super.handleInterruption(t),this.fadeOutAudio()}handleAudio(t){var n,r;this.lastInterruptTimestamp<=t.audio_event.event_id&&((n=(r=this.options).onAudio)==null||n.call(r,t.audio_event.audio_base_64),this.connection instanceof Pr||this.addAudioBase64Chunk(t.audio_event.audio_base_64),this.currentEventId=t.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(t){this.connection instanceof Pr?this.connection.setMicMuted(t):this.input.setMuted(t)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof Pr?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:t,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i}){try{if(this.connection instanceof $a)try{return await this.input.setInputDevice(i),this.input}catch(a){console.warn("Failed to change device on existing input, recreating:",a)}this.connection instanceof Pr&&await this.connection.setAudioInputDevice(i||""),await this.input.close();const s=await As.create({sampleRate:t??this.connection.inputFormat.sampleRate,format:n??this.connection.inputFormat.format,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath});return this.input=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(s){throw console.error("Error changing input device",s),s}}async changeOutputDevice({sampleRate:t,format:n,outputDeviceId:r}){try{if(this.connection instanceof $a)try{return await this.output.setOutputDevice(r),this.output}catch(s){console.warn("Failed to change device on existing output, recreating:",s)}this.connection instanceof Pr&&await this.connection.setAudioOutputDevice(r||""),await this.output.close();const i=await Qc.create({sampleRate:t??this.connection.outputFormat.sampleRate,format:n??this.connection.outputFormat.format,outputDeviceId:r,workletPaths:this.options.workletPaths});return this.output=i,this.output}catch(i){throw console.error("Error changing output device",i),i}}}var Ub;(function(e){e.SESSION_STARTED="session_started",e.PARTIAL_TRANSCRIPT="partial_transcript",e.COMMITTED_TRANSCRIPT="committed_transcript",e.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS="committed_transcript_with_timestamps",e.AUTH_ERROR="auth_error",e.ERROR="error",e.OPEN="open",e.CLOSE="close",e.QUOTA_EXCEEDED="quota_exceeded",e.COMMIT_THROTTLED="commit_throttled",e.TRANSCRIBER_ERROR="transcriber_error",e.UNACCEPTED_TERMS="unaccepted_terms",e.RATE_LIMITED="rate_limited",e.INPUT_ERROR="input_error",e.QUEUE_OVERFLOW="queue_overflow",e.RESOURCE_EXHAUSTED="resource_exhausted",e.SESSION_TIME_LIMIT_EXCEEDED="session_time_limit_exceeded",e.CHUNK_SIZE_EXCEEDED="chunk_size_exceeded",e.INSUFFICIENT_AUDIO_ACTIVITY="insufficient_audio_activity"})(Ub||(Ub={}));var qb,Xb;(function(e){e.PCM_8000="pcm_8000",e.PCM_16000="pcm_16000",e.PCM_22050="pcm_22050",e.PCM_24000="pcm_24000",e.PCM_44100="pcm_44100",e.PCM_48000="pcm_48000",e.ULAW_8000="ulaw_8000"})(qb||(qb={})),function(e){e.MANUAL="manual",e.VAD="vad"}(Xb||(Xb={}));let MR=class extends Da{static startSession(t){return t.textOnly?ch.startSession(t):lh.startSession(t)}};function _n(e){return e?e==="true"?!0:e==="false"?!1:null:null}const uh=["variant","placement","override-config","avatar-image-url","avatar-orb-color-1","avatar-orb-color-2","agent-id","signed-url","terms-key","server-location","language","dynamic-variables","show-avatar-when-collapsed","override-prompt","override-llm","override-speed","override-stability","override-similarity-boost","override-first-message","override-language","override-voice-id","override-text-only","mic-muting","transcript","text-input","text-contents","default-expanded","always-expanded","user-id","use-rtc","collect-feedback","worklet-path-raw-audio-processor","worklet-path-audio-concat-processor","worklet-path-libsamplerate","syntax-highlight-theme","markdown-link-allowed-hosts","markdown-link-include-www","markdown-link-allow-http"],UR='@import"https://fonts.googleapis.com/css2?family=Inter:wght@400,500&display=swap";*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.\\!container{width:100%!important}.container{width:100%}@media(min-width:640px){.\\!container{max-width:640px!important}.container{max-width:640px}}@media(min-width:768px){.\\!container{max-width:768px!important}.container{max-width:768px}}@media(min-width:1024px){.\\!container{max-width:1024px!important}.container{max-width:1024px}}@media(min-width:1280px){.\\!container{max-width:1280px!important}.container{max-width:1280px}}@media(min-width:1536px){.\\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.\\!visible{visibility:visible!important}.visible{visibility:visible}.collapse{visibility:collapse}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.-bottom-3{bottom:-12px}.bottom-0{bottom:0}.bottom-20{bottom:80px}.end-3{inset-inline-end:12px}.left-0{left:0}.left-1\\/2{left:50%}.left-4{left:16px}.right-0{right:0}.right-1{right:4px}.start-3{inset-inline-start:12px}.top-0{top:0}.top-1{top:4px}.top-1\\/2{top:50%}.top-16{top:64px}.top-20{top:80px}.top-4{top:16px}.top-\\[40\\%\\]{top:40%}.top-\\[88px\\]{top:88px}.z-1{z-index:1}.z-10{z-index:10}.z-2{z-index:2}.m-0{margin:0}.m-1{margin:4px}.-mx-0\\.5{margin-left:-2px;margin-right:-2px}.mx-1{margin-left:4px;margin-right:4px}.my-4{margin-top:16px;margin-bottom:16px}.my-6{margin-top:24px;margin-bottom:24px}.-mr-1\\.5{margin-right:-6px}.mb-0\\.5{margin-bottom:2px}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-4{margin-bottom:16px}.ml-4{margin-left:16px}.ml-auto{margin-left:auto}.ms-auto{margin-inline-start:auto}.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}.mt-6{margin-top:24px}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.\\!flex{display:flex!important}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.table-cell{display:table-cell}.table-row{display:table-row}.grid{display:grid}.contents{display:contents}.list-item{display:list-item}.hidden{display:none}.h-16{height:64px}.h-4{height:16px}.h-48{height:192px}.h-5{height:20px}.h-6{height:24px}.h-8{height:32px}.h-9{height:36px}.h-full{height:100%}.h-screen{height:100vh}.max-h-\\[50\\%\\]{max-height:50%}.max-h-\\[min\\(384px\\,var\\(--radix-select-content-available-height\\)\\)\\]{max-height:min(384px,var(--radix-select-content-available-height))}.min-h-0{min-height:0px}.min-h-\\[4\\.5rem\\]{min-height:4.5rem}.min-h-\\[6lh\\]{min-height:6lh}.min-h-full{min-height:100%}.min-h-min{min-height:-moz-min-content;min-height:min-content}.w-1\\/2{width:50%}.w-20{width:80px}.w-4{width:16px}.w-48{width:192px}.w-5{width:20px}.w-6{width:24px}.w-64{width:256px}.w-8{width:32px}.w-9{width:36px}.w-full{width:100%}.w-screen{width:100vw}.\\!min-w-60{min-width:240px!important}.min-w-0{min-width:0px}.min-w-60{min-width:240px}.min-w-9{min-width:36px}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.min-w-max{min-width:-moz-max-content;min-width:max-content}.min-w-min{min-width:-moz-min-content;min-width:min-content}.max-w-\\[400px\\]{max-width:400px}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.border-collapse{border-collapse:collapse}.origin-bottom{transform-origin:bottom}.origin-bottom-left{transform-origin:bottom left}.origin-bottom-right{transform-origin:bottom right}.origin-top{transform-origin:top}.origin-top-left{transform-origin:top left}.origin-top-right{transform-origin:top right}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-\\[calc\\(var\\(--el-overlay-padding\\)\\)\\]{--tw-translate-y: calc(calc(var(--el-overlay-padding)) * -1);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-full{--tw-translate-y: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-1\\/2{--tw-translate-y: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[calc\\(var\\(--el-overlay-padding\\)\\)\\]{--tw-translate-y: calc(var(--el-overlay-padding));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-full{--tw-translate-y: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-180{--tw-rotate: -180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-90{--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-150{--tw-scale-x: 1.5;--tw-scale-y: 1.5;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-75{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\\[0\\.1667\\]{--tw-scale-x: .1667;--tw-scale-y: .1667;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.list-outside{list-style-position:outside}.list-decimal{list-style-type:decimal}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.place-content-center{place-content:center}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:4px}.gap-1\\.5{gap:6px}.gap-2{gap:8px}.gap-2\\.5{gap:10px}.gap-3{gap:12px}.gap-6{gap:24px}.gap-8{gap:32px}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-base-border>:not([hidden])~:not([hidden]){border-color:var(--el-base-border)}.self-auto{align-self:auto}.self-stretch{align-self:stretch}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-normal{white-space:normal}.whitespace-nowrap{white-space:nowrap}.whitespace-pre{white-space:pre}.whitespace-pre-wrap{white-space:pre-wrap}.break-all{word-break:break-all}.rounded-\\[calc\\(var\\(--el-button-radius\\)\\+4px\\)\\]{border-radius:calc(var(--el-button-radius) + 4px)}.rounded-\\[calc\\(var\\(--el-sheet-radius\\)-8px\\)\\]{border-radius:calc(var(--el-sheet-radius) - 8px)}.rounded-bubble{border-radius:var(--el-bubble-radius)}.rounded-button{border-radius:var(--el-button-radius)}.rounded-compact-sheet{border-radius:var(--el-compact-sheet-radius)}.rounded-dropdown-sheet{border-radius:var(--el-dropdown-sheet-radius)}.rounded-full{border-radius:9999px}.rounded-input{border-radius:var(--el-input-radius)}.rounded-sheet{border-radius:var(--el-sheet-radius)}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-accent{border-color:var(--el-accent)}.border-base{border-color:var(--el-base)}.border-base-border{border-color:var(--el-base-border)}.bg-accent{background-color:var(--el-accent)}.bg-base{background-color:var(--el-base)}.bg-base-active{background-color:var(--el-base-active)}.bg-base-border{background-color:var(--el-base-border)}.bg-base-hover{background-color:var(--el-base-hover)}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.from-base{--tw-gradient-from: var(--el-base) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.bg-cover{background-size:cover}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:4px}.p-1\\.5{padding:6px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}.px-1{padding-left:4px;padding-right:4px}.px-1\\.5{padding-left:6px;padding-right:6px}.px-2{padding-left:8px;padding-right:8px}.px-2\\.5{padding-left:10px;padding-right:10px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-8{padding-left:32px;padding-right:32px}.py-0\\.5{padding-top:2px;padding-bottom:2px}.py-1{padding-top:4px;padding-bottom:4px}.py-1\\.5{padding-top:6px;padding-bottom:6px}.py-2{padding-top:8px;padding-bottom:8px}.py-2\\.5{padding-top:10px;padding-bottom:10px}.py-4{padding-top:16px;padding-bottom:16px}.py-\\[calc\\(theme\\(spacing\\.2\\)-1px\\)\\]{padding-top:7px;padding-bottom:7px}.pb-1{padding-bottom:4px}.pb-2{padding-bottom:8px}.pb-3{padding-bottom:12px}.pb-4{padding-bottom:16px}.pb-\\[60px\\]{padding-bottom:60px}.pl-1\\.5{padding-left:6px}.pl-16{padding-left:64px}.pl-4{padding-left:16px}.pr-16{padding-right:64px}.pr-3{padding-right:12px}.pr-8{padding-right:32px}.pt-1{padding-top:4px}.pt-1\\.5{padding-top:6px}.pt-2{padding-top:8px}.pt-20{padding-top:80px}.pt-4{padding-top:16px}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-\\[10px\\]{font-size:10px}.text-\\[13px\\]{font-size:13px}.text-lg{font-size:18px;line-height:26px}.text-md{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.text-xs{font-size:12px;line-height:16px}.font-medium{font-weight:500}.font-semibold{font-weight:600}.italic{font-style:italic}.leading-5{line-height:1.25rem}.text-accent-primary{color:var(--el-accent-primary)}.text-base-border{color:var(--el-base-border)}.text-base-error{color:var(--el-base-error)}.text-base-primary{color:var(--el-base-primary)}.text-base-subtle{color:var(--el-base-subtle)}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-30{opacity:.3}.shadow-header{--tw-shadow: 0 0 1px 0 rgba(0, 0, 0, .4), 0 2px 2px 0 rgba(0, 0, 0, .04);--tw-shadow-colored: 0 0 1px 0 var(--tw-shadow-color), 0 2px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 2px 40px 1px rgba(0, 0, 0, .12);--tw-shadow-colored: 0 2px 40px 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 2px 24px 1px rgba(0, 0, 0, .16);--tw-shadow-colored: 0 2px 24px 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-scroll-fade-bottom{--tw-shadow: 0 8px 16px -4px rgba(0, 0, 0, .1);--tw-shadow-colored: 0 8px 16px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-scroll-fade-top{--tw-shadow: 0 -8px 16px -4px rgba(0, 0, 0, .1);--tw-shadow-colored: 0 -8px 16px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-accent{--tw-ring-color: var(--el-accent)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-\\[1px\\]{--tw-backdrop-blur: blur(1px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[border-radius\\]{transition-property:border-radius;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[colors\\,opacity\\]{transition-property:colors,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\]{transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\,transform\\]{transition-property:opacity,transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\,width\\,height\\,transform\\,flex-grow\\]{transition-property:opacity,width,height,transform,flex-grow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[transform\\,left\\,top\\,opacity\\,scale\\]{transition-property:transform,left,top,opacity,scale;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[transform\\,opacity\\]{transition-property:transform,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,max-width\\,max-height\\,transform\\,border-radius\\,opacity\\,inset\\,bottom\\,top\\,left\\,right\\,margin\\,padding\\]{transition-property:width,height,max-width,max-height,transform,border-radius,opacity,inset,bottom,top,left,right,margin,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.overlay{position:absolute;inset:var(--el-overlay-padding);right:calc(var(--el-overlay-padding) + var(--removed-body-scroll-bar-size, 0px))}.focus-ring{--tw-ring-color: var(--el-accent);--tw-ring-offset-width: 2px;--tw-ring-offset-color: var(--el-base)}.focus-ring:focus-visible{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}[data-variant=compact].sheet{height:calc(100% - 80px)}[data-variant=compact].sheet{max-height:550px}[data-variant=compact].sheet{width:100%}[data-variant=compact].sheet{max-width:400px}[data-variant=compact].sheet{border-radius:var(--el-sheet-radius)}[data-variant=expanded].sheet{height:100%}[data-variant=expanded].sheet{max-height:calc(100% - 80px)}[data-variant=expanded].sheet{width:100%}[data-variant=expanded].sheet{max-width:600px}[data-variant=expanded].sheet{border-radius:var(--el-sheet-radius)}[data-variant=fullscreen].sheet{bottom:0}[data-variant=fullscreen].sheet{height:100%}[data-variant=fullscreen].sheet{max-height:100dvh}[data-variant=fullscreen].sheet{width:100%}[data-variant=fullscreen].sheet{max-width:100dvw}[data-variant=fullscreen].sheet{border-radius:0}[data-variant=fullscreen].sheet{padding-bottom:24px}[data-variant=fullscreen].sheet{margin:calc(-1 * var(--el-overlay-padding));width:calc(100% + 2 * var(--el-overlay-padding));height:calc(100% + 2 * var(--el-overlay-padding))}.animate-text{background-image:linear-gradient(75deg,var(--el-base-primary),var(--el-base-subtle),var(--el-base-primary),var(--el-base-subtle));background-size:300% 100%;-webkit-background-clip:text;background-clip:text;color:transparent;animation:TextAnimation 2s linear infinite}@keyframes TextAnimation{0%{background-position:0 0}to{background-position:100% 0}}.\\!terms h6,.terms h6{font-size:12px;line-height:16px;font-weight:500;color:var(--el-base-primary)}.\\!terms h5,.terms h5{font-size:14px;line-height:20px;font-weight:500;color:var(--el-base-primary)}.\\!terms h4,.terms h4{font-size:16px;line-height:24px;font-weight:500;color:var(--el-base-primary)}.\\!terms h3,.terms h3{font-size:18px;line-height:26px;font-weight:500;color:var(--el-base-primary)}.\\!terms h2,.terms h2{font-size:20px;line-height:28px;font-weight:500;color:var(--el-base-primary)}.\\!terms h2,.terms h2{font-size:24px;line-height:30px;font-weight:500;color:var(--el-base-primary)}.\\[field-sizing\\:content\\]{field-sizing:content}.\\[line-height\\:var\\(--el-overlay-padding\\)\\]{line-height:var(--el-overlay-padding)}.\\[mask-image\\:linear-gradient\\(to_bottom\\,black\\,transparent\\)\\]{-webkit-mask-image:linear-gradient(to bottom,black,transparent);mask-image:linear-gradient(to bottom,black,transparent)}.\\[mask-image\\:linear-gradient\\(to_top\\,black\\,transparent\\)\\]{-webkit-mask-image:linear-gradient(to top,black,transparent);mask-image:linear-gradient(to top,black,transparent)}.\\[overflow-wrap\\:break-word\\]{overflow-wrap:break-word}.dev-host,:host{pointer-events:none;position:fixed;inset:0;z-index:1000;font-size:16px;line-height:24px;color:var(--el-base-primary);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;scrollbar-color:#e5e7eb transparent}.markdown{text-autospace:normal;text-spacing-trim:trim-start}.markdown h1,.markdown h2,.markdown h3,.markdown h4,.markdown h5,.markdown h6{word-break:auto-phrase}.tok-comment,.tok-meta{color:#6a737d}.tok-keyword{color:#d73a49}.tok-atom,.tok-bool,.tok-literal,.tok-number{color:#005cc5}.tok-string,.tok-string2{color:#032f62}.tok-variableName{color:#24292e}.tok-variableName.tok-definition{color:#6f42c1}.tok-variableName.tok-local{color:#24292e}.tok-variableName2,.tok-macroName,.tok-typeName,.tok-namespace,.tok-className{color:#6f42c1}.tok-propertyName{color:#24292e}.tok-propertyName.tok-definition{color:#005cc5}.tok-labelName{color:#22863a}.tok-url,.tok-link{text-decoration:underline;color:#032f62}.tok-operator{color:#d73a49}.tok-punctuation{color:#24292e}.tok-invalid{color:#b31d28}.tok-deleted{color:#b31d28;background-color:#ffeef0}.tok-inserted{color:#22863a;background-color:#f0fff4}.tok-heading{font-weight:700;color:#005cc5}.tok-emphasis{font-style:italic;color:#24292e}.tok-strong{font-weight:700;color:#24292e}.tok-strikethrough{text-decoration:line-through}.tok-monospace{color:#005cc5}.tok-processingInstruction,[data-syntax-theme=dark] .tok-comment,[data-syntax-theme=dark] .tok-meta{color:#6a737d}[data-syntax-theme=dark] .tok-keyword{color:#f97583}[data-syntax-theme=dark] .tok-atom,[data-syntax-theme=dark] .tok-bool,[data-syntax-theme=dark] .tok-literal,[data-syntax-theme=dark] .tok-number,[data-syntax-theme=dark] .tok-propertyName.tok-definition{color:#79b8ff}[data-syntax-theme=dark] .tok-string,[data-syntax-theme=dark] .tok-string2{color:#9ecbff}[data-syntax-theme=dark] .tok-url,[data-syntax-theme=dark] .tok-link{color:#dbedff}[data-syntax-theme=dark] .tok-variableName,[data-syntax-theme=dark] .tok-variableName.tok-local,[data-syntax-theme=dark] .tok-propertyName,[data-syntax-theme=dark] .tok-emphasis,[data-syntax-theme=dark] .tok-strong{color:#e1e4e8}[data-syntax-theme=dark] .tok-variableName.tok-definition,[data-syntax-theme=dark] .tok-variableName2,[data-syntax-theme=dark] .tok-macroName,[data-syntax-theme=dark] .tok-typeName,[data-syntax-theme=dark] .tok-namespace,[data-syntax-theme=dark] .tok-className{color:#b392f0}[data-syntax-theme=dark] .tok-labelName{color:#85e89d}[data-syntax-theme=dark] .tok-invalid{color:#fdaeb7}[data-syntax-theme=dark] .tok-deleted{color:#fdaeb7;background-color:#86181d}[data-syntax-theme=dark] .tok-inserted{color:#85e89d;background-color:#144620}[data-syntax-theme=dark] .tok-heading{color:#79b8ff}[data-syntax-theme=dark] .tok-operator{color:#f97583}[data-syntax-theme=dark] .tok-punctuation{color:#e1e4e8}[data-syntax-theme=dark] .tok-monospace{color:#79b8ff}[data-syntax-theme=dark] .tok-processingInstruction{color:#6a737d}.placeholder\\:text-base-subtle::-moz-placeholder{color:var(--el-base-subtle)}.placeholder\\:text-base-subtle::placeholder{color:var(--el-base-subtle)}.hover\\:border-accent-hover:hover{border-color:var(--el-accent-hover)}.hover\\:border-base-hover:hover{border-color:var(--el-base-hover)}.hover\\:bg-accent-hover:hover{background-color:var(--el-accent-hover)}.hover\\:bg-base-hover:hover{background-color:var(--el-base-hover)}.hover\\:opacity-50:hover{opacity:.5}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:underline-offset-2:focus-visible{text-underline-offset:2px}.focus-visible\\:opacity-100:focus-visible{opacity:1}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.active\\:border-accent-active:active{border-color:var(--el-accent-active)}.active\\:border-base-active:active{border-color:var(--el-base-active)}.active\\:bg-accent-active:active{background-color:var(--el-accent-active)}.active\\:bg-base-active:active{background-color:var(--el-base-active)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group:focus-within .group-focus-within\\:pointer-events-auto{pointer-events:auto}.group:focus-within .group-focus-within\\:opacity-100{opacity:1}.group:hover .group-hover\\:pointer-events-auto{pointer-events:auto}.group:hover .group-hover\\:opacity-100{opacity:1}.data-hidden\\:-translate-y-4[data-shown=false]{--tw-translate-y: -16px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:translate-x-full[data-shown=false]{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:translate-y-2[data-shown=false]{--tw-translate-y: 8px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-100[data-shown=false]{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-75[data-shown=false]{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:scale-90[data-shown=false]{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-hidden\\:opacity-0[data-shown=false]{opacity:0}.data-\\[highlighted\\]\\:bg-base-active[data-highlighted]{background-color:var(--el-base-active)}';function Mt(e,t){qR(e)&&(e="100%");const n=XR(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Nc(e){return Math.min(1,Math.max(0,e))}function qR(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function XR(e){return typeof e=="string"&&e.indexOf("%")!==-1}function Fb(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Dc(e){return Number(e)<=1?`${Number(e)*100}%`:e}function qi(e){return e.length===1?"0"+e:String(e)}function FR(e,t,n){return{r:Mt(e,255)*255,g:Mt(t,255)*255,b:Mt(n,255)*255}}function Bb(e,t,n){e=Mt(e,255),t=Mt(t,255),n=Mt(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let s=0,a=0;const o=(r+i)/2;if(r===i)a=0,s=0;else{const c=r-i;switch(a=o>.5?c/(2-r-i):c/(r+i),r){case e:s=(t-n)/c+(t<n?6:0);break;case t:s=(n-e)/c+2;break;case n:s=(e-t)/c+4;break}s/=6}return{h:s,s:a,l:o}}function dh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function BR(e,t,n){let r,i,s;if(e=Mt(e,360),t=Mt(t,100),n=Mt(n,100),t===0)i=n,s=n,r=n;else{const a=n<.5?n*(1+t):n+t-n*t,o=2*n-a;r=dh(o,a,e+1/3),i=dh(o,a,e),s=dh(o,a,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function zb(e,t,n){e=Mt(e,255),t=Mt(t,255),n=Mt(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let s=0;const a=r,o=r-i,c=r===0?0:o/r;if(r===i)s=0;else{switch(r){case e:s=(t-n)/o+(t<n?6:0);break;case t:s=(n-e)/o+2;break;case n:s=(e-t)/o+4;break}s/=6}return{h:s,s:c,v:a}}function zR(e,t,n){e=Mt(e,360)*6,t=Mt(t,100),n=Mt(n,100);const r=Math.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),c=r%6,l=[n,a,s,s,o,n][c],u=[o,n,n,a,s,s][c],d=[s,s,o,n,n,a][c];return{r:l*255,g:u*255,b:d*255}}function Zb(e,t,n,r){const i=[qi(Math.round(e).toString(16)),qi(Math.round(t).toString(16)),qi(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function ZR(e,t,n,r,i){const s=[qi(Math.round(e).toString(16)),qi(Math.round(t).toString(16)),qi(Math.round(n).toString(16)),qi(VR(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function jR(e,t,n,r){const i=e/100,s=t/100,a=n/100,o=r/100,c=255*(1-i)*(1-o),l=255*(1-s)*(1-o),u=255*(1-a)*(1-o);return{r:c,g:l,b:u}}function jb(e,t,n){let r=1-e/255,i=1-t/255,s=1-n/255,a=Math.min(r,i,s);return a===1?(r=0,i=0,s=0):(r=(r-a)/(1-a)*100,i=(i-a)/(1-a)*100,s=(s-a)/(1-a)*100),a*=100,{c:Math.round(r),m:Math.round(i),y:Math.round(s),k:Math.round(a)}}function VR(e){return Math.round(parseFloat(e)*255).toString(16)}function Vb(e){return fn(e)/255}function fn(e){return parseInt(e,16)}function GR(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const hh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function WR(e){let t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=KR(e)),typeof e=="object"&&(mn(e.r)&&mn(e.g)&&mn(e.b)?(t=FR(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):mn(e.h)&&mn(e.s)&&mn(e.v)?(r=Dc(e.s),i=Dc(e.v),t=zR(e.h,r,i),a=!0,o="hsv"):mn(e.h)&&mn(e.s)&&mn(e.l)?(r=Dc(e.s),s=Dc(e.l),t=BR(e.h,r,s),a=!0,o="hsl"):mn(e.c)&&mn(e.m)&&mn(e.y)&&mn(e.k)&&(t=jR(e.c,e.m,e.y,e.k),a=!0,o="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Fb(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}const YR="[-\\+]?\\d+%?",HR="[-\\+]?\\d*\\.\\d+%?",si="(?:"+HR+")|(?:"+YR+")",ph="[\\s|\\(]+("+si+")[,|\\s]+("+si+")[,|\\s]+("+si+")\\s*\\)?",$c="[\\s|\\(]+("+si+")[,|\\s]+("+si+")[,|\\s]+("+si+")[,|\\s]+("+si+")\\s*\\)?",En={CSS_UNIT:new RegExp(si),rgb:new RegExp("rgb"+ph),rgba:new RegExp("rgba"+$c),hsl:new RegExp("hsl"+ph),hsla:new RegExp("hsla"+$c),hsv:new RegExp("hsv"+ph),hsva:new RegExp("hsva"+$c),cmyk:new RegExp("cmyk"+$c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function KR(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(hh[e])e=hh[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let n=En.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=En.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=En.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=En.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=En.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=En.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=En.cmyk.exec(e),n?{c:n[1],m:n[2],y:n[3],k:n[4]}:(n=En.hex8.exec(e),n?{r:fn(n[1]),g:fn(n[2]),b:fn(n[3]),a:Vb(n[4]),format:t?"name":"hex8"}:(n=En.hex6.exec(e),n?{r:fn(n[1]),g:fn(n[2]),b:fn(n[3]),format:t?"name":"hex"}:(n=En.hex4.exec(e),n?{r:fn(n[1]+n[1]),g:fn(n[2]+n[2]),b:fn(n[3]+n[3]),a:Vb(n[4]+n[4]),format:t?"name":"hex8"}:(n=En.hex3.exec(e),n?{r:fn(n[1]+n[1]),g:fn(n[2]+n[2]),b:fn(n[3]+n[3]),format:t?"name":"hex"}:!1))))))))))}function mn(e){return typeof e=="number"?!Number.isNaN(e):En.CSS_UNIT.test(e)}class vt{constructor(t="",n={}){if(t instanceof vt)return t;typeof t=="number"&&(t=GR(t)),this.originalInput=t;const r=WR(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format??r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let n,r,i;const s=t.r/255,a=t.g/255,o=t.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i}getAlpha(){return this.a}setAlpha(t){return this.a=Fb(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=zb(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=zb(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?`hsv(${n}, ${r}%, ${i}%)`:`hsva(${n}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){const t=Bb(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=Bb(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?`hsl(${n}, ${r}%, ${i}%)`:`hsla(${n}, ${r}%, ${i}%, ${this.roundA})`}toHex(t=!1){return Zb(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return ZR(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?`rgb(${t}, ${n}, ${r})`:`rgba(${t}, ${n}, ${r}, ${this.roundA})`}toPercentageRgb(){const t=n=>`${Math.round(Mt(n,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=n=>Math.round(Mt(n,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...jb(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:n,y:r,k:i}=jb(this.r,this.g,this.b);return`cmyk(${t}, ${n}, ${r}, ${i})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+Zb(this.r,this.g,this.b,!1);for(const[n,r]of Object.entries(hh))if(t===r)return n;return!1}toString(t){const n=!!t;t=t??this.format;let r=!1;const i=this.a<1&&this.a>=0;return!n&&i&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),t==="cmyk"&&(r=this.toCmykString()),r||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new vt(this.toString())}lighten(t=10){const n=this.toHsl();return n.l+=t/100,n.l=Nc(n.l),new vt(n)}brighten(t=10){const n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new vt(n)}darken(t=10){const n=this.toHsl();return n.l-=t/100,n.l=Nc(n.l),new vt(n)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const n=this.toHsl();return n.s-=t/100,n.s=Nc(n.s),new vt(n)}saturate(t=10){const n=this.toHsl();return n.s+=t/100,n.s=Nc(n.s),new vt(n)}greyscale(){return this.desaturate(100)}spin(t){const n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new vt(n)}mix(t,n=50){const r=this.toRgb(),i=new vt(t).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new vt(a)}analogous(t=6,n=30){const r=this.toHsl(),i=360/n,s=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(new vt(r));return s}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new vt(t)}monochromatic(t=6){const n=this.toHsv(),{h:r}=n,{s:i}=n;let{v:s}=n;const a=[],o=1/t;for(;t--;)a.push(new vt({h:r,s:i,v:s})),s=(s+o)%1;return a}splitcomplement(){const t=this.toHsl(),{h:n}=t;return[this,new vt({h:(n+72)%360,s:t.s,l:t.l}),new vt({h:(n+216)%360,s:t.s,l:t.l})]}onBackground(t){const n=this.toRgb(),r=new vt(t).toRgb(),i=n.a+r.a*(1-n.a);return new vt({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const n=this.toHsl(),{h:r}=n,i=[this],s=360/t;for(let a=1;a<t;a++)i.push(new vt({h:(r+a*s)%360,s:n.s,l:n.l}));return i}equals(t){const n=new vt(t);return this.format==="cmyk"||n.format==="cmyk"?this.toCmykString()===n.toCmykString():this.toRgbString()===n.toRgbString()}}const Gb=["tiny","compact","full"];function JR(e){return Gb.includes(e)?e:Gb[0]}const eA=["top-left","top","top-right","bottom-left","bottom","bottom-right"];function tA(e){return eA.includes(e)?e:"bottom-right"}const Wb={main_label:"Need help?",start_call:"Start a call",start_chat:"Start a chat",send_message:"Send",new_call:"New call",end_call:"End",mute_microphone:"Mute microphone",text_mode:"Switch to text mode",voice_mode:"Switch to voice mode",switched_to_text_mode:"Switched to text mode",switched_to_voice_mode:"Switched to voice mode",change_language:"Change language",collapse:"Collapse",expand:"Expand",copied:"Copied!",accept_terms:"Accept",dismiss_terms:"Cancel",listening_status:"Listening",speaking_status:"Talk to interrupt",connecting_status:"Connecting",chatting_status:"Chatting with AI Agent",input_label:"Text message input",input_placeholder:"Send a message...",input_placeholder_text_only:"Send a message...",input_placeholder_new_conversation:"Start a new conversation",user_ended_conversation:"You ended the conversation",agent_ended_conversation:"The agent ended the conversation",conversation_id:"ID",error_occurred:"An error occurred",copy_id:"Copy ID",initiate_feedback:"How was this conversation?",request_follow_up_feedback:"Tell us more",thanks_for_feedback:"Thank you for your feedback!",thanks_for_feedback_details:"Your feedback helps us improve our service and better support you in the future.",follow_up_feedback_placeholder:"Tell us more about your experience...",submit:"Submit",go_back:"Go back",copy:"Copy",download:"Download",wrap:"Wrap"},nA=Object.keys(Wb),fh={base:"#ffffff",base_hover:"#f9fafb",base_active:"#f3f4f6",base_border:"#e5e7eb",base_subtle:"#6b7280",base_primary:"#000000",base_error:"#ef4444",accent:"#000000",accent_hover:"#1f2937",accent_active:"#374151",accent_border:"#4b5563",accent_subtle:"#6b7280",accent_primary:"#ffffff",overlay_padding:32,button_radius:18,input_radius:10,bubble_radius:15,sheet_radius:"calc(var(--el-button-radius) + 6px)",compact_sheet_radius:"calc(var(--el-button-radius) + 12px)",dropdown_sheet_radius:"calc(var(--el-input-radius) + 6px)"},rA=Object.keys(fh);function iA(e="us"){switch(e){case"eu-residency":case"in-residency":case"us":case"global":return e;default:return console.warn(`[ConversationalAI] Invalid server-location: ${e}. Defaulting to "us"`),"us"}}function Bt(e){const t=cn(e);if(t==null)throw new Error(`${e.displayName} cannot be used outside of provider`);return t}const Yb=it(null);function sA({value:e,children:t}){const n=Ne(()=>Object.fromEntries(uh.map(r=>[r,un(e[r])])),[]);return uh.forEach(r=>{n[r].value=e[r]}),g(Yb.Provider,{value:n,children:t})}function aA(){return Bt(Yb)}function Qe(e){return aA()[e]}const Hb=it(null);function oA({children:e}){const t=Qe("server-location"),n=Ne(()=>{const r=Ft(()=>iA(t.value)),i={us:"https://api.elevenlabs.io","eu-residency":"https://api-eu.elevenlabs.io","in-residency":"https://api-in.elevenlabs.io",global:"https://api.elevenlabs.io"},s={us:"wss://api.elevenlabs.io","eu-residency":"wss://api-eu.elevenlabs.io","in-residency":"wss://api-in.elevenlabs.io",global:"wss://api.elevenlabs.io"};return{location:r,serverUrl:Ft(()=>i[r.value]),webSocketUrl:Ft(()=>s[r.value])}},[]);return g(Hb.Provider,{value:n,children:e})}function mh(){return Bt(Hb)}const La={en:{name:"English",flagCode:"ca",languageCode:"en"},zh:{name:"",flagCode:"cn",languageCode:"zh"},es:{name:"Espaol",flagCode:"es",languageCode:"es"},hi:{name:"",flagCode:"in",languageCode:"hi"},pt:{name:"Portugus (Portugal)",flagCode:"pt",languageCode:"pt"},"pt-br":{name:"Portugus (Brasil)",flagCode:"br",languageCode:"pt-br"},fr:{name:"Franais",flagCode:"fr",languageCode:"fr"},de:{name:"Deutsch",flagCode:"de",languageCode:"de"},ja:{name:"",flagCode:"jp",languageCode:"ja"},ar:{name:"",flagCode:"ae",languageCode:"ar"},ru:{name:"",flagCode:"ru",languageCode:"ru"},ko:{name:"",flagCode:"kr",languageCode:"ko"},id:{name:"Bahasa Indonesia",flagCode:"id",languageCode:"id"},it:{name:"Italiano",flagCode:"it",languageCode:"it"},nl:{name:"Nederlands",flagCode:"nl",languageCode:"nl"},tr:{name:"Trke",flagCode:"tr",languageCode:"tr"},pl:{name:"Polski",flagCode:"pl",languageCode:"pl"},sv:{name:"Svenska",flagCode:"se",languageCode:"sv"},ms:{name:"Bahasa Melayu",flagCode:"my",languageCode:"ms"},ro:{name:"Romn",flagCode:"ro",languageCode:"ro"},uk:{name:"",flagCode:"ua",languageCode:"uk"},el:{name:"",flagCode:"gr",languageCode:"el"},cs:{name:"etina",flagCode:"cz",languageCode:"cs"},da:{name:"Dansk",flagCode:"dk",languageCode:"da"},fi:{name:"Suomi",flagCode:"fi",languageCode:"fi"},bg:{name:"",flagCode:"bg",languageCode:"bg"},hr:{name:"Hrvatski",flagCode:"hr",languageCode:"hr"},sk:{name:"Slovenina",flagCode:"sk",languageCode:"sk"},ta:{name:"",flagCode:"in",languageCode:"ta"},hu:{name:"Magyar",flagCode:"hu",languageCode:"hu"},no:{name:"Norsk",flagCode:"no",languageCode:"no"},vi:{name:"Ting Vit",flagCode:"vn",languageCode:"vi"},tl:{name:"Tagalog",flagCode:"ph",languageCode:"tl"}};function Oh(e){return Object.keys(La).includes(e??"")}const Kb=it(null);function cA({children:e}){const t=bt(),n=Qe("language"),r=Qe("override-language"),i=Ze(n.peek()??t.peek().language),s=Te(()=>(t.value.supported_language_overrides??[]).filter(Oh)),a=Te(()=>s.value.map(c=>La[c]).sort((c,l)=>c.name.localeCompare(l.name))),o=Ne(()=>({language:Ft(()=>Oh(r.value)?La[r.value]:Oh(i.value)&&s.value.includes(i.value)?La[i.value]:La[t.value.language]),setLanguage:c=>{i.value=c},options:a,showPicker:Ft(()=>a.value.length>0)}),[]);return g(Kb.Provider,{value:o,children:e})}function Is(){return Bt(Kb)}const lA="1.3.1";async function uA(e){var t;try{const n=await fetch(`https://api.askbenny.ca/elevenlabs/signed-url?agentId=${e}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return((t=(await n.json()).body)==null?void 0:t.signedUrl)||null}catch(n){return console.error("[ConversationalAI] Failed to fetch signed URL:",n),null}}async function dA(e){try{const t=await fetch(`https://api.askbenny.ca/elevenlabs/agents/config?agentId=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).body||null}catch(t){return console.error("[ConversationalAI] Failed to fetch agent config:",t),null}}const Jb=it(null);function hA({children:e}){const{language:t}=Is(),n=Qe("override-prompt"),r=Qe("override-first-message"),i=Qe("override-voice-id"),s=Qe("override-text-only"),a=Qe("user-id"),o=Ze(null),c=Ze(!1),l=Te(()=>{var _,S,C,N,$,x;const T={agent:{prompt:{prompt:n.value},firstMessage:r.value,language:t.value.languageCode},tts:{voiceId:i.value},conversation:{textOnly:_n(s.value)??void 0}};if(o.value){const D=o.value;return{agent:{prompt:{prompt:((S=(_=D.agent)==null?void 0:_.prompt)==null?void 0:S.prompt)||n.value},firstMessage:((C=D.agent)==null?void 0:C.firstMessage)||r.value,language:((N=D.agent)==null?void 0:N.language)||t.value.languageCode},tts:{voiceId:(($=D.tts)==null?void 0:$.voiceId)||i.value},conversation:{textOnly:!!((x=D.conversation)!=null&&x.textOnly)||(_n(s.value)??void 0)}}}return T}),u=Qe("dynamic-variables"),d=Te(()=>{if(u.value)try{return JSON.parse(u.value)}catch(T){console.error(`[ConversationalAI] Cannot parse dynamic-variables: ${T==null?void 0:T.message}`)}}),{webSocketUrl:h}=mh(),p=Qe("agent-id"),O=Qe("signed-url"),m=Mc(),b=kA(),v=Ze(null),k=Ze(!1);ve(()=>{p.value&&!O.value&&!v.value&&!k.value&&(k.value=!0,uA(p.value).then(T=>{v.value=T,k.value=!1}))},[p.value,O.value]),ve(()=>{p.value&&!o.value&&!c.value&&(c.value=!0,dA(p.value).then(T=>{o.value=T,c.value=!1}))},[p.value]);const y=Te(()=>{b.value;const T={dynamicVariables:d.value,overrides:l.value,connectionDelay:{default:300},textOnly:m.value,connectionType:"websocket",userId:a.value||void 0};return O.value?{signedUrl:O.value,...T}:v.value?{signedUrl:v.value,...T}:p.value&&(k.value||c.value)?null:p.value?{agentId:p.value,origin:h.value,...T}:(console.error("[ConversationalAI] Either agent-id or signed-url is required"),null)});return y.value?g(Jb.Provider,{value:y,children:e}):null}function pA(){return Bt(Jb)}const e0=it(null);function fA({children:e}){const t=bt(),n=Ne(()=>{const r=t.peek().terms_key,i=r?!!localStorage.getItem(r):!1,s=un(!1),a=un(i),o=Ft(()=>!t.value.terms_html||a.value);let c=[];return{termsShown:s,termsAccepted:o,dismissTerms:()=>{s.value=!1,c.forEach(l=>l.reject()),c=[]},acceptTerms:()=>{a.value=!0,s.value=!1;const l=t.peek().terms_key;l&&localStorage.setItem(l,"true"),c.forEach(u=>u.resolve()),c=[]},requestTerms:async()=>{o.peek()||(s.value=!0,await new Promise((l,u)=>{c.push({resolve:l,reject:u})}))}}},[]);return g(e0.Provider,{value:n,children:e})}function Lc(){return Bt(e0)}const t0=it(null);function mA({children:e}){const t=Ze(null),n=oe(r=>{t.value=OA(r)},[t]);return g(t0.Provider,{value:t,children:[g("template",{ref:n}),e]})}function n0(){return Bt(t0)}function OA(e){if(!e)return null;const t=e==null?void 0:e.getRootNode();return t instanceof ShadowRoot&&t.host instanceof HTMLElement?t.host:e.parentElement}const r0=it(null);function gA({children:e}){const t=vA();return jn(()=>{if(t.conversationTextOnly.value===!0){t.transcript.value;const n=setTimeout(()=>{t.endSession()},600*1e3);return()=>{clearTimeout(n)}}}),g(r0.Provider,{value:t,children:e})}function St(){return Bt(r0)}function vA(){const e=ue(null),t=ue(null),n=ue(!1),r=ue(null),i=ue(!1),s=n0(),a=bt(),o=s0(),c=Lc(),l=pA();return ve(()=>()=>{var u;(u=e.current)==null||u.endSession()},[]),Ne(()=>{const u=un("disconnected"),d=Ft(()=>u.value==="disconnected"),h=un("listening"),p=Ft(()=>h.value==="speaking"),O=un(null),m=un(null),b=un(!1),v=un([]),k=un(0),y=un(null);return{status:u,isSpeaking:p,mode:h,isDisconnected:d,lastId:m,error:O,canSendFeedback:b,conversationIndex:k,conversationTextOnly:y,transcript:v,startSession:async(T,_)=>{var C,N,$,x,D,L,V;if(await c.requestTerms(),(C=e.current)==null?void 0:C.isOpen())return e.current.getId();if(t.current)return(await t.current).getId();let S=structuredClone(l.peek());_&&a.value.supports_text_only&&(S.textOnly=!0,a.value.text_only||(S.overrides??(S.overrides={}),(N=S.overrides).conversation??(N.conversation={}),S.overrides.conversation.textOnly=!0));try{S=bA(s.value??T,S)}catch(F){console.error("[ConversationalAI] Error triggering call event:",F)}y.value=S.textOnly??!1,v.value=_?[{type:"message",role:"user",message:_,isText:!0,conversationIndex:k.peek()}]:[];try{if(t.current=MR.startSession({...S,overrides:{...S.overrides,client:{...($=S.overrides)==null?void 0:$.client,source:((D=(x=S.overrides)==null?void 0:x.client)==null?void 0:D.source)||"widget",version:((V=(L=S.overrides)==null?void 0:L.client)==null?void 0:V.version)||lA}},onModeChange:U=>{h.value=U.mode},onStatusChange:U=>{u.value=U.status},onCanSendFeedbackChange:U=>{b.value=U.canSendFeedback},onMessage:({role:U,message:H})=>{if(o.peek()&&y.peek()===!0&&U==="agent"&&!n.current){n.current=!0;return}else U==="agent"&&(n.current=!0);if(U==="agent"&&i.current){const se=r.current;if(se!==null){const B=[...v.peek()];B[se]={type:"message",role:"agent",message:H,isText:!0,conversationIndex:k.peek()},v.value=B}i.current=!1;return}v.value=[...v.peek(),{type:"message",role:U,message:H,isText:!1,conversationIndex:k.peek()}]},onAgentChatResponsePart:({text:U,type:H})=>{if(o.peek()&&y.peek()===!0&&!n.current)return;const se=v.peek();if(H==="start")i.current=!0,r.current=se.length;else if(H==="delta"){const B=r.current;if(B!==null&&U){const de=[...se],A=de[B]??(de[B]={type:"message",role:"agent",message:"",isText:!0,conversationIndex:k.peek()});A.type==="message"&&(de[B]={...A,message:A.message+U},v.value=de)}}else H==="stop"&&(r.current=null)},onDisconnect:U=>{n.current=!1,y.value=null,r.current=null,i.current=!1,v.value=[...v.peek(),U.reason==="error"?{type:"error",message:U.message,conversationIndex:k.peek()}:{type:"disconnection",role:U.reason==="user"?"user":"agent",conversationIndex:k.peek()}],k.value++,U.reason==="error"&&(O.value=U.message,console.error("[ConversationalAI] Disconnected due to an error:",U.message))}}),e.current=await t.current,_){const U=e.current;setTimeout(()=>U.sendUserMessage(_),100)}const F=e.current.getId();return m.value=F,O.value=null,F}catch(F){let U="Could not start a conversation.";F instanceof CloseEvent?U=F.reason||U:F instanceof Error&&(U=F.message||U),O.value=U,v.value=[...v.value,{type:"error",message:U,conversationIndex:k.peek()}]}finally{t.current=null}},endSession:async()=>{const T=e.current;e.current=null,await(T==null?void 0:T.endSession())},getInputVolume:()=>{var T;return((T=e.current)==null?void 0:T.getInputVolume())??0},getOutputVolume:()=>{var T;return((T=e.current)==null?void 0:T.getOutputVolume())??0},setVolume:T=>{var _;(_=e.current)==null||_.setVolume({volume:T})},setMicMuted:T=>{var _;(_=e.current)==null||_.setMicMuted(T)},sendFeedback:T=>{var _;(_=e.current)==null||_.sendFeedback(T)},sendUserMessage:T=>{var _;(_=e.current)==null||_.sendUserMessage(T),v.value=[...v.value,{type:"message",role:"user",message:T,isText:!0,conversationIndex:k.peek()}]},sendUserActivity:()=>{var T;(T=e.current)==null||T.sendUserActivity()},addModeToggleEntry:T=>{var _;(_=e.current)!=null&&_.isOpen()&&(v.value=[...v.value,{type:"mode_toggle",mode:T,conversationIndex:k.peek()}])}}},[l])}function bA(e,t){try{const n=new CustomEvent("askbenny-convai:call",{bubbles:!0,composed:!0,detail:{config:t}});return e.dispatchEvent(n),n.detail.config}catch(n){return console.error("[ConversationalAI] Could not trigger call event:",n),t}}const i0=it(null);function TA({children:e}){const{serverUrl:t}=mh(),n=Qe("agent-id"),r=Qe("override-config"),i=Qe("signed-url"),s=Ze(null);jn(()=>{if(r.value)try{const T=JSON.parse(r.value);if(T){s.value=T;return}}catch(T){console.error(`[ConversationalAI] Cannot parse override-config: ${T==null?void 0:T.message}`)}let v=n.value,k;if(i.value){const T=new URL(i.value).searchParams;v=T.get("agent_id")??n.value,k=T.get("conversation_signature")??void 0}if(!v){s.value=null;return}const y=new AbortController;return EA(v,t.value,y.signal,k).then(T=>{y.signal.aborted||(s.value=T)}).catch(T=>{console.error(`[ConversationalAI] Cannot fetch config for agent ${n.value}: ${T==null?void 0:T.message}`),y.signal.aborted||(s.value=null)}),()=>{y.abort()}});const a=Qe("variant"),o=Qe("placement"),c=Qe("terms-key"),l=Qe("mic-muting"),u=Qe("transcript"),d=Qe("text-input"),h=Qe("default-expanded"),p=Qe("always-expanded"),O=Qe("override-text-only"),m=Qe("use-rtc"),b=Te(()=>{if(!s.value)return null;const v=a.value??s.value.variant,k=o.value??s.value.placement,y=c.value??s.value.terms_key,T=_n(O.value)??s.value.text_only??!1,_=_n(l.value)??s.value.mic_muting_enabled,S=_n(u.value)??s.value.transcript_enabled,C=_n(d.value)??s.value.text_input_enabled,N=_n(p.value)??s.value.always_expanded??!1,$=_n(h.value)??s.value.default_expanded??!1,x=_n(m.value)??s.value.use_rtc??!1;return{...s.value,variant:JR(v),placement:tA(k),terms_key:y,mic_muting_enabled:!T&&_,transcript_enabled:T||S,text_input_enabled:T||C,always_expanded:N,default_expanded:$,use_rtc:x}});return b.value?g(i0.Provider,{value:b,children:e}):null}function bt(){return Bt(i0)}function Mc(){const e=Qe("override-text-only"),t=bt();return Te(()=>_n(e.value)??t.value.text_only??!1)}function Ma(){const e=Mc(),{conversationTextOnly:t}=St();return Te(()=>t.value??e.value)}function s0(){const e=Qe("override-first-message"),t=bt(),{language:n}=Is();return Te(()=>{var r,i;return e.value??((i=(r=t.value.language_presets)==null?void 0:r[n.value.languageCode])==null?void 0:i.first_message)??t.value.first_message??null})}function gh(){const e=bt();return Te(()=>e.value.text_input_enabled??!1)}function kA(){const e=bt();return Te(()=>e.value.use_rtc??!1)}function yA(){const e=bt();return Te(()=>{var t;return((t=e.value.end_feedback)==null?void 0:t.type)??null})}function SA(){const e=Qe("markdown-link-allowed-hosts"),t=Qe("markdown-link-include-www"),n=Qe("markdown-link-allow-http"),r=bt();return Te(()=>{let i=[];if(e.value)i=e.value.split(",").map(o=>o.trim()).filter(Boolean);else{const o=r.value.markdown_link_allowed_hosts;o&&o.length>0&&(o.some(c=>c.hostname==="*")?i=["*"]:i=o.map(c=>c.hostname))}const s=_n(t.value)??r.value.markdown_link_include_www??!0,a=_n(n.value)??r.value.markdown_link_allow_http??!0;return{allowedHosts:i,includeWww:s,allowHttp:a}})}function _A(){const e=Qe("syntax-highlight-theme"),t=bt();return Te(()=>{var s;const n=e.value??t.value.syntax_highlight_theme;if(n==="light"||n==="dark")return n;const r=((s=t.value.styles)==null?void 0:s.base_active)??fh.base_active,i=new vt(r);return i.isValid&&i.isDark()?"dark":"light"})}async function EA(e,t,n,r){const i=await(await fetch(`${t}/v1/convai/agents/${e}/widget${r?`?conversation_signature=${encodeURIComponent(r)}`:""}`,{signal:n})).json();if(!i.widget_config)throw new Error("Response does not contain widget_config");return i.widget_config}const wA=Fe(function(){const e=bt(),t=Te(()=>{const n=e.value.styles;return`:host, :root {
${rA.map(r=>`${xA(r)}: ${CA((n==null?void 0:n[r])??fh[r])};`).join(`
`)}
}`});return g("style",{children:[t,UR]})});function xA(e){return`--el-${e.replace(/_/g,"-")}`}function CA(e){return typeof e=="number"?`${e}px`:e}const a0=it(null);function PA({children:e}){const t=Ze("voice"),{isDisconnected:n,addModeToggleEntry:r,setVolume:i}=St();jn(()=>{const a=t.value==="text";i(a?0:1)});const s=Ne(()=>({mode:Ft(()=>t.value),setMode:a=>{t.value!==a&&(t.value=a,n.value||r(a))},isTextMode:Ft(()=>t.value==="text"),isVoiceMode:Ft(()=>t.value==="voice")}),[n,r]);return g(a0.Provider,{value:s,children:e})}function vh(){return Bt(a0)}const o0=it(null);function RA({children:e}){const t=bt(),{isTextMode:n}=vh(),{setMicMuted:r}=St(),i=Te(()=>t.value.mic_muting_enabled??!1),s=Ze(!1),a=ue(null);jn(()=>{n.value?(a.current===null&&(a.current=s.peek()),r(!0)):(a.current!==null&&(s.value=a.current,a.current=null),r(i.value?s.value:!1))});const o=Ne(()=>({isMuted:Ft(()=>n.value?!0:i.value?s.value:!1),setIsMuted:c=>{s.value=c},isMutingEnabled:i}),[]);return g(o0.Provider,{value:o,children:e})}function AA(){return Bt(o0)}const c0=it(null);function IA({children:e}){const t=bt(),{language:n}=Is(),r=Qe("text-contents"),i=Te(()=>{try{if(r.value){const a=JSON.parse(r.value);if(typeof a=="object")return a}}catch(a){console.error("[ConversationalAI] Cannot parse text-contents:",a)}return{}}),s=Ne(()=>Object.fromEntries(nA.map(a=>[a,Ft(()=>{var o,c,l,u;return i.value[a]??((l=(c=(o=t.value.language_presets)==null?void 0:o[n.value.languageCode])==null?void 0:c.text_contents)==null?void 0:l[a])??((u=t.value.text_contents)==null?void 0:u[a])??Wb[a]})])),[]);return g(c0.Provider,{value:s,children:e})}function nt(){return Bt(c0)}const l0=it(null);function QA({children:e}){const t=bt(),n=Qe("avatar-image-url"),r=Qe("avatar-orb-color-1"),i=Qe("avatar-orb-color-2"),s=Ze(""),a=Te(()=>n.value?{type:"image",url:n.value}:r.value&&i.value?{type:"orb",color_1:r.value,color_2:i.value}:t.value.avatar),o=Te(()=>{switch(a.value.type){case"url":return a.value.custom_url;case"orb":return s.value;case"image":return a.value.url}}),c=Ne(()=>({config:a,previewUrl:o,canvasUrl:s}),[]);return g(l0.Provider,{value:c,children:e})}function bh(){return Bt(l0)}function u0(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=u0(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function at(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=u0(e))&&(r&&(r+=" "),r+=t);return r}const d0=it(null);function Uc({children:e,...t}){const[n,r]=fe(null);return g("div",{ref:r,...t,children:n&&g(d0.Provider,{value:n,children:e})})}function NA(){return Bt(d0)}function Th(e){return e&&typeof e=="object"&&"peek"in e}function DA(e){const t=Th(e),n=Ze(t?e.peek():e);return t?e:(n.value=e,n)}function h0(e){return Th(e)?e.value:e}function $A(e){return Th(e)?e.peek():e}function p0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function kh(...e){return t=>{let n=!1;const r=e.map(i=>{const s=p0(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():p0(e[i],null)}}}}function Ut(...e){return oe(kh(...e),e)}var LA=Symbol.for("react.lazy"),qc=Lu[" use ".trim().toString()];function MA(e){return typeof e=="object"&&e!==null&&"then"in e}function f0(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===LA&&"_payload"in e&&MA(e._payload)}function UA(e){const t=qA(e),n=_e((r,i)=>{let{children:s,...a}=r;f0(s)&&typeof qc=="function"&&(s=qc(s._payload));const o=ln.toArray(s),c=o.find(FA);if(c){const l=c.props.children,u=o.map(d=>d===c?ln.count(l)>1?ln.only(null):xt(l)?l.props.children:null:d);return g(t,{...a,ref:i,children:xt(l)?Ai(l,void 0,u):null})}return g(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var m0=UA("Slot");function qA(e){const t=_e((n,r)=>{let{children:i,...s}=n;if(f0(i)&&typeof qc=="function"&&(i=qc(i._payload)),xt(i)){const a=zA(i),o=BA(s,i.props);return i.type!==Xe&&(o.ref=r?kh(r,a):a),Ai(i,o)}return ln.count(i)>1?ln.only(null):null});return t.displayName=`${e}.SlotClone`,t}var XA=Symbol("radix.slottable");function FA(e){return xt(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===XA}function BA(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const o=s(...a);return i(...a),o}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function zA(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const yh=window.matchMedia("(prefers-reduced-motion: reduce)");function O0(){const e=Ze(yh.matches);return ve(()=>{const t=n=>{e.value=n.matches};return yh.addEventListener("change",t),()=>yh.removeEventListener("change",t)},[]),e}function g0({onStart:e,onEnd:t}){const n=ue();n.current??(n.current=new Set);const r=ue(e);r.current=e;const i=ue(t);i.current=t;const s=Ze(!1),a=oe(c=>{var l,u;c.target===c.currentTarget&&((l=n.current)==null||l.add(c.propertyName),s.peek()||(s.value=!0,(u=r.current)==null||u.call(r)))},[]),o=oe(c=>{var l,u,d;c.target===c.currentTarget&&((l=n.current)==null||l.delete(c.propertyName),(u=n.current)!=null&&u.size||(s.value=!1,(d=i.current)==null||d.call(i)))},[]);return{transitioning:s,handlers:{onTransitionStart:a,onTransitionEnd:o}}}function zt(e){const t=O0().value?ZA:jA;return g(t,{...e})}function ZA({active:e,...t}){return h0(e)?g(m0,{"data-shown":!0,...t}):null}function jA({active:e,initial:t=e,...n}){const r=DA(e),i=Ze($A(t));jn(()=>{r.value&&(i.value=r.value)});const{handlers:s}=g0({onEnd:()=>{i.value=r.value}});return!r.value&&!i.value?null:g(m0,{"data-shown":r.value&&i.value,...s,...n})}const VA=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},GA=(e,t)=>({classGroupId:e,validator:t}),v0=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Xc="-",b0=[],WA="arbitrary..",YA=e=>{const t=KA(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return HA(i);const s=i.split(Xc),a=s[0]===""&&s.length>1?1:0;return T0(s,a,t)},getConflictingClassGroupIds:(i,s)=>{if(s){const a=r[i],o=n[i];return a?o?VA(o,a):a:o||b0}return n[i]||b0}}},T0=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const r=e[t],i=n.nextPart.get(r);if(i){const c=T0(e,t+1,i);if(c)return c}const s=n.validators;if(s===null)return;const a=t===0?e.join(Xc):e.slice(t).join(Xc),o=s.length;for(let c=0;c<o;c++){const l=s[c];if(l.validator(a))return l.classGroupId}},HA=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?WA+r:void 0})(),KA=e=>{const{theme:t,classGroups:n}=e;return JA(n,t)},JA=(e,t)=>{const n=v0();for(const r in e){const i=e[r];Sh(i,n,r,t)}return n},Sh=(e,t,n,r)=>{const i=e.length;for(let s=0;s<i;s++){const a=e[s];eI(a,t,n,r)}},eI=(e,t,n,r)=>{if(typeof e=="string"){tI(e,t,n);return}if(typeof e=="function"){nI(e,t,n,r);return}rI(e,t,n,r)},tI=(e,t,n)=>{const r=e===""?t:k0(t,e);r.classGroupId=n},nI=(e,t,n,r)=>{if(iI(e)){Sh(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(GA(n,e))},rI=(e,t,n,r)=>{const i=Object.entries(e),s=i.length;for(let a=0;a<s;a++){const[o,c]=i[a];Sh(c,k0(t,o),n,r)}},k0=(e,t)=>{let n=e;const r=t.split(Xc),i=r.length;for(let s=0;s<i;s++){const a=r[s];let o=n.nextPart.get(a);o||(o=v0(),n.nextPart.set(a,o)),n=o}return n},iI=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,sI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const i=(s,a)=>{n[s]=a,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(s){let a=n[s];if(a!==void 0)return a;if((a=r[s])!==void 0)return i(s,a),a},set(s,a){s in n?n[s]=a:i(s,a)}}},_h="!",y0=":",aI=[],S0=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),oI=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,c=0,l;const u=i.length;for(let m=0;m<u;m++){const b=i[m];if(a===0&&o===0){if(b===y0){s.push(i.slice(c,m)),c=m+1;continue}if(b==="/"){l=m;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const d=s.length===0?i:i.slice(c);let h=d,p=!1;d.endsWith(_h)?(h=d.slice(0,-1),p=!0):d.startsWith(_h)&&(h=d.slice(1),p=!0);const O=l&&l>c?l-c:void 0;return S0(s,p,h,O)};if(t){const i=t+y0,s=r;r=a=>a.startsWith(i)?s(a.slice(i.length)):S0(aI,!1,a,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},cI=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const a=n[s],o=a[0]==="[",c=t.has(a);o||c?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(a)):i.push(a)}return i.length>0&&(i.sort(),r.push(...i)),r}},lI=e=>({cache:sI(e.cacheSize),parseClassName:oI(e),sortModifiers:cI(e),...YA(e)}),uI=/\s+/,dI=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(uI);let c="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{isExternal:d,modifiers:h,hasImportantModifier:p,baseClassName:O,maybePostfixModifierPosition:m}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let b=!!m,v=r(b?O.substring(0,m):O);if(!v){if(!b){c=u+(c.length>0?" "+c:c);continue}if(v=r(O),!v){c=u+(c.length>0?" "+c:c);continue}b=!1}const k=h.length===0?"":h.length===1?h[0]:s(h).join(":"),y=p?k+_h:k,T=y+v;if(a.indexOf(T)>-1)continue;a.push(T);const _=i(v,b);for(let S=0;S<_.length;++S){const C=_[S];a.push(y+C)}c=u+(c.length>0?" "+c:c)}return c},hI=(...e)=>{let t=0,n,r,i="";for(;t<e.length;)(n=e[t++])&&(r=_0(n))&&(i&&(i+=" "),i+=r);return i},_0=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=_0(e[r]))&&(n&&(n+=" "),n+=t);return n},pI=(e,...t)=>{let n,r,i,s;const a=c=>{const l=t.reduce((u,d)=>d(u),e());return n=lI(l),r=n.cache.get,i=n.cache.set,s=o,o(c)},o=c=>{const l=r(c);if(l)return l;const u=dI(c,n);return i(c,u),u};return s=a,(...c)=>s(hI(...c))},fI=[],Pt=e=>{const t=n=>n[e]||fI;return t.isThemeGetter=!0,t},E0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,w0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mI=/^\d+\/\d+$/,OI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qs=e=>mI.test(e),Se=e=>!!e&&!Number.isNaN(Number(e)),ai=e=>!!e&&Number.isInteger(Number(e)),Eh=e=>e.endsWith("%")&&Se(e.slice(0,-1)),Rr=e=>OI.test(e),kI=()=>!0,yI=e=>gI.test(e)&&!vI.test(e),x0=()=>!1,SI=e=>bI.test(e),_I=e=>TI.test(e),EI=e=>!ce(e)&&!le(e),wI=e=>Ns(e,I0,x0),ce=e=>E0.test(e),Xi=e=>Ns(e,Q0,yI),wh=e=>Ns(e,AI,Se),C0=e=>Ns(e,R0,x0),xI=e=>Ns(e,A0,_I),Fc=e=>Ns(e,N0,SI),le=e=>w0.test(e),Ua=e=>Ds(e,Q0),CI=e=>Ds(e,II),P0=e=>Ds(e,R0),PI=e=>Ds(e,I0),RI=e=>Ds(e,A0),Bc=e=>Ds(e,N0,!0),Ns=(e,t,n)=>{const r=E0.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Ds=(e,t,n=!1)=>{const r=w0.exec(e);return r?r[1]?t(r[1]):n:!1},R0=e=>e==="position"||e==="percentage",A0=e=>e==="image"||e==="url",I0=e=>e==="length"||e==="size"||e==="bg-size",Q0=e=>e==="length",AI=e=>e==="number",II=e=>e==="family-name",N0=e=>e==="shadow",QI=()=>{const e=Pt("color"),t=Pt("font"),n=Pt("text"),r=Pt("font-weight"),i=Pt("tracking"),s=Pt("leading"),a=Pt("breakpoint"),o=Pt("container"),c=Pt("spacing"),l=Pt("radius"),u=Pt("shadow"),d=Pt("inset-shadow"),h=Pt("text-shadow"),p=Pt("drop-shadow"),O=Pt("blur"),m=Pt("perspective"),b=Pt("aspect"),v=Pt("ease"),k=Pt("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...T(),le,ce],S=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],N=()=>[le,ce,c],$=()=>[Qs,"full","auto",...N()],x=()=>[ai,"none","subgrid",le,ce],D=()=>["auto",{span:["full",ai,le,ce]},ai,le,ce],L=()=>[ai,"auto",le,ce],V=()=>["auto","min","max","fr",le,ce],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...N()],se=()=>[Qs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],B=()=>[e,le,ce],de=()=>[...T(),P0,C0,{position:[le,ce]}],A=()=>["no-repeat",{repeat:["","x","y","space","round"]}],xe=()=>["auto","cover","contain",PI,wI,{size:[le,ce]}],Ae=()=>[Eh,Ua,Xi],R=()=>["","none","full",l,le,ce],Oe=()=>["",Se,Ua,Xi],Ge=()=>["solid","dashed","dotted","double"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[Se,Eh,P0,C0],Re=()=>["","none",O,le,ce],Me=()=>["none",Se,le,ce],be=()=>["none",Se,le,ce],qe=()=>[Se,le,ce],We=()=>[Qs,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Rr],breakpoint:[Rr],color:[kI],container:[Rr],"drop-shadow":[Rr],ease:["in","out","in-out"],font:[EI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Rr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Rr],shadow:[Rr],spacing:["px",Se],text:[Rr],"text-shadow":[Rr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qs,ce,le,b]}],container:["container"],columns:[{columns:[Se,ce,le,o]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[ai,"auto",le,ce]}],basis:[{basis:[Qs,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Se,Qs,"auto","initial","none",ce]}],grow:[{grow:["",Se,le,ce]}],shrink:[{shrink:["",Se,le,ce]}],order:[{order:[ai,"first","last","none",le,ce]}],"grid-cols":[{"grid-cols":x()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":x()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[o,"screen",...se()]}],"min-w":[{"min-w":[o,"screen","none",...se()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,Ua,Xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,le,wh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Eh,ce]}],"font-family":[{font:[CI,ce,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,le,ce]}],"line-clamp":[{"line-clamp":[Se,"none",le,wh]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",le,ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",le,ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Se,"from-font","auto",le,Xi]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Se,"auto",le,ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le,ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le,ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:A()}],"bg-size":[{bg:xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ai,le,ce],radial:["",le,ce],conic:[ai,le,ce]},RI,xI]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:Ae()}],"gradient-via-pos":[{via:Ae()}],"gradient-to-pos":[{to:Ae()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:Oe()}],"border-w-x":[{"border-x":Oe()}],"border-w-y":[{"border-y":Oe()}],"border-w-s":[{"border-s":Oe()}],"border-w-e":[{"border-e":Oe()}],"border-w-t":[{"border-t":Oe()}],"border-w-r":[{"border-r":Oe()}],"border-w-b":[{"border-b":Oe()}],"border-w-l":[{"border-l":Oe()}],"divide-x":[{"divide-x":Oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Se,le,ce]}],"outline-w":[{outline:["",Se,Ua,Xi]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",u,Bc,Fc]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",d,Bc,Fc]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:Oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Se,Xi]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":Oe()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",h,Bc,Fc]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Se,le,ce]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Se]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[le,ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[Se]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:A()}],"mask-size":[{mask:xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",le,ce]}],filter:[{filter:["","none",le,ce]}],blur:[{blur:Re()}],brightness:[{brightness:[Se,le,ce]}],contrast:[{contrast:[Se,le,ce]}],"drop-shadow":[{"drop-shadow":["","none",p,Bc,Fc]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Se,le,ce]}],"hue-rotate":[{"hue-rotate":[Se,le,ce]}],invert:[{invert:["",Se,le,ce]}],saturate:[{saturate:[Se,le,ce]}],sepia:[{sepia:["",Se,le,ce]}],"backdrop-filter":[{"backdrop-filter":["","none",le,ce]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Se,le,ce]}],"backdrop-contrast":[{"backdrop-contrast":[Se,le,ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Se,le,ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Se,le,ce]}],"backdrop-invert":[{"backdrop-invert":["",Se,le,ce]}],"backdrop-opacity":[{"backdrop-opacity":[Se,le,ce]}],"backdrop-saturate":[{"backdrop-saturate":[Se,le,ce]}],"backdrop-sepia":[{"backdrop-sepia":["",Se,le,ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",le,ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Se,"initial",le,ce]}],ease:[{ease:["linear","initial",v,le,ce]}],delay:[{delay:[Se,le,ce]}],animate:[{animate:["none",k,le,ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,le,ce]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:Me()}],"rotate-x":[{"rotate-x":Me()}],"rotate-y":[{"rotate-y":Me()}],"rotate-z":[{"rotate-z":Me()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[le,ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le,ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le,ce]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Se,Ua,Xi,wh]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},NI=pI(QI),Ee=(...e)=>NI(at(e)),D0=it(null);async function $0(e,t,n){const r=await fetch(`${n}/v1/convai/conversations/${e}/feedback/overall`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to submit feedback: ${r.statusText}`)}function DI({children:e}){const t=Ze(null),n=Ze(""),r=Ze("initial"),{lastId:i}=St(),s=Qe("agent-id"),{serverUrl:a}=mh(),o=oe(async d=>{const h=i.value,p=s.value;if(!h||!p){console.warn("[ConversationalAI] Cannot submit rating: missing agent_id or conversation_id");return}try{t.value=d,r.value="submitted-rating",await $0(h,{rating:d},a.value)}catch(O){console.error("[ConversationalAI] Failed to submit rating:",O)}},[]),c=oe(async()=>{const d=i.value,h=s.value;if(!d||!h){console.warn("[ConversationalAI] Cannot submit feedback: missing agent_id or conversation_id");return}if(t.value===null){console.warn("[ConversationalAI] Cannot submit feedback: rating not set");return}if(n.value)try{r.value="submitted-follow-up",await $0(d,{rating:t.value,comment:n.value||void 0},a.value)}catch(p){console.error("[ConversationalAI] Failed to submit feedback:",p)}},[]),l=oe(()=>{t.value=null,n.value="",r.value="initial"},[]);jn(()=>{i.value!==null&&l()});const u=Ne(()=>({rating:t,feedbackText:n,feedbackProgress:r,submitRating:o,submitFeedback:c,reset:l}),[o,c,l]);return g(D0.Provider,{value:u,children:e})}function xh(){return Bt(D0)}const L0=it(null);function $I({defaultContent:e="transcript",children:t}){const n=Ze(e),r=Ne(()=>{const i=n.value==="feedback"?{showHeaderBack:!0,onHeaderBack:()=>{n.value="transcript"}}:{showHeaderBack:!1};return{currentContent:n,currentConfig:i}},[n.value]);return g(L0.Provider,{value:r,children:t})}function Ch(){return Bt(L0)}const LI={phone:UI,"phone-off":qI,chat:XI,mic:FI,"mic-off":BI,soundwave:zI,check:VI,"chevron-down":ZI,"chevron-up":jI,send:GI,star:WI,copy:YI,download:HI,wrap:KI,maximize:eQ,minimize:tQ},MI={xs:"text-xs",sm:"text-sm",md:"text-lg",lg:"text-xl"};function er({name:e,size:t="md",className:n}){const r=LI[e];return g("slot",{name:`icon-${e}`,className:at("flex",MI[t],n),"aria-hidden":!0,children:g(r,{})})}function UI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 18 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{d:"M3.7489 2.25C2.93286 2.25 2.21942 2.92142 2.27338 3.7963C2.6686 10.2041 7.79483 15.3303 14.2026 15.7255C15.0775 15.7795 15.7489 15.066 15.7489 14.25V11.958C15.7489 11.2956 15.3144 10.7116 14.6799 10.5213L12.6435 9.91035C12.1149 9.75179 11.542 9.89623 11.1518 10.2864L10.5901 10.8482C9.15291 10.0389 7.95998 8.84599 7.15074 7.40881L7.71246 6.84709C8.10266 6.45689 8.24711 5.88396 8.08854 5.35541L7.47761 3.31898C7.28727 2.6845 6.70329 2.25 6.04087 2.25H3.7489Z"})})}function qI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M16.0303 3.53033C16.3232 3.23744 16.3232 2.76256 16.0303 2.46967C15.7374 2.17678 15.2626 2.17678 14.9697 2.46967L8.6271 8.81224C8.25925 8.3778 7.93185 7.90804 7.65074 7.40881L8.21246 6.84709C8.60266 6.45689 8.74711 5.88396 8.58854 5.35541L7.97761 3.31898C7.78727 2.6845 7.20329 2.25 6.54087 2.25H4.2489C3.43286 2.25 2.71942 2.92142 2.77338 3.7963C2.95462 6.73468 4.13069 9.40357 5.96899 11.4703L2.96967 14.4697C2.67678 14.7626 2.67678 15.2374 2.96967 15.5303C3.26256 15.8232 3.73744 15.8232 4.03033 15.5303L16.0303 3.53033Z"}),g("path",{d:"M14.7026 15.7255C12.2994 15.5773 10.0765 14.7636 8.21584 13.4665L10.9278 10.7545C10.9815 10.7863 11.0356 10.8175 11.0901 10.8482L11.6518 10.2864C12.042 9.89623 12.6149 9.75179 13.1435 9.91035L15.1799 10.5213C15.8144 10.7116 16.2489 11.2956 16.2489 11.958V14.25C16.2489 15.066 15.5775 15.7795 14.7026 15.7255Z"})]})}function XI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 6.75C1.5 4.26472 3.51472 2.25 6 2.25H12C14.4853 2.25 16.5 4.26472 16.5 6.75V11.25C16.5 13.7353 14.4853 15.75 12 15.75H2.25C1.83579 15.75 1.5 15.4142 1.5 15V6.75ZM6 9.9375C5.48223 9.9375 5.0625 9.51777 5.0625 9C5.0625 8.48223 5.48223 8.0625 6 8.0625C6.51777 8.0625 6.9375 8.48223 6.9375 9C6.9375 9.51777 6.51777 9.9375 6 9.9375ZM9 9.9375C8.48223 9.9375 8.0625 9.51777 8.0625 9C8.0625 8.48223 8.48223 8.0625 9 8.0625C9.51777 8.0625 9.9375 8.48223 9.9375 9C9.9375 9.51777 9.51777 9.9375 9 9.9375ZM11.0625 9C11.0625 9.51777 11.4822 9.9375 12 9.9375C12.5178 9.9375 12.9375 9.51777 12.9375 9C12.9375 8.48223 12.5178 8.0625 12 8.0625C11.4822 8.0625 11.0625 8.48223 11.0625 9Z"})})}function FI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M9.50008 1.5C7.42901 1.5 5.75008 3.17893 5.75008 5.25V8.25C5.75008 10.3211 7.42901 12 9.50008 12C11.5712 12 13.2501 10.3211 13.2501 8.25V5.25C13.2501 3.17893 11.5712 1.5 9.50008 1.5Z"}),g("path",{d:"M4.88997 10.8417C4.66448 10.4943 4.20002 10.3954 3.85256 10.6209C3.50509 10.8463 3.40621 11.3108 3.63169 11.6583C4.47442 12.9569 6.08493 14.6838 8.75008 14.9616V15.75C8.75008 16.1642 9.08587 16.5 9.50008 16.5C9.9143 16.5 10.2501 16.1642 10.2501 15.75V14.9616C12.9152 14.6838 14.5257 12.9569 15.3685 11.6583C15.594 11.3108 15.4951 10.8463 15.1476 10.6209C14.8001 10.3954 14.3357 10.4943 14.1102 10.8417C13.3305 12.0432 11.9002 13.5 9.50008 13.5C7.1 13.5 5.66968 12.0432 4.88997 10.8417Z"})]})}function BI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 19 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("path",{d:"M13.25 8.25C13.25 8.64791 13.188 9.03135 13.0732 9.39119L6.57947 2.8975C7.26687 2.04521 8.31974 1.5 9.49995 1.5C11.571 1.5 13.25 3.17893 13.25 5.25V8.25Z"}),g("path",{d:"M2.21967 1.71967C2.51256 1.42678 2.98744 1.42678 3.28033 1.71967L16.7803 15.2197C17.0732 15.5126 17.0732 15.9874 16.7803 16.2803C16.4874 16.5732 16.0126 16.5732 15.7197 16.2803L13.2828 13.8435C12.4719 14.4022 11.4678 14.8338 10.25 14.9614V15.75C10.25 16.1642 9.91422 16.5 9.50001 16.5C9.08579 16.5 8.75001 16.1642 8.75001 15.75V14.9616C6.08485 14.6838 4.47434 12.9569 3.63162 11.6583C3.40614 11.3108 3.50502 10.8463 3.85248 10.6209C4.19995 10.3954 4.66441 10.4943 4.88989 10.8417C5.6696 12.0432 7.09993 13.5 9.50001 13.5C10.5978 13.5 11.4845 13.1981 12.1992 12.7598L11.0875 11.6482C10.605 11.8739 10.0667 12 9.50001 12C7.42894 12 5.75001 10.3211 5.75001 8.25V6.31067L2.21967 2.78033C1.92678 2.48744 1.92678 2.01256 2.21967 1.71967Z"})]})}function zI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 18 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:[g("rect",{x:"1.5",y:"6.75",width:"2",height:"4.5",rx:"1"}),g("rect",{x:"5",y:"4.5",width:"2",height:"9",rx:"1"}),g("rect",{x:"8.5",y:"2.25",width:"2",height:"13.5",rx:"1"}),g("rect",{x:"12",y:"4.5",width:"2",height:"9",rx:"1"}),g("rect",{x:"15.5",y:"6.75",width:"2",height:"4.5",rx:"1"})]})}function ZI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"m6 9 6 6 6-6"})})}function jI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"m18 15-6-6-6 6"})})}function VI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:g("path",{d:"M20 6 9 17l-5-5"})})}function GI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 20 20",fill:"currentColor",...e,children:g("path",{d:"M4.64337 17.6645C3.243 18.1313 1.97185 16.6817 2.6176 15.3543L8.50148 3.25965C9.10962 2.00957 10.8908 2.00958 11.4989 3.25965L17.3828 15.3543C18.0286 16.6817 16.7574 18.1313 15.357 17.6645L10.8334 16.1567L10.8334 12.5005C10.8334 12.0403 10.4603 11.6672 10 11.6672C9.5398 11.6672 9.16671 12.0403 9.16671 12.5005L9.16671 16.1568L4.64337 17.6645Z"})})}function WI(e){return g("svg",{height:"1em",width:"1em",viewBox:"0 0 21 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:g("path",{d:"M11.8621 0.854898C11.3145 -0.284967 9.68804 -0.284965 9.1404 0.854899L6.77181 5.78487C6.77181 5.78487 6.76902 5.78867 6.7646 5.78925L1.31499 6.50272C0.0591912 6.66713 -0.452868 8.21568 0.474832 9.09033L4.45896 12.8466C4.46075 12.8483 4.46059 12.8502 4.46059 12.8502L3.46003 18.2169C3.22657 19.4691 4.55184 20.4152 5.66108 19.8172L10.4957 17.2111C10.4991 17.2093 10.5035 17.2093 10.5068 17.2111L15.3415 19.8172C16.4507 20.4152 17.776 19.4691 17.5425 18.2169L16.542 12.8502C16.542 12.8502 16.5418 12.8483 16.5436 12.8466L20.5277 9.09033C21.4554 8.21568 20.9434 6.66713 19.6876 6.50272L14.2379 5.78925C14.2335 5.78867 14.2307 5.78487 14.2307 5.78487L11.8621 0.854898Z"})})}function YI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),g("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function HI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),g("polyline",{points:"7 10 12 15 17 10"}),g("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}function KI(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),g("path",{d:"M3 12h15a3 3 0 1 1 0 6h-4"}),g("polyline",{points:"16 16 14 18 16 20"}),g("line",{x1:"3",x2:"10",y1:"18",y2:"18"})]})}function JI({orbColor:e,circleBackgroundColor:t,starColor:n,className:r}){return g("slot",{name:"icon-feedback",className:at("flex",r),"aria-hidden":!0,children:g("svg",{width:"100%",height:"100%",viewBox:"0 0 82 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 42C9 59.6731 23.3269 74 41 74C58.6731 74 73 59.6731 73 42C73 24.3269 58.6731 10 41 10C23.3269 10 9 24.3269 9 42ZM29.4529 18.5973C31.1347 18.0574 32.8641 17.5023 34.9844 16.6005C42.2533 13.5091 48.3526 11.9217 51.7782 14.094C53.5063 15.1899 54.4051 16.7749 55.6117 18.9024C56.7969 20.9922 58.279 23.6057 61.1358 26.7937C62.2737 28.0636 63.3886 29.2195 64.4371 30.3064C68.7007 34.7263 71.8645 38.0061 70.9949 43.1697C70.2965 47.316 67.9794 49.4559 65.6038 51.65C63.4317 53.656 61.2107 55.7073 60.1332 59.3786C57.8774 67.0653 53.5327 71.9113 48.3526 72.7468C43.1725 73.5823 36.6555 75.1698 29.8043 70.1567C26.1949 67.5157 25.229 64.3182 24.1947 60.894C23.2657 57.8184 22.2814 54.56 19.2768 51.3577C14.1619 45.9062 10.2533 29.6345 19.2768 23.0339C23.736 20.4327 26.5223 19.5382 29.4529 18.5973Z",fill:e,"fill-opacity":"0.15",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M43.5 73.4212C40.4387 73.4212 35.0039 71.1025 37.556 56.4696C40.143 41.6365 42.6582 40.577 44.6991 25.744C46.3318 13.8775 41.1635 8.87964 33 10.9988",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M43.5 73.4212C40.4387 73.4212 35.0039 71.1025 37.556 56.4696C40.143 41.6365 42.6582 40.577 44.6991 25.744C46.3318 13.8775 41.1635 8.87964 33 10.9988",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M21.9366 68.1987C21.3549 66.5119 21.0386 60.9231 28.1376 53.3448C37.0114 43.8719 40.5 43.9579 51.4911 31.7482C59.5691 22.7747 59.1723 17.0524 58.0993 15.4626",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M9.26819 42.161C10.4003 43.5337 15.6951 46.3853 25.7661 44.3926C38.3548 41.9018 52.434 40.307 57.694 41.0287C70.352 42.7655 71.4138 51.3035 71.4138 51.3035",stroke:e,"stroke-opacity":"0.35"}),g("path",{d:"M22 16.4916C18.815 21.85 19.6451 26.0591 27.9943 32.0828C38.4307 39.6124 50.2985 48.8304 53.5024 53.1027C58.6684 59.9914 59.5 67.928 59.5 67.928",stroke:e,"stroke-opacity":"0.35"}),g("rect",{x:"9.26099",y:"10",width:"63.7129",height:"63.7129",rx:"31.8565",stroke:e,"stroke-opacity":"0.43","stroke-width":"1.5"}),g("g",{"clip-path":"url(#clip0_7006_42127)",children:[g("circle",{cx:"62.4996",cy:"18.2032",r:"15.0195",transform:"rotate(6.27205 62.4996 18.2032)",fill:t}),g("path",{d:"M60.7142 12.1753C62.057 10.0714 65.2294 10.4202 66.0833 12.7654L66.6158 14.2308L68.1251 14.6217C70.5415 15.2484 71.1908 18.3742 69.2237 19.911L67.9944 20.8704L68.0896 22.4262C68.2403 24.9178 65.4681 26.5011 63.3987 25.1056L62.1065 24.2326L60.6555 24.8041C58.3322 25.7172 55.9702 23.5694 56.6585 21.1698L57.0884 19.6717L56.0977 18.4684C54.5112 16.541 55.8231 13.6307 58.318 13.5438L59.8751 13.4899L60.7142 12.1753Z",fill:n,stroke:t,"stroke-width":"3.27381"}),g("path",{d:"M63.925 5.23719C71.0867 6.02431 76.2545 12.4676 75.4676 19.6293C74.6805 26.7911 68.2364 31.959 61.0746 31.1718C53.9129 30.3845 48.7459 23.9406 49.533 16.7789C50.3203 9.61739 56.7634 4.45029 63.925 5.23719ZM63.6957 7.32326C57.6866 6.66302 52.2797 10.9991 51.6191 17.0082C50.9586 23.0174 55.2946 28.4251 61.3038 29.0858C67.3132 29.7462 72.7211 25.4094 73.3816 19.4C74.0418 13.3908 69.705 7.98372 63.6957 7.32326Z",fill:n,stroke:t,"stroke-width":"0.3","stroke-linecap":"round","stroke-linejoin":"round"})]}),g("ellipse",{cx:"41",cy:"85",rx:"15",ry:"3",fill:e,"fill-opacity":"0.35"}),g("defs",{children:g("clipPath",{id:"clip0_7006_42127",children:g("rect",{width:"33",height:"33",fill:"white",transform:"translate(47.9012) rotate(6.27205)"})})})]})})}function eQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"M15 3h6v6"}),g("path",{d:"m21 3-7 7"}),g("path",{d:"m3 21 7-7"}),g("path",{d:"M9 21H3v-6"})]})}function tQ(e){return g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[g("path",{d:"m14 10 7-7"}),g("path",{d:"M20 10h-6V4"}),g("path",{d:"m3 21 7-7"}),g("path",{d:"M4 14h6v6"})]})}function Ln(e){const t=O0().value?nQ:rQ;return g(t,{...e})}function nQ({visible:e,className:t,grow:n,dep:r,...i}){return e?g("div",{className:at(n&&"grow",t),...i}):null}function rQ({visible:e,children:t,className:n,grow:r,dep:i,...s}){const[a,o]=fe(e),[c,l]=fe(null),[u,d]=fe(null),h=ue(t);e&&(h.current=t);const p=oe(b=>{l(b),b&&!e&&(b.style.width="0px",b.style.height="0px")},[]);ve(()=>{u&&(u.style.transition="none",u.style.opacity="0",u.offsetWidth,u.style.transition="",u.style.opacity="")},[i]),Ne(()=>{c&&(c.style.width=`${c.offsetWidth}px`,c.style.height=`${c.offsetHeight}px`)},[c,e,i]),ve(()=>{if(!c||!u)return;e&&o(!0);const b=e?u.offsetWidth:0,v=e?u.offsetHeight:0;c.style.width=!e||c.offsetWidth!==b?`${b}px`:"",c.style.height=!e||c.offsetHeight!==v?`${v}px`:""},[c,u,e,i]);const{transitioning:O,handlers:m}=g0({onEnd:()=>{e?(c.style.width="",c.style.height=""):o(!1)}});return g("div",{ref:p,className:at("relative inline-flex shrink-0 justify-center items-center transition-[opacity,width,height,transform,flex-grow] duration-200 min-w-0",!e&&"opacity-0 scale-75",e&&r&&"grow",e&&a&&!O.value&&"z-1"),...m,children:g("div",{ref:d,className:at("shrink-0 min-h-min min-w-min transition-opacity duration-200",r&&"grow",n),...s,children:(e||a)&&h.current})})}const iQ={primary:"text-accent-primary border border-accent bg-accent hover:border-accent-hover hover:bg-accent-hover active:border-accent-active active:bg-accent-active",secondary:"text-base-primary border border-base-border bg-base hover:bg-base-hover active:bg-base-active",ghost:"text-base-primary border border-base bg-base hover:bg-base-hover hover:border-base-hover active:bg-base-active active:border-base-active","md-button":"text-base-primary border border-base-border bg-base hover:bg-base-hover active:bg-base-active text-sm h-6"},Qt=_e(function({variant:e="secondary",children:t,icon:n,className:r,iconClassName:i,truncate:s=!0,...a},o){const c=!!n&&!t;return g("button",{ref:o,className:Ee("h-9 flex px-2.5 text-sm items-center transition-[colors,opacity] justify-center rounded-button duration-200 focus-ring overflow-hidden select-none","disabled:opacity-50 disabled:pointer-events-none",iQ[e],c&&"min-w-9",r),type:"button",...a,children:[n&&g(er,{className:Ee("transition-[margin] duration-200",c&&"-mx-0.5",e==="md-button"&&"text-sm",i),name:n}),g(Ln,{visible:!!t,dep:t,children:g("span",{className:Ee("block whitespace-nowrap max-w-64 truncate",e==="md-button"?"pl-1.5":"px-1.5"),children:t})})]})}),M0=(e,t)=>Array.from({length:t-e+1},(n,r)=>r+e),sQ=({isFilled:e,iconName:t})=>g("span",{className:at("w-8 h-8 grid place-content-center",e?"text-base-primary":"text-base-border"),children:g(er,{name:t,size:"lg"})}),aQ=({value:e,rating:t,hoverRating:n,onClick:r,onHover:i,onKeyDown:s,iconName:a})=>{const o=t.value!==null&&e<=t.value,c=n.value!==null&&e<=n.value,l=oe(d=>{d.stopPropagation(),r(e)},[r,e]),u=oe(d=>{s(d,e)},[s,e]);return g("button",{type:"button",role:"radio","aria-checked":o,"aria-label":e.toString(),onMouseEnter:()=>i(e),onClick:l,onKeyDown:u,className:at("w-8 h-8 grid place-content-center rounded-full focus-ring transition-colors cursor-pointer",o||c?"text-base-primary":"text-base-border"),children:g(er,{name:a,size:"lg"})})},oQ=({onRate:e,min:t=1,max:n=5,ariaLabel:r,icon:i="star"})=>{const s=Ze(null),a=Ze(null),o=M0(t,n),c=oe(h=>{a.value=h},[a]),l=oe(()=>{a.value=null},[a]),u=oe(h=>{s.value=h,e(h)},[s,e]),d=oe((h,p)=>{var O,m,b,v;h.key==="Enter"||h.key===" "?(h.preventDefault(),s.value=p,e(p)):h.key==="ArrowLeft"||h.key==="ArrowDown"?(h.preventDefault(),p-1>=t&&((m=(O=h.currentTarget)==null?void 0:O.previousElementSibling)==null||m.focus())):(h.key==="ArrowRight"||h.key==="ArrowUp")&&(h.preventDefault(),p+1<=n&&((v=(b=h.currentTarget)==null?void 0:b.nextElementSibling)==null||v.focus()))},[s,e,t,n]);return g("div",{role:"radiogroup","aria-label":r,className:"flex no-wrap cursor-pointer",onMouseLeave:l,children:o.map(h=>g(aQ,{value:h,rating:s,hoverRating:a,onClick:u,onHover:c,onKeyDown:d,iconName:i},h))})};function U0({rating:e,min:t=1,max:n=5,icon:r="star"}){const i=M0(t,n);return g("div",{className:"flex no-wrap",role:"img","aria-label":`Rating: ${e} out of ${n}`,children:i.map(s=>g(sQ,{isFilled:e>=s,iconName:r},s))})}function cQ({icon:e,onRate:t}){const n=nt();return g("div",{className:"flex flex-col items-center",children:[g("div",{className:"text-sm text-base-primary font-medium",children:n.initiate_feedback}),g("div",{className:"py-4",children:g(oQ,{onRate:t,ariaLabel:n.initiate_feedback,icon:e})})]})}function lQ({icon:e,rating:t,showFollowUpButton:n,onFollowUpClick:r}){const i=nt();return g("div",{className:"flex flex-col items-center gap-3 mb-4",children:[g("div",{className:"text-sm text-base-primary font-medium",children:i.thanks_for_feedback}),g(U0,{rating:t,min:1,max:5,icon:e}),n&&g(Qt,{variant:"secondary",onClick:r,children:i.request_follow_up_feedback})]})}function uQ({icon:e="star"}){const{currentContent:t}=Ch(),{rating:n,feedbackProgress:r,submitRating:i}=xh(),s=r.value!=="initial"&&n.value!==null,a=oe(c=>{i(c),t.value="feedback"},[i]),o=oe(()=>{t.value="feedback"},[]);return s?g(lQ,{icon:e,rating:n.value??0,showFollowUpButton:r.value!=="submitted-follow-up",onFollowUpClick:o}):g(cQ,{icon:e,onRate:a})}const q0=-1,zc=0,qa=1,Zc=2,Ph=3,Rh=4,Ah=5,Ih=6,X0=7,F0=8,B0=typeof self=="object"?self:globalThis,dQ=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case zc:case q0:return n(a,i);case qa:{const o=n([],i);for(const c of a)o.push(r(c));return o}case Zc:{const o=n({},i);for(const[c,l]of a)o[r(c)]=r(l);return o}case Ph:return n(new Date(a),i);case Rh:{const{source:o,flags:c}=a;return n(new RegExp(o,c),i)}case Ah:{const o=n(new Map,i);for(const[c,l]of a)o.set(r(c),r(l));return o}case Ih:{const o=n(new Set,i);for(const c of a)o.add(r(c));return o}case X0:{const{name:o,message:c}=a;return n(new B0[o](c),i)}case F0:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new B0[s](a),i)};return r},z0=e=>dQ(new Map,e)(0),$s="",{toString:hQ}={},{keys:pQ}=Object,Xa=e=>{const t=typeof e;if(t!=="object"||!e)return[zc,t];const n=hQ.call(e).slice(8,-1);switch(n){case"Array":return[qa,$s];case"Object":return[Zc,$s];case"Date":return[Ph,$s];case"RegExp":return[Rh,$s];case"Map":return[Ah,$s];case"Set":return[Ih,$s];case"DataView":return[qa,n]}return n.includes("Array")?[qa,n]:n.includes("Error")?[X0,n]:[Zc,n]},jc=([e,t])=>e===zc&&(t==="function"||t==="symbol"),fQ=(e,t,n,r)=>{const i=(a,o)=>{const c=r.push(a)-1;return n.set(o,c),c},s=a=>{if(n.has(a))return n.get(a);let[o,c]=Xa(a);switch(o){case zc:{let u=a;switch(c){case"bigint":o=F0,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([q0],a)}return i([o,u],a)}case qa:{if(c){let h=a;return c==="DataView"?h=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(a)),i([c,[...h]],a)}const u=[],d=i([o,u],a);for(const h of a)u.push(s(h));return d}case Zc:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const u=[],d=i([o,u],a);for(const h of pQ(a))(e||!jc(Xa(a[h])))&&u.push([s(h),s(a[h])]);return d}case Ph:return i([o,a.toISOString()],a);case Rh:{const{source:u,flags:d}=a;return i([o,{source:u,flags:d}],a)}case Ah:{const u=[],d=i([o,u],a);for(const[h,p]of a)(e||!(jc(Xa(h))||jc(Xa(p))))&&u.push([s(h),s(p)]);return d}case Ih:{const u=[],d=i([o,u],a);for(const h of a)(e||!jc(Xa(h)))&&u.push(s(h));return d}}const{message:l}=a;return i([o,{name:c,message:l}],a)};return s},Z0=(e,{json:t,lossy:n}={})=>{const r=[];return fQ(!(t||n),!!t,new Map,r)(e),r},Fi=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?z0(Z0(e,t)):structuredClone(e):(e,t)=>z0(Z0(e,t)),Vc=j0("end"),tr=j0("start");function j0(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function V0(e){const t=tr(e),n=Vc(e);if(t&&n)return{start:t,end:n}}const Bi=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Fa={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Bi,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Bi],h2:[["className","sr-only"]],img:[...Bi,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Bi,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Bi],table:[...Bi],ul:[...Bi,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},oi={}.hasOwnProperty;function mQ(e,t){let n={type:"root",children:[]};const r={schema:t?{...Fa,...t}:Fa,stack:[]},i=G0(r,e);return i&&(Array.isArray(i)?i.length===1?n=i[0]:n.children=i:n=i),n}function G0(e,t){if(t&&typeof t=="object"){const n=t;switch(typeof n.type=="string"?n.type:""){case"comment":return OQ(e,n);case"doctype":return gQ(e,n);case"element":return vQ(e,n);case"root":return bQ(e,n);case"text":return TQ(e,n)}}}function OQ(e,t){if(e.schema.allowComments){const n=typeof t.value=="string"?t.value:"",r=n.indexOf("-->"),i={type:"comment",value:r<0?n:n.slice(0,r)};return Ba(i,t),i}}function gQ(e,t){if(e.schema.allowDoctypes){const n={type:"doctype"};return Ba(n,t),n}}function vQ(e,t){const n=typeof t.tagName=="string"?t.tagName:"";e.stack.push(n);const r=W0(e,t.children),i=kQ(e,t.properties);e.stack.pop();let s=!1;if(n&&n!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(n))&&(s=!0,e.schema.ancestors&&oi.call(e.schema.ancestors,n))){const o=e.schema.ancestors[n];let c=-1;for(s=!1;++c<o.length;)e.stack.includes(o[c])&&(s=!0)}if(!s)return e.schema.strip&&!e.schema.strip.includes(n)?r:void 0;const a={type:"element",tagName:n,properties:i,children:r};return Ba(a,t),a}function bQ(e,t){const n={type:"root",children:W0(e,t.children)};return Ba(n,t),n}function TQ(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return Ba(n,t),n}function W0(e,t){const n=[];if(Array.isArray(t)){const r=t;let i=-1;for(;++i<r.length;){const s=G0(e,r[i]);s&&(Array.isArray(s)?n.push(...s):n.push(s))}}return n}function kQ(e,t){const n=e.stack[e.stack.length-1],r=e.schema.attributes,i=e.schema.required,s=r&&oi.call(r,n)?r[n]:void 0,a=r&&oi.call(r,"*")?r["*"]:void 0,o=t&&typeof t=="object"?t:{},c={};let l;for(l in o)if(oi.call(o,l)){const u=o[l];let d=Y0(e,K0(s,l),l,u);d==null&&(d=Y0(e,K0(a,l),l,u)),d!=null&&(c[l]=d)}if(i&&oi.call(i,n)){const u=i[n];for(l in u)oi.call(u,l)&&!oi.call(c,l)&&(c[l]=u[l])}return c}function Y0(e,t,n,r){return t?Array.isArray(r)?yQ(e,t,n,r):H0(e,t,n,r):void 0}function yQ(e,t,n,r){let i=-1;const s=[];for(;++i<r.length;){const a=H0(e,t,n,r[i]);(typeof a=="number"||typeof a=="string")&&s.push(a)}return s}function H0(e,t,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&SQ(e,n,r)){if(typeof t=="object"&&t.length>1){let i=!1,s=0;for(;++s<t.length;){const a=t[s];if(a&&typeof a=="object"&&"flags"in a){if(a.test(String(r))){i=!0;break}}else if(a===r){i=!0;break}}if(!i)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(n)?e.schema.clobberPrefix+r:r}}function SQ(e,t,n){const r=e.schema.protocols&&oi.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!r||r.length===0)return!0;const i=String(n),s=i.indexOf(":"),a=i.indexOf("?"),o=i.indexOf("#"),c=i.indexOf("/");if(s<0||c>-1&&s>c||a>-1&&s>a||o>-1&&s>o)return!0;let l=-1;for(;++l<r.length;){const u=r[l];if(s===u.length&&i.slice(0,u.length)===u)return!0}return!1}function Ba(e,t){const n=V0(t);t.data&&(e.data=Fi(t.data)),n&&(e.position=n)}function K0(e,t){let n,r=-1;if(e)for(;++r<e.length;){const i=e[r],s=typeof i=="string"?i:i[0];if(s===t)return i;s==="data*"&&(n=i)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return n}function _Q(e){return function(t){return mQ(t,e)}}class za{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}za.prototype.normal={},za.prototype.property={},za.prototype.space=void 0;function J0(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new za(n,r,t)}function Za(e){return e.toLowerCase()}class rn{constructor(t,n){this.attribute=n,this.property=t}}rn.prototype.attribute="",rn.prototype.booleanish=!1,rn.prototype.boolean=!1,rn.prototype.commaOrSpaceSeparated=!1,rn.prototype.commaSeparated=!1,rn.prototype.defined=!1,rn.prototype.mustUseProperty=!1,rn.prototype.number=!1,rn.prototype.overloadedBoolean=!1,rn.prototype.property="",rn.prototype.spaceSeparated=!1,rn.prototype.space=void 0;let EQ=0;const ke=zi(),_t=zi(),Qh=zi(),K=zi(),rt=zi(),Ls=zi(),On=zi();function zi(){return 2**++EQ}const Nh=Object.freeze(Object.defineProperty({__proto__:null,boolean:ke,booleanish:_t,commaOrSpaceSeparated:On,commaSeparated:Ls,number:K,overloadedBoolean:Qh,spaceSeparated:rt},Symbol.toStringTag,{value:"Module"})),Dh=Object.keys(Nh);class $h extends rn{constructor(t,n,r,i){let s=-1;if(super(t,n),eT(this,"space",i),typeof r=="number")for(;++s<Dh.length;){const a=Dh[s];eT(this,Dh[s],(r&Nh[a])===Nh[a])}}}$h.prototype.defined=!0;function eT(e,t,n){n&&(e[t]=n)}function Ms(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new $h(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Za(r)]=r,n[Za(s.attribute)]=r}return new za(t,n,e.space)}const tT=Ms({properties:{ariaActiveDescendant:null,ariaAtomic:_t,ariaAutoComplete:null,ariaBusy:_t,ariaChecked:_t,ariaColCount:K,ariaColIndex:K,ariaColSpan:K,ariaControls:rt,ariaCurrent:null,ariaDescribedBy:rt,ariaDetails:null,ariaDisabled:_t,ariaDropEffect:rt,ariaErrorMessage:null,ariaExpanded:_t,ariaFlowTo:rt,ariaGrabbed:_t,ariaHasPopup:null,ariaHidden:_t,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rt,ariaLevel:K,ariaLive:null,ariaModal:_t,ariaMultiLine:_t,ariaMultiSelectable:_t,ariaOrientation:null,ariaOwns:rt,ariaPlaceholder:null,ariaPosInSet:K,ariaPressed:_t,ariaReadOnly:_t,ariaRelevant:null,ariaRequired:_t,ariaRoleDescription:rt,ariaRowCount:K,ariaRowIndex:K,ariaRowSpan:K,ariaSelected:_t,ariaSetSize:K,ariaSort:null,ariaValueMax:K,ariaValueMin:K,ariaValueNow:K,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function nT(e,t){return t in e?e[t]:t}function rT(e,t){return nT(e,t.toLowerCase())}const wQ=Ms({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ls,acceptCharset:rt,accessKey:rt,action:null,allow:null,allowFullScreen:ke,allowPaymentRequest:ke,allowUserMedia:ke,alt:null,as:null,async:ke,autoCapitalize:null,autoComplete:rt,autoFocus:ke,autoPlay:ke,blocking:rt,capture:null,charSet:null,checked:ke,cite:null,className:rt,cols:K,colSpan:null,content:null,contentEditable:_t,controls:ke,controlsList:rt,coords:K|Ls,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ke,defer:ke,dir:null,dirName:null,disabled:ke,download:Qh,draggable:_t,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ke,formTarget:null,headers:rt,height:K,hidden:Qh,high:K,href:null,hrefLang:null,htmlFor:rt,httpEquiv:rt,id:null,imageSizes:null,imageSrcSet:null,inert:ke,inputMode:null,integrity:null,is:null,isMap:ke,itemId:null,itemProp:rt,itemRef:rt,itemScope:ke,itemType:rt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ke,low:K,manifest:null,max:null,maxLength:K,media:null,method:null,min:null,minLength:K,multiple:ke,muted:ke,name:null,nonce:null,noModule:ke,noValidate:ke,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ke,optimum:K,pattern:null,ping:rt,placeholder:null,playsInline:ke,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ke,referrerPolicy:null,rel:rt,required:ke,reversed:ke,rows:K,rowSpan:K,sandbox:rt,scope:null,scoped:ke,seamless:ke,selected:ke,shadowRootClonable:ke,shadowRootDelegatesFocus:ke,shadowRootMode:null,shape:null,size:K,sizes:null,slot:null,span:K,spellCheck:_t,src:null,srcDoc:null,srcLang:null,srcSet:null,start:K,step:null,style:null,tabIndex:K,target:null,title:null,translate:null,type:null,typeMustMatch:ke,useMap:null,value:_t,width:K,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rt,axis:null,background:null,bgColor:null,border:K,borderColor:null,bottomMargin:K,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ke,declare:ke,event:null,face:null,frame:null,frameBorder:null,hSpace:K,leftMargin:K,link:null,longDesc:null,lowSrc:null,marginHeight:K,marginWidth:K,noResize:ke,noHref:ke,noShade:ke,noWrap:ke,object:null,profile:null,prompt:null,rev:null,rightMargin:K,rules:null,scheme:null,scrolling:_t,standby:null,summary:null,text:null,topMargin:K,valueType:null,version:null,vAlign:null,vLink:null,vSpace:K,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ke,disableRemotePlayback:ke,prefix:null,property:null,results:K,security:null,unselectable:null},space:"html",transform:rT}),xQ=Ms({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:On,accentHeight:K,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:K,amplitude:K,arabicForm:null,ascent:K,attributeName:null,attributeType:null,azimuth:K,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:K,by:null,calcMode:null,capHeight:K,className:rt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:K,diffuseConstant:K,direction:null,display:null,dur:null,divisor:K,dominantBaseline:null,download:ke,dx:null,dy:null,edgeMode:null,editable:null,elevation:K,enableBackground:null,end:null,event:null,exponent:K,externalResourcesRequired:null,fill:null,fillOpacity:K,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ls,g2:Ls,glyphName:Ls,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:K,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:K,horizOriginX:K,horizOriginY:K,id:null,ideographic:K,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:K,k:K,k1:K,k2:K,k3:K,k4:K,kernelMatrix:On,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:K,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:K,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:K,overlineThickness:K,paintOrder:null,panose1:null,path:null,pathLength:K,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:K,pointsAtY:K,pointsAtZ:K,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:On,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:On,rev:On,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:On,requiredFeatures:On,requiredFonts:On,requiredFormats:On,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:K,specularExponent:K,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:K,strikethroughThickness:K,string:null,stroke:null,strokeDashArray:On,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:K,strokeOpacity:K,strokeWidth:null,style:null,surfaceScale:K,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:On,tabIndex:K,tableValues:null,target:null,targetX:K,targetY:K,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:On,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:K,underlineThickness:K,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:K,values:null,vAlphabetic:K,vMathematical:K,vectorEffect:null,vHanging:K,vIdeographic:K,version:null,vertAdvY:K,vertOriginX:K,vertOriginY:K,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:K,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:nT}),iT=Ms({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),sT=Ms({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:rT}),aT=Ms({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),CQ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},PQ=/[A-Z]/g,oT=/-[a-z]/g,RQ=/^data[-\w.:]+$/i;function Gc(e,t){const n=Za(t);let r=t,i=rn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&RQ.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(oT,IQ);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!oT.test(s)){let a=s.replace(PQ,AQ);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=$h}return new i(r,t)}function AQ(e){return"-"+e.toLowerCase()}function IQ(e){return e.charAt(1).toUpperCase()}const ja=J0([tT,wQ,iT,sT,aT],"html"),ci=J0([tT,xQ,iT,sT,aT],"svg");function cT(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const a=n.slice(i,r).trim();(a||!s)&&t.push(a),i=r+1,r=n.indexOf(",",i)}return t}function lT(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const uT=/[#.]/g;function QQ(e,t){const n=e||"",r={};let i=0,s,a;for(;i<n.length;){uT.lastIndex=i;const o=uT.exec(n),c=n.slice(i,o?o.index:n.length);c&&(s?s==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:a=c,i+=c.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||t||"div",properties:r,children:[]}}function dT(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function hT(e){return e.join(" ").trim()}function pT(e,t,n){const r=n?LQ(n):void 0;function i(s,a,...o){let c;if(s==null){c={type:"root",children:[]};const l=a;o.unshift(l)}else{c=QQ(s,t);const l=c.tagName.toLowerCase(),u=r?r.get(l):void 0;if(c.tagName=u||l,NQ(a))o.unshift(a);else for(const[d,h]of Object.entries(a))DQ(e,c.properties,d,h)}for(const l of o)Lh(c.children,l);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function NQ(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function DQ(e,t,n,r){const i=Gc(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=dT(r):i.commaSeparated?s=cT(r):i.commaOrSpaceSeparated?s=dT(cT(r).join(" ")):s=fT(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?$Q(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(fT(i,i.property,o));s=a}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function Lh(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)Lh(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?Lh(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function fT(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Za(n)===Za(t)))return!0}return n}function $Q(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function LQ(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const MQ=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],UQ=pT(ja,"div"),qQ=pT(ci,"g",MQ);function XQ(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const c=mT(t,n[a-1]);o=c===-1?t.length+1:c+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],c=mT(t,o),l=c===-1?t.length+1:c+1;if(o===l)break;n.push(l)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function mT(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Zi={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},OT={}.hasOwnProperty,FQ=Object.prototype;function BQ(e,t){const n=t||{};return Mh({file:n.file||void 0,location:!1,schema:n.space==="svg"?ci:ja,verbose:n.verbose||!1},e)}function Mh(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Wc(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:gT(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),a=XQ(s),o=a.toPoint(0),c=a.toPoint(s.length);n.position={start:o,end:c}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Wc(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Wc(e,r,n),n}default:return n=zQ(e,t),n}}function gT(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Mh(e,t[n]);r.push(i)}return r}function zQ(e,t){const n=e.schema;e.schema=t.namespaceURI===Zi.svg?ci:ja;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],o=(a.prefix?a.prefix+":":"")+a.name;OT.call(FQ,o)||(i[o]=a.value)}const s=(e.schema.space==="svg"?qQ:UQ)(t.tagName,i,gT(e,t.childNodes));if(Wc(e,t,s),s.tagName==="template"){const a=t,o=a.sourceCodeLocation,c=o&&o.startTag&&Us(o.startTag),l=o&&o.endTag&&Us(o.endTag),u=Mh(e,a.content);c&&l&&e.file&&(u.position={start:c.end,end:l.start}),s.content=u}return e.schema=n,s}function Wc(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=ZQ(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function ZQ(e,t,n){const r=Us(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)OT.call(n.attrs,a)&&(s[Gc(e.schema,a).property]=Us(n.attrs[a]));n.startTag;const o=Us(n.startTag),c=n.endTag?Us(n.endTag):void 0,l={opening:o};c&&(l.closing=c),l.properties=s,t.data={position:l}}}return r}function Us(e){const t=vT({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=vT({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function vT(e){return e.line&&e.column?e:void 0}const bT={}.hasOwnProperty;function TT(e,t){const n=t||{};function r(i,...s){let a=r.invalid;const o=r.handlers;if(i&&bT.call(i,e)){const c=String(i[e]);a=bT.call(o,c)?o[c]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const jQ={},VQ={}.hasOwnProperty,kT=TT("type",{handlers:{root:WQ,element:eN,text:KQ,comment:JQ,doctype:HQ}});function GQ(e,t){const n=(t||jQ).space;return kT(e,n==="svg"?ci:ja)}function WQ(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Uh(e.children,n,t),qs(e,n),n}function YQ(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Uh(e.children,n,t),qs(e,n),n}function HQ(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return qs(e,t),t}function KQ(e){const t={nodeName:"#text",value:e.value,parentNode:null};return qs(e,t),t}function JQ(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return qs(e,t),t}function eN(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=ci);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&VQ.call(e.properties,s)){const c=tN(r,s,e.properties[s]);c&&i.push(c)}}const a=r.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Zi[a],childNodes:[],parentNode:null};return o.childNodes=Uh(e.children,o,r),qs(e,o),e.tagName==="template"&&e.content&&(o.content=YQ(e.content,r)),o}function tN(e,t,n){const r=Gc(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?lT(n):hT(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Zi[r.space]}return i}function Uh(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=kT(e[r],n);s.parentNode=t,i.push(s)}return i}function qs(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const nN=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],rN=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),dt="";var E;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(E||(E={}));const sn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function yT(e){return e>=55296&&e<=57343}function iN(e){return e>=56320&&e<=57343}function sN(e,t){return(e-55296)*1024+9216+t}function ST(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function _T(e){return e>=64976&&e<=65007||rN.has(e)}var X;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(X||(X={}));const aN=65536;class oN{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=aN,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:s}=this,a=i+n,o=s+n;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(iN(n))return this.pos++,this._addGap(),sN(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,E.EOF;return this._err(X.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,E.EOF;const r=this.html.charCodeAt(n);return r===E.CARRIAGE_RETURN?E.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,E.EOF;let t=this.html.charCodeAt(this.pos);return t===E.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,E.LINE_FEED):t===E.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,yT(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===E.LINE_FEED||t===E.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){ST(t)?this._err(X.controlCharacterInInputStream):_T(t)&&this._err(X.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var we;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(we||(we={}));function ET(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const cN=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),lN=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function uN(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=lN.get(e))!==null&&t!==void 0?t:e}var Nt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Nt||(Nt={}));const dN=32;var li;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(li||(li={}));function qh(e){return e>=Nt.ZERO&&e<=Nt.NINE}function hN(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_F||e>=Nt.LOWER_A&&e<=Nt.LOWER_F}function pN(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_Z||e>=Nt.LOWER_A&&e<=Nt.LOWER_Z||qh(e)}function fN(e){return e===Nt.EQUALS||pN(e)}var Dt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Dt||(Dt={}));var Ar;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ar||(Ar={}));class mN{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Dt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ar.Strict}startEntity(t){this.decodeMode=t,this.state=Dt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Dt.EntityStart:return t.charCodeAt(n)===Nt.NUM?(this.state=Dt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Dt.NamedEntity,this.stateNamedEntity(t,n));case Dt.NumericStart:return this.stateNumericStart(t,n);case Dt.NumericDecimal:return this.stateNumericDecimal(t,n);case Dt.NumericHex:return this.stateNumericHex(t,n);case Dt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|dN)===Nt.LOWER_X?(this.state=Dt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Dt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(qh(i)||hN(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(qh(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Nt.SEMI)this.consumed+=1;else if(this.decodeMode===Ar.Strict)return 0;return this.emitCodePoint(uN(this.result),this.consumed),this.errors&&(t!==Nt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&li.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=ON(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Ar.Attribute&&(s===0||fN(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&li.VALUE_LENGTH)>>14,s!==0){if(a===Nt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ar.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&li.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~li.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Dt.NamedEntity:return this.result!==0&&(this.decodeMode!==Ar.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Dt.NumericDecimal:return this.emitNumericEntity(0,2);case Dt.NumericHex:return this.emitNumericEntity(0,3);case Dt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Dt.EntityStart:return 0}}}function ON(e,t,n,r){const i=(t&li.BRANCH_LENGTH)>>7,s=t&li.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const c=r-s;return c<0||c>=i?-1:e[n+c]-1}let a=n,o=a+i-1;for(;a<=o;){const c=a+o>>>1,l=e[c];if(l<r)a=c+1;else if(l>r)o=c-1;else return e[c+i]}return-1}var G;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(G||(G={}));var ji;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(ji||(ji={}));var wn;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(wn||(wn={}));var M;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(M||(M={}));var f;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(f||(f={}));const gN=new Map([[M.A,f.A],[M.ADDRESS,f.ADDRESS],[M.ANNOTATION_XML,f.ANNOTATION_XML],[M.APPLET,f.APPLET],[M.AREA,f.AREA],[M.ARTICLE,f.ARTICLE],[M.ASIDE,f.ASIDE],[M.B,f.B],[M.BASE,f.BASE],[M.BASEFONT,f.BASEFONT],[M.BGSOUND,f.BGSOUND],[M.BIG,f.BIG],[M.BLOCKQUOTE,f.BLOCKQUOTE],[M.BODY,f.BODY],[M.BR,f.BR],[M.BUTTON,f.BUTTON],[M.CAPTION,f.CAPTION],[M.CENTER,f.CENTER],[M.CODE,f.CODE],[M.COL,f.COL],[M.COLGROUP,f.COLGROUP],[M.DD,f.DD],[M.DESC,f.DESC],[M.DETAILS,f.DETAILS],[M.DIALOG,f.DIALOG],[M.DIR,f.DIR],[M.DIV,f.DIV],[M.DL,f.DL],[M.DT,f.DT],[M.EM,f.EM],[M.EMBED,f.EMBED],[M.FIELDSET,f.FIELDSET],[M.FIGCAPTION,f.FIGCAPTION],[M.FIGURE,f.FIGURE],[M.FONT,f.FONT],[M.FOOTER,f.FOOTER],[M.FOREIGN_OBJECT,f.FOREIGN_OBJECT],[M.FORM,f.FORM],[M.FRAME,f.FRAME],[M.FRAMESET,f.FRAMESET],[M.H1,f.H1],[M.H2,f.H2],[M.H3,f.H3],[M.H4,f.H4],[M.H5,f.H5],[M.H6,f.H6],[M.HEAD,f.HEAD],[M.HEADER,f.HEADER],[M.HGROUP,f.HGROUP],[M.HR,f.HR],[M.HTML,f.HTML],[M.I,f.I],[M.IMG,f.IMG],[M.IMAGE,f.IMAGE],[M.INPUT,f.INPUT],[M.IFRAME,f.IFRAME],[M.KEYGEN,f.KEYGEN],[M.LABEL,f.LABEL],[M.LI,f.LI],[M.LINK,f.LINK],[M.LISTING,f.LISTING],[M.MAIN,f.MAIN],[M.MALIGNMARK,f.MALIGNMARK],[M.MARQUEE,f.MARQUEE],[M.MATH,f.MATH],[M.MENU,f.MENU],[M.META,f.META],[M.MGLYPH,f.MGLYPH],[M.MI,f.MI],[M.MO,f.MO],[M.MN,f.MN],[M.MS,f.MS],[M.MTEXT,f.MTEXT],[M.NAV,f.NAV],[M.NOBR,f.NOBR],[M.NOFRAMES,f.NOFRAMES],[M.NOEMBED,f.NOEMBED],[M.NOSCRIPT,f.NOSCRIPT],[M.OBJECT,f.OBJECT],[M.OL,f.OL],[M.OPTGROUP,f.OPTGROUP],[M.OPTION,f.OPTION],[M.P,f.P],[M.PARAM,f.PARAM],[M.PLAINTEXT,f.PLAINTEXT],[M.PRE,f.PRE],[M.RB,f.RB],[M.RP,f.RP],[M.RT,f.RT],[M.RTC,f.RTC],[M.RUBY,f.RUBY],[M.S,f.S],[M.SCRIPT,f.SCRIPT],[M.SEARCH,f.SEARCH],[M.SECTION,f.SECTION],[M.SELECT,f.SELECT],[M.SOURCE,f.SOURCE],[M.SMALL,f.SMALL],[M.SPAN,f.SPAN],[M.STRIKE,f.STRIKE],[M.STRONG,f.STRONG],[M.STYLE,f.STYLE],[M.SUB,f.SUB],[M.SUMMARY,f.SUMMARY],[M.SUP,f.SUP],[M.TABLE,f.TABLE],[M.TBODY,f.TBODY],[M.TEMPLATE,f.TEMPLATE],[M.TEXTAREA,f.TEXTAREA],[M.TFOOT,f.TFOOT],[M.TD,f.TD],[M.TH,f.TH],[M.THEAD,f.THEAD],[M.TITLE,f.TITLE],[M.TR,f.TR],[M.TRACK,f.TRACK],[M.TT,f.TT],[M.U,f.U],[M.UL,f.UL],[M.SVG,f.SVG],[M.VAR,f.VAR],[M.WBR,f.WBR],[M.XMP,f.XMP]]);function Xs(e){var t;return(t=gN.get(e))!==null&&t!==void 0?t:f.UNKNOWN}const Y=f,vN={[G.HTML]:new Set([Y.ADDRESS,Y.APPLET,Y.AREA,Y.ARTICLE,Y.ASIDE,Y.BASE,Y.BASEFONT,Y.BGSOUND,Y.BLOCKQUOTE,Y.BODY,Y.BR,Y.BUTTON,Y.CAPTION,Y.CENTER,Y.COL,Y.COLGROUP,Y.DD,Y.DETAILS,Y.DIR,Y.DIV,Y.DL,Y.DT,Y.EMBED,Y.FIELDSET,Y.FIGCAPTION,Y.FIGURE,Y.FOOTER,Y.FORM,Y.FRAME,Y.FRAMESET,Y.H1,Y.H2,Y.H3,Y.H4,Y.H5,Y.H6,Y.HEAD,Y.HEADER,Y.HGROUP,Y.HR,Y.HTML,Y.IFRAME,Y.IMG,Y.INPUT,Y.LI,Y.LINK,Y.LISTING,Y.MAIN,Y.MARQUEE,Y.MENU,Y.META,Y.NAV,Y.NOEMBED,Y.NOFRAMES,Y.NOSCRIPT,Y.OBJECT,Y.OL,Y.P,Y.PARAM,Y.PLAINTEXT,Y.PRE,Y.SCRIPT,Y.SECTION,Y.SELECT,Y.SOURCE,Y.STYLE,Y.SUMMARY,Y.TABLE,Y.TBODY,Y.TD,Y.TEMPLATE,Y.TEXTAREA,Y.TFOOT,Y.TH,Y.THEAD,Y.TITLE,Y.TR,Y.TRACK,Y.UL,Y.WBR,Y.XMP]),[G.MATHML]:new Set([Y.MI,Y.MO,Y.MN,Y.MS,Y.MTEXT,Y.ANNOTATION_XML]),[G.SVG]:new Set([Y.TITLE,Y.FOREIGN_OBJECT,Y.DESC]),[G.XLINK]:new Set,[G.XML]:new Set,[G.XMLNS]:new Set},Xh=new Set([Y.H1,Y.H2,Y.H3,Y.H4,Y.H5,Y.H6]);M.STYLE,M.SCRIPT,M.XMP,M.IFRAME,M.NOEMBED,M.NOFRAMES,M.PLAINTEXT;var w;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(w||(w={}));const Tt={DATA:w.DATA,RCDATA:w.RCDATA,RAWTEXT:w.RAWTEXT,SCRIPT_DATA:w.SCRIPT_DATA,PLAINTEXT:w.PLAINTEXT,CDATA_SECTION:w.CDATA_SECTION};function bN(e){return e>=E.DIGIT_0&&e<=E.DIGIT_9}function Va(e){return e>=E.LATIN_CAPITAL_A&&e<=E.LATIN_CAPITAL_Z}function TN(e){return e>=E.LATIN_SMALL_A&&e<=E.LATIN_SMALL_Z}function ui(e){return TN(e)||Va(e)}function wT(e){return ui(e)||bN(e)}function Yc(e){return e+32}function xT(e){return e===E.SPACE||e===E.LINE_FEED||e===E.TABULATION||e===E.FORM_FEED}function CT(e){return xT(e)||e===E.SOLIDUS||e===E.GREATER_THAN_SIGN}function kN(e){return e===E.NULL?X.nullCharacterReference:e>1114111?X.characterReferenceOutsideUnicodeRange:yT(e)?X.surrogateCharacterReference:_T(e)?X.noncharacterCharacterReference:ST(e)||e===E.CARRIAGE_RETURN?X.controlCharacterReference:null}class yN{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=w.DATA,this.returnState=w.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new oN(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new mN(cN,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(X.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(X.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=kN(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||(t==null||t()))}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||(r==null||r())}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:we.START_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:we.END_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:we.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:we.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(ET(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(X.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Xs(t.tagName),t.type===we.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(X.endTagWithAttributes),t.selfClosing&&this._err(X.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case we.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case we.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case we.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:we.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=xT(t)?we.WHITESPACE_CHARACTER:t===E.NULL?we.NULL_CHARACTER:we.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(we.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=w.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ar.Attribute:Ar.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===w.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===w.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===w.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case w.DATA:{this._stateData(t);break}case w.RCDATA:{this._stateRcdata(t);break}case w.RAWTEXT:{this._stateRawtext(t);break}case w.SCRIPT_DATA:{this._stateScriptData(t);break}case w.PLAINTEXT:{this._statePlaintext(t);break}case w.TAG_OPEN:{this._stateTagOpen(t);break}case w.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case w.TAG_NAME:{this._stateTagName(t);break}case w.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case w.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case w.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case w.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case w.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case w.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case w.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case w.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case w.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case w.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case w.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case w.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case w.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case w.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case w.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case w.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case w.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case w.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case w.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case w.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case w.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case w.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case w.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case w.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case w.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case w.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case w.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case w.BOGUS_COMMENT:{this._stateBogusComment(t);break}case w.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case w.COMMENT_START:{this._stateCommentStart(t);break}case w.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case w.COMMENT:{this._stateComment(t);break}case w.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case w.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case w.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case w.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case w.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case w.COMMENT_END:{this._stateCommentEnd(t);break}case w.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case w.DOCTYPE:{this._stateDoctype(t);break}case w.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case w.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case w.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case w.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case w.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case w.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case w.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case w.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case w.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case w.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case w.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case w.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case w.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case w.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case w.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case w.CDATA_SECTION:{this._stateCdataSection(t);break}case w.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case w.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case w.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case w.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case E.LESS_THAN_SIGN:{this.state=w.TAG_OPEN;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitCodePoint(t);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case E.AMPERSAND:{this._startCharacterReference();break}case E.LESS_THAN_SIGN:{this.state=w.RCDATA_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case E.LESS_THAN_SIGN:{this.state=w.RAWTEXT_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(ui(t))this._createStartTagToken(),this.state=w.TAG_NAME,this._stateTagName(t);else switch(t){case E.EXCLAMATION_MARK:{this.state=w.MARKUP_DECLARATION_OPEN;break}case E.SOLIDUS:{this.state=w.END_TAG_OPEN;break}case E.QUESTION_MARK:{this._err(X.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=w.BOGUS_COMMENT,this._stateBogusComment(t);break}case E.EOF:{this._err(X.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(X.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=w.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(ui(t))this._createEndTagToken(),this.state=w.TAG_NAME,this._stateTagName(t);else switch(t){case E.GREATER_THAN_SIGN:{this._err(X.missingEndTagName),this.state=w.DATA;break}case E.EOF:{this._err(X.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(X.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=w.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.BEFORE_ATTRIBUTE_NAME;break}case E.SOLIDUS:{this.state=w.SELF_CLOSING_START_TAG;break}case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentTagToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.tagName+=dt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Va(t)?Yc(t):t)}}_stateRcdataLessThanSign(t){t===E.SOLIDUS?this.state=w.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=w.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){ui(t)?(this.state=w.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=w.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=w.BEFORE_ATTRIBUTE_NAME,!1;case E.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=w.SELF_CLOSING_START_TAG,!1;case E.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=w.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=w.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===E.SOLIDUS?this.state=w.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=w.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){ui(t)?(this.state=w.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=w.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=w.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case E.SOLIDUS:{this.state=w.SCRIPT_DATA_END_TAG_OPEN;break}case E.EXCLAMATION_MARK:{this.state=w.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=w.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){ui(t)?(this.state=w.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=w.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=w.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===E.HYPHEN_MINUS?(this.state=w.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=w.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===E.HYPHEN_MINUS?(this.state=w.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=w.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case E.HYPHEN_MINUS:{this.state=w.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case E.HYPHEN_MINUS:{this.state=w.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=w.SCRIPT_DATA_ESCAPED,this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=w.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case E.HYPHEN_MINUS:{this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case E.GREATER_THAN_SIGN:{this.state=w.SCRIPT_DATA,this._emitChars(">");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=w.SCRIPT_DATA_ESCAPED,this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=w.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===E.SOLIDUS?this.state=w.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ui(t)?(this._emitChars("<"),this.state=w.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=w.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){ui(t)?(this.state=w.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=w.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=w.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(sn.SCRIPT,!1)&&CT(this.preprocessor.peek(sn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<sn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=w.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case E.HYPHEN_MINUS:{this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case E.HYPHEN_MINUS:{this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case E.HYPHEN_MINUS:{this._emitChars("-");break}case E.LESS_THAN_SIGN:{this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case E.GREATER_THAN_SIGN:{this.state=w.SCRIPT_DATA,this._emitChars(">");break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(dt);break}case E.EOF:{this._err(X.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===E.SOLIDUS?(this.state=w.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(sn.SCRIPT,!1)&&CT(this.preprocessor.peek(sn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<sn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=w.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=w.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.SOLIDUS:case E.GREATER_THAN_SIGN:case E.EOF:{this.state=w.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case E.EQUALS_SIGN:{this._err(X.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=w.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=w.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:case E.SOLIDUS:case E.GREATER_THAN_SIGN:case E.EOF:{this._leaveAttrName(),this.state=w.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case E.EQUALS_SIGN:{this._leaveAttrName(),this.state=w.BEFORE_ATTRIBUTE_VALUE;break}case E.QUOTATION_MARK:case E.APOSTROPHE:case E.LESS_THAN_SIGN:{this._err(X.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.name+=dt;break}default:this.currentAttr.name+=String.fromCodePoint(Va(t)?Yc(t):t)}}_stateAfterAttributeName(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.SOLIDUS:{this.state=w.SELF_CLOSING_START_TAG;break}case E.EQUALS_SIGN:{this.state=w.BEFORE_ATTRIBUTE_VALUE;break}case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=w.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{this.state=w.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this.state=w.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingAttributeValue),this.state=w.DATA,this.emitCurrentTagToken();break}default:this.state=w.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case E.QUOTATION_MARK:{this.state=w.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=dt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case E.APOSTROPHE:{this.state=w.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=dt;break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this._leaveAttrValue(),this.state=w.BEFORE_ATTRIBUTE_NAME;break}case E.AMPERSAND:{this._startCharacterReference();break}case E.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=w.DATA,this.emitCurrentTagToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),this.currentAttr.value+=dt;break}case E.QUOTATION_MARK:case E.APOSTROPHE:case E.LESS_THAN_SIGN:case E.EQUALS_SIGN:case E.GRAVE_ACCENT:{this._err(X.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this._leaveAttrValue(),this.state=w.BEFORE_ATTRIBUTE_NAME;break}case E.SOLIDUS:{this._leaveAttrValue(),this.state=w.SELF_CLOSING_START_TAG;break}case E.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=w.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._err(X.missingWhitespaceBetweenAttributes),this.state=w.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case E.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=w.DATA,this.emitCurrentTagToken();break}case E.EOF:{this._err(X.eofInTag),this._emitEOFToken();break}default:this._err(X.unexpectedSolidusInTag),this.state=w.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentComment(n);break}case E.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.data+=dt;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(sn.DASH_DASH,!0)?(this._createCommentToken(sn.DASH_DASH.length+1),this.state=w.COMMENT_START):this._consumeSequenceIfMatch(sn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(sn.DOCTYPE.length+1),this.state=w.DOCTYPE):this._consumeSequenceIfMatch(sn.CDATA_START,!0)?this.inForeignNode?this.state=w.CDATA_SECTION:(this._err(X.cdataInHtmlContent),this._createCommentToken(sn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=w.BOGUS_COMMENT):this._ensureHibernation()||(this._err(X.incorrectlyOpenedComment),this._createCommentToken(2),this.state=w.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case E.HYPHEN_MINUS:{this.state=w.COMMENT_START_DASH;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptClosingOfEmptyComment),this.state=w.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=w.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=w.COMMENT_END;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptClosingOfEmptyComment),this.state=w.DATA,this.emitCurrentComment(n);break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=w.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=w.COMMENT_END_DASH;break}case E.LESS_THAN_SIGN:{n.data+="<",this.state=w.COMMENT_LESS_THAN_SIGN;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.data+=dt;break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case E.EXCLAMATION_MARK:{n.data+="!",this.state=w.COMMENT_LESS_THAN_SIGN_BANG;break}case E.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=w.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===E.HYPHEN_MINUS?this.state=w.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=w.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===E.HYPHEN_MINUS?this.state=w.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=w.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==E.GREATER_THAN_SIGN&&t!==E.EOF&&this._err(X.nestedComment),this.state=w.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{this.state=w.COMMENT_END;break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=w.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentComment(n);break}case E.EXCLAMATION_MARK:{this.state=w.COMMENT_END_BANG;break}case E.HYPHEN_MINUS:{n.data+="-";break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=w.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case E.HYPHEN_MINUS:{n.data+="--!",this.state=w.COMMENT_END_DASH;break}case E.GREATER_THAN_SIGN:{this._err(X.incorrectlyClosedComment),this.state=w.DATA,this.emitCurrentComment(n);break}case E.EOF:{this._err(X.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=w.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.BEFORE_DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this.state=w.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case E.EOF:{this._err(X.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingWhitespaceBeforeDoctypeName),this.state=w.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Va(t))this._createDoctypeToken(String.fromCharCode(Yc(t))),this.state=w.DOCTYPE_NAME;else switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.NULL:{this._err(X.unexpectedNullCharacter),this._createDoctypeToken(dt),this.state=w.DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=w.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.AFTER_DOCTYPE_NAME;break}case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.name+=dt;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Va(t)?Yc(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(sn.PUBLIC,!1)?this.state=w.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(sn.SYSTEM,!1)?this.state=w.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(X.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=w.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=w.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{n.publicId="",this.state=w.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.publicId="",this.state=w.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case E.QUOTATION_MARK:{this.state=w.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.publicId+=dt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case E.APOSTROPHE:{this.state=w.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.publicId+=dt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case E.GREATER_THAN_SIGN:{this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.QUOTATION_MARK:{n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:{this.state=w.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.QUOTATION_MARK:{this._err(X.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{this._err(X.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.QUOTATION_MARK:{n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case E.APOSTROPHE:{n.systemId="",this.state=w.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case E.GREATER_THAN_SIGN:{this._err(X.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.DATA,this.emitCurrentDoctype(n);break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case E.QUOTATION_MARK:{this.state=w.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.systemId+=dt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case E.APOSTROPHE:{this.state=w.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case E.NULL:{this._err(X.unexpectedNullCharacter),n.systemId+=dt;break}case E.GREATER_THAN_SIGN:{this._err(X.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case E.SPACE:case E.LINE_FEED:case E.TABULATION:case E.FORM_FEED:break;case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.EOF:{this._err(X.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(X.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=w.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case E.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=w.DATA;break}case E.NULL:{this._err(X.unexpectedNullCharacter);break}case E.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case E.RIGHT_SQUARE_BRACKET:{this.state=w.CDATA_SECTION_BRACKET;break}case E.EOF:{this._err(X.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===E.RIGHT_SQUARE_BRACKET?this.state=w.CDATA_SECTION_END:(this._emitChars("]"),this.state=w.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case E.GREATER_THAN_SIGN:{this.state=w.DATA;break}case E.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=w.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(E.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&wT(this.preprocessor.peek(1))?w.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){wT(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===E.SEMICOLON&&this._err(X.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const PT=new Set([f.DD,f.DT,f.LI,f.OPTGROUP,f.OPTION,f.P,f.RB,f.RP,f.RT,f.RTC]),RT=new Set([...PT,f.CAPTION,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]),Hc=new Set([f.APPLET,f.CAPTION,f.HTML,f.MARQUEE,f.OBJECT,f.TABLE,f.TD,f.TEMPLATE,f.TH]),SN=new Set([...Hc,f.OL,f.UL]),_N=new Set([...Hc,f.BUTTON]),AT=new Set([f.ANNOTATION_XML,f.MI,f.MN,f.MO,f.MS,f.MTEXT]),IT=new Set([f.DESC,f.FOREIGN_OBJECT,f.TITLE]),EN=new Set([f.TR,f.TEMPLATE,f.HTML]),wN=new Set([f.TBODY,f.TFOOT,f.THEAD,f.TEMPLATE,f.HTML]),xN=new Set([f.TABLE,f.TEMPLATE,f.HTML]),CN=new Set([f.TD,f.TH]);class PN{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=f.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===f.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===G.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==G.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Xh,G.HTML)}popUntilTableCellPopped(){this.popUntilPopped(CN,G.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(xN,G.HTML)}clearBackToTableBodyContext(){this.clearBackTo(wN,G.HTML)}clearBackToTableRowContext(){this.clearBackTo(EN,G.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===f.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===f.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case G.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case G.SVG:{if(IT.has(i))return!1;break}case G.MATHML:{if(AT.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Hc)}hasInListItemScope(t){return this.hasInDynamicScope(t,SN)}hasInButtonScope(t){return this.hasInDynamicScope(t,_N)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case G.HTML:{if(Xh.has(n))return!0;if(Hc.has(n))return!1;break}case G.SVG:{if(IT.has(n))return!1;break}case G.MATHML:{if(AT.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===G.HTML)switch(this.tagIDs[n]){case t:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===G.HTML)switch(this.tagIDs[t]){case f.TBODY:case f.THEAD:case f.TFOOT:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===G.HTML)switch(this.tagIDs[n]){case t:return!0;case f.OPTION:case f.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&PT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&RT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&RT.has(this.currentTagId);)this.pop()}}const Fh=3;var nr;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(nr||(nr={}));const QT={type:nr.Marker};class RN{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const c=this.entries[o];if(c.type===nr.Marker)break;const{element:l}=c;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===a){const u=this.treeAdapter.getAttrList(l);u.length===i&&r.push({idx:o,attrs:u})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Fh)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Fh)return;const i=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<r.length;a++){const o=r[a];o.attrs.every(c=>i.get(c.name)===c.value)&&(s+=1,s>=Fh&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(QT)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:nr.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:nr.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(QT);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===nr.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===nr.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===nr.Element&&n.element===t)}}const di={createDocument(){return{nodeName:"#document",mode:wn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};di.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(di.isTextNode(n)){n.value+=t;return}}di.appendChild(e,di.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&di.isTextNode(r)?r.value+=t:di.insertBefore(e,di.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},NT="html",AN="about:legacy-compat",IN="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",DT=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QN=[...DT,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],NN=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),$T=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],DN=[...$T,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function LT(e,t){return t.some(n=>e.startsWith(n))}function $N(e){return e.name===NT&&e.publicId===null&&(e.systemId===null||e.systemId===AN)}function LN(e){if(e.name!==NT)return wn.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===IN)return wn.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),NN.has(n))return wn.QUIRKS;let r=t===null?QN:DT;if(LT(n,r))return wn.QUIRKS;if(r=t===null?$T:DN,LT(n,r))return wn.LIMITED_QUIRKS}return wn.NO_QUIRKS}const MT={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},MN="definitionurl",UN="definitionURL",qN=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),XN=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:G.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:G.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:G.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:G.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:G.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:G.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:G.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:G.XML}],["xml:space",{prefix:"xml",name:"space",namespace:G.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:G.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:G.XMLNS}]]),FN=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),BN=new Set([f.B,f.BIG,f.BLOCKQUOTE,f.BODY,f.BR,f.CENTER,f.CODE,f.DD,f.DIV,f.DL,f.DT,f.EM,f.EMBED,f.H1,f.H2,f.H3,f.H4,f.H5,f.H6,f.HEAD,f.HR,f.I,f.IMG,f.LI,f.LISTING,f.MENU,f.META,f.NOBR,f.OL,f.P,f.PRE,f.RUBY,f.S,f.SMALL,f.SPAN,f.STRONG,f.STRIKE,f.SUB,f.SUP,f.TABLE,f.TT,f.U,f.UL,f.VAR]);function zN(e){const t=e.tagID;return t===f.FONT&&e.attrs.some(({name:n})=>n===ji.COLOR||n===ji.SIZE||n===ji.FACE)||BN.has(t)}function UT(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===MN){e.attrs[t].name=UN;break}}function qT(e){for(let t=0;t<e.attrs.length;t++){const n=qN.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Bh(e){for(let t=0;t<e.attrs.length;t++){const n=XN.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function ZN(e){const t=FN.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Xs(e.tagName))}function jN(e,t){return t===G.MATHML&&(e===f.MI||e===f.MO||e===f.MN||e===f.MS||e===f.MTEXT)}function VN(e,t,n){if(t===G.MATHML&&e===f.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===ji.ENCODING){const i=n[r].value.toLowerCase();return i===MT.TEXT_HTML||i===MT.APPLICATION_XML}}return t===G.SVG&&(e===f.FOREIGN_OBJECT||e===f.DESC||e===f.TITLE)}function GN(e,t,n,r){return(!r||r===G.HTML)&&VN(e,t,n)||(!r||r===G.MATHML)&&jN(e,t)}const WN="hidden",YN=8,HN=3;var P;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(P||(P={}));const KN={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},XT=new Set([f.TABLE,f.TBODY,f.TFOOT,f.THEAD,f.TR]),FT={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:di,onParseError:null};let BT=class{constructor(e,t,n=null,r=null){this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=P.INITIAL,this.originalInsertionMode=P.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...FT,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=t??this.treeAdapter.createDocument(),this.tokenizer=new yN(this.options,this),this.activeFormattingElements=new RN(this.treeAdapter),this.fragmentContextID=n?Xs(this.treeAdapter.getTagName(n)):f.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new PN(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...FT,...t};e??(e=n.treeAdapter.createElement(M.TEMPLATE,G.HTML,[]));const r=n.treeAdapter.createElement("documentmock",G.HTML,[]),i=new this(n,r,e);return i.fragmentContextID===f.TEMPLATE&&i.tmplInsertionModeStack.unshift(P.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var r;if(!this.onParseError)return;const i=(r=e.location)!==null&&r!==void 0?r:KN,s={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(s)}onItemPush(e,t,n){var r,i;(i=(r=this.treeAdapter).onItemPush)===null||i===void 0||i.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(r=(n=this.treeAdapter).onItemPop)===null||r===void 0||r.call(n,e,this.openElements.current),t){let i,s;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,s=this.fragmentContextID):{current:i,currentTagId:s}=this.openElements,this._setContextModes(i,s)}}_setContextModes(e,t){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===G.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&e!==void 0&&t!==void 0&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,G.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=P.TEXT}switchToPlaintextParsing(){this.insertionMode=P.TEXT,this.originalInsertionMode=P.IN_BODY,this.tokenizer.state=Tt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===M.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==G.HTML))switch(this.fragmentContextID){case f.TITLE:case f.TEXTAREA:{this.tokenizer.state=Tt.RCDATA;break}case f.STYLE:case f.XMP:case f.IFRAME:case f.NOEMBED:case f.NOFRAMES:case f.NOSCRIPT:{this.tokenizer.state=Tt.RAWTEXT;break}case f.SCRIPT:{this.tokenizer.state=Tt.SCRIPT_DATA;break}case f.PLAINTEXT:{this.tokenizer.state=Tt.PLAINTEXT;break}}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){const i=this.treeAdapter.getChildNodes(this.document).find(s=>this.treeAdapter.isDocumentTypeNode(s));i&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,G.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,G.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(M.HTML,G.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,f.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),i=n?r.lastIndexOf(n):r.length,s=r[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:a,endCol:o,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:a,endCol:o,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i=t.type===we.END_TAG&&r===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return this.openElements.stackTop===0&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):{current:t,currentTagId:n}=this.openElements,e.tagID===f.SVG&&this.treeAdapter.getTagName(t)===M.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(t)===G.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===f.MGLYPH||e.tagID===f.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,t,G.HTML)}_processToken(e){switch(e.type){case we.CHARACTER:{this.onCharacter(e);break}case we.NULL_CHARACTER:{this.onNullCharacter(e);break}case we.COMMENT:{this.onComment(e);break}case we.DOCTYPE:{this.onDoctype(e);break}case we.START_TAG:{this._processStartTag(e);break}case we.END_TAG:{this.onEndTag(e);break}case we.EOF:{this.onEof(e);break}case we.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,t,n){const r=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return GN(e,r,i,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(r=>r.type===nr.Marker||this.openElements.contains(r.element)),n=t===-1?e-1:t-1;for(let r=n;r>=0;r--){const i=this.activeFormattingElements.entries[r];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=P.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(f.P),this.openElements.popUntilTagNamePopped(f.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case f.TR:{this.insertionMode=P.IN_ROW;return}case f.TBODY:case f.THEAD:case f.TFOOT:{this.insertionMode=P.IN_TABLE_BODY;return}case f.CAPTION:{this.insertionMode=P.IN_CAPTION;return}case f.COLGROUP:{this.insertionMode=P.IN_COLUMN_GROUP;return}case f.TABLE:{this.insertionMode=P.IN_TABLE;return}case f.BODY:{this.insertionMode=P.IN_BODY;return}case f.FRAMESET:{this.insertionMode=P.IN_FRAMESET;return}case f.SELECT:{this._resetInsertionModeForSelect(e);return}case f.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case f.HTML:{this.insertionMode=this.headElement?P.AFTER_HEAD:P.BEFORE_HEAD;return}case f.TD:case f.TH:{if(e>0){this.insertionMode=P.IN_CELL;return}break}case f.HEAD:{if(e>0){this.insertionMode=P.IN_HEAD;return}break}}this.insertionMode=P.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const n=this.openElements.tagIDs[t];if(n===f.TEMPLATE)break;if(n===f.TABLE){this.insertionMode=P.IN_SELECT_IN_TABLE;return}}this.insertionMode=P.IN_SELECT}_isElementCausesFosterParenting(e){return XT.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case f.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(t)===G.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break}case f.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return vN[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){CD(this,e);return}switch(this.insertionMode){case P.INITIAL:{Ga(this,e);break}case P.BEFORE_HTML:{Wa(this,e);break}case P.BEFORE_HEAD:{Ya(this,e);break}case P.IN_HEAD:{Ha(this,e);break}case P.IN_HEAD_NO_SCRIPT:{Ka(this,e);break}case P.AFTER_HEAD:{Ja(this,e);break}case P.IN_BODY:case P.IN_CAPTION:case P.IN_CELL:case P.IN_TEMPLATE:{ZT(this,e);break}case P.TEXT:case P.IN_SELECT:case P.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case P.IN_TABLE:case P.IN_TABLE_BODY:case P.IN_ROW:{Vh(this,e);break}case P.IN_TABLE_TEXT:{JT(this,e);break}case P.IN_COLUMN_GROUP:{el(this,e);break}case P.AFTER_BODY:{rl(this,e);break}case P.AFTER_AFTER_BODY:{il(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){xD(this,e);return}switch(this.insertionMode){case P.INITIAL:{Ga(this,e);break}case P.BEFORE_HTML:{Wa(this,e);break}case P.BEFORE_HEAD:{Ya(this,e);break}case P.IN_HEAD:{Ha(this,e);break}case P.IN_HEAD_NO_SCRIPT:{Ka(this,e);break}case P.AFTER_HEAD:{Ja(this,e);break}case P.TEXT:{this._insertCharacters(e);break}case P.IN_TABLE:case P.IN_TABLE_BODY:case P.IN_ROW:{Vh(this,e);break}case P.IN_COLUMN_GROUP:{el(this,e);break}case P.AFTER_BODY:{rl(this,e);break}case P.AFTER_AFTER_BODY:{il(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){Zh(this,e);return}switch(this.insertionMode){case P.INITIAL:case P.BEFORE_HTML:case P.BEFORE_HEAD:case P.IN_HEAD:case P.IN_HEAD_NO_SCRIPT:case P.AFTER_HEAD:case P.IN_BODY:case P.IN_TABLE:case P.IN_CAPTION:case P.IN_COLUMN_GROUP:case P.IN_TABLE_BODY:case P.IN_ROW:case P.IN_CELL:case P.IN_SELECT:case P.IN_SELECT_IN_TABLE:case P.IN_TEMPLATE:case P.IN_FRAMESET:case P.AFTER_FRAMESET:{Zh(this,e);break}case P.IN_TABLE_TEXT:{no(this,e);break}case P.AFTER_BODY:{s2(this,e);break}case P.AFTER_AFTER_BODY:case P.AFTER_AFTER_FRAMESET:{a2(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case P.INITIAL:{o2(this,e);break}case P.BEFORE_HEAD:case P.IN_HEAD:case P.IN_HEAD_NO_SCRIPT:case P.AFTER_HEAD:{this._err(e,X.misplacedDoctype);break}case P.IN_TABLE_TEXT:{no(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,X.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?PD(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case P.INITIAL:{Ga(this,e);break}case P.BEFORE_HTML:{c2(this,e);break}case P.BEFORE_HEAD:{u2(this,e);break}case P.IN_HEAD:{Mn(this,e);break}case P.IN_HEAD_NO_SCRIPT:{p2(this,e);break}case P.AFTER_HEAD:{m2(this,e);break}case P.IN_BODY:{Zt(this,e);break}case P.IN_TABLE:{Fs(this,e);break}case P.IN_TABLE_TEXT:{no(this,e);break}case P.IN_CAPTION:{dD(this,e);break}case P.IN_COLUMN_GROUP:{Gh(this,e);break}case P.IN_TABLE_BODY:{tl(this,e);break}case P.IN_ROW:{nl(this,e);break}case P.IN_CELL:{fD(this,e);break}case P.IN_SELECT:{nk(this,e);break}case P.IN_SELECT_IN_TABLE:{OD(this,e);break}case P.IN_TEMPLATE:{vD(this,e);break}case P.AFTER_BODY:{TD(this,e);break}case P.IN_FRAMESET:{kD(this,e);break}case P.AFTER_FRAMESET:{SD(this,e);break}case P.AFTER_AFTER_BODY:{ED(this,e);break}case P.AFTER_AFTER_FRAMESET:{wD(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?RD(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case P.INITIAL:{Ga(this,e);break}case P.BEFORE_HTML:{l2(this,e);break}case P.BEFORE_HEAD:{d2(this,e);break}case P.IN_HEAD:{h2(this,e);break}case P.IN_HEAD_NO_SCRIPT:{f2(this,e);break}case P.AFTER_HEAD:{O2(this,e);break}case P.IN_BODY:{Jc(this,e);break}case P.TEXT:{tD(this,e);break}case P.IN_TABLE:{eo(this,e);break}case P.IN_TABLE_TEXT:{no(this,e);break}case P.IN_CAPTION:{hD(this,e);break}case P.IN_COLUMN_GROUP:{pD(this,e);break}case P.IN_TABLE_BODY:{Wh(this,e);break}case P.IN_ROW:{tk(this,e);break}case P.IN_CELL:{mD(this,e);break}case P.IN_SELECT:{rk(this,e);break}case P.IN_SELECT_IN_TABLE:{gD(this,e);break}case P.IN_TEMPLATE:{bD(this,e);break}case P.AFTER_BODY:{sk(this,e);break}case P.IN_FRAMESET:{yD(this,e);break}case P.AFTER_FRAMESET:{_D(this,e);break}case P.AFTER_AFTER_BODY:{il(this,e);break}}}onEof(e){switch(this.insertionMode){case P.INITIAL:{Ga(this,e);break}case P.BEFORE_HTML:{Wa(this,e);break}case P.BEFORE_HEAD:{Ya(this,e);break}case P.IN_HEAD:{Ha(this,e);break}case P.IN_HEAD_NO_SCRIPT:{Ka(this,e);break}case P.AFTER_HEAD:{Ja(this,e);break}case P.IN_BODY:case P.IN_TABLE:case P.IN_CAPTION:case P.IN_COLUMN_GROUP:case P.IN_TABLE_BODY:case P.IN_ROW:case P.IN_CELL:case P.IN_SELECT:case P.IN_SELECT_IN_TABLE:{HT(this,e);break}case P.TEXT:{nD(this,e);break}case P.IN_TABLE_TEXT:{no(this,e);break}case P.IN_TEMPLATE:{ik(this,e);break}case P.AFTER_BODY:case P.IN_FRAMESET:case P.AFTER_FRAMESET:case P.AFTER_AFTER_BODY:case P.AFTER_AFTER_FRAMESET:{jh(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===E.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case P.IN_HEAD:case P.IN_HEAD_NO_SCRIPT:case P.AFTER_HEAD:case P.TEXT:case P.IN_COLUMN_GROUP:case P.IN_SELECT:case P.IN_SELECT_IN_TABLE:case P.IN_FRAMESET:case P.AFTER_FRAMESET:{this._insertCharacters(e);break}case P.IN_BODY:case P.IN_CAPTION:case P.IN_CELL:case P.IN_TEMPLATE:case P.AFTER_BODY:case P.AFTER_AFTER_BODY:case P.AFTER_AFTER_FRAMESET:{zT(this,e);break}case P.IN_TABLE:case P.IN_TABLE_BODY:case P.IN_ROW:{Vh(this,e);break}case P.IN_TABLE_TEXT:{KT(this,e);break}}}};function JN(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):YT(e,t),n}function e2(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function t2(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,a=i;a!==n;s++,a=i){i=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),c=o&&s>=HN;!o||c?(c&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=n2(e,o),r===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function n2(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function r2(e,t,n){const r=e.treeAdapter.getTagName(t),i=Xs(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===f.TEMPLATE&&s===G.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function i2(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function zh(e,t){for(let n=0;n<YN;n++){const r=JN(e,t);if(!r)break;const i=e2(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=t2(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),a&&r2(e,a,s),i2(e,i,r)}}function Zh(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function s2(e,t){e._appendCommentNode(t,e.openElements.items[0])}function a2(e,t){e._appendCommentNode(t,e.document)}function jh(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function o2(e,t){e._setDocumentType(t);const n=t.forceQuirks?wn.QUIRKS:LN(t);$N(t)||e._err(t,X.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=P.BEFORE_HTML}function Ga(e,t){e._err(t,X.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,wn.QUIRKS),e.insertionMode=P.BEFORE_HTML,e._processToken(t)}function c2(e,t){t.tagID===f.HTML?(e._insertElement(t,G.HTML),e.insertionMode=P.BEFORE_HEAD):Wa(e,t)}function l2(e,t){const n=t.tagID;(n===f.HTML||n===f.HEAD||n===f.BODY||n===f.BR)&&Wa(e,t)}function Wa(e,t){e._insertFakeRootElement(),e.insertionMode=P.BEFORE_HEAD,e._processToken(t)}function u2(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.HEAD:{e._insertElement(t,G.HTML),e.headElement=e.openElements.current,e.insertionMode=P.IN_HEAD;break}default:Ya(e,t)}}function d2(e,t){const n=t.tagID;n===f.HEAD||n===f.BODY||n===f.HTML||n===f.BR?Ya(e,t):e._err(t,X.endTagWithoutMatchingOpenElement)}function Ya(e,t){e._insertFakeElement(M.HEAD,f.HEAD),e.headElement=e.openElements.current,e.insertionMode=P.IN_HEAD,e._processToken(t)}function Mn(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:{e._appendElement(t,G.HTML),t.ackSelfClosing=!0;break}case f.TITLE:{e._switchToTextParsing(t,Tt.RCDATA);break}case f.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Tt.RAWTEXT):(e._insertElement(t,G.HTML),e.insertionMode=P.IN_HEAD_NO_SCRIPT);break}case f.NOFRAMES:case f.STYLE:{e._switchToTextParsing(t,Tt.RAWTEXT);break}case f.SCRIPT:{e._switchToTextParsing(t,Tt.SCRIPT_DATA);break}case f.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=P.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(P.IN_TEMPLATE);break}case f.HEAD:{e._err(t,X.misplacedStartTagForHeadElement);break}default:Ha(e,t)}}function h2(e,t){switch(t.tagID){case f.HEAD:{e.openElements.pop(),e.insertionMode=P.AFTER_HEAD;break}case f.BODY:case f.BR:case f.HTML:{Ha(e,t);break}case f.TEMPLATE:{Vi(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function Vi(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==f.TEMPLATE&&e._err(t,X.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(f.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,X.endTagWithoutMatchingOpenElement)}function Ha(e,t){e.openElements.pop(),e.insertionMode=P.AFTER_HEAD,e._processToken(t)}function p2(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.BASEFONT:case f.BGSOUND:case f.HEAD:case f.LINK:case f.META:case f.NOFRAMES:case f.STYLE:{Mn(e,t);break}case f.NOSCRIPT:{e._err(t,X.nestedNoscriptInHead);break}default:Ka(e,t)}}function f2(e,t){switch(t.tagID){case f.NOSCRIPT:{e.openElements.pop(),e.insertionMode=P.IN_HEAD;break}case f.BR:{Ka(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function Ka(e,t){const n=t.type===we.EOF?X.openElementsLeftAfterEof:X.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=P.IN_HEAD,e._processToken(t)}function m2(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.BODY:{e._insertElement(t,G.HTML),e.framesetOk=!1,e.insertionMode=P.IN_BODY;break}case f.FRAMESET:{e._insertElement(t,G.HTML),e.insertionMode=P.IN_FRAMESET;break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{e._err(t,X.abandonedHeadElementChild),e.openElements.push(e.headElement,f.HEAD),Mn(e,t),e.openElements.remove(e.headElement);break}case f.HEAD:{e._err(t,X.misplacedStartTagForHeadElement);break}default:Ja(e,t)}}function O2(e,t){switch(t.tagID){case f.BODY:case f.HTML:case f.BR:{Ja(e,t);break}case f.TEMPLATE:{Vi(e,t);break}default:e._err(t,X.endTagWithoutMatchingOpenElement)}}function Ja(e,t){e._insertFakeElement(M.BODY,f.BODY),e.insertionMode=P.IN_BODY,Kc(e,t)}function Kc(e,t){switch(t.type){case we.CHARACTER:{ZT(e,t);break}case we.WHITESPACE_CHARACTER:{zT(e,t);break}case we.COMMENT:{Zh(e,t);break}case we.START_TAG:{Zt(e,t);break}case we.END_TAG:{Jc(e,t);break}case we.EOF:{HT(e,t);break}}}function zT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function ZT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function g2(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function v2(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function b2(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_FRAMESET)}function T2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML)}function k2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&Xh.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,G.HTML)}function y2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function S2(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML),n||(e.formElement=e.openElements.current))}function _2(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===f.LI&&i===f.LI||(n===f.DD||n===f.DT)&&(i===f.DD||i===f.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==f.ADDRESS&&i!==f.DIV&&i!==f.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML)}function E2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML),e.tokenizer.state=Tt.PLAINTEXT}function w2(e,t){e.openElements.hasInScope(f.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML),e.framesetOk=!1}function x2(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(M.A);n&&(zh(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function C2(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function P2(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(f.NOBR)&&(zh(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,G.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function R2(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function A2(e,t){e.treeAdapter.getDocumentMode(e.document)!==wn.QUIRKS&&e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._insertElement(t,G.HTML),e.framesetOk=!1,e.insertionMode=P.IN_TABLE}function jT(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,G.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function VT(e){const t=ET(e,ji.TYPE);return t!=null&&t.toLowerCase()===WN}function I2(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,G.HTML),VT(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Q2(e,t){e._appendElement(t,G.HTML),t.ackSelfClosing=!0}function N2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._appendElement(t,G.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function D2(e,t){t.tagName=M.IMG,t.tagID=f.IMG,jT(e,t)}function $2(e,t){e._insertElement(t,G.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Tt.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=P.TEXT}function L2(e,t){e.openElements.hasInButtonScope(f.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Tt.RAWTEXT)}function M2(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Tt.RAWTEXT)}function GT(e,t){e._switchToTextParsing(t,Tt.RAWTEXT)}function U2(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===P.IN_TABLE||e.insertionMode===P.IN_CAPTION||e.insertionMode===P.IN_TABLE_BODY||e.insertionMode===P.IN_ROW||e.insertionMode===P.IN_CELL?P.IN_SELECT_IN_TABLE:P.IN_SELECT}function q2(e,t){e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML)}function X2(e,t){e.openElements.hasInScope(f.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,G.HTML)}function F2(e,t){e.openElements.hasInScope(f.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(f.RTC),e._insertElement(t,G.HTML)}function B2(e,t){e._reconstructActiveFormattingElements(),UT(t),Bh(t),t.selfClosing?e._appendElement(t,G.MATHML):e._insertElement(t,G.MATHML),t.ackSelfClosing=!0}function z2(e,t){e._reconstructActiveFormattingElements(),qT(t),Bh(t),t.selfClosing?e._appendElement(t,G.SVG):e._insertElement(t,G.SVG),t.ackSelfClosing=!0}function WT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,G.HTML)}function Zt(e,t){switch(t.tagID){case f.I:case f.S:case f.B:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.SMALL:case f.STRIKE:case f.STRONG:{C2(e,t);break}case f.A:{x2(e,t);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{k2(e,t);break}case f.P:case f.DL:case f.OL:case f.UL:case f.DIV:case f.DIR:case f.NAV:case f.MAIN:case f.MENU:case f.ASIDE:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.DETAILS:case f.ADDRESS:case f.ARTICLE:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{T2(e,t);break}case f.LI:case f.DD:case f.DT:{_2(e,t);break}case f.BR:case f.IMG:case f.WBR:case f.AREA:case f.EMBED:case f.KEYGEN:{jT(e,t);break}case f.HR:{N2(e,t);break}case f.RB:case f.RTC:{X2(e,t);break}case f.RT:case f.RP:{F2(e,t);break}case f.PRE:case f.LISTING:{y2(e,t);break}case f.XMP:{L2(e,t);break}case f.SVG:{z2(e,t);break}case f.HTML:{g2(e,t);break}case f.BASE:case f.LINK:case f.META:case f.STYLE:case f.TITLE:case f.SCRIPT:case f.BGSOUND:case f.BASEFONT:case f.TEMPLATE:{Mn(e,t);break}case f.BODY:{v2(e,t);break}case f.FORM:{S2(e,t);break}case f.NOBR:{P2(e,t);break}case f.MATH:{B2(e,t);break}case f.TABLE:{A2(e,t);break}case f.INPUT:{I2(e,t);break}case f.PARAM:case f.TRACK:case f.SOURCE:{Q2(e,t);break}case f.IMAGE:{D2(e,t);break}case f.BUTTON:{w2(e,t);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{R2(e,t);break}case f.IFRAME:{M2(e,t);break}case f.SELECT:{U2(e,t);break}case f.OPTION:case f.OPTGROUP:{q2(e,t);break}case f.NOEMBED:case f.NOFRAMES:{GT(e,t);break}case f.FRAMESET:{b2(e,t);break}case f.TEXTAREA:{$2(e,t);break}case f.NOSCRIPT:{e.options.scriptingEnabled?GT(e,t):WT(e,t);break}case f.PLAINTEXT:{E2(e,t);break}case f.COL:case f.TH:case f.TD:case f.TR:case f.HEAD:case f.FRAME:case f.TBODY:case f.TFOOT:case f.THEAD:case f.CAPTION:case f.COLGROUP:break;default:WT(e,t)}}function Z2(e,t){if(e.openElements.hasInScope(f.BODY)&&(e.insertionMode=P.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function j2(e,t){e.openElements.hasInScope(f.BODY)&&(e.insertionMode=P.AFTER_BODY,sk(e,t))}function V2(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function G2(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(f.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(f.FORM):n&&e.openElements.remove(n))}function W2(e){e.openElements.hasInButtonScope(f.P)||e._insertFakeElement(M.P,f.P),e._closePElement()}function Y2(e){e.openElements.hasInListItemScope(f.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(f.LI),e.openElements.popUntilTagNamePopped(f.LI))}function H2(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function K2(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function J2(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function eD(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(M.BR,f.BR),e.openElements.pop(),e.framesetOk=!1}function YT(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==f.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,a))break}}function Jc(e,t){switch(t.tagID){case f.A:case f.B:case f.I:case f.S:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.NOBR:case f.SMALL:case f.STRIKE:case f.STRONG:{zh(e,t);break}case f.P:{W2(e);break}case f.DL:case f.UL:case f.OL:case f.DIR:case f.DIV:case f.NAV:case f.PRE:case f.MAIN:case f.MENU:case f.ASIDE:case f.BUTTON:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.ADDRESS:case f.ARTICLE:case f.DETAILS:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.LISTING:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{V2(e,t);break}case f.LI:{Y2(e);break}case f.DD:case f.DT:{H2(e,t);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{K2(e);break}case f.BR:{eD(e);break}case f.BODY:{Z2(e,t);break}case f.HTML:{j2(e,t);break}case f.FORM:{G2(e);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{J2(e,t);break}case f.TEMPLATE:{Vi(e,t);break}default:YT(e,t)}}function HT(e,t){e.tmplInsertionModeStack.length>0?ik(e,t):jh(e,t)}function tD(e,t){var n;t.tagID===f.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function nD(e,t){e._err(t,X.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Vh(e,t){if(e.openElements.currentTagId!==void 0&&XT.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=P.IN_TABLE_TEXT,t.type){case we.CHARACTER:{JT(e,t);break}case we.WHITESPACE_CHARACTER:{KT(e,t);break}}else to(e,t)}function rD(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_CAPTION}function iD(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_COLUMN_GROUP}function sD(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M.COLGROUP,f.COLGROUP),e.insertionMode=P.IN_COLUMN_GROUP,Gh(e,t)}function aD(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_TABLE_BODY}function oD(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M.TBODY,f.TBODY),e.insertionMode=P.IN_TABLE_BODY,tl(e,t)}function cD(e,t){e.openElements.hasInTableScope(f.TABLE)&&(e.openElements.popUntilTagNamePopped(f.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function lD(e,t){VT(t)?e._appendElement(t,G.HTML):to(e,t),t.ackSelfClosing=!0}function uD(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,G.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Fs(e,t){switch(t.tagID){case f.TD:case f.TH:case f.TR:{oD(e,t);break}case f.STYLE:case f.SCRIPT:case f.TEMPLATE:{Mn(e,t);break}case f.COL:{sD(e,t);break}case f.FORM:{uD(e,t);break}case f.TABLE:{cD(e,t);break}case f.TBODY:case f.TFOOT:case f.THEAD:{aD(e,t);break}case f.INPUT:{lD(e,t);break}case f.CAPTION:{rD(e,t);break}case f.COLGROUP:{iD(e,t);break}default:to(e,t)}}function eo(e,t){switch(t.tagID){case f.TABLE:{e.openElements.hasInTableScope(f.TABLE)&&(e.openElements.popUntilTagNamePopped(f.TABLE),e._resetInsertionMode());break}case f.TEMPLATE:{Vi(e,t);break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:to(e,t)}}function to(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Kc(e,t),e.fosterParentingEnabled=n}function KT(e,t){e.pendingCharacterTokens.push(t)}function JT(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function no(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)to(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ek=new Set([f.CAPTION,f.COL,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]);function dD(e,t){const n=t.tagID;ek.has(n)?e.openElements.hasInTableScope(f.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=P.IN_TABLE,Fs(e,t)):Zt(e,t)}function hD(e,t){const n=t.tagID;switch(n){case f.CAPTION:case f.TABLE:{e.openElements.hasInTableScope(f.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(f.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=P.IN_TABLE,n===f.TABLE&&eo(e,t));break}case f.BODY:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:Jc(e,t)}}function Gh(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.COL:{e._appendElement(t,G.HTML),t.ackSelfClosing=!0;break}case f.TEMPLATE:{Mn(e,t);break}default:el(e,t)}}function pD(e,t){switch(t.tagID){case f.COLGROUP:{e.openElements.currentTagId===f.COLGROUP&&(e.openElements.pop(),e.insertionMode=P.IN_TABLE);break}case f.TEMPLATE:{Vi(e,t);break}case f.COL:break;default:el(e,t)}}function el(e,t){e.openElements.currentTagId===f.COLGROUP&&(e.openElements.pop(),e.insertionMode=P.IN_TABLE,e._processToken(t))}function tl(e,t){switch(t.tagID){case f.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_ROW;break}case f.TH:case f.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(M.TR,f.TR),e.insertionMode=P.IN_ROW,nl(e,t);break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE,Fs(e,t));break}default:Fs(e,t)}}function Wh(e,t){const n=t.tagID;switch(t.tagID){case f.TBODY:case f.TFOOT:case f.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE);break}case f.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE,eo(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:case f.TR:break;default:eo(e,t)}}function nl(e,t){switch(t.tagID){case f.TH:case f.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,G.HTML),e.insertionMode=P.IN_CELL,e.activeFormattingElements.insertMarker();break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE_BODY,tl(e,t));break}default:Fs(e,t)}}function tk(e,t){switch(t.tagID){case f.TR:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE_BODY);break}case f.TABLE:{e.openElements.hasInTableScope(f.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE_BODY,Wh(e,t));break}case f.TBODY:case f.TFOOT:case f.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(f.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=P.IN_TABLE_BODY,Wh(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:break;default:eo(e,t)}}function fD(e,t){const n=t.tagID;ek.has(n)?(e.openElements.hasInTableScope(f.TD)||e.openElements.hasInTableScope(f.TH))&&(e._closeTableCell(),nl(e,t)):Zt(e,t)}function mD(e,t){const n=t.tagID;switch(n){case f.TD:case f.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=P.IN_ROW);break}case f.TABLE:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),tk(e,t));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:break;default:Jc(e,t)}}function nk(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.OPTION:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e._insertElement(t,G.HTML);break}case f.OPTGROUP:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop(),e._insertElement(t,G.HTML);break}case f.HR:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop(),e._appendElement(t,G.HTML),t.ackSelfClosing=!0;break}case f.INPUT:case f.KEYGEN:case f.TEXTAREA:case f.SELECT:{e.openElements.hasInSelectScope(f.SELECT)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),t.tagID!==f.SELECT&&e._processStartTag(t));break}case f.SCRIPT:case f.TEMPLATE:{Mn(e,t);break}}}function rk(e,t){switch(t.tagID){case f.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===f.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===f.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===f.OPTGROUP&&e.openElements.pop();break}case f.OPTION:{e.openElements.currentTagId===f.OPTION&&e.openElements.pop();break}case f.SELECT:{e.openElements.hasInSelectScope(f.SELECT)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode());break}case f.TEMPLATE:{Vi(e,t);break}}}function OD(e,t){const n=t.tagID;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),e._processStartTag(t)):nk(e,t)}function gD(e,t){const n=t.tagID;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(f.SELECT),e._resetInsertionMode(),e.onEndTag(t)):rk(e,t)}function vD(e,t){switch(t.tagID){case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{Mn(e,t);break}case f.CAPTION:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{e.tmplInsertionModeStack[0]=P.IN_TABLE,e.insertionMode=P.IN_TABLE,Fs(e,t);break}case f.COL:{e.tmplInsertionModeStack[0]=P.IN_COLUMN_GROUP,e.insertionMode=P.IN_COLUMN_GROUP,Gh(e,t);break}case f.TR:{e.tmplInsertionModeStack[0]=P.IN_TABLE_BODY,e.insertionMode=P.IN_TABLE_BODY,tl(e,t);break}case f.TD:case f.TH:{e.tmplInsertionModeStack[0]=P.IN_ROW,e.insertionMode=P.IN_ROW,nl(e,t);break}default:e.tmplInsertionModeStack[0]=P.IN_BODY,e.insertionMode=P.IN_BODY,Zt(e,t)}}function bD(e,t){t.tagID===f.TEMPLATE&&Vi(e,t)}function ik(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(f.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):jh(e,t)}function TD(e,t){t.tagID===f.HTML?Zt(e,t):rl(e,t)}function sk(e,t){var n;if(t.tagID===f.HTML){if(e.fragmentContext||(e.insertionMode=P.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===f.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else rl(e,t)}function rl(e,t){e.insertionMode=P.IN_BODY,Kc(e,t)}function kD(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.FRAMESET:{e._insertElement(t,G.HTML);break}case f.FRAME:{e._appendElement(t,G.HTML),t.ackSelfClosing=!0;break}case f.NOFRAMES:{Mn(e,t);break}}}function yD(e,t){t.tagID===f.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==f.FRAMESET&&(e.insertionMode=P.AFTER_FRAMESET))}function SD(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.NOFRAMES:{Mn(e,t);break}}}function _D(e,t){t.tagID===f.HTML&&(e.insertionMode=P.AFTER_AFTER_FRAMESET)}function ED(e,t){t.tagID===f.HTML?Zt(e,t):il(e,t)}function il(e,t){e.insertionMode=P.IN_BODY,Kc(e,t)}function wD(e,t){switch(t.tagID){case f.HTML:{Zt(e,t);break}case f.NOFRAMES:{Mn(e,t);break}}}function xD(e,t){t.chars=dt,e._insertCharacters(t)}function CD(e,t){e._insertCharacters(t),e.framesetOk=!1}function ak(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==G.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function PD(e,t){if(zN(t))ak(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===G.MATHML?UT(t):r===G.SVG&&(ZN(t),qT(t)),Bh(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function RD(e,t){if(t.tagID===f.P||t.tagID===f.BR){ak(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===G.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}M.AREA,M.BASE,M.BASEFONT,M.BGSOUND,M.BR,M.COL,M.EMBED,M.FRAME,M.HR,M.IMG,M.INPUT,M.KEYGEN,M.LINK,M.META,M.PARAM,M.SOURCE,M.TRACK,M.WBR;const sl=function(e){if(e==null)return ND;if(typeof e=="function")return al(e);if(typeof e=="object")return Array.isArray(e)?AD(e):ID(e);if(typeof e=="string")return QD(e);throw new Error("Expected function, string, or object as test")};function AD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=sl(e[n]);return al(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function ID(e){const t=e;return al(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function QD(e){return al(t);function t(n){return n&&n.type===e}}function al(e){return t;function t(n,r,i){return!!(DD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ND(){return!0}function DD(e){return e!==null&&typeof e=="object"&&"type"in e}const ok=[],ro=!0,Yh=!1,Hh="skip";function ck(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=sl(i),a=r?-1:1;o(e,void 0,[])();function o(c,l,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=ok,O,m,b;if((!t||s(c,l,u[u.length-1]||void 0))&&(p=$D(n(c,u)),p[0]===Yh))return p;if("children"in c&&c.children){const v=c;if(v.children&&p[0]!==Hh)for(m=(r?v.children.length:-1)+a,b=u.concat(v);m>-1&&m<v.children.length;){const k=v.children[m];if(O=o(k,m,b)(),O[0]===Yh)return O;m=typeof O[1]=="number"?O[1]:m+a}}return p}}}function $D(e){return Array.isArray(e)?e:typeof e=="number"?[ro,e]:e==null?ok:[e]}function Bs(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),ck(e,s,o,i);function o(c,l){const u=l[l.length-1],d=u?u.children.indexOf(c):void 0;return a(c,d,u)}}const LD=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,MD=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),lk={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function uk(e,t){const n=GD(e),r=TT("type",{handlers:{root:UD,element:qD,text:XD,comment:hk,doctype:FD,raw:zD},unknown:ZD}),i={parser:n?new BT(lk):BT.getFragmentParser(void 0,lk),handle(o){r(o,i)},stitches:!1,options:t||{}};r(e,i),zs(i,tr());const s=n?i.parser.document:i.parser.getFragment(),a=BQ(s,{file:i.options.file});return i.stitches&&Bs(a,"comment",function(o,c,l){const u=o;if(u.value.stitch&&l&&c!==void 0){const d=l.children;return d[c]=u.value.stitch,c}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function dk(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function UD(e,t){dk(e.children,t)}function qD(e,t){jD(e,t),dk(e.children,t),VD(e,t)}function XD(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:we.CHARACTER,chars:e.value,location:io(e)};zs(t,tr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function FD(e,t){const n={type:we.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:io(e)};zs(t,tr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function BD(e,t){t.stitches=!0;const n=WD(e);if("children"in e&&"children"in n){const r=uk({type:"root",children:e.children},t.options);n.children=r.children}hk({type:"comment",value:{stitch:n}},t)}function hk(e,t){const n=e.value,r={type:we.COMMENT,data:n,location:io(e)};zs(t,tr(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function zD(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,pk(t,tr(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(LD,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function ZD(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))BD(n,t);else{let r="";throw MD.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zs(e,t){pk(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Tt.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function pk(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function jD(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Tt.PLAINTEXT)return;zs(t,tr(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Zi.html;i===Zi.html&&n==="svg"&&(i=Zi.svg);const s=GQ({...e,children:[]},{space:i===Zi.svg?"svg":"html"}),a={type:we.START_TAG,tagName:n,tagID:Xs(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:io(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function VD(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&nN.includes(n)||t.parser.tokenizer.state===Tt.PLAINTEXT)return;zs(t,Vc(e));const r={type:we.END_TAG,tagName:n,tagID:Xs(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:io(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Tt.RCDATA||t.parser.tokenizer.state===Tt.RAWTEXT||t.parser.tokenizer.state===Tt.SCRIPT_DATA)&&(t.parser.tokenizer.state=Tt.DATA)}function GD(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function io(e){const t=tr(e)||{line:void 0,column:void 0,offset:void 0},n=Vc(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function WD(e){return"children"in e?Fi({...e,children:[]}):Fi(e)}function YD(e){return function(t,n){return uk(t,{...e,file:n})}}function HD({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:n=[],allowDataImages:r=!1,allowedProtocols:i=[],blockedImageClass:s="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:a="text-gray-500"}){const o=t.length&&!t.every(l=>l==="*"),c=n.length&&!n.every(l=>l==="*");if(!e&&(o||c))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return l=>{const u=t$(e,t,n,r,i,s,a);Bs(l,u)}}function fk(e,t){if(typeof e!="string")return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))try{return new URL(e,"http://example.com")}catch{return null}return null}}function KD(e){return typeof e!="string"?!1:e.startsWith("/")||e.startsWith("./")||e.startsWith("../")}const JD=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:","blob:"]),e$=new Set(["javascript:","data:","file:","vbscript:"]);function mk(e,t,n,r=!1,i=!1,s=[]){if(!e)return null;if(typeof e=="string"&&e.startsWith("#")&&!i)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if(typeof e=="string"&&e.startsWith("data:"))return i&&r&&e.startsWith("data:image/")?e:null;if(typeof e=="string"&&e.startsWith("blob:")){try{if(new URL(e).protocol==="blob:"&&e.length>5){const c=e.substring(5);if(c&&c.length>0&&c!=="invalid")return e}}catch{return null}return null}const a=fk(e,n);if(!a||e$.has(a.protocol)||!(JD.has(a.protocol)||s.includes(a.protocol)||s.includes("*")))return null;if(a.protocol==="mailto:"||!a.protocol.match(/^https?:$/))return a.href;const o=KD(e);return a&&t.some(c=>{const l=fk(c,n);return!l||l.origin!==a.origin?!1:a.href.startsWith(l.href)})?o?a.pathname+a.search+a.hash:a.href:t.includes("*")?a.protocol!=="https:"&&a.protocol!=="http:"?null:o?a.pathname+a.search+a.hash:a.href:null}const Kh=Symbol("node-seen"),t$=(e,t,n,r,i,s,a)=>{const o=(c,l,u)=>{if(c.type!=="element"||c[Kh])return ro;if(c.tagName==="a"){const d=mk(c.properties.href,t,e,!1,!1,i);return d===null?(c[Kh]=!0,Bs(c,o),u&&typeof l=="number"&&(u.children[l]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(c.properties.href),class:a},children:[...c.children,{type:"text",value:" [blocked]"}]}),Hh):(c.properties.href=d,c.properties.target="_blank",c.properties.rel="noopener noreferrer",ro)}if(c.tagName==="img"){const d=mk(c.properties.src,n,e,r,!0,i);return d===null?(c[Kh]=!0,Bs(c,o),u&&typeof l=="number"&&(u.children[l]={type:"element",tagName:"span",properties:{class:s},children:[{type:"text",value:"[Image blocked: "+String(c.properties.alt||"No description")+"]"}]}),Hh):(c.properties.src=d,ro)}return ro};return o},Ir={eof:null,asterisk:42,underscore:95,tilde:126},Zs={attentionSideAfter:2,characterGroupPunctuation:2,characterGroupWhitespace:1},rr={data:"data",characterEscape:"characterEscape",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",strong:"strong",strongSequence:"strongSequence",strongText:"strongText"},Wt=hi(/[A-Za-z]/),jt=hi(/[\dA-Za-z]/),n$=hi(/[#-'*+\--9=?A-Z^-~]/);function ol(e){return e!==null&&(e<32||e===127)}const Jh=hi(/\d/),r$=hi(/[\dA-Fa-f]/),i$=hi(/[!-/:-@[-`{-~]/);function pe(e){return e!==null&&e<-2}function He(e){return e!==null&&(e<0||e===32)}function Pe(e){return e===-2||e===-1||e===32}const cl=hi(new RegExp("\\p{P}|\\p{S}","u")),Gi=hi(/\s/);function hi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function s$(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function a$(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function o$(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||e===129736||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function c$(e){return s$(e)?"ambiguous":a$(e)?"fullwidth":e===8361||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||e===162||e===163||e===165||e===166||e===172||e===175||e>=10214&&e<=10221||e===10629||e===10630?"narrow":o$(e)?"wide":"neutral"}function l$(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function u$(e){return l$(e),c$(e)}var d$=Object.defineProperty,h$=(e,t,n)=>t in e?d$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p$=(e,t,n)=>h$(e,t+"",n);function f$(e){return new RegExp("^\\p{Emoji_Presentation}","u").test(String.fromCodePoint(e))}function m$(e){if(!e||e<4352)return!1;switch(u$(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!f$(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999?null:!1;case"neutral":return new RegExp("^\\p{sc=Hangul}","u").test(String.fromCodePoint(e))}}function O$(e,t){return t!==65025||!e||e<8216?!1:e===8216||e===8217||e===8220||e===8221}function g$(e){return e!==null&&e>=65024&&e<=65038}var v$=Ok(new RegExp("\\p{P}|\\p{S}","u")),b$=Ok(/\s/);function Ok(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCodePoint(n))}}var gn;(e=>{e.spaceOrPunctuation=3,e.cjk=4096,e.cjkPunctuation=4098,e.ivs=8192,e.cjkOrIvs=12288,e.nonEmojiGeneralUseVS=16384,e.variationSelector=24576,e.ivsToCjkRightShift=1})(gn||(gn={}));function js(e){if(e===Ir.eof||He(e)||b$(e))return Zs.characterGroupWhitespace;let t=0;if(e>=4352){if(g$(e))return gn.nonEmojiGeneralUseVS;switch(m$(e)){case null:return gn.ivs;case!0:t|=gn.cjk;break}}return v$(e)&&(t|=Zs.characterGroupPunctuation),t}function gk(e,t,n){if(!S$(e))return e;const r=t(),i=js(r);return!r||so(i)?e:O$(r,n)?gn.cjkPunctuation:T$(i)}function T$(e){return e&~gn.ivs}function so(e){return!!(e&Zs.characterGroupWhitespace)}function ll(e){return(e&gn.cjkPunctuation)===Zs.characterGroupPunctuation}function ep(e){return!!(e&gn.cjk)}function k$(e){return e===gn.ivs}function y$(e){return!!(e&gn.cjkOrIvs)}function S$(e){return e===gn.nonEmojiGeneralUseVS}function vk(e){return!!(e&gn.spaceOrPunctuation)}function bk(e){return!!(e&&e>=55296&&e<=56319)}function Tk(e){return!!(e&&e>=56320&&e<=57343)}function kk(e,t,n){if(t._bufferIndex<2)return e;const r=n({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return r&&r>=65536?r:e}function _$(e,t,n){const r=e>=65536?2:1;if(t._bufferIndex<1+r)return null;const i=t._bufferIndex-r-2,s=n({start:{...t,_bufferIndex:i>=0?i:0},end:{...t,_bufferIndex:t._bufferIndex-r}}),a=s.charCodeAt(s.length-1);if(Number.isNaN(a))return null;if(s.length<2||a<56320||57343<a)return a;const o=s.codePointAt(0);return o&&o>=65536?o:a}var yk=class{constructor(e,t,n){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=n,p$(this,"cachedValue")}value(){return this.cachedValue===void 0&&(this.cachedValue=_$(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function Sk(e,t,n){const r=n({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return r&&r>=65536?r:e}function qt(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Xt(e,t){return e.length>0?(qt(e,e.length,0,t),e):t}function Vs(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}var tp={name:"attention",resolveAll:E$,tokenize:w$};function E$(e,t){let n=-1,r,i,s,a,o,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};_k(d,-c),_k(h,c),a={type:c>1?rr.strongSequence:rr.emphasisSequence,start:d,end:{...e[r][1].end}},o={type:c>1?rr.strongSequence:rr.emphasisSequence,start:{...e[n][1].start},end:h},s={type:c>1?rr.strongText:rr.emphasisText,start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?rr.strong:rr.emphasis,start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xt(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xt(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),t.parser.constructs.insideSpan.null,l=Xt(l,Vs(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xt(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Xt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,qt(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function w$(e,t){const n=this.parser.constructs.attentionMarkers.null,{now:r,sliceSerialize:i,previous:s}=this,a=Tk(s)?kk(s,r(),i):s,o=js(a),c=new yk(a,r(),i),l=gk(o,c.value.bind(c),a);let u;return d;function d(p){return u=p,e.enter("attentionSequence"),h(p)}function h(p){if(p===u)return e.consume(p),h;const O=e.exit("attentionSequence"),m=bk(p)?Sk(p,r(),i):p,b=js(m),v=ll(l),k=v||so(l),y=ll(b),T=y||so(b),_=y$(l),S=!T||y&&(k||_)||n.includes(p),C=!k||v&&(T||ep(b))||n.includes(a);return O._open=!!(u===Ir.asterisk?S:S&&(vk(l)||!C)),O._close=!!(u===Ir.asterisk?C:C&&(vk(b)||!S)),t(p)}}function _k(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function x$(){return{text:{[Ir.asterisk]:tp,[Ir.underscore]:tp},insideSpan:{null:[tp]}}}function C$(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push(x$())}function P$(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:r};return t==null&&(t=!0),{text:{[Ir.tilde]:n},insideSpan:{null:[n]},attentionMarkers:{null:[Ir.tilde]}};function r(s,a){let o=-1;for(;++o<s.length;)if(s[o][0]==="enter"&&s[o][1].type==="strikethroughSequenceTemporary"&&s[o][1]._close){let c=o;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[o][1].end.offset-s[o][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[o][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const l={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[o][1].end)},u={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[o][1].start)},d=[["enter",l,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",u,a]],h=a.parser.constructs.insideSpan.null;h&&qt(d,d.length,0,Vs(h,s.slice(c+1,o),a)),qt(d,d.length,0,[["exit",u,a],["enter",s[o][1],a],["exit",s[o][1],a],["exit",l,a]]),qt(s,c-1,o-c+3,d),o=c+d.length-2;break}}for(o=-1;++o<s.length;)s[o][1].type==="strikethroughSequenceTemporary"&&(s[o][1].type=rr.data);return s}function i(s,a,o){const{now:c,sliceSerialize:l,previous:u}=this,d=Tk(u)?kk(u,c(),l):u,h=js(d),p=new yk(d,c(),l),O=gk(h,p.value.bind(p),d),m=this.events;let b=0;return v;function v(y){return d===Ir.tilde&&m[m.length-1][1].type!==rr.characterEscape?o(y):(s.enter("strikethroughSequenceTemporary"),k(y))}function k(y){const T=js(d);if(y===Ir.tilde)return b>1?o(y):(s.consume(y),b++,k);if(b<2&&!t)return o(y);const _=s.exit("strikethroughSequenceTemporary"),S=bk(y)?Sk(y,c(),l):y,C=js(S),N=ll(O)||so(O),$=ll(C)||so(C),x=ep(O)||k$(T);return _._open=!$||C===Zs.attentionSideAfter&&(N||x),_._close=!N||T===Zs.attentionSideAfter&&($||ep(C)),a(y)}}}function R$(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(P$(e))}function Ek(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function A$(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function I$(e,t,n){const r=sl((n||{}).ignore||[]),i=Q$(t);let s=-1;for(;++s<i.length;)ck(e,"text",a);function a(c,l){let u=-1,d;for(;++u<l.length;){const h=l[u],p=d?d.children:void 0;if(r(h,p?p.indexOf(h):void 0,d))return;d=h}if(d)return o(c,l)}function o(c,l){const u=l[l.length-1],d=i[s][0],h=i[s][1];let p=0;const O=u.children.indexOf(c);let m=!1,b=[];d.lastIndex=0;let v=d.exec(c.value);for(;v;){const k=v.index,y={index:v.index,input:v.input,stack:[...l,c]};let T=h(...v,y);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?d.lastIndex=k+1:(p!==k&&b.push({type:"text",value:c.value.slice(p,k)}),Array.isArray(T)?b.push(...T):T&&b.push(T),p=k+v[0].length,m=!0),!d.global)break;v=d.exec(c.value)}return m?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),u.children.splice(O,1,...b)):b=[c],O+b.length}}function Q$(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([N$(i[0]),D$(i[1])])}return t}function N$(e){return typeof e=="string"?new RegExp(A$(e),"g"):e}function D$(e){return typeof e=="function"?e:function(){return e}}const np="phrasing",rp=["autolink","link","image","label"];function $$(){return{transforms:[B$],enter:{literalAutolink:M$,literalAutolinkEmail:ip,literalAutolinkHttp:ip,literalAutolinkWww:ip},exit:{literalAutolink:F$,literalAutolinkEmail:X$,literalAutolinkHttp:U$,literalAutolinkWww:q$}}}function L$(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:np,notInConstruct:rp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:np,notInConstruct:rp},{character:":",before:"[ps]",after:"\\/",inConstruct:np,notInConstruct:rp}]}}function M$(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ip(e){this.config.enter.autolinkProtocol.call(this,e)}function U$(e){this.config.exit.autolinkProtocol.call(this,e)}function q$(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function X$(e){this.config.exit.autolinkEmail.call(this,e)}function F$(e){this.exit(e)}function B$(e){I$(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,z$],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Z$]],{ignore:["link","linkReference"]})}function z$(e,t,n,r,i){let s="";if(!wk(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!j$(n)))return!1;const a=V$(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function Z$(e,t,n,r){return!wk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function j$(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function V$(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Ek(e,"(");let s=Ek(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function wk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Gi(n)||cl(n))&&(!t||n!==47)}function Un(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}xk.peek=nL;function G$(){this.buffer()}function W$(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Y$(){this.buffer()}function H$(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function K$(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Un(this.sliceSerialize(e)).toLowerCase(),n.label=t}function J$(e){this.exit(e)}function eL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Un(this.sliceSerialize(e)).toLowerCase(),n.label=t}function tL(e){this.exit(e)}function nL(){return"["}function xk(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function rL(){return{enter:{gfmFootnoteCallString:G$,gfmFootnoteCall:W$,gfmFootnoteDefinitionLabelString:Y$,gfmFootnoteDefinition:H$},exit:{gfmFootnoteCallString:K$,gfmFootnoteCall:J$,gfmFootnoteDefinitionLabelString:eL,gfmFootnoteDefinition:tL}}}function iL(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:xk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let c=o.move("[^");const l=s.enter("footnoteDefinition"),u=s.enter("label");return c+=o.move(s.safe(s.associationId(r),{before:c,after:"]"})),u(),c+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),c+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?Ck:sL))),l(),c}}function sL(e,t,n){return t===0?e:Ck(e,t,n)}function Ck(e,t,n){return(n?"":"    ")+e}const aL=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Pk.peek=dL;function oL(){return{canContainEols:["delete"],enter:{strikethrough:lL},exit:{strikethrough:uL}}}function cL(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:aL}],handlers:{delete:Pk}}}function lL(e){this.enter({type:"delete",children:[]},e)}function uL(e){this.exit(e)}function Pk(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function dL(){return"~"}function hL(e){return e.length}function pL(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||hL,s=[],a=[],o=[],c=[];let l=0,u=-1;for(;++u<e.length;){const m=[],b=[];let v=-1;for(e[u].length>l&&(l=e[u].length);++v<e[u].length;){const k=fL(e[u][v]);if(n.alignDelimiters!==!1){const y=i(k);b[v]=y,(c[v]===void 0||y>c[v])&&(c[v]=y)}m.push(k)}a[u]=m,o[u]=b}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<l;)s[d]=Rk(r[d]);else{const m=Rk(r);for(;++d<l;)s[d]=m}d=-1;const h=[],p=[];for(;++d<l;){const m=s[d];let b="",v="";m===99?(b=":",v=":"):m===108?b=":":m===114&&(v=":");let k=n.alignDelimiters===!1?1:Math.max(1,c[d]-b.length-v.length);const y=b+"-".repeat(k)+v;n.alignDelimiters!==!1&&(k=b.length+k+v.length,k>c[d]&&(c[d]=k),p[d]=k),h[d]=y}a.splice(1,0,h),o.splice(1,0,p),u=-1;const O=[];for(;++u<a.length;){const m=a[u],b=o[u];d=-1;const v=[];for(;++d<l;){const k=m[d]||"";let y="",T="";if(n.alignDelimiters!==!1){const _=c[d]-(b[d]||0),S=s[d];S===114?y=" ".repeat(_):S===99?_%2?(y=" ".repeat(_/2+.5),T=" ".repeat(_/2-.5)):(y=" ".repeat(_/2),T=y):T=" ".repeat(_)}n.delimiterStart!==!1&&!d&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||d)&&v.push(" "),n.alignDelimiters!==!1&&v.push(y),v.push(k),n.alignDelimiters!==!1&&v.push(T),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||d!==l-1)&&v.push("|")}O.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return O.join(`
`)}function fL(e){return e==null?"":String(e)}function Rk(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function mL(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),OL);return i(),a}function OL(e,t,n){return">"+(n?"":" ")+e}function gL(e,t){return Ak(e,t.inConstruct,!0)&&!Ak(e,t.notInConstruct,!1)}function Ak(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Ik(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&gL(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function vL(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function bL(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function TL(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function kL(e,t,n,r){const i=TL(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(bL(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,yL);return d(),h}const o=n.createTracker(r),c=i.repeat(Math.max(vL(s,i)+1,3)),l=n.enter("codeFenced");let u=o.move(c);if(e.lang){const d=n.enter(`codeFencedLang${a}`);u+=o.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...o.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);u+=o.move(" "),u+=o.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...o.current()})),d()}return u+=o.move(`
`),s&&(u+=o.move(s+`
`)),u+=o.move(c),l(),u}function yL(e,t,n){return(n?"":"    ")+e}function sp(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function SL(e,t,n,r){const i=sp(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const c=n.createTracker(r);let l=c.move("[");return l+=c.move(n.safe(n.associationId(e),{before:l,after:"]",...c.current()})),l+=c.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(o=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":`
`,...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),l+=c.move(" "+i),l+=c.move(n.safe(e.title,{before:l,after:i,...c.current()})),l+=c.move(i),o()),a(),l}function _L(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ao(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Gs(e){if(e===null||He(e)||Gi(e))return 1;if(cl(e))return 2}function ul(e,t,n){const r=Gs(e),i=Gs(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Qk.peek=EL;function Qk(e,t,n,r){const i=_L(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let c=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const l=c.charCodeAt(0),u=ul(r.before.charCodeAt(r.before.length-1),l,i);u.inside&&(c=ao(l)+c.slice(1));const d=c.charCodeAt(c.length-1),h=ul(r.after.charCodeAt(0),d,i);h.inside&&(c=c.slice(0,-1)+ao(d));const p=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+c+p}function EL(e,t,n){return n.options.emphasis||"*"}const wL={};function ap(e,t){const n=wL,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Nk(e,r,i)}function Nk(e,t,n){if(xL(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Dk(e.children,t,n)}return Array.isArray(e)?Dk(e,t,n):""}function Dk(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Nk(e[i],t,n);return r.join("")}function xL(e){return!!(e&&typeof e=="object")}function CL(e,t){let n=!1;return Bs(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Yh}),!!((!e.depth||e.depth<3)&&ap(e)&&(t.options.setext||n))}function PL(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(CL(e,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let l=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(l)&&(l=ao(l.charCodeAt(0))+l.slice(1)),l=l?a+" "+l:a,n.options.closeAtx&&(l+=" "+a),c(),o(),l}$k.peek=RL;function $k(e){return e.value||""}function RL(){return"<"}Lk.peek=AL;function Lk(e,t,n,r){const i=sp(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const c=n.createTracker(r);let l=c.move("![");return l+=c.move(n.safe(e.alt,{before:l,after:"]",...c.current()})),l+=c.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(o=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":")",...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),l+=c.move(" "+i),l+=c.move(n.safe(e.title,{before:l,after:i,...c.current()})),l+=c.move(i),o()),l+=c.move(")"),a(),l}function AL(){return"!"}Mk.peek=IL;function Mk(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let c=o.move("![");const l=n.safe(e.alt,{before:c,after:"]",...o.current()});c+=o.move(l+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=u,s(),i==="full"||!l||l!==d?c+=o.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function IL(){return"!"}Uk.peek=QL;function Uk(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let c;if(a.atBreak)for(;c=o.exec(r);){let l=c.index;r.charCodeAt(l)===10&&r.charCodeAt(l-1)===13&&l--,r=r.slice(0,l)+" "+r.slice(c.index+1)}}return i+r+i}function QL(){return"`"}function qk(e,t){const n=ap(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Xk.peek=NL;function Xk(e,t,n,r){const i=sp(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,c;if(qk(e,n)){const u=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),o(),n.stack=u,d}o=n.enter("link"),c=n.enter("label");let l=a.move("[");return l+=a.move(n.containerPhrasing(e,{before:l,after:"](",...a.current()})),l+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(n.safe(e.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=n.enter("destinationRaw"),l+=a.move(n.safe(e.url,{before:l,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${s}`),l+=a.move(" "+i),l+=a.move(n.safe(e.title,{before:l,after:i,...a.current()})),l+=a.move(i),c()),l+=a.move(")"),o(),l}function NL(e,t,n){return qk(e,n)?"<":"["}Fk.peek=DL;function Fk(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let c=o.move("[");const l=n.containerPhrasing(e,{before:c,after:"]",...o.current()});c+=o.move(l+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=u,s(),i==="full"||!l||l!==d?c+=o.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function DL(){return"["}function op(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function $L(e){const t=op(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function LL(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Bk(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function ML(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?LL(n):op(n);const o=e.ordered?a==="."?")":".":$L(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Bk(n)===a&&u){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=o),n.bulletCurrent=a;const l=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),l}function UL(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function qL(e,t,n,r){const i=UL(n);let s=n.bulletCurrent||op(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const c=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,o.current()),u);return c(),l;function u(d,h,p){return h?(p?"":" ".repeat(a))+d:(p?s:s+" ".repeat(a-s.length))+d}}function XL(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const FL=sl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function BL(e,t,n,r){return(e.children.some(function(i){return FL(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function zL(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}zk.peek=ZL;function zk(e,t,n,r){const i=zL(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let c=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const l=c.charCodeAt(0),u=ul(r.before.charCodeAt(r.before.length-1),l,i);u.inside&&(c=ao(l)+c.slice(1));const d=c.charCodeAt(c.length-1),h=ul(r.after.charCodeAt(0),d,i);h.inside&&(c=c.slice(0,-1)+ao(d));const p=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+c+p}function ZL(e,t,n){return n.options.strong||"*"}function jL(e,t,n,r){return n.safe(e.value,r)}function VL(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function GL(e,t,n){const r=(Bk(n)+(n.options.ruleSpaces?" ":"")).repeat(VL(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Zk={blockquote:mL,break:Ik,code:kL,definition:SL,emphasis:Qk,hardBreak:Ik,heading:PL,html:$k,image:Lk,imageReference:Mk,inlineCode:Uk,link:Xk,linkReference:Fk,list:ML,listItem:qL,paragraph:XL,root:BL,strong:zk,text:jL,thematicBreak:GL},jk=document.createElement("i");function cp(e){const t="&"+e+";";jk.innerHTML=t;const n=jk.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Vk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const WL=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function YL(e){return e.replace(WL,HL)}function HL(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),i=r===120||r===88;return Vk(n.slice(i?2:1),i?16:10)}return cp(n)||e}function KL(){return{enter:{table:JL,tableData:Gk,tableHeader:Gk,tableRow:tM},exit:{codeText:nM,table:eM,tableData:lp,tableHeader:lp,tableRow:lp}}}function JL(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function eM(e){this.exit(e),this.data.inTable=void 0}function tM(e){this.enter({type:"tableRow",children:[]},e)}function lp(e){this.exit(e)}function Gk(e){this.enter({type:"tableCell",children:[]},e)}function nM(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,rM));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function rM(e,t){return t==="|"?t:e}function iM(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:c,tableRow:o}};function a(p,O,m,b){return l(u(p,m,b),p.align)}function o(p,O,m,b){const v=d(p,m,b),k=l([v]);return k.slice(0,k.indexOf(`
`))}function c(p,O,m,b){const v=m.enter("tableCell"),k=m.enter("phrasing"),y=m.containerPhrasing(p,{...b,before:s,after:s});return k(),v(),y}function l(p,O){return pL(p,{align:O,alignDelimiters:r,padding:n,stringLength:i})}function u(p,O,m){const b=p.children;let v=-1;const k=[],y=O.enter("table");for(;++v<b.length;)k[v]=d(b[v],O,m);return y(),k}function d(p,O,m){const b=p.children;let v=-1;const k=[],y=O.enter("tableRow");for(;++v<b.length;)k[v]=c(b[v],p,O,m);return y(),k}function h(p,O,m){let b=Zk.inlineCode(p,O,m);return m.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function sM(){return{exit:{taskListCheckValueChecked:Wk,taskListCheckValueUnchecked:Wk,paragraph:oM}}}function aM(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cM}}}function Wk(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function oM(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function cM(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let c=Zk.listItem(e,t,n,{...r,...o.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),c;function l(u){return u+a}}function lM(){return[$$(),rL(),oL(),KL(),sM()]}function uM(e){return{extensions:[L$(),iL(e),cL(),iM(e),aM()]}}const Yk={}.hasOwnProperty;function Hk(e){const t={};let n=-1;for(;++n<e.length;)dM(t,e[n]);return t}function dM(e,t){let n;for(n in t){const r=(Yk.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){Yk.call(r,s)||(r[s]=[]);const a=i[s];hM(r[s],Array.isArray(a)?a:a?[a]:[])}}}function hM(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);qt(e,0,0,r)}const pM={tokenize:bM,partial:!0},Kk={tokenize:TM,partial:!0},Jk={tokenize:kM,partial:!0},ey={tokenize:yM,partial:!0},fM={tokenize:SM,partial:!0},ty={name:"wwwAutolink",tokenize:gM,previous:ry},ny={name:"protocolAutolink",tokenize:vM,previous:iy},Qr={name:"emailAutolink",tokenize:OM,previous:sy},ir={};function mM(){return{text:ir}}let Wi=48;for(;Wi<123;)ir[Wi]=Qr,Wi++,Wi===58?Wi=65:Wi===91&&(Wi=97);ir[43]=Qr,ir[45]=Qr,ir[46]=Qr,ir[95]=Qr,ir[72]=[Qr,ny],ir[104]=[Qr,ny],ir[87]=[Qr,ty],ir[119]=[Qr,ty];function OM(e,t,n){const r=this;let i,s;return a;function a(d){return!up(d)||!sy.call(r,r.previous)||dp(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(d))}function o(d){return up(d)?(e.consume(d),o):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(fM,u,l)(d):d===45||d===95||jt(d)?(s=!0,e.consume(d),c):u(d)}function l(d){return e.consume(d),i=!0,c}function u(d){return s&&i&&Wt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function gM(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!ry.call(r,r.previous)||dp(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(pM,e.attempt(Kk,e.attempt(Jk,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function vM(e,t,n){const r=this;let i="",s=!1;return a;function a(d){return(d===72||d===104)&&iy.call(r,r.previous)&&!dp(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),o):n(d)}function o(d){if(Wt(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),o;if(d===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?l:(s=!0,c)):n(d)}function l(d){return d===null||ol(d)||He(d)||Gi(d)||cl(d)?n(d):e.attempt(Kk,e.attempt(Jk,u),n)(d)}function u(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function bM(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function TM(e,t,n){let r,i,s;return a;function a(l){return l===46||l===95?e.check(ey,c,o)(l):l===null||He(l)||Gi(l)||l!==45&&cl(l)?c(l):(s=!0,e.consume(l),a)}function o(l){return l===95?r=!0:(i=r,r=void 0),e.consume(l),a}function c(l){return i||r||!s?n(l):t(l)}}function kM(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(ey,t,s)(a):a===null||He(a)||Gi(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function yM(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||He(o)||Gi(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||He(o)||Gi(o)?t(o):r(o)}function s(o){return Wt(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):Wt(o)?(e.consume(o),a):n(o)}}function SM(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return jt(s)?n(s):t(s)}}function ry(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||He(e)}function iy(e){return!Wt(e)}function sy(e){return!(e===47||up(e))}function up(e){return e===43||e===45||e===46||e===95||jt(e)}function dp(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Ws(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&jt(e.charCodeAt(n+1))&&jt(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}const hp={name:"attention",resolveAll:_M,tokenize:EM};function _M(e,t){let n=-1,r,i,s,a,o,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};ay(d,-c),ay(h,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xt(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xt(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=Xt(l,Vs(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xt(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Xt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,qt(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function EM(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Gs(r);let s;return a;function a(c){return s=c,e.enter("attentionSequence"),o(c)}function o(c){if(c===s)return e.consume(c),o;const l=e.exit("attentionSequence"),u=Gs(c),d=!u||u===2&&i||n.includes(c),h=!i||i===2&&u||n.includes(r);return l._open=!!(s===42?d:d&&(i||!h)),l._close=!!(s===42?h:h&&(u||!d)),t(c)}}function ay(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wM={name:"autolink",tokenize:xM};function xM(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return Wt(p)?(e.consume(p),a):p===64?n(p):l(p)}function a(p){return p===43||p===45||p===46||jt(p)?(r=1,o(p)):l(p)}function o(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||jt(p))&&r++<32?(e.consume(p),o):(r=0,l(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||ol(p)?n(p):(e.consume(p),c)}function l(p){return p===64?(e.consume(p),u):n$(p)?(e.consume(p),l):n(p)}function u(p){return jt(p)?d(p):n(p)}function d(p){return p===46?(e.consume(p),r=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):h(p)}function h(p){if((p===45||jt(p))&&r++<63){const O=p===45?h:d;return e.consume(p),O}return n(p)}}function $e(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Pe(c)?(e.enter(n),o(c)):t(c)}function o(c){return Pe(c)&&s++<i?(e.consume(c),o):(e.exit(n),t(c))}}const oo={partial:!0,tokenize:CM};function CM(e,t,n){return r;function r(s){return Pe(s)?$e(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||pe(s)?t(s):n(s)}}const oy={continuation:{tokenize:RM},exit:AM,name:"blockQuote",tokenize:PM};function PM(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Pe(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function RM(e,t,n){const r=this;return i;function i(a){return Pe(a)?$e(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(oy,t,n)(a)}}function AM(e){e.exit("blockQuote")}const cy={name:"characterEscape",tokenize:IM};function IM(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return i$(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ly={name:"characterReference",tokenize:QM};function QM(e,t,n){const r=this;let i=0,s,a;return o;function o(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=jt,u(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=r$,u):(e.enter("characterReferenceValue"),s=7,a=Jh,u(d))}function u(d){if(d===59&&i){const h=e.exit("characterReferenceValue");return a===jt&&!cp(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&i++<s?(e.consume(d),u):n(d)}}const uy={partial:!0,tokenize:DM},dy={concrete:!0,name:"codeFenced",tokenize:NM};function NM(e,t,n){const r=this,i={partial:!0,tokenize:_};let s=0,a=0,o;return c;function c(S){return l(S)}function l(S){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,o=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===o?(a++,e.consume(S),u):a<3?n(S):(e.exit("codeFencedFenceSequence"),Pe(S)?$e(e,d,"whitespace")(S):d(S))}function d(S){return S===null||pe(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(uy,m,T)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||pe(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):Pe(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$e(e,p,"whitespace")(S)):S===96&&S===o?n(S):(e.consume(S),h)}function p(S){return S===null||pe(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),O(S))}function O(S){return S===null||pe(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===o?n(S):(e.consume(S),O)}function m(S){return e.attempt(i,T,b)(S)}function b(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),v}function v(S){return s>0&&Pe(S)?$e(e,k,"linePrefix",s+1)(S):k(S)}function k(S){return S===null||pe(S)?e.check(uy,m,T)(S):(e.enter("codeFlowValue"),y(S))}function y(S){return S===null||pe(S)?(e.exit("codeFlowValue"),k(S)):(e.consume(S),y)}function T(S){return e.exit("codeFenced"),t(S)}function _(S,C,N){let $=0;return x;function x(U){return S.enter("lineEnding"),S.consume(U),S.exit("lineEnding"),D}function D(U){return S.enter("codeFencedFence"),Pe(U)?$e(S,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):L(U)}function L(U){return U===o?(S.enter("codeFencedFenceSequence"),V(U)):N(U)}function V(U){return U===o?($++,S.consume(U),V):$>=a?(S.exit("codeFencedFenceSequence"),Pe(U)?$e(S,F,"whitespace")(U):F(U)):N(U)}function F(U){return U===null||pe(U)?(S.exit("codeFencedFence"),C(U)):N(U)}}}function DM(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const pp={name:"codeIndented",tokenize:LM},$M={partial:!0,tokenize:MM};function LM(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),$e(e,s,"linePrefix",5)(l)}function s(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?c(l):pe(l)?e.attempt($M,a,c)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||pe(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function c(l){return e.exit("codeIndented"),t(l)}}function MM(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):pe(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):$e(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):pe(a)?i(a):n(a)}}const UM={name:"codeText",previous:XM,resolve:qM,tokenize:FM};function qM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function XM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function FM(e,t,n){let r=0,i,s;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),o(d)}function o(d){return d===96?(e.consume(d),r++,o):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),i=0,u(d)):pe(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||pe(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),l)}function u(d){return d===96?(e.consume(d),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}class BM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&co(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),co(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),co(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);co(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);co(this.left,n.reverse())}}}function co(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function hy(e){const t={};let n=-1,r,i,s,a,o,c,l;const u=new BM(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,zM(u,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=u.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},o=u.slice(i,n),o.unshift(r),u.splice(i,n-i+1,o))}}return qt(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function zM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,c=[],l={};let u,d,h=-1,p=n,O=0,m=0;const b=[m];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(m=h+1,b.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),h=b.length;h--;){const v=o.slice(b[h],b[h+1]),k=s.pop();c.push([k,k+v.length-1]),e.splice(k,2,v)}for(c.reverse(),h=-1;++h<c.length;)l[O+c[h][0]]=O+c[h][1],O+=c[h][1]-c[h][0]-1;return l}const ZM={resolve:VM,tokenize:GM},jM={partial:!0,tokenize:WM};function VM(e){return hy(e),e}function GM(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):pe(o)?e.check(jM,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function WM(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),$e(e,s,"linePrefix")}function s(a){if(a===null||pe(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function py(e,t,n,r,i,s,a,o,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),h):v===null||v===32||v===41||ol(v)?n(v):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),m(v))}function h(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(o),h(v)):v===null||v===60||pe(v)?n(v):(e.consume(v),v===92?O:p)}function O(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function m(v){return!u&&(v===null||v===41||He(v))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(v)):u<l&&v===40?(e.consume(v),u++,m):v===41?(e.consume(v),u--,m):v===null||v===32||v===40||ol(v)?n(v):(e.consume(v),v===92?b:m)}function b(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function fy(e,t,n,r,i,s){const a=this;let o=0,c;return l;function l(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),u}function u(p){return o>999||p===null||p===91||p===93&&!c||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):pe(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||pe(p)||o++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!Pe(p)),p===92?h:d)}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,d):d(p)}}function my(e,t,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,c):n(h)}function c(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(s),l(h))}function l(h){return h===a?(e.exit(s),c(a)):h===null?n(h):pe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),$e(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===a||h===null||pe(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?d:u)}function d(h){return h===a||h===92?(e.consume(h),u):u(h)}}function lo(e,t){let n;return r;function r(i){return pe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Pe(i)?$e(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const YM={name:"definition",tokenize:KM},HM={partial:!0,tokenize:JM};function KM(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return fy.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return i=Un(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return He(p)?lo(e,l)(p):l(p)}function l(p){return py(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(HM,d,d)(p)}function d(p){return Pe(p)?$e(e,h,"whitespace")(p):h(p)}function h(p){return p===null||pe(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function JM(e,t,n){return r;function r(o){return He(o)?lo(e,i)(o):n(o)}function i(o){return my(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Pe(o)?$e(e,a,"whitespace")(o):a(o)}function a(o){return o===null||pe(o)?t(o):n(o)}}const e5={name:"hardBreakEscape",tokenize:t5};function t5(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return pe(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const n5={name:"headingAtx",resolve:r5,tokenize:i5};function r5(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},qt(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function i5(e,t,n){let r=0;return i;function i(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(e.consume(u),a):u===null||He(u)?(e.exit("atxHeadingSequence"),o(u)):n(u)}function o(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||pe(u)?(e.exit("atxHeading"),t(u)):Pe(u)?$e(e,o,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),o(u))}function l(u){return u===null||u===35||He(u)?(e.exit("atxHeadingText"),o(u)):(e.consume(u),l)}}const s5=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Oy=["pre","script","style","textarea"],a5={concrete:!0,name:"htmlFlow",resolveTo:l5,tokenize:u5},o5={partial:!0,tokenize:h5},c5={partial:!0,tokenize:d5};function l5(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function u5(e,t,n){const r=this;let i,s,a,o,c;return l;function l(R){return u(R)}function u(R){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(R),d}function d(R){return R===33?(e.consume(R),h):R===47?(e.consume(R),s=!0,m):R===63?(e.consume(R),i=3,r.interrupt?t:A):Wt(R)?(e.consume(R),a=String.fromCharCode(R),b):n(R)}function h(R){return R===45?(e.consume(R),i=2,p):R===91?(e.consume(R),i=5,o=0,O):Wt(R)?(e.consume(R),i=4,r.interrupt?t:A):n(R)}function p(R){return R===45?(e.consume(R),r.interrupt?t:A):n(R)}function O(R){const Oe="CDATA[";return R===Oe.charCodeAt(o++)?(e.consume(R),o===Oe.length?r.interrupt?t:L:O):n(R)}function m(R){return Wt(R)?(e.consume(R),a=String.fromCharCode(R),b):n(R)}function b(R){if(R===null||R===47||R===62||He(R)){const Oe=R===47,Ge=a.toLowerCase();return!Oe&&!s&&Oy.includes(Ge)?(i=1,r.interrupt?t(R):L(R)):s5.includes(a.toLowerCase())?(i=6,Oe?(e.consume(R),v):r.interrupt?t(R):L(R)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):s?k(R):y(R))}return R===45||jt(R)?(e.consume(R),a+=String.fromCharCode(R),b):n(R)}function v(R){return R===62?(e.consume(R),r.interrupt?t:L):n(R)}function k(R){return Pe(R)?(e.consume(R),k):x(R)}function y(R){return R===47?(e.consume(R),x):R===58||R===95||Wt(R)?(e.consume(R),T):Pe(R)?(e.consume(R),y):x(R)}function T(R){return R===45||R===46||R===58||R===95||jt(R)?(e.consume(R),T):_(R)}function _(R){return R===61?(e.consume(R),S):Pe(R)?(e.consume(R),_):y(R)}function S(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),c=R,C):Pe(R)?(e.consume(R),S):N(R)}function C(R){return R===c?(e.consume(R),c=null,$):R===null||pe(R)?n(R):(e.consume(R),C)}function N(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||He(R)?_(R):(e.consume(R),N)}function $(R){return R===47||R===62||Pe(R)?y(R):n(R)}function x(R){return R===62?(e.consume(R),D):n(R)}function D(R){return R===null||pe(R)?L(R):Pe(R)?(e.consume(R),D):n(R)}function L(R){return R===45&&i===2?(e.consume(R),H):R===60&&i===1?(e.consume(R),se):R===62&&i===4?(e.consume(R),xe):R===63&&i===3?(e.consume(R),A):R===93&&i===5?(e.consume(R),de):pe(R)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(o5,Ae,V)(R)):R===null||pe(R)?(e.exit("htmlFlowData"),V(R)):(e.consume(R),L)}function V(R){return e.check(c5,F,Ae)(R)}function F(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),U}function U(R){return R===null||pe(R)?V(R):(e.enter("htmlFlowData"),L(R))}function H(R){return R===45?(e.consume(R),A):L(R)}function se(R){return R===47?(e.consume(R),a="",B):L(R)}function B(R){if(R===62){const Oe=a.toLowerCase();return Oy.includes(Oe)?(e.consume(R),xe):L(R)}return Wt(R)&&a.length<8?(e.consume(R),a+=String.fromCharCode(R),B):L(R)}function de(R){return R===93?(e.consume(R),A):L(R)}function A(R){return R===62?(e.consume(R),xe):R===45&&i===2?(e.consume(R),A):L(R)}function xe(R){return R===null||pe(R)?(e.exit("htmlFlowData"),Ae(R)):(e.consume(R),xe)}function Ae(R){return e.exit("htmlFlow"),t(R)}}function d5(e,t,n){const r=this;return i;function i(a){return pe(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function h5(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(oo,t,n)}}const p5={name:"htmlText",tokenize:f5};function f5(e,t,n){const r=this;let i,s,a;return o;function o(A){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(A),c}function c(A){return A===33?(e.consume(A),l):A===47?(e.consume(A),_):A===63?(e.consume(A),y):Wt(A)?(e.consume(A),N):n(A)}function l(A){return A===45?(e.consume(A),u):A===91?(e.consume(A),s=0,O):Wt(A)?(e.consume(A),k):n(A)}function u(A){return A===45?(e.consume(A),p):n(A)}function d(A){return A===null?n(A):A===45?(e.consume(A),h):pe(A)?(a=d,se(A)):(e.consume(A),d)}function h(A){return A===45?(e.consume(A),p):d(A)}function p(A){return A===62?H(A):A===45?h(A):d(A)}function O(A){const xe="CDATA[";return A===xe.charCodeAt(s++)?(e.consume(A),s===xe.length?m:O):n(A)}function m(A){return A===null?n(A):A===93?(e.consume(A),b):pe(A)?(a=m,se(A)):(e.consume(A),m)}function b(A){return A===93?(e.consume(A),v):m(A)}function v(A){return A===62?H(A):A===93?(e.consume(A),v):m(A)}function k(A){return A===null||A===62?H(A):pe(A)?(a=k,se(A)):(e.consume(A),k)}function y(A){return A===null?n(A):A===63?(e.consume(A),T):pe(A)?(a=y,se(A)):(e.consume(A),y)}function T(A){return A===62?H(A):y(A)}function _(A){return Wt(A)?(e.consume(A),S):n(A)}function S(A){return A===45||jt(A)?(e.consume(A),S):C(A)}function C(A){return pe(A)?(a=C,se(A)):Pe(A)?(e.consume(A),C):H(A)}function N(A){return A===45||jt(A)?(e.consume(A),N):A===47||A===62||He(A)?$(A):n(A)}function $(A){return A===47?(e.consume(A),H):A===58||A===95||Wt(A)?(e.consume(A),x):pe(A)?(a=$,se(A)):Pe(A)?(e.consume(A),$):H(A)}function x(A){return A===45||A===46||A===58||A===95||jt(A)?(e.consume(A),x):D(A)}function D(A){return A===61?(e.consume(A),L):pe(A)?(a=D,se(A)):Pe(A)?(e.consume(A),D):$(A)}function L(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),i=A,V):pe(A)?(a=L,se(A)):Pe(A)?(e.consume(A),L):(e.consume(A),F)}function V(A){return A===i?(e.consume(A),i=void 0,U):A===null?n(A):pe(A)?(a=V,se(A)):(e.consume(A),V)}function F(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||He(A)?$(A):(e.consume(A),F)}function U(A){return A===47||A===62||He(A)?$(A):n(A)}function H(A){return A===62?(e.consume(A),e.exit("htmlTextData"),e.exit("htmlText"),t):n(A)}function se(A){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),B}function B(A){return Pe(A)?$e(e,de,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):de(A)}function de(A){return e.enter("htmlTextData"),a(A)}}const fp={name:"labelEnd",resolveAll:v5,resolveTo:b5,tokenize:T5},m5={tokenize:k5},O5={tokenize:y5},g5={tokenize:S5};function v5(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&qt(e,0,e.length,n),e}function b5(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",c,t],["enter",l,t]],o=Xt(o,e.slice(s+1,s+r+3)),o=Xt(o,[["enter",u,t]]),o=Xt(o,Vs(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=Xt(o,[["exit",u,t],e[a-2],e[a-1],["exit",l,t]]),o=Xt(o,e.slice(a+1)),o=Xt(o,[["exit",c,t]]),qt(e,s,e.length,o),e}function T5(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?d(h):(a=r.parser.defined.includes(Un(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(m5,u,a?u:d)(h):h===91?e.attempt(O5,u,a?l:d)(h):a?u(h):d(h)}function l(h){return e.attempt(g5,u,d)(h)}function u(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function k5(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return He(d)?lo(e,s)(d):s(d)}function s(d){return d===41?u(d):py(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return He(d)?lo(e,c)(d):u(d)}function o(d){return n(d)}function c(d){return d===34||d===39||d===40?my(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function l(d){return He(d)?lo(e,u)(d):u(d)}function u(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function y5(e,t,n){const r=this;return i;function i(o){return fy.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Un(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function S5(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const _5={name:"labelStartImage",resolveAll:fp.resolveAll,tokenize:E5};function E5(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const w5={name:"labelStartLink",resolveAll:fp.resolveAll,tokenize:x5};function x5(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const mp={name:"lineEnding",tokenize:C5};function C5(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),$e(e,t,"linePrefix")}}const dl={name:"thematicBreak",tokenize:P5};function P5(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),c(l)):r>=3&&(l===null||pe(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===i?(e.consume(l),r++,c):(e.exit("thematicBreakSequence"),Pe(l)?$e(e,o,"whitespace")(l):o(l))}}const an={continuation:{tokenize:Q5},exit:D5,name:"list",tokenize:I5},R5={partial:!0,tokenize:$5},A5={partial:!0,tokenize:N5};function I5(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(p){const O=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(O==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Jh(p)){if(r.containerState.type||(r.containerState.type=O,e.enter(O,{_container:!0})),O==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(dl,n,l)(p):l(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return Jh(p)&&++a<10?(e.consume(p),c):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):n(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(oo,r.interrupt?n:u,e.attempt(R5,h,d))}function u(p){return r.containerState.initialBlankLine=!0,s++,h(p)}function d(p){return Pe(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function Q5(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(oo,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$e(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!Pe(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(A5,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,$e(e,e.attempt(an,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function N5(e,t,n){const r=this;return $e(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function D5(e){e.exit(this.containerState.type)}function $5(e,t,n){const r=this;return $e(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Pe(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const gy={name:"setextUnderline",resolveTo:L5,tokenize:M5};function L5(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function M5(e,t,n){const r=this;let i;return s;function s(l){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),Pe(l)?$e(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||pe(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const U5={tokenize:V5,partial:!0};function q5(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:z5,continuation:{tokenize:Z5},exit:j5}},text:{91:{name:"gfmFootnoteCall",tokenize:B5},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:X5,resolveTo:F5}}}}function X5(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return o;function o(c){if(!a||!a._balanced)return n(c);const l=Un(r.sliceSerialize({start:a.end,end:r.now()}));return l.codePointAt(0)!==94||!s.includes(l.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function F5(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function B5(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(d){if(s>999||d===93&&!a||d===null||d===91||He(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(Un(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return He(d)||(a=!0),s++,e.consume(d),d===92?u:l}function u(d){return d===91||d===92||d===93?(e.consume(d),s++,l):l(d)}}function z5(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return c;function c(O){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(O){return O===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(O)}function u(O){if(a>999||O===93&&!o||O===null||O===91||He(O))return n(O);if(O===93){e.exit("chunkString");const m=e.exit("gfmFootnoteDefinitionLabelString");return s=Un(r.sliceSerialize(m)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(O),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return He(O)||(o=!0),a++,e.consume(O),O===92?d:u}function d(O){return O===91||O===92||O===93?(e.consume(O),a++,u):u(O)}function h(O){return O===58?(e.enter("definitionMarker"),e.consume(O),e.exit("definitionMarker"),i.includes(s)||i.push(s),$e(e,p,"gfmFootnoteDefinitionWhitespace")):n(O)}function p(O){return t(O)}}function Z5(e,t,n){return e.check(oo,t,e.attempt(U5,t,n))}function j5(e){e.exit("gfmFootnoteDefinition")}function V5(e,t,n){const r=this;return $e(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function G5(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:r};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(s,a){let o=-1;for(;++o<s.length;)if(s[o][0]==="enter"&&s[o][1].type==="strikethroughSequenceTemporary"&&s[o][1]._close){let c=o;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[o][1].end.offset-s[o][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[o][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const l={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[o][1].end)},u={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[o][1].start)},d=[["enter",l,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",u,a]],h=a.parser.constructs.insideSpan.null;h&&qt(d,d.length,0,Vs(h,s.slice(c+1,o),a)),qt(d,d.length,0,[["exit",u,a],["enter",s[o][1],a],["exit",s[o][1],a],["exit",l,a]]),qt(s,c-1,o-c+3,d),o=c+d.length-2;break}}for(o=-1;++o<s.length;)s[o][1].type==="strikethroughSequenceTemporary"&&(s[o][1].type="data");return s}function i(s,a,o){const c=this.previous,l=this.events;let u=0;return d;function d(p){return c===126&&l[l.length-1][1].type!=="characterEscape"?o(p):(s.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const O=Gs(c);if(p===126)return u>1?o(p):(s.consume(p),u++,h);if(u<2&&!t)return o(p);const m=s.exit("strikethroughSequenceTemporary"),b=Gs(p);return m._open=!b||b===2&&!!O,m._close=!O||O===2&&!!b,a(p)}}}class W5{constructor(){this.map=[]}add(t,n,r){Y5(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function Y5(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function H5(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function K5(){return{flow:{null:{name:"table",tokenize:J5,resolveAll:e3}}}}function J5(e,t,n){const r=this;let i=0,s=0,a;return o;function o(x){let D=r.events.length-1;for(;D>-1;){const F=r.events[D][1].type;if(F==="lineEnding"||F==="linePrefix")D--;else break}const L=D>-1?r.events[D][1].type:null,V=L==="tableHead"||L==="tableRow"?S:c;return V===S&&r.parser.lazy[r.now().line]?n(x):V(x)}function c(x){return e.enter("tableHead"),e.enter("tableRow"),l(x)}function l(x){return x===124||(a=!0,s+=1),u(x)}function u(x){return x===null?n(x):pe(x)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),p):n(x):Pe(x)?$e(e,u,"whitespace")(x):(s+=1,a&&(a=!1,i+=1),x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),a=!0,u):(e.enter("data"),d(x)))}function d(x){return x===null||x===124||He(x)?(e.exit("data"),u(x)):(e.consume(x),x===92?h:d)}function h(x){return x===92||x===124?(e.consume(x),d):d(x)}function p(x){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(x):(e.enter("tableDelimiterRow"),a=!1,Pe(x)?$e(e,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):O(x))}function O(x){return x===45||x===58?b(x):x===124?(a=!0,e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),m):_(x)}function m(x){return Pe(x)?$e(e,b,"whitespace")(x):b(x)}function b(x){return x===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),v):x===45?(s+=1,v(x)):x===null||pe(x)?T(x):_(x)}function v(x){return x===45?(e.enter("tableDelimiterFiller"),k(x)):_(x)}function k(x){return x===45?(e.consume(x),k):x===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(x))}function y(x){return Pe(x)?$e(e,T,"whitespace")(x):T(x)}function T(x){return x===124?O(x):x===null||pe(x)?!a||i!==s?_(x):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(x)):_(x)}function _(x){return n(x)}function S(x){return e.enter("tableRow"),C(x)}function C(x){return x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),C):x===null||pe(x)?(e.exit("tableRow"),t(x)):Pe(x)?$e(e,C,"whitespace")(x):(e.enter("data"),N(x))}function N(x){return x===null||x===124||He(x)?(e.exit("data"),C(x)):(e.consume(x),x===92?$:N)}function $(x){return x===92||x===124?(e.consume(x),N):N(x)}}function e3(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,c=0,l,u,d;const h=new W5;for(;++n<e.length;){const p=e[n],O=p[1];p[0]==="enter"?O.type==="tableHead"?(o=!1,c!==0&&(vy(h,t,c,l,u),u=void 0,c=0),l={type:"table",start:Object.assign({},O.start),end:Object.assign({},O.end)},h.add(n,0,[["enter",l,t]])):O.type==="tableRow"||O.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,u={type:"tableBody",start:Object.assign({},O.start),end:Object.assign({},O.end)},h.add(n,0,[["enter",u,t]])),i=O.type==="tableDelimiterRow"?2:u?3:1):i&&(O.type==="data"||O.type==="tableDelimiterMarker"||O.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],d=hl(h,t,s,i,void 0,d),s=[0,0,0,0]),a[2]=n)):O.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],d=hl(h,t,s,i,void 0,d)),s=a,a=[s[1],n,0,0])):O.type==="tableHead"?(o=!0,c=n):O.type==="tableRow"||O.type==="tableDelimiterRow"?(c=n,s[1]!==0?(a[0]=a[1],d=hl(h,t,s,i,n,d)):a[1]!==0&&(d=hl(h,t,a,i,n,d)),i=0):i&&(O.type==="data"||O.type==="tableDelimiterMarker"||O.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&vy(h,t,c,l,u),h.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=H5(t.events,n))}return e}function hl(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},Ys(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Ys(t.events,n[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const l=Ys(t.events,n[2]),u=Ys(t.events,n[3]),d={type:o,start:Object.assign({},l),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],p=t.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const O=n[2]+1,m=n[3]-n[2]-1;e.add(O,m,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},Ys(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function vy(e,t,n,r,i){const s=[],a=Ys(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function Ys(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const t3={name:"tasklistCheck",tokenize:r3};function n3(){return{text:{91:t3}}}function r3(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return He(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(c)}function o(c){return pe(c)?t(c):Pe(c)?e.check({tokenize:i3},t,n)(c):n(c)}}function i3(e,t,n){return $e(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function s3(e){return Hk([mM(),q5(),G5(e),K5(),n3()])}const a3={};function o3(e){const t=this,n=e||a3,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(s3(n)),s.push(lM()),a.push(uM(n))}const by=1024;let c3=0;class Op{constructor(t,n){this.from=t,this.to=n}}class je{constructor(t={}){this.id=c3++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Yt.match(t)),n=>{let r=t(n);return r===void 0?null:[this,r]}}}je.closedBy=new je({deserialize:e=>e.split(" ")}),je.openedBy=new je({deserialize:e=>e.split(" ")}),je.group=new je({deserialize:e=>e.split(" ")}),je.isolate=new je({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),je.contextHash=new je({perNode:!0}),je.lookAhead=new je({perNode:!0}),je.mounted=new je({perNode:!0});class uo{constructor(t,n,r,i=!1){this.tree=t,this.overlay=n,this.parser=r,this.bracketed=i}static get(t){return t&&t.props&&t.props[je.mounted.id]}}const l3=Object.create(null);class Yt{constructor(t,n,r,i=0){this.name=t,this.props=n,this.id=r,this.flags=i}static define(t){let n=t.props&&t.props.length?Object.create(null):l3,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),i=new Yt(t.name||"",n,t.id,r);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let n=this.prop(je.group);return n?n.indexOf(t)>-1:!1}return this.id==t}static match(t){let n=Object.create(null);for(let r in t)for(let i of r.split(" "))n[i]=t[r];return r=>{for(let i=r.prop(je.group),s=-1;s<(i?i.length:0);s++){let a=n[s<0?r.name:i[s]];if(a)return a}}}}Yt.none=new Yt("",Object.create(null),0,8);class ho{constructor(t){this.types=t;for(let n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let n=[];for(let r of this.types){let i=null;for(let s of t){let a=s(r);if(a){i||(i=Object.assign({},r.props));let o=a[1],c=a[0];c.combine&&c.id in i&&(o=c.combine(i[c.id],o)),i[c.id]=o}}n.push(i?new Yt(r.name,i,r.id,r.flags):r)}return new ho(n)}}const pl=new WeakMap,Ty=new WeakMap;var Et;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays",e[e.EnterBracketed=16]="EnterBracketed"})(Et||(Et={}));class Ot{constructor(t,n,r,i,s){if(this.type=t,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let t=uo.get(this);if(t&&!t.overlay)return t.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(t=0){return new bp(this.topNode,t)}cursorAt(t,n=0,r=0){let i=pl.get(this)||this.topNode,s=new bp(i);return s.moveTo(t,n),pl.set(this,s._tree),s}get topNode(){return new xn(this,0,0,null)}resolve(t,n=0){let r=po(pl.get(this)||this.topNode,t,n,!1);return pl.set(this,r),r}resolveInner(t,n=0){let r=po(Ty.get(this)||this.topNode,t,n,!0);return Ty.set(this,r),r}resolveStack(t,n=0){return h3(this,t,n)}iterate(t){let{enter:n,leave:r,from:i=0,to:s=this.length}=t,a=t.mode||0,o=(a&Et.IncludeAnonymous)>0;for(let c=this.cursor(a|Et.IncludeAnonymous);;){let l=!1;if(c.from<=s&&c.to>=i&&(!o&&c.type.isAnonymous||n(c)!==!1)){if(c.firstChild())continue;l=!0}for(;l&&r&&(o||!c.type.isAnonymous)&&r(c),!c.nextSibling();){if(!c.parent())return;l=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let n in this.props)t.push([+n,this.props[n]]);return t}balance(t={}){return this.children.length<=8?this:kp(Yt.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Ot(this.type,n,r,i,this.propValues),t.makeTree||((n,r,i)=>new Ot(Yt.none,n,r,i)))}static build(t){return p3(t)}}Ot.empty=new Ot(Yt.none,[],[],0);class gp{constructor(t,n){this.buffer=t,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gp(this.buffer,this.index)}}class pi{constructor(t,n,r){this.buffer=t,this.length=n,this.set=r}get type(){return Yt.none}toString(){let t=[];for(let n=0;n<this.buffer.length;)t.push(this.childString(n)),n=this.buffer[n+3];return t.join(",")}childString(t){let n=this.buffer[t],r=this.buffer[t+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),t+=4,r==t)return s;let a=[];for(;t<r;)a.push(this.childString(t)),t=this.buffer[t+3];return s+"("+a.join(",")+")"}findChild(t,n,r,i,s){let{buffer:a}=this,o=-1;for(let c=t;c!=n&&!(ky(s,i,a[c+1],a[c+2])&&(o=c,r>0));c=a[c+3]);return o}slice(t,n,r){let i=this.buffer,s=new Uint16Array(n-t),a=0;for(let o=t,c=0;o<n;){s[c++]=i[o++],s[c++]=i[o++]-r;let l=s[c++]=i[o++]-r;s[c++]=i[o++]-t,a=Math.max(a,l)}return new pi(s,a,this.set)}}function ky(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function po(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let a=!r&&e instanceof xn&&e.index<0?null:e.parent;if(!a)return e;e=a}let s=r?0:Et.IgnoreOverlays;if(r)for(let a=e,o=a.parent;o;a=o,o=a.parent)a instanceof xn&&a.index<0&&((i=o.enter(t,n,s))===null||i===void 0?void 0:i.from)!=a.from&&(e=o);for(;;){let a=e.enter(t,n,s);if(!a)return e;e=a}}class yy{cursor(t=0){return new bp(this,t)}getChild(t,n=null,r=null){let i=Sy(this,t,n,r);return i.length?i[0]:null}getChildren(t,n=null,r=null){return Sy(this,t,n,r)}resolve(t,n=0){return po(this,t,n,!1)}resolveInner(t,n=0){return po(this,t,n,!0)}matchContext(t){return vp(this.parent,t)}enterUnfinishedNodesBefore(t){let n=this.childBefore(t),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class xn extends yy{constructor(t,n,r,i){super(),this._tree=t,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,n,r,i,s=0){var a;for(let o=this;;){for(let{children:c,positions:l}=o._tree,u=n>0?c.length:-1;t!=u;t+=n){let d=c[t],h=l[t]+o.from;if(!(!(s&Et.EnterBracketed&&d instanceof Ot&&((a=uo.get(d))===null||a===void 0?void 0:a.overlay)===null&&(h>=r||h+d.length<=r))&&!ky(i,r,h,h+d.length))){if(d instanceof pi){if(s&Et.ExcludeBuffers)continue;let p=d.findChild(0,d.buffer.length,n,r-h,i);if(p>-1)return new fi(new u3(o,d,t,h),null,p)}else if(s&Et.IncludeAnonymous||!d.type.isAnonymous||Tp(d)){let p;if(!(s&Et.IgnoreMounts)&&(p=uo.get(d))&&!p.overlay)return new xn(p.tree,h,t,o);let O=new xn(d,h,t,o);return s&Et.IncludeAnonymous||!O.type.isAnonymous?O:O.nextChild(n<0?d.children.length-1:0,n,r,i,s)}}}if(s&Et.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+n:t=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,n,r=0){let i;if(!(r&Et.IgnoreOverlays)&&(i=uo.get(this._tree))&&i.overlay){let s=t-this.from,a=r&Et.EnterBracketed&&i.bracketed;for(let{from:o,to:c}of i.overlay)if((n>0||a?o<=s:o<s)&&(n<0||a?c>=s:c>s))return new xn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,r)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Sy(e,t,n,r){let i=e.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let a=!1;!a;)if(a=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(t)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function vp(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class u3{constructor(t,n,r,i){this.parent=t,this.buffer=n,this.index=r,this.start=i}}class fi extends yy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,n,r){super(),this.context=t,this._parent=n,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}child(t,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t,n-this.context.start,r);return s<0?null:new fi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,n,r=0){if(r&Et.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return s<0?null:new fi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new fi(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new fi(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let a=r.buffer[this.index+1];t.push(r.slice(i,s,a)),n.push(0)}return new Ot(this.type,t,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function _y(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let a=e[s];(a.from>n.from||a.to<n.to)&&(n=a,t=s)}let r=n instanceof xn&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new d3(i,n)}class d3{constructor(t,n){this.heads=t,this.node=n}get next(){return _y(this.heads)}}function h3(e,t,n){let r=e.resolveInner(t,n),i=null;for(let s=r instanceof xn?r:r.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(i||(i=[r])).push(a.resolve(t,n)),s=a}else{let a=uo.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=t&&a.overlay[a.overlay.length-1].to>=t){let o=new xn(a.tree,a.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(po(o,t,n,!1))}}return i?_y(i):r}class bp{get name(){return this.type.name}constructor(t,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~Et.EnterBracketed,t instanceof xn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let r=t._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,n){this.index=t;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[t]],this.from=r+i.buffer[t+1],this.to=r+i.buffer[t+2],!0}yield(t){return t?t instanceof xn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],t,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,n,r=this.mode){return this.buffer?r&Et.ExcludeBuffers?!1:this.enterChild(1,t,n):this.yield(this._tree.enter(t,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Et.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Et.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(t<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let n,r,{buffer:i}=this;if(i){if(t>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+t,a=t<0?-1:r._tree.children.length;s!=a;s+=t){let o=r._tree.children[s];if(this.mode&Et.IncludeAnonymous||o instanceof pi||!o.type.isAnonymous||Tp(o))return!1}return!0}move(t,n){if(n&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,n=0){for(;(this.from==this.to||(n<1?this.from>=t:this.from>t)||(n>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,n););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,n=null,r=0;if(t&&t.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=t;a;a=a._parent)if(a.index==i){if(i==this.index)return a;n=a,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new fi(this.buffer,n,this.stack[i]);return this.bufferNode=new fi(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(t){if(!this.buffer)return vp(this.node.parent,t);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=t.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return vp(this._tree,t,i);let a=r[n.buffer[this.stack[s]]];if(!a.isAnonymous){if(t[i]&&t[i]!=a.name)return!1;i--}}return!0}}function Tp(e){return e.children.some(t=>t instanceof pi||!t.type.isAnonymous||Tp(t))}function p3(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=by,reused:s=[],minRepeatType:a=r.types.length}=e,o=Array.isArray(n)?new gp(n,n.length):n,c=r.types,l=0,u=0;function d(_,S,C,N,$,x){let{id:D,start:L,end:V,size:F}=o,U=u,H=l;if(F<0)if(o.next(),F==-1){let xe=s[D];C.push(xe),N.push(L-_);return}else if(F==-3){l=D;return}else if(F==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${F}`);let se=c[D],B,de,A=L-_;if(V-L<=i&&(de=b(o.pos-S,$))){let xe=new Uint16Array(de.size-de.skip),Ae=o.pos-de.size,R=xe.length;for(;o.pos>Ae;)R=v(de.start,xe,R);B=new pi(xe,V-de.start,r),A=de.start-_}else{let xe=o.pos-F;o.next();let Ae=[],R=[],Oe=D>=a?D:-1,Ge=0,Ue=V;for(;o.pos>xe;)Oe>=0&&o.id==Oe&&o.size>=0?(o.end<=Ue-i&&(O(Ae,R,L,Ge,o.end,Ue,Oe,U,H),Ge=Ae.length,Ue=o.end),o.next()):x>2500?h(L,xe,Ae,R):d(L,xe,Ae,R,Oe,x+1);if(Oe>=0&&Ge>0&&Ge<Ae.length&&O(Ae,R,L,Ge,L,Ue,Oe,U,H),Ae.reverse(),R.reverse(),Oe>-1&&Ge>0){let ae=p(se,H);B=kp(se,Ae,R,0,Ae.length,0,V-L,ae,ae)}else B=m(se,Ae,R,V-L,U-V,H)}C.push(B),N.push(A)}function h(_,S,C,N){let $=[],x=0,D=-1;for(;o.pos>S;){let{id:L,start:V,end:F,size:U}=o;if(U>4)o.next();else{if(D>-1&&V<D)break;D<0&&(D=F-i),$.push(L,V,F),x++,o.next()}}if(x){let L=new Uint16Array(x*4),V=$[$.length-2];for(let F=$.length-3,U=0;F>=0;F-=3)L[U++]=$[F],L[U++]=$[F+1]-V,L[U++]=$[F+2]-V,L[U++]=U;C.push(new pi(L,$[2]-V,r)),N.push(V-_)}}function p(_,S){return(C,N,$)=>{let x=0,D=C.length-1,L,V;if(D>=0&&(L=C[D])instanceof Ot){if(!D&&L.type==_&&L.length==$)return L;(V=L.prop(je.lookAhead))&&(x=N[D]+L.length+V)}return m(_,C,N,$,x,S)}}function O(_,S,C,N,$,x,D,L,V){let F=[],U=[];for(;_.length>N;)F.push(_.pop()),U.push(S.pop()+C-$);_.push(m(r.types[D],F,U,x-$,L-x,V)),S.push($-C)}function m(_,S,C,N,$,x,D){if(x){let L=[je.contextHash,x];D=D?[L].concat(D):[L]}if($>25){let L=[je.lookAhead,$];D=D?[L].concat(D):[L]}return new Ot(_,S,C,N,D)}function b(_,S){let C=o.fork(),N=0,$=0,x=0,D=C.end-i,L={size:0,start:0,skip:0};e:for(let V=C.pos-_;C.pos>V;){let F=C.size;if(C.id==S&&F>=0){L.size=N,L.start=$,L.skip=x,x+=4,N+=4,C.next();continue}let U=C.pos-F;if(F<0||U<V||C.start<D)break;let H=C.id>=a?4:0,se=C.start;for(C.next();C.pos>U;){if(C.size<0)if(C.size==-3||C.size==-4)H+=4;else break e;else C.id>=a&&(H+=4);C.next()}$=se,N+=F,x+=H}return(S<0||N==_)&&(L.size=N,L.start=$,L.skip=x),L.size>4?L:void 0}function v(_,S,C){let{id:N,start:$,end:x,size:D}=o;if(o.next(),D>=0&&N<a){let L=C;if(D>4){let V=o.pos-(D-4);for(;o.pos>V;)C=v(_,S,C)}S[--C]=L,S[--C]=x-_,S[--C]=$-_,S[--C]=N}else D==-3?l=N:D==-4&&(u=N);return C}let k=[],y=[];for(;o.pos>0;)d(e.start||0,e.bufferStart||0,k,y,-1,0);let T=(t=e.length)!==null&&t!==void 0?t:k.length?y[0]+k[0].length:0;return new Ot(c[e.topID],k.reverse(),y.reverse(),T)}const Ey=new WeakMap;function fl(e,t){if(!e.isAnonymous||t instanceof pi||t.type!=e)return 1;let n=Ey.get(t);if(n==null){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Ot)){n=1;break}n+=fl(e,r)}Ey.set(t,n)}return n}function kp(e,t,n,r,i,s,a,o,c){let l=0;for(let O=r;O<i;O++)l+=fl(e,t[O]);let u=Math.ceil(l*1.5/8),d=[],h=[];function p(O,m,b,v,k){for(let y=b;y<v;){let T=y,_=m[y],S=fl(e,O[y]);for(y++;y<v;y++){let C=fl(e,O[y]);if(S+C>=u)break;S+=C}if(y==T+1){if(S>u){let C=O[T];p(C.children,C.positions,0,C.children.length,m[T]+k);continue}d.push(O[T])}else{let C=m[y-1]+O[y-1].length-_;d.push(kp(e,O,m,T,y,_,C,null,c))}h.push(_+k-s)}}return p(t,n,r,i,0),(o||c)(d,h,a)}class wy{startParse(t,n,r){return typeof t=="string"&&(t=new f3(t)),r=r?r.length?r.map(i=>new Op(i.from,i.to)):[new Op(0,0)]:[new Op(0,t.length)],this.createParse(t,n||[],r)}parse(t,n,r){let i=this.startParse(t,n,r);for(;;){let s=i.advance();if(s)return s}}}class f3{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,n){return this.string.slice(t,n)}}new je({perNode:!0});let m3=0,sr=class ym{constructor(t,n,r,i){this.name=t,this.set=n,this.base=r,this.modified=i,this.id=m3++}toString(){let{name:t}=this;for(let n of this.modified)n.name&&(t=`${n.name}(${t})`);return t}static define(t,n){let r=typeof t=="string"?t:"?";if(t instanceof ym&&(n=t),n==null?void 0:n.base)throw new Error("Can not derive from a modified tag");let i=new ym(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(t){let n=new ml(t);return r=>r.modified.indexOf(n)>-1?r:ml.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}},O3=0;class ml{constructor(t){this.name=t,this.instances=[],this.id=O3++}static get(t,n){if(!n.length)return t;let r=n[0].instances.find(o=>o.base==t&&g3(n,o.modified));if(r)return r;let i=[],s=new sr(t.name,i,t,n);for(let o of n)o.instances.push(s);let a=v3(n);for(let o of t.set)if(!o.modified.length)for(let c of a)i.push(ml.get(o,c));return s}}function g3(e,t){return e.length==t.length&&e.every((n,r)=>n==t[r])}function v3(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort((n,r)=>r.length-n.length)}function mi(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],a=2,o=i;for(let d=0;;){if(o=="..."&&d>0&&d+3==i.length){a=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){a=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);o=i.slice(d)}let c=s.length-1,l=s[c];if(!l)throw new RangeError("Invalid path: "+i);let u=new fo(r,a,c>0?s.slice(0,c):null);t[l]=u.sort(t[l])}}return xy.add(t)}const xy=new je({combine(e,t){let n,r,i;for(;e||t;){if(!e||t&&e.depth>=t.depth?(i=t,t=t.next):(i=e,e=e.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new fo(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});class fo{constructor(t,n,r,i){this.tags=t,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}fo.empty=new fo([],2,null);function b3(e,t){let n=Object.create(null);for(let s of e)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let a of s.tag)n[a.id]=s.class;let{scope:r,all:i=null}={};return{style:s=>{let a=i;for(let o of s)for(let c of o.set){let l=n[c.id];if(l){a=a?a+" "+l:l;break}}return a},scope:r}}function T3(e,t){let n=null;for(let r of e){let i=r.style(t);i&&(n=n?n+" "+i:i)}return n}function k3(e,t,n,r=0,i=e.length){let s=new y3(r,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),r,i,"",s.highlighters),s.flush(i)}class y3{constructor(t,n,r){this.at=t,this.highlighters=n,this.span=r,this.class=""}startSpan(t,n){n!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=n)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,n,r,i,s){let{type:a,from:o,to:c}=t;if(o>=r||c<=n)return;a.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(a)));let l=i,u=S3(t)||fo.empty,d=T3(s,u.tags);if(d&&(l&&(l+=" "),l+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,o),l),u.opaque)return;let h=t.tree&&t.tree.prop(je.mounted);if(h&&h.overlay){let p=t.node.enter(h.overlay[0].from+o,1),O=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),m=t.firstChild();for(let b=0,v=o;;b++){let k=b<h.overlay.length?h.overlay[b]:null,y=k?k.from+o:c,T=Math.max(n,v),_=Math.min(r,y);if(T<_&&m)for(;t.from<_&&(this.highlightRange(t,T,_,i,s),this.startSpan(Math.min(_,t.to),l),!(t.to>=y||!t.nextSibling())););if(!k||y>r)break;v=k.to+o,v>n&&(this.highlightRange(p.cursor(),Math.max(n,k.from+o),Math.min(r,v),"",O),this.startSpan(Math.min(r,v),l))}m&&t.parent()}else if(t.firstChild()){h&&(i="");do if(!(t.to<=n)){if(t.from>=r)break;this.highlightRange(t,n,r,i,s),this.startSpan(Math.min(r,t.to),l)}while(t.nextSibling());t.parent()}}}function S3(e){let t=e.type.prop(xy);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const ie=sr.define,Ol=ie(),Oi=ie(),Cy=ie(Oi),Py=ie(Oi),gi=ie(),gl=ie(gi),yp=ie(gi),ar=ie(),Yi=ie(ar),or=ie(),cr=ie(),Sp=ie(),mo=ie(Sp),vl=ie(),Q={comment:Ol,lineComment:ie(Ol),blockComment:ie(Ol),docComment:ie(Ol),name:Oi,variableName:ie(Oi),typeName:Cy,tagName:ie(Cy),propertyName:Py,attributeName:ie(Py),className:ie(Oi),labelName:ie(Oi),namespace:ie(Oi),macroName:ie(Oi),literal:gi,string:gl,docString:ie(gl),character:ie(gl),attributeValue:ie(gl),number:yp,integer:ie(yp),float:ie(yp),bool:ie(gi),regexp:ie(gi),escape:ie(gi),color:ie(gi),url:ie(gi),keyword:or,self:ie(or),null:ie(or),atom:ie(or),unit:ie(or),modifier:ie(or),operatorKeyword:ie(or),controlKeyword:ie(or),definitionKeyword:ie(or),moduleKeyword:ie(or),operator:cr,derefOperator:ie(cr),arithmeticOperator:ie(cr),logicOperator:ie(cr),bitwiseOperator:ie(cr),compareOperator:ie(cr),updateOperator:ie(cr),definitionOperator:ie(cr),typeOperator:ie(cr),controlOperator:ie(cr),punctuation:Sp,separator:ie(Sp),bracket:mo,angleBracket:ie(mo),squareBracket:ie(mo),paren:ie(mo),brace:ie(mo),content:ar,heading:Yi,heading1:ie(Yi),heading2:ie(Yi),heading3:ie(Yi),heading4:ie(Yi),heading5:ie(Yi),heading6:ie(Yi),contentSeparator:ie(ar),list:ie(ar),quote:ie(ar),emphasis:ie(ar),strong:ie(ar),link:ie(ar),monospace:ie(ar),strikethrough:ie(ar),inserted:ie(),deleted:ie(),changed:ie(),invalid:ie(),meta:vl,documentMeta:ie(vl),annotation:ie(vl),processingInstruction:ie(vl),definition:sr.defineModifier("definition"),constant:sr.defineModifier("constant"),function:sr.defineModifier("function"),standard:sr.defineModifier("standard"),local:sr.defineModifier("local"),special:sr.defineModifier("special")};for(let e in Q){let t=Q[e];t instanceof sr&&(t.name=e)}const _3=b3([{tag:Q.link,class:"tok-link"},{tag:Q.heading,class:"tok-heading"},{tag:Q.emphasis,class:"tok-emphasis"},{tag:Q.strong,class:"tok-strong"},{tag:Q.keyword,class:"tok-keyword"},{tag:Q.atom,class:"tok-atom"},{tag:Q.bool,class:"tok-bool"},{tag:Q.url,class:"tok-url"},{tag:Q.labelName,class:"tok-labelName"},{tag:Q.inserted,class:"tok-inserted"},{tag:Q.deleted,class:"tok-deleted"},{tag:Q.literal,class:"tok-literal"},{tag:Q.string,class:"tok-string"},{tag:Q.number,class:"tok-number"},{tag:[Q.regexp,Q.escape,Q.special(Q.string)],class:"tok-string2"},{tag:Q.variableName,class:"tok-variableName"},{tag:Q.local(Q.variableName),class:"tok-variableName tok-local"},{tag:Q.definition(Q.variableName),class:"tok-variableName tok-definition"},{tag:Q.special(Q.variableName),class:"tok-variableName2"},{tag:Q.definition(Q.propertyName),class:"tok-propertyName tok-definition"},{tag:Q.typeName,class:"tok-typeName"},{tag:Q.namespace,class:"tok-namespace"},{tag:Q.className,class:"tok-className"},{tag:Q.macroName,class:"tok-macroName"},{tag:Q.propertyName,class:"tok-propertyName"},{tag:Q.operator,class:"tok-operator"},{tag:Q.comment,class:"tok-comment"},{tag:Q.meta,class:"tok-meta"},{tag:Q.invalid,class:"tok-invalid"},{tag:Q.punctuation,class:"tok-punctuation"}]);function E3(e,t){const n=[];let r=0;return k3(t,_3,(i,s,a)=>{i>r&&n.push({type:"text",value:e.slice(r,i)}),n.push({type:"element",tagName:"span",properties:{className:a},children:[{type:"text",value:e.slice(i,s)}]}),r=s}),r<e.length&&n.push({type:"text",value:e.slice(r)}),{type:"root",children:n}}const w3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,x3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,C3={};function Ry(e,t){return(C3.jsx?x3:w3).test(e)}const P3=/[ \t\n\f\r]/g;function R3(e){return typeof e=="object"?e.type==="text"?Ay(e.value):!1:Ay(e)}function Ay(e){return e.replace(P3,"")===""}function Iy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hs={},_p,Qy;function A3(){if(Qy)return _p;Qy=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,l="/",u="*",d="",h="comment",p="declaration";function O(b,v){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];v=v||{};var k=1,y=1;function T(F){var U=F.match(t);U&&(k+=U.length);var H=F.lastIndexOf(c);y=~H?F.length-H:y+F.length}function _(){var F={line:k,column:y};return function(U){return U.position=new S(F),$(),U}}function S(F){this.start=F,this.end={line:k,column:y},this.source=v.source}S.prototype.content=b;function C(F){var U=new Error(v.source+":"+k+":"+y+": "+F);if(U.reason=F,U.filename=v.source,U.line=k,U.column=y,U.source=b,!v.silent)throw U}function N(F){var U=F.exec(b);if(U){var H=U[0];return T(H),b=b.slice(H.length),U}}function $(){N(n)}function x(F){var U;for(F=F||[];U=D();)U!==!1&&F.push(U);return F}function D(){var F=_();if(!(l!=b.charAt(0)||u!=b.charAt(1))){for(var U=2;d!=b.charAt(U)&&(u!=b.charAt(U)||l!=b.charAt(U+1));)++U;if(U+=2,d===b.charAt(U-1))return C("End of comment missing");var H=b.slice(2,U-2);return y+=2,T(H),b=b.slice(U),y+=2,F({type:h,comment:H})}}function L(){var F=_(),U=N(r);if(U){if(D(),!N(i))return C("property missing ':'");var H=N(s),se=F({type:p,property:m(U[0].replace(e,d)),value:H?m(H[0].replace(e,d)):d});return N(a),se}}function V(){var F=[];x(F);for(var U;U=L();)U!==!1&&(F.push(U),x(F));return F}return $(),V()}function m(b){return b?b.replace(o,d):d}return _p=O,_p}var Ny;function I3(){if(Ny)return Hs;Ny=1;var e=Hs&&Hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.default=n;const t=e(A3());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const a=(0,t.default)(r),o=typeof i=="function";return a.forEach(c=>{if(c.type!=="declaration")return;const{property:l,value:u}=c;o?i(l,u,c):u&&(s=s||{},s[l]=u)}),s}return Hs}var Oo={},Dy;function Q3(){if(Dy)return Oo;Dy=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(l){return!l||n.test(l)||e.test(l)},a=function(l,u){return u.toUpperCase()},o=function(l,u){return"".concat(u,"-")},c=function(l,u){return u===void 0&&(u={}),s(l)?l:(l=l.toLowerCase(),u.reactCompat?l=l.replace(i,o):l=l.replace(r,o),l.replace(t,a))};return Oo.camelCase=c,Oo}var go,$y;function N3(){if($y)return go;$y=1;var e=go&&go.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(I3()),n=Q3();function r(i,s){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(o,c){o&&c&&(a[(0,n.camelCase)(o,s)]=c)}),a}return r.default=r,go=r,go}var D3=N3();const $3=Iy(D3);function vo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ly(e.position):"start"in e||"end"in e?Ly(e):"line"in e||"column"in e?Ep(e):""}function Ep(e){return My(e&&e.line)+":"+My(e&&e.column)}function Ly(e){return Ep(e&&e.start)+"-"+Ep(e&&e.end)}function My(e){return e&&typeof e=="number"?e:1}class Vt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=vo(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Vt.prototype.file="",Vt.prototype.name="",Vt.prototype.reason="",Vt.prototype.message="",Vt.prototype.stack="",Vt.prototype.column=void 0,Vt.prototype.line=void 0,Vt.prototype.ancestors=void 0,Vt.prototype.cause=void 0,Vt.prototype.fatal=void 0,Vt.prototype.place=void 0,Vt.prototype.ruleId=void 0,Vt.prototype.source=void 0;const wp={}.hasOwnProperty,L3=new Map,M3=/[A-Z]/g,U3=new Set(["table","tbody","thead","tfoot","tr"]),q3=new Set(["td","th"]),Uy="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function qy(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=G3(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=V3(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?ci:ja,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Xy(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Xy(e,t,n){if(t.type==="element")return X3(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return F3(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return z3(e,t,n);if(t.type==="mdxjsEsm")return B3(e,t);if(t.type==="root")return Z3(e,t,n);if(t.type==="text")return j3(e,t)}function X3(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ci,e.schema=i),e.ancestors.push(t);const s=By(e,t.tagName,!1),a=W3(e,t);let o=Cp(e,t);return U3.has(t.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!R3(c):!0})),Fy(e,a,s,t),xp(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function F3(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}bo(e,t.position)}function B3(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);bo(e,t.position)}function z3(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=ci,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:By(e,t.name,!0),a=Y3(e,t),o=Cp(e,t);return Fy(e,a,s,t),xp(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function Z3(e,t,n){const r={};return xp(r,Cp(e,t)),e.create(t,e.Fragment,r,n)}function j3(e,t){return t.value}function Fy(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function xp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function V3(e,t,n){return r;function r(i,s,a,o){const c=Array.isArray(a.children)?n:t;return o?c(s,a,o):c(s,a)}}function G3(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),c=tr(r);return t(i,s,a,o,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function W3(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&wp.call(t.properties,i)){const s=H3(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&q3.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Y3(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const s=i.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else bo(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else bo(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Cp(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:L3;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const l=i.get(c)||0;a=c+"-"+l,i.set(c,l+1)}}const o=Xy(e,s,a);o!==void 0&&n.push(o)}return n}function H3(e,t,n){const r=Gc(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?lT(n):hT(n)),r.property==="style"){let i=typeof n=="object"?n:K3(e,String(n));return e.stylePropertyNameCase==="css"&&(i=J3(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?CQ[r.property]||r.property:r.attribute,n]}}function K3(e,t){try{return $3(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Vt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Uy+"#cannot-parse-style-attribute",i}}function By(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=Ry(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=Ry(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return wp.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);bo(e)}function bo(e,t){const n=new Vt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Uy+"#cannot-handle-mdx-estrees-without-createevaluater",n}function J3(e){const t={};let n;for(n in e)wp.call(e,n)&&(t[eU(n)]=e[n]);return t}function eU(e){let t=e.replace(M3,tU);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function tU(e){return"-"+e.toLowerCase()}class bl{constructor(t,n,r,i,s,a,o,c,l,u=0,d){this.p=t,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=c,this.curContext=l,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((t,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,n,r=0){let i=t.parser.context;return new bl(t,[],n,r,r,0,[],0,i?new zy(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var n;let r=t>>19,i=t&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),o=s.dynamicPrecedence(i);if(o&&(this.score+=o),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(i,this.reducePos);return}let c=this.stack.length-(r-1)*3-(t&262144?6:0),l=c?this.stack[c-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let d=c?this.stack[c-1]:0,h=this.bufferBase+this.buffer.length-d;if(i<s.minRepeatTerm||t&131072){let p=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,p,h+4,!0)}if(t&262144)this.state=this.stack[c];else{let p=this.stack[c-3];this.state=s.getGoto(p,i,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(i,l)}storeNode(t,n,r,i=4,s=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(n==r)return;if(a.buffer[o-2]>=n){a.buffer[o-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(t,n,r,i);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let o=!1;for(let c=a;c>0&&this.buffer[c-2]>r;c-=4)if(this.buffer[c-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4)}this.buffer[a]=t,this.buffer[a+1]=n,this.buffer[a+2]=r,this.buffer[a+3]=i}}shift(t,n,r,i){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let s=t,{parser:a}=this.p;this.pos=i,!a.stateFlag(s,1)&&(i>r||n<=a.maxNode)&&(this.reducePos=i),this.pushState(s,Math.min(r,this.reducePos)),this.shiftContext(n,r),n<=a.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(t,n,r,i){t&65536?this.reduce(t):this.shift(t,n,r,i)}useNode(t,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=t)&&(this.p.reused.push(t),r++);let i=this.pos;this.reducePos=this.pos=i+t.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,n=t.buffer.length;for(;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;let r=t.buffer.slice(n),i=t.bufferBase+n;for(;t&&i==t.bufferBase;)t=t.parent;return new bl(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,t)}recoverByDelete(t,n){let r=t<=this.p.parser.maxNode;r&&this.storeNode(t,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(t){for(let n=new nU(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,t);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(t){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,a;s<n.length;s+=2)(a=n[s+1])!=this.state&&this.p.parser.hasAction(a,t)&&i.push(n[s],a);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let a=n[s+1];i.some((o,c)=>c&1&&o==a)||i.push(n[s],a)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[i],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:t}=this.p,n=t.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!t.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||t.getGoto(this.stack[s],i,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:t}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),t.allActions(i,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let c=a&65535,l=this.stack.length-o*3;if(l>=0&&t.getGoto(this.stack[l],c,!1)>=0)return o<<19|65536|c}}else{let o=r(a,s+1);if(o!=null)return o}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=t.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(n)))}reduceContext(t,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(n)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let n=new zy(this.curContext.tracker,t);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class zy{constructor(t,n){this.tracker=t,this.context=n,this.hash=t.strict?t.hash(n):0}}class nU{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let n=t&65535,r=t>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class Tl{constructor(t,n,r){this.stack=t,this.pos=n,this.index=r,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,n=t.bufferBase+t.buffer.length){return new Tl(t,n,n-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Tl(this.stack,this.pos,this.index)}}function To(e,t=Uint16Array){if(typeof e!="string")return e;let n=null;for(let r=0,i=0;r<e.length;){let s=0;for(;;){let a=e.charCodeAt(r++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,o=!0),s+=c,o)break;s*=46}n?n[i++]=s:n=new t(s)}return n}class kl{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Zy=new kl;class rU{constructor(t,n){this.input=t,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Zy,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(t,n){let r=this.range,i=this.rangeIndex,s=this.pos+t;for(;s<r.from;){if(!i)return null;let a=this.ranges[--i];s-=r.from-a.to,r=a}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];s+=a.from-r.to,r=a}return s}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let n of this.ranges)if(n.to>t)return Math.max(t,n.from);return this.end}peek(t){let n=this.chunkOff+t,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+t,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(t,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=r;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(t,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=r}acceptTokenTo(t,n){this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),n=this.pos+t.length;this.chunk=n>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,n){if(n?(this.token=n,n.start=t,n.lookAhead=t+1,n.value=n.extended=-1):this.token=Zy,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,n){if(t>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,n-this.chunkPos);if(t>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,n-this.chunk2Pos);if(t>=this.range.from&&n<=this.range.to)return this.input.read(t,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>t&&(r+=this.input.read(Math.max(i.from,t),Math.min(i.to,n)))}return r}}class Ks{constructor(t,n){this.data=t,this.id=n}token(t,n){let{parser:r}=n.p;jy(this.data,t,n,this.id,r.data,r.tokenPrecTable)}}Ks.prototype.contextual=Ks.prototype.fallback=Ks.prototype.extend=!1;class Pp{constructor(t,n,r){this.precTable=n,this.elseToken=r,this.data=typeof t=="string"?To(t):t}token(t,n){let r=t.pos,i=0;for(;;){let s=t.next<0,a=t.resolveOffset(1,1);if(jy(this.data,t,n,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,a==null)break;t.reset(a,t.token)}i&&(t.reset(r,t.token),t.acceptToken(this.elseToken,i))}}Pp.prototype.contextual=Ks.prototype.fallback=Ks.prototype.extend=!1;class Rt{constructor(t,n={}){this.token=t,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function jy(e,t,n,r,i,s){let a=0,o=1<<r,{dialect:c}=n.p.parser;e:for(;(o&e[a])!=0;){let l=e[a+1];for(let p=a+3;p<l;p+=2)if((e[p+1]&o)>0){let O=e[p];if(c.allows(O)&&(t.token.value==-1||t.token.value==O||iU(O,t.token.value,i,s))){t.acceptToken(O);break}}let u=t.next,d=0,h=e[a+2];if(t.next<0&&h>d&&e[l+h*3-3]==65535){a=e[l+h*3-1];continue e}for(;d<h;){let p=d+h>>1,O=l+p+(p<<1),m=e[O],b=e[O+1]||65536;if(u<m)h=p;else if(u>=b)d=p+1;else{a=e[O+2],t.advance();continue e}}break}}function Vy(e,t,n){for(let r=t,i;(i=e[r])!=65535;r++)if(i==n)return r-t;return-1}function iU(e,t,n,r){let i=Vy(n,r,t);return i<0||Vy(n,r,e)<i}const vn=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Rp=null;function Gy(e,t,n){let r=e.cursor(Et.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}let sU=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Gy(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Gy(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],s=this.start[t]+n.positions[r];if(s>e)return this.nextStart=s,null;if(i instanceof Ot){if(s==e){if(s<this.safeFrom)return null;let a=s+i.length;if(a<=this.safeTo){let o=i.prop(je.lookAhead);if(!o||a+o<this.fragment.to)return i}}this.index[t]++,s+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+i.length}}};class aU{constructor(t,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(r=>new kl)}getActions(t){let n=0,r=null,{parser:i}=t.p,{tokenizers:s}=i,a=i.stateSlot(t.state,3),o=t.curContext?t.curContext.hash:0,c=0;for(let l=0;l<s.length;l++){if((1<<l&a)==0)continue;let u=s[l],d=this.tokens[l];if(!(r&&!u.fallback)&&((u.contextual||d.start!=t.pos||d.mask!=a||d.context!=o)&&(this.updateCachedToken(d,u,t),d.mask=a,d.context=o),d.lookAhead>d.end+25&&(c=Math.max(d.lookAhead,c)),d.value!=0)){let h=n;if(d.extended>-1&&(n=this.addActions(t,d.extended,d.end,n)),n=this.addActions(t,d.value,d.end,n),!u.extend&&(r=d,n>h))break}}for(;this.actions.length>n;)this.actions.pop();return c&&t.setLookAhead(c),!r&&t.pos==this.stream.end&&(r=new kl,r.value=t.p.parser.eofTerm,r.start=r.end=t.pos,n=this.addActions(t,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let n=new kl,{pos:r,p:i}=t;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(t,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,t),r),t.value>-1){let{parser:s}=r.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==t.value){let o=s.specializers[a](this.stream.read(t.start,t.end),r);if(o>=0&&r.p.parser.dialect.allows(o>>1)){(o&1)==0?t.value=o>>1:t.extended=o>>1;break}}}else t.value=0,t.end=this.stream.clipPos(i+1)}putAction(t,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==t)return i;return this.actions[i++]=t,this.actions[i++]=n,this.actions[i++]=r,i}addActions(t,n,r,i){let{state:s}=t,{parser:a}=t.p,{data:o}=a;for(let c=0;c<2;c++)for(let l=a.stateSlot(s,c?2:1);;l+=3){if(o[l]==65535)if(o[l+1]==1)l=Dr(o,l+2);else{i==0&&o[l+1]==2&&(i=this.putAction(Dr(o,l+2),n,r,i));break}o[l]==n&&(i=this.putAction(Dr(o,l+1),n,r,i))}return i}}class oU{constructor(t,n,r,i){this.parser=t,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new rU(n,i),this.tokens=new aU(t,this.stream),this.topTerm=t.top[1];let{from:s}=i[0];this.stacks=[bl.start(this,t.top[0],s)],this.fragments=r.length&&this.stream.end-s>t.bufferLength*4?new sU(r,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&t.length==1){let[a]=t;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<t.length;a++){let o=t[a];for(;;){if(this.tokens.mainToken=null,o.pos>n)r.push(o);else{if(this.advanceStack(o,r,t))continue;{i||(i=[],s=[]),i.push(o);let c=this.tokens.getMainToken(o);s.push(c.value,c.end)}}break}}if(!r.length){let a=i&&lU(i);if(a)return vn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw vn&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(a)return vn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((o,c)=>c.score-o.score);r.length>a;)r.pop();r.some(o=>o.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let o=r[a];for(let c=a+1;c<r.length;c++){let l=r[c];if(o.sameState(l)||o.buffer.length>500&&l.buffer.length>500)if((o.score-l.score||o.buffer.length-l.buffer.length)>0)r.splice(c--,1);else{r.splice(a--,1);continue e}}}r.length>12&&(r.sort((a,o)=>o.score-a.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,n,r){let i=t.pos,{parser:s}=this,a=vn?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let l=t.curContext&&t.curContext.tracker.strict,u=l?t.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let h=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(t.state,d.type.id):-1;if(h>-1&&d.length&&(!l||(d.prop(je.contextHash)||0)==u))return t.useNode(d,h),vn&&console.log(a+this.stackID(t)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof Ot)||d.children.length==0||d.positions[0]>0)break;let p=d.children[0];if(p instanceof Ot&&d.positions[0]==0)d=p;else break}}let o=s.stateSlot(t.state,4);if(o>0)return t.reduce(o),vn&&console.log(a+this.stackID(t)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let c=this.tokens.getActions(t);for(let l=0;l<c.length;){let u=c[l++],d=c[l++],h=c[l++],p=l==c.length||!r,O=p?t:t.split(),m=this.tokens.mainToken;if(O.apply(u,d,m?m.start:O.pos,h),vn&&console.log(a+this.stackID(O)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(d)} @ ${i}${O==t?"":", split"})`),p)return!0;O.pos>i?n.push(O):r.push(O)}return!1}advanceFully(t,n){let r=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>r)return Wy(t,n),!0}}runRecovery(t,n,r){let i=null,s=!1;for(let a=0;a<t.length;a++){let o=t[a],c=n[a<<1],l=n[(a<<1)+1],u=vn?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),vn&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,r))))continue;let d=o.split(),h=u;for(let p=0;p<10&&d.forceReduce()&&(vn&&console.log(h+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,r));p++)vn&&(h=this.stackID(d)+" -> ");for(let p of o.recoverByInsert(c))vn&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,r);this.stream.end>o.pos?(l==o.pos&&(l++,c=0),o.recoverByDelete(c,l),vn&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(c)})`),Wy(o,r)):(!i||i.score<d.score)&&(i=d)}return i}stackToTree(t){return t.close(),Ot.build({buffer:Tl.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let n=(Rp||(Rp=new WeakMap)).get(t);return n||Rp.set(t,n=String.fromCodePoint(this.nextStackID++)),n+t}}function Wy(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e)){t[n].score<e.score&&(t[n]=e);return}}t.push(e)}class cU{constructor(t,n,r){this.source=t,this.flags=n,this.disabled=r}allows(t){return!this.disabled||this.disabled[t]==0}}const Ap=e=>e;class ko{constructor(t){this.start=t.start,this.shift=t.shift||Ap,this.reduce=t.reduce||Ap,this.reuse=t.reuse||Ap,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Nr extends wy{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let n=t.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let o=0;o<t.repeatNodeCount;o++)n.push("");let r=Object.keys(t.topRules).map(o=>t.topRules[o][1]),i=[];for(let o=0;o<n.length;o++)i.push([]);function s(o,c,l){i[o].push([c,c.deserialize(String(l))])}if(t.nodeProps)for(let o of t.nodeProps){let c=o[0];typeof c=="string"&&(c=je[c]);for(let l=1;l<o.length;){let u=o[l++];if(u>=0)s(u,c,o[l++]);else{let d=o[l+-u];for(let h=-u;h>0;h--)s(o[l++],c,d);l++}}}this.nodeSet=new ho(n.map((o,c)=>Yt.define({name:c>=this.minRepeatTerm?void 0:o,id:c,props:i[c],top:r.indexOf(c)>-1,error:c==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(c)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=by;let a=To(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(Yy),this.states=To(t.states,Uint32Array),this.data=To(t.stateData),this.goto=To(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(o=>typeof o=="number"?new Ks(a,o):o),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,n,r){let i=new oU(this,t,n,r);for(let s of this.wrappers)i=s(i,t,n,r);return i}getGoto(t,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let a=i[s++],o=a&1,c=i[s++];if(o&&r)return c;for(let l=s+(a>>1);s<l;s++)if(i[s]==t)return c;if(o)return-1}}hasAction(t,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(t,i?2:1),a;;s+=3){if((a=r[s])==65535)if(r[s+1]==1)a=r[s=Dr(r,s+2)];else{if(r[s+1]==2)return Dr(r,s+2);break}if(a==n||a==0)return Dr(r,s+1)}return 0}stateSlot(t,n){return this.states[t*6+n]}stateFlag(t,n){return(this.stateSlot(t,0)&n)>0}validAction(t,n){return!!this.allActions(t,r=>r==n?!0:null)}allActions(t,n){let r=this.stateSlot(t,4),i=r?n(r):void 0;for(let s=this.stateSlot(t,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Dr(this.data,s+2);else break;i=n(Dr(this.data,s+1))}return i}nextStates(t){let n=[];for(let r=this.stateSlot(t,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Dr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,a)=>a&1&&s==i)||n.push(this.data[r],i)}}return n}configure(t){let n=Object.assign(Object.create(Nr.prototype),this);if(t.props&&(n.nodeSet=this.nodeSet.extend(...t.props)),t.top){let r=this.topRules[t.top];if(!r)throw new RangeError(`Invalid top rule name ${t.top}`);n.top=r}return t.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=t.tokenizers.find(s=>s.from==r);return i?i.to:r})),t.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=t.specializers.find(o=>o.from==r.external);if(!s)return r;let a=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=Yy(a),a})),t.contextTracker&&(n.context=t.contextTracker),t.dialect&&(n.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(n.strict=t.strict),t.wrap&&(n.wrappers=n.wrappers.concat(t.wrap)),t.bufferLength!=null&&(n.bufferLength=t.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let n=this.dynamicPrecedences;return n==null?0:n[t]||0}parseDialect(t){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(t)for(let s of t.split(" ")){let a=n.indexOf(s);a>=0&&(r[a]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let a=this.dialects[n[s]],o;(o=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[o]=1;return new cU(t,r,i)}static deserialize(t){return new Nr(t)}}function Dr(e,t){return e[t]|e[t+1]<<16}function lU(e){let t=null;for(let n of e){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}function Yy(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}const uU=55,dU=1,hU=56,pU=2,fU=57,mU=3,Hy=4,OU=5,Ip=6,Ky=7,Jy=8,eS=9,tS=10,gU=11,vU=12,bU=13,Qp=58,TU=14,kU=15,nS=59,yU=21,SU=37,_U=0,EU=1,wU={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},xU={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},rS={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function CU(e){return e==45||e==46||e==58||e>=65&&e<=90||e==95||e>=97&&e<=122||e>=161}let iS=null,sS=null,aS=0;function Np(e,t){let n=e.pos+t;if(aS==n&&sS==e)return iS;let r=e.peek(t),i="";for(;CU(r);)i+=String.fromCharCode(r),r=e.peek(++t);return sS=e,aS=n,iS=i?i.toLowerCase():r==PU||r==RU?void 0:null}const oS=60,yl=62,Dp=47,PU=63,RU=33,AU=45;function cS(e,t){this.name=e,this.parent=t}const IU=[Ip,tS,Ky,Jy,eS],QU=new ko({start:null,shift(e,t,n,r){return IU.indexOf(t)>-1?new cS(Np(r,1)||"",e):e},reduce(e,t){return t==yU&&e?e.parent:e},reuse(e,t,n,r){let i=t.type.id;return i==Ip||i==SU?new cS(Np(r,1)||"",e):e},strict:!1}),NU=new Rt((e,t)=>{if(e.next!=oS){e.next<0&&t.context&&e.acceptToken(Qp);return}e.advance();let n=e.next==Dp;n&&e.advance();let r=Np(e,0);if(r===void 0)return;if(!r)return e.acceptToken(n?kU:TU);let i=t.context?t.context.name:null;if(n){if(r==i)return e.acceptToken(gU);if(i&&xU[i])return e.acceptToken(Qp,-2);if(t.dialectEnabled(_U))return e.acceptToken(vU);for(let s=t.context;s;s=s.parent)if(s.name==r)return;e.acceptToken(bU)}else{if(r=="script")return e.acceptToken(Ky);if(r=="style")return e.acceptToken(Jy);if(r=="textarea")return e.acceptToken(eS);if(wU.hasOwnProperty(r))return e.acceptToken(tS);i&&rS[i]&&rS[i][r]?e.acceptToken(Qp,-1):e.acceptToken(Ip)}},{contextual:!0}),DU=new Rt(e=>{for(let t=0,n=0;;n++){if(e.next<0){n&&e.acceptToken(nS);break}if(e.next==AU)t++;else if(e.next==yl&&t>=2){n>=3&&e.acceptToken(nS,-2);break}else t=0;e.advance()}});function $U(e){for(;e;e=e.parent)if(e.name=="svg"||e.name=="math")return!0;return!1}const LU=new Rt((e,t)=>{if(e.next==Dp&&e.peek(1)==yl){let n=t.dialectEnabled(EU)||$U(t.context);e.acceptToken(n?OU:Hy,2)}else e.next==yl&&e.acceptToken(Hy,1)});function $p(e,t,n){let r=2+e.length;return new Rt(i=>{for(let s=0,a=0,o=0;;o++){if(i.next<0){o&&i.acceptToken(t);break}if(s==0&&i.next==oS||s==1&&i.next==Dp||s>=2&&s<r&&i.next==e.charCodeAt(s-2))s++,a++;else if(s==r&&i.next==yl){o>a?i.acceptToken(t,-a):i.acceptToken(n,-(a-2));break}else if((i.next==10||i.next==13)&&o){i.acceptToken(t,1);break}else s=a=0;i.advance()}})}const MU=$p("script",uU,dU),UU=$p("style",hU,pU),qU=$p("textarea",fU,mU),XU=mi({"Text RawText IncompleteTag IncompleteCloseTag":Q.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Q.angleBracket,TagName:Q.tagName,"MismatchedCloseTag/TagName":[Q.tagName,Q.invalid],AttributeName:Q.attributeName,"AttributeValue UnquotedAttributeValue":Q.attributeValue,Is:Q.definitionOperator,"EntityReference CharacterReference":Q.character,Comment:Q.blockComment,ProcessingInst:Q.processingInstruction,DoctypeDecl:Q.documentMeta}),FU=Nr.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:QU,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[XU],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[MU,UU,qU,LU,NU,DU,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517}),BU=316,zU=317,lS=1,ZU=2,jU=3,VU=4,GU=318,WU=320,YU=321,HU=5,KU=6,JU=0,Lp=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],uS=125,e4=59,Mp=47,t4=42,n4=43,r4=45,i4=60,s4=44,a4=63,o4=46,c4=91,l4=new ko({start:!1,shift(e,t){return t==HU||t==KU||t==WU?e:t==YU},strict:!1}),u4=new Rt((e,t)=>{let{next:n}=e;(n==uS||n==-1||t.context)&&e.acceptToken(GU)},{contextual:!0,fallback:!0}),d4=new Rt((e,t)=>{let{next:n}=e,r;Lp.indexOf(n)>-1||n==Mp&&((r=e.peek(1))==Mp||r==t4)||n!=uS&&n!=e4&&n!=-1&&!t.context&&e.acceptToken(BU)},{contextual:!0}),h4=new Rt((e,t)=>{e.next==c4&&!t.context&&e.acceptToken(zU)},{contextual:!0}),p4=new Rt((e,t)=>{let{next:n}=e;if(n==n4||n==r4){if(e.advance(),n==e.next){e.advance();let r=!t.context&&t.canShift(lS);e.acceptToken(r?lS:ZU)}}else n==a4&&e.peek(1)==o4&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(jU))},{contextual:!0});function Up(e,t){return e>=65&&e<=90||e>=97&&e<=122||e==95||e>=192||!t&&e>=48&&e<=57}const f4=new Rt((e,t)=>{if(e.next!=i4||!t.dialectEnabled(JU)||(e.advance(),e.next==Mp))return;let n=0;for(;Lp.indexOf(e.next)>-1;)e.advance(),n++;if(Up(e.next,!0)){for(e.advance(),n++;Up(e.next,!1);)e.advance(),n++;for(;Lp.indexOf(e.next)>-1;)e.advance(),n++;if(e.next==s4)return;for(let r=0;;r++){if(r==7){if(!Up(e.next,!0))return;break}if(e.next!="extends".charCodeAt(r))break;e.advance(),n++}}e.acceptToken(VU,-n)}),m4=mi({"get set async static":Q.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Q.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Q.operatorKeyword,"let var const using function class extends":Q.definitionKeyword,"import export from":Q.moduleKeyword,"with debugger new":Q.keyword,TemplateString:Q.special(Q.string),super:Q.atom,BooleanLiteral:Q.bool,this:Q.self,null:Q.null,Star:Q.modifier,VariableName:Q.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Q.function(Q.variableName),VariableDefinition:Q.definition(Q.variableName),Label:Q.labelName,PropertyName:Q.propertyName,PrivatePropertyName:Q.special(Q.propertyName),"CallExpression/MemberExpression/PropertyName":Q.function(Q.propertyName),"FunctionDeclaration/VariableDefinition":Q.function(Q.definition(Q.variableName)),"ClassDeclaration/VariableDefinition":Q.definition(Q.className),"NewExpression/VariableName":Q.className,PropertyDefinition:Q.definition(Q.propertyName),PrivatePropertyDefinition:Q.definition(Q.special(Q.propertyName)),UpdateOp:Q.updateOperator,"LineComment Hashbang":Q.lineComment,BlockComment:Q.blockComment,Number:Q.number,String:Q.string,Escape:Q.escape,ArithOp:Q.arithmeticOperator,LogicOp:Q.logicOperator,BitOp:Q.bitwiseOperator,CompareOp:Q.compareOperator,RegExp:Q.regexp,Equals:Q.definitionOperator,Arrow:Q.function(Q.punctuation),": Spread":Q.punctuation,"( )":Q.paren,"[ ]":Q.squareBracket,"{ }":Q.brace,"InterpolationStart InterpolationEnd":Q.special(Q.brace),".":Q.derefOperator,", ;":Q.separator,"@":Q.meta,TypeName:Q.typeName,TypeDefinition:Q.definition(Q.typeName),"type enum interface implements namespace module declare":Q.definitionKeyword,"abstract global Privacy readonly override":Q.modifier,"is keyof unique infer asserts":Q.operatorKeyword,JSXAttributeValue:Q.attributeValue,JSXText:Q.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Q.angleBracket,"JSXIdentifier JSXNameSpacedName":Q.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Q.attributeName,"JSXBuiltin/JSXIdentifier":Q.standard(Q.tagName)}),O4={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},g4={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},v4={__proto__:null,"<":193},Sl=Nr.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:l4,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[m4],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[d4,h4,p4,f4,2,3,4,5,6,7,8,9,10,11,12,13,14,u4,new Pp("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new Pp("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>O4[e]||-1},{term:343,get:e=>g4[e]||-1},{term:95,get:e=>v4[e]||-1}],tokenPrec:15201}),b4=mi({String:Q.string,Number:Q.number,"True False":Q.bool,PropertyName:Q.propertyName,Null:Q.null,", :":Q.separator,"[ ]":Q.squareBracket,"{ }":Q.brace}),T4=Nr.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[b4],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});class _l{static create(t,n,r,i,s){let a=i+(i<<8)+t+(n<<4)|0;return new _l(t,n,r,a,s,[],[])}constructor(t,n,r,i,s,a,o){this.type=t,this.value=n,this.from=r,this.hash=i,this.end=s,this.children=a,this.positions=o,this.hashProp=[[je.contextHash,i]]}addChild(t,n){t.prop(je.contextHash)!=this.hash&&(t=new Ot(t.type,t.children,t.positions,t.length,this.hashProp)),this.children.push(t),this.positions.push(n)}toTree(t,n=this.end){let r=this.children.length-1;return r>=0&&(n=Math.max(n,this.positions[r]+this.children[r].length+this.from)),new Ot(t.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(i,s,a)=>new Ot(Yt.none,i,s,a,this.hashProp)})}}var ne;(function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.Autolink=33]="Autolink",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeText=40]="CodeText",e[e.CodeInfo=41]="CodeInfo",e[e.LinkTitle=42]="LinkTitle",e[e.LinkLabel=43]="LinkLabel",e[e.URL=44]="URL"})(ne||(ne={}));class k4{constructor(t,n){this.start=t,this.content=n,this.marks=[],this.parsers=[]}}class y4{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let t=this.skipSpace(this.basePos);this.indent=this.countIndent(t,this.pos,this.indent),this.pos=t,this.next=t==this.text.length?-1:this.text.charCodeAt(t)}skipSpace(t){return yo(this.text,t)}reset(t){for(this.text=t,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(t){this.basePos=t,this.baseIndent=this.countIndent(t,this.pos,this.indent)}moveBaseColumn(t){this.baseIndent=t,this.basePos=this.findColumn(t)}addMarker(t){this.markers.push(t)}countIndent(t,n=0,r=0){for(let i=n;i<t;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(t){let n=0;for(let r=0;n<this.text.length&&r<t;n++)r+=this.text.charCodeAt(n)==9?4-r%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let t="";for(let n=0;n<this.basePos;n++)t+=" ";return t+this.text.slice(this.basePos)}}function dS(e,t,n){if(n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let r=(e.type==ne.OrderedList?Fp:Xp)(n,t,!1);return r>0&&(e.type!=ne.BulletList||qp(n,t,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==e.value}const hS={[ne.Blockquote](e,t,n){return n.next!=62?!1:(n.markers.push(Le(ne.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+(qn(n.text.charCodeAt(n.pos+1))?2:1)),e.end=t.lineStart+n.text.length,!0)},[ne.ListItem](e,t,n){return n.indent<n.baseIndent+e.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+e.value),!0)},[ne.OrderedList]:dS,[ne.BulletList]:dS,[ne.Document](){return!0}};function qn(e){return e==32||e==9||e==10||e==13}function yo(e,t=0){for(;t<e.length&&qn(e.charCodeAt(t));)t++;return t}function pS(e,t,n){for(;t>n&&qn(e.charCodeAt(t-1));)t--;return t}function fS(e){if(e.next!=96&&e.next!=126)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(e.next==96){for(let n=t;n<e.text.length;n++)if(e.text.charCodeAt(n)==96)return-1}return t}function mS(e){return e.next!=62?-1:e.text.charCodeAt(e.pos+1)==32?2:1}function qp(e,t,n){if(e.next!=42&&e.next!=45&&e.next!=95)return-1;let r=1;for(let i=e.pos+1;i<e.text.length;i++){let s=e.text.charCodeAt(i);if(s==e.next)r++;else if(!qn(s))return-1}return n&&e.next==45&&vS(e)>-1&&e.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(SS.SetextHeading)>-1||r<3?-1:1}function OS(e,t){for(let n=e.stack.length-1;n>=0;n--)if(e.stack[n].type==t)return!0;return!1}function Xp(e,t,n){return(e.next==45||e.next==43||e.next==42)&&(e.pos==e.text.length-1||qn(e.text.charCodeAt(e.pos+1)))&&(!n||OS(t,ne.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function Fp(e,t,n){let r=e.pos,i=e.next;for(;i>=48&&i<=57;){if(r++,r==e.text.length)return-1;i=e.text.charCodeAt(r)}return r==e.pos||r>e.pos+9||i!=46&&i!=41||r<e.text.length-1&&!qn(e.text.charCodeAt(r+1))||n&&!OS(t,ne.OrderedList)&&(e.skipSpace(r+1)==e.text.length||r>e.pos+1||e.next!=49)?-1:r+1-e.pos}function gS(e){if(e.next!=35)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==35;)t++;if(t<e.text.length&&e.text.charCodeAt(t)!=32)return-1;let n=t-e.pos;return n>6?-1:n}function vS(e){if(e.next!=45&&e.next!=61||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let n=t;for(;t<e.text.length&&qn(e.text.charCodeAt(t));)t++;return t==e.text.length?n:-1}const Bp=/^[ \t]*$/,bS=/-->/,TS=/\?>/,zp=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,bS],[/^\s*<\?/,TS],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Bp],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Bp]];function kS(e,t,n){if(e.next!=60)return-1;let r=e.text.slice(e.pos);for(let i=0,s=zp.length-(n?1:0);i<s;i++)if(zp[i][0].test(r))return i;return-1}function yS(e,t){let n=e.countIndent(t,e.pos,e.indent),r=e.countIndent(e.skipSpace(t),t,n);return r>=n+5?n+1:r}function vi(e,t,n){let r=e.length-1;r>=0&&e[r].to==t&&e[r].type==ne.CodeText?e[r].to=n:e.push(Le(ne.CodeText,t,n))}const El={LinkReference:void 0,IndentedCode(e,t){let n=t.baseIndent+4;if(t.indent<n)return!1;let r=t.findColumn(n),i=e.lineStart+r,s=e.lineStart+t.text.length,a=[],o=[];for(vi(a,i,s);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){vi(o,e.lineStart-1,e.lineStart);for(let c of t.markers)o.push(c)}else{if(t.indent<n)break;{if(o.length){for(let l of o)l.type==ne.CodeText?vi(a,l.from,l.to):a.push(l);o=[]}vi(a,e.lineStart-1,e.lineStart);for(let l of t.markers)a.push(l);s=e.lineStart+t.text.length;let c=e.lineStart+t.findColumn(t.baseIndent+4);c<s&&vi(a,c,s)}}return o.length&&(o=o.filter(c=>c.type!=ne.CodeText),o.length&&(t.markers=o.concat(t.markers))),e.addNode(e.buffer.writeElements(a,-i).finish(ne.CodeBlock,s-i),i),!0},FencedCode(e,t){let n=fS(t);if(n<0)return!1;let r=e.lineStart+t.pos,i=t.next,s=n-t.pos,a=t.skipSpace(n),o=pS(t.text,t.text.length,a),c=[Le(ne.CodeMark,r,r+s)];a<o&&c.push(Le(ne.CodeInfo,e.lineStart+a,e.lineStart+o));for(let l=!0,u=!0,d=!1;e.nextLine()&&t.depth>=e.stack.length;l=!1){let h=t.pos;if(t.indent-t.baseIndent<4)for(;h<t.text.length&&t.text.charCodeAt(h)==i;)h++;if(h-t.pos>=s&&t.skipSpace(h)==t.text.length){for(let p of t.markers)c.push(p);u&&d&&vi(c,e.lineStart-1,e.lineStart),c.push(Le(ne.CodeMark,e.lineStart+t.pos,e.lineStart+h)),e.nextLine();break}else{d=!0,l||(vi(c,e.lineStart-1,e.lineStart),u=!1);for(let m of t.markers)c.push(m);let p=e.lineStart+t.basePos,O=e.lineStart+t.text.length;p<O&&(vi(c,p,O),u=!1)}}return e.addNode(e.buffer.writeElements(c,-r).finish(ne.FencedCode,e.prevLineEnd()-r),r),!0},Blockquote(e,t){let n=mS(t);return n<0?!1:(e.startContext(ne.Blockquote,t.pos),e.addNode(ne.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){if(qp(t,e,!1)<0)return!1;let n=e.lineStart+t.pos;return e.nextLine(),e.addNode(ne.HorizontalRule,n),!0},BulletList(e,t){let n=Xp(t,e,!1);if(n<0)return!1;e.block.type!=ne.BulletList&&e.startContext(ne.BulletList,t.basePos,t.next);let r=yS(t,t.pos+1);return e.startContext(ne.ListItem,t.basePos,r-t.baseIndent),e.addNode(ne.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},OrderedList(e,t){let n=Fp(t,e,!1);if(n<0)return!1;e.block.type!=ne.OrderedList&&e.startContext(ne.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));let r=yS(t,t.pos+n);return e.startContext(ne.ListItem,t.basePos,r-t.baseIndent),e.addNode(ne.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},ATXHeading(e,t){let n=gS(t);if(n<0)return!1;let r=t.pos,i=e.lineStart+r,s=pS(t.text,t.text.length,r),a=s;for(;a>r&&t.text.charCodeAt(a-1)==t.next;)a--;(a==s||a==r||!qn(t.text.charCodeAt(a-1)))&&(a=t.text.length);let o=e.buffer.write(ne.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(r+n+1,a),i+n+1),-i);a<t.text.length&&o.write(ne.HeaderMark,a-r,s-r);let c=o.finish(ne.ATXHeading1-1+n,t.text.length-r);return e.nextLine(),e.addNode(c,i),!0},HTMLBlock(e,t){let n=kS(t,e,!1);if(n<0)return!1;let r=e.lineStart+t.pos,i=zp[n][1],s=[],a=i!=Bp;for(;!i.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){a=!1;break}for(let l of t.markers)s.push(l)}a&&e.nextLine();let o=i==bS?ne.CommentBlock:i==TS?ne.ProcessingInstructionBlock:ne.HTMLBlock,c=e.prevLineEnd();return e.addNode(e.buffer.writeElements(s,-r).finish(o,c-r),r),!0},SetextHeading:void 0};class S4{constructor(t){this.stage=0,this.elts=[],this.pos=0,this.start=t.start,this.advance(t.content)}nextLine(t,n,r){if(this.stage==-1)return!1;let i=r.content+`
`+n.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(t,r,s):!1}finish(t,n){return(this.stage==2||this.stage==3)&&yo(n.content,this.pos)==n.content.length?this.complete(t,n,n.content.length):!1}complete(t,n,r){return t.addLeafElement(n,Le(ne.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(t){return t?(this.pos=t.to-this.start,this.elts.push(t),this.stage++,!0):(t===!1&&(this.stage=-1),!1)}advance(t){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(QS(t,this.pos,this.start,!0)))return-1;if(t.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(Le(ne.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(AS(t,yo(t,this.pos),this.start)))return-1}else if(this.stage==2){let n=yo(t,this.pos),r=0;if(n>this.pos){let i=IS(t,n,this.start);if(i){let s=Zp(t,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=Zp(t,this.pos)),r>0&&r<t.length?r:-1}else return Zp(t,this.pos)}}}function Zp(e,t){for(;t<e.length;t++){let n=e.charCodeAt(t);if(n==10)break;if(!qn(n))return-1}return t}class _4{nextLine(t,n,r){let i=n.depth<t.stack.length?-1:vS(n),s=n.next;if(i<0)return!1;let a=Le(ne.HeaderMark,t.lineStart+n.pos,t.lineStart+i);return t.nextLine(),t.addLeafElement(r,Le(s==61?ne.SetextHeading1:ne.SetextHeading2,r.start,t.prevLineEnd(),[...t.parser.parseInline(r.content,r.start),a])),!0}finish(){return!1}}const SS={LinkReference(e,t){return t.content.charCodeAt(0)==91?new S4(t):null},SetextHeading(){return new _4}},E4=[(e,t)=>gS(t)>=0,(e,t)=>fS(t)>=0,(e,t)=>mS(t)>=0,(e,t)=>Xp(t,e,!0)>=0,(e,t)=>Fp(t,e,!0)>=0,(e,t)=>qp(t,e,!0)>=0,(e,t)=>kS(t,e,!0)>=0],w4={text:"",end:0};class x4{constructor(t,n,r,i){this.parser=t,this.input=n,this.ranges=i,this.line=new y4,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=_l.create(ne.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new R4(r,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:t}=this;for(;;){for(let r=0;;){let i=t.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<t.markers.length&&(!i||t.markers[r].from<i.end);){let s=t.markers[r++];this.addNode(s.type,s.from,s.to)}if(!i)break;this.finishContext()}if(t.pos<t.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(t.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,t);if(i!=!1){if(i==!0)return null;t.forward();continue e}}break}let n=new k4(this.lineStart+t.pos,t.text.slice(t.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,n);i&&n.parsers.push(i)}e:for(;this.nextLine()&&t.pos!=t.text.length;){if(t.indent<t.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,t,n))break e}for(let r of n.parsers)if(r.nextLine(this,t,n))return null;n.content+=`
`+t.scrub();for(let r of t.markers)n.marks.push(r)}return this.finishLeaf(n),null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}reuseFragment(t){if(!this.fragments.moveTo(this.absoluteLineStart+t,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=NS(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(t=this.depth-1){return this.parser.nodeSet.types[this.stack[t].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(t){let n=w4;if(n.end=t,t>=this.to)n.text="";else if(n.text=this.lineChunkAt(t),n.end+=n.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<n.end;){i++;let s=this.ranges[i].from,a=this.lineChunkAt(s);n.end=s+a.length,n.text=n.text.slice(0,this.ranges[i-1].to-r)+a,r=n.end-n.text.length}}return n}readLine(){let{line:t}=this,{text:n,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,t.reset(n);t.depth<this.stack.length;t.depth++){let i=this.stack[t.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+ne[i.type]);let a=this.line.markers.length;if(!s(i,this,t)){this.line.markers.length>a&&(i.end=this.line.markers[this.line.markers.length-1].to),t.forward();break}t.forward()}}lineChunkAt(t){let n=this.input.chunk(t),r;if(this.input.lineChunks)r=n==`
`?"":n;else{let i=n.indexOf(`
`);r=i<0?n:n.slice(0,i)}return t+r.length>this.to?r.slice(0,this.to-t):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(t,n,r=0){this.block=_l.create(t,r,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(t,n,r=0){this.startContext(this.parser.getNodeType(t),n,r)}addNode(t,n,r){typeof t=="number"&&(t=new Ot(this.parser.nodeSet.types[t],Js,Js,(r??this.prevLineEnd())-n)),this.block.addChild(t,n-this.block.from)}addElement(t){this.block.addChild(t.toTree(this.parser.nodeSet),t.from-this.block.from)}addLeafElement(t,n){this.addNode(this.buffer.writeElements(Hp(n.children,t.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let t=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(t.toTree(this.parser.nodeSet),t.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(t){return this.ranges.length>1?_S(this.ranges,0,t.topNode,this.ranges[0].from,this.reusePlaceholders):t}finishLeaf(t){for(let r of t.parsers)if(r.finish(this,t))return;let n=Hp(this.parser.parseInline(t.content,t.start),t.marks);this.addNode(this.buffer.writeElements(n,-t.start).finish(ne.Paragraph,t.content.length),t.start)}elt(t,n,r,i){return typeof t=="string"?Le(this.parser.getNodeType(t),n,r,i):new xS(t,n)}get buffer(){return new wS(this.parser.nodeSet)}}function _S(e,t,n,r,i){let s=e[t].to,a=[],o=[],c=n.from+r;function l(u,d){for(;d?u>=s:u>s;){let h=e[t+1].from-s;r+=h,u+=h,t++,s=e[t].to}}for(let u=n.firstChild;u;u=u.nextSibling){l(u.from+r,!0);let d=u.from+r,h,p=i.get(u.tree);p?h=p:u.to+r>s?(h=_S(e,t,u,r,i),l(u.to+r,!1)):h=u.toTree(),a.push(h),o.push(d-c)}return l(n.to+r,!1),new Ot(n.type,a,o,n.to+r-c,n.tree?n.tree.propValues:void 0)}class jp extends wy{constructor(t,n,r,i,s,a,o,c,l){super(),this.nodeSet=t,this.blockParsers=n,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=a,this.inlineParsers=o,this.inlineNames=c,this.wrappers=l,this.nodeTypes=Object.create(null);for(let u of t.types)this.nodeTypes[u.name]=u.id}createParse(t,n,r){let i=new x4(this,t,n,r);for(let s of this.wrappers)i=s(i,t,n,r);return i}configure(t){let n=Vp(t);if(!n)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),o=this.blockNames.slice(),c=this.inlineParsers.slice(),l=this.inlineNames.slice(),u=this.endLeafBlock.slice(),d=this.wrappers;if(So(n.defineNodes)){i=Object.assign({},i);let h=r.types.slice(),p;for(let O of n.defineNodes){let{name:m,block:b,composite:v,style:k}=typeof O=="string"?{name:O}:O;if(h.some(_=>_.name==m))continue;v&&(i[h.length]=(_,S,C)=>v(S,C,_.value));let y=h.length,T=v?["Block","BlockContext"]:b?y>=ne.ATXHeading1&&y<=ne.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;h.push(Yt.define({id:y,name:m,props:T&&[[je.group,T]]})),k&&(p||(p={}),Array.isArray(k)||k instanceof sr?p[m]=k:Object.assign(p,k))}r=new ho(h),p&&(r=r.extend(mi(p)))}if(So(n.props)&&(r=r.extend(...n.props)),So(n.remove))for(let h of n.remove){let p=this.blockNames.indexOf(h),O=this.inlineNames.indexOf(h);p>-1&&(s[p]=a[p]=void 0),O>-1&&(c[O]=void 0)}if(So(n.parseBlock))for(let h of n.parseBlock){let p=o.indexOf(h.name);if(p>-1)s[p]=h.parse,a[p]=h.leaf;else{let O=h.before?wl(o,h.before):h.after?wl(o,h.after)+1:o.length-1;s.splice(O,0,h.parse),a.splice(O,0,h.leaf),o.splice(O,0,h.name)}h.endLeaf&&u.push(h.endLeaf)}if(So(n.parseInline))for(let h of n.parseInline){let p=l.indexOf(h.name);if(p>-1)c[p]=h.parse;else{let O=h.before?wl(l,h.before):h.after?wl(l,h.after)+1:l.length-1;c.splice(O,0,h.parse),l.splice(O,0,h.name)}}return n.wrap&&(d=d.concat(n.wrap)),new jp(r,s,a,o,u,i,c,l,d)}getNodeType(t){let n=this.nodeTypes[t];if(n==null)throw new RangeError(`Unknown node type '${t}'`);return n}parseInline(t,n){let r=new Yp(this,t,n);e:for(let i=n;i<r.end;){let s=r.char(i);for(let a of this.inlineParsers)if(a){let o=a(r,s,i);if(o>=0){i=o;continue e}}i++}return r.resolveMarkers(0)}}function So(e){return e!=null&&e.length>0}function Vp(e){if(!Array.isArray(e))return e;if(e.length==0)return null;let t=Vp(e[0]);if(e.length==1)return t;let n=Vp(e.slice(1));if(!n||!t)return t||n;let r=(a,o)=>(a||Js).concat(o||Js),i=t.wrap,s=n.wrap;return{props:r(t.props,n.props),defineNodes:r(t.defineNodes,n.defineNodes),parseBlock:r(t.parseBlock,n.parseBlock),parseInline:r(t.parseInline,n.parseInline),remove:r(t.remove,n.remove),wrap:i?s?(a,o,c,l)=>i(s(a,o,c,l),o,c,l):i:s}}function wl(e,t){let n=e.indexOf(t);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return n}let ES=[Yt.none];for(let e=1,t;t=ne[e];e++)ES[e]=Yt.define({id:e,name:t,props:e>=ne.Escape?[]:[[je.group,e in hS?["Block","BlockContext"]:["Block","LeafBlock"]]],top:t=="Document"});const Js=[];class wS{constructor(t){this.nodeSet=t,this.content=[],this.nodes=[]}write(t,n,r,i=0){return this.content.push(t,n,r,4+i*4),this}writeElements(t,n=0){for(let r of t)r.writeTo(this,n);return this}finish(t,n){return Ot.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:t,length:n})}}let _o=class{constructor(e,t,n,r=Js){this.type=e,this.from=t,this.to=n,this.children=r}writeTo(e,t){let n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new wS(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class xS{constructor(t,n){this.tree=t,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Js}writeTo(t,n){t.nodes.push(this.tree),t.content.push(t.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function Le(e,t,n,r){return new _o(e,t,n,r)}const CS={resolve:"Emphasis",mark:"EmphasisMark"},PS={resolve:"Emphasis",mark:"EmphasisMark"},Hi={},xl={};class bn{constructor(t,n,r,i){this.type=t,this.from=n,this.to=r,this.side=i}}const RS="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Gp=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Gp=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const Wp={Escape(e,t,n){if(t!=92||n==e.end-1)return-1;let r=e.char(n+1);for(let i=0;i<RS.length;i++)if(RS.charCodeAt(i)==r)return e.append(Le(ne.Escape,n,n+2));return-1},Entity(e,t,n){if(t!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31));return r?e.append(Le(ne.Entity,n,n+1+r[0].length)):-1},InlineCode(e,t,n){if(t!=96||n&&e.char(n-1)==96)return-1;let r=n+1;for(;r<e.end&&e.char(r)==96;)r++;let i=r-n,s=0;for(;r<e.end;r++)if(e.char(r)==96){if(s++,s==i&&e.char(r+1)!=96)return e.append(Le(ne.InlineCode,n,r+1,[Le(ne.CodeMark,n,n+i),Le(ne.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(e,t,n){if(t!=60||n==e.end-1)return-1;let r=e.slice(n+1,e.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return e.append(Le(ne.Autolink,n,n+1+i[0].length,[Le(ne.LinkMark,n,n+1),Le(ne.URL,n+1,n+i[0].length),Le(ne.LinkMark,n+i[0].length,n+1+i[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return e.append(Le(ne.Comment,n,n+1+s[0].length));let a=/^\?[^]*?\?>/.exec(r);if(a)return e.append(Le(ne.ProcessingInstruction,n,n+1+a[0].length));let o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return o?e.append(Le(ne.HTMLTag,n,n+1+o[0].length)):-1},Emphasis(e,t,n){if(t!=95&&t!=42)return-1;let r=n+1;for(;e.char(r)==t;)r++;let i=e.slice(n-1,n),s=e.slice(r,r+1),a=Gp.test(i),o=Gp.test(s),c=/\s|^$/.test(i),l=/\s|^$/.test(s),u=!l&&(!o||c||a),d=!c&&(!a||l||o),h=u&&(t==42||!d||a),p=d&&(t==42||!u||o);return e.append(new bn(t==95?CS:PS,n,r,(h?1:0)|(p?2:0)))},HardBreak(e,t,n){if(t==92&&e.char(n+1)==10)return e.append(Le(ne.HardBreak,n,n+2));if(t==32){let r=n+1;for(;e.char(r)==32;)r++;if(e.char(r)==10&&r>=n+2)return e.append(Le(ne.HardBreak,n,r+1))}return-1},Link(e,t,n){return t==91?e.append(new bn(Hi,n,n+1,1)):-1},Image(e,t,n){return t==33&&e.char(n+1)==91?e.append(new bn(xl,n,n+2,1)):-1},LinkEnd(e,t,n){if(t!=93)return-1;for(let r=e.parts.length-1;r>=0;r--){let i=e.parts[r];if(i instanceof bn&&(i.type==Hi||i.type==xl)){if(!i.side||e.skipSpace(i.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[r]=null,-1;let s=e.takeContent(r),a=e.parts[r]=C4(e,s,i.type==Hi?ne.Link:ne.Image,i.from,n+1);if(i.type==Hi)for(let o=0;o<r;o++){let c=e.parts[o];c instanceof bn&&c.type==Hi&&(c.side=0)}return a.to}}return-1}};function C4(e,t,n,r,i){let{text:s}=e,a=e.char(i),o=i;if(t.unshift(Le(ne.LinkMark,r,r+(n==ne.Image?2:1))),t.push(Le(ne.LinkMark,i-1,i)),a==40){let c=e.skipSpace(i+1),l=AS(s,c-e.offset,e.offset),u;l&&(c=e.skipSpace(l.to),c!=l.to&&(u=IS(s,c-e.offset,e.offset),u&&(c=e.skipSpace(u.to)))),e.char(c)==41&&(t.push(Le(ne.LinkMark,i,i+1)),o=c+1,l&&t.push(l),u&&t.push(u),t.push(Le(ne.LinkMark,c,o)))}else if(a==91){let c=QS(s,i-e.offset,e.offset,!1);c&&(t.push(c),o=c.to)}return Le(n,r,o,t)}function AS(e,t,n){if(e.charCodeAt(t)==60){for(let r=t+1;r<e.length;r++){let i=e.charCodeAt(r);if(i==62)return Le(ne.URL,t+n,r+1+n);if(i==60||i==10)return!1}return null}else{let r=0,i=t;for(let s=!1;i<e.length;i++){let a=e.charCodeAt(i);if(qn(a))break;if(s)s=!1;else if(a==40)r++;else if(a==41){if(!r)break;r--}else a==92&&(s=!0)}return i>t?Le(ne.URL,t+n,i+n):i==e.length?null:!1}}function IS(e,t,n){let r=e.charCodeAt(t);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=t+1,a=!1;s<e.length;s++){let o=e.charCodeAt(s);if(a)a=!1;else{if(o==i)return Le(ne.LinkTitle,t+n,s+1+n);o==92&&(a=!0)}}return null}function QS(e,t,n,r){for(let i=!1,s=t+1,a=Math.min(e.length,s+999);s<a;s++){let o=e.charCodeAt(s);if(i)i=!1;else{if(o==93)return r?!1:Le(ne.LinkLabel,t+n,s+1+n);if(r&&!qn(o)&&(r=!1),o==91)return!1;o==92&&(i=!0)}}return null}class Yp{constructor(t,n,r){this.parser=t,this.text=n,this.offset=r,this.parts=[]}char(t){return t>=this.end?-1:this.text.charCodeAt(t-this.offset)}get end(){return this.offset+this.text.length}slice(t,n){return this.text.slice(t-this.offset,n-this.offset)}append(t){return this.parts.push(t),t.to}addDelimiter(t,n,r,i,s){return this.append(new bn(t,n,r,(i?1:0)|(s?2:0)))}get hasOpenLink(){for(let t=this.parts.length-1;t>=0;t--){let n=this.parts[t];if(n instanceof bn&&(n.type==Hi||n.type==xl))return!0}return!1}addElement(t){return this.append(t)}resolveMarkers(t){for(let r=t;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof bn&&i.type.resolve&&i.side&2))continue;let s=i.type==CS||i.type==PS,a=i.to-i.from,o,c=r-1;for(;c>=t;c--){let O=this.parts[c];if(O instanceof bn&&O.side&1&&O.type==i.type&&!(s&&(i.side&1||O.side&2)&&(O.to-O.from+a)%3==0&&((O.to-O.from)%3||a%3))){o=O;break}}if(!o)continue;let l=i.type.resolve,u=[],d=o.from,h=i.to;if(s){let O=Math.min(2,o.to-o.from,a);d=o.to-O,h=i.from+O,l=O==1?"Emphasis":"StrongEmphasis"}o.type.mark&&u.push(this.elt(o.type.mark,d,o.to));for(let O=c+1;O<r;O++)this.parts[O]instanceof _o&&u.push(this.parts[O]),this.parts[O]=null;i.type.mark&&u.push(this.elt(i.type.mark,i.from,h));let p=this.elt(l,d,h,u);this.parts[c]=s&&o.from!=d?new bn(o.type,o.from,d,o.side):null,(this.parts[r]=s&&i.to!=h?new bn(i.type,h,i.to,i.side):null)?this.parts.splice(r,0,p):this.parts[r]=p}let n=[];for(let r=t;r<this.parts.length;r++){let i=this.parts[r];i instanceof _o&&n.push(i)}return n}findOpeningDelimiter(t){for(let n=this.parts.length-1;n>=0;n--){let r=this.parts[n];if(r instanceof bn&&r.type==t&&r.side&1)return n}return null}takeContent(t){let n=this.resolveMarkers(t);return this.parts.length=t,n}getDelimiterAt(t){let n=this.parts[t];return n instanceof bn?n:null}skipSpace(t){return yo(this.text,t-this.offset)+this.offset}elt(t,n,r,i){return typeof t=="string"?Le(this.parser.getNodeType(t),n,r,i):new xS(t,n)}}Yp.linkStart=Hi,Yp.imageStart=xl;function Hp(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),r=0;for(let i of t){for(;r<n.length&&n[r].to<i.to;)r++;if(r<n.length&&n[r].from<i.from){let s=n[r];s instanceof _o&&(n[r]=new _o(s.type,s.from,s.to,Hp(s.children,[i])))}else n.splice(r++,0,i)}return n}const P4=[ne.CodeBlock,ne.ListItem,ne.OrderedList,ne.BulletList];class R4{constructor(t,n){this.fragments=t,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,t.length&&(this.fragment=t[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(t,n){for(;this.fragment&&this.fragment.to<=t;)this.nextFragment();if(!this.fragment||this.fragment.from>(t?t-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=t+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=n;if(!r.childAfter(i))return!1}}matches(t){let n=this.cursor.tree;return n&&n.prop(je.contextHash)==t}takeNodes(t){let n=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=t.absoluteLineStart,a=s,o=t.block.children.length,c=a,l=o;for(;;){if(n.to-r>i){if(n.type.isAnonymous&&n.firstChild())continue;break}let u=NS(n.from-r,t.ranges);if(n.to-r<=t.ranges[t.rangeI].to)t.addNode(n.tree,u);else{let d=new Ot(t.parser.nodeSet.types[ne.Paragraph],[],[],0,t.block.hashProp);t.reusePlaceholders.set(d,n.tree),t.addNode(d,u)}if(n.type.is("Block")&&(P4.indexOf(n.type.id)<0?(a=n.to-r,o=t.block.children.length):(a=c,o=l),c=n.to-r,l=t.block.children.length),!n.nextSibling())break}for(;t.block.children.length>o;)t.block.children.pop(),t.block.positions.pop();return a-s}}function NS(e,t){let n=e;for(let r=1;r<t.length;r++){let i=t[r-1].to,s=t[r].from;i<e&&(n-=s-i)}return n}const A4=mi({"Blockquote/...":Q.quote,HorizontalRule:Q.contentSeparator,"ATXHeading1/... SetextHeading1/...":Q.heading1,"ATXHeading2/... SetextHeading2/...":Q.heading2,"ATXHeading3/...":Q.heading3,"ATXHeading4/...":Q.heading4,"ATXHeading5/...":Q.heading5,"ATXHeading6/...":Q.heading6,"Comment CommentBlock":Q.comment,Escape:Q.escape,Entity:Q.character,"Emphasis/...":Q.emphasis,"StrongEmphasis/...":Q.strong,"Link/... Image/...":Q.link,"OrderedList/... BulletList/...":Q.list,"BlockQuote/...":Q.quote,"InlineCode CodeText":Q.monospace,"URL Autolink":Q.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Q.processingInstruction,"CodeInfo LinkLabel":Q.labelName,LinkTitle:Q.string,Paragraph:Q.content}),I4=new jp(new ho(ES).extend(A4),Object.keys(El).map(e=>El[e]),Object.keys(El).map(e=>SS[e]),Object.keys(El),E4,hS,Object.keys(Wp).map(e=>Wp[e]),Object.keys(Wp),[]);Q.special(Q.content),Q.special(Q.content);const Q4=1,DS=194,$S=195,N4=196,LS=197,D4=198,$4=199,L4=200,M4=2,MS=3,US=201,U4=24,q4=25,X4=49,F4=50,B4=55,z4=56,Z4=57,j4=59,V4=60,G4=61,W4=62,Y4=63,H4=65,K4=238,J4=71,e6=241,t6=242,n6=243,r6=244,i6=245,s6=246,a6=247,o6=248,qS=72,c6=249,l6=250,u6=251,d6=252,h6=253,p6=254,f6=255,m6=256,O6=73,g6=77,v6=263,b6=112,T6=130,k6=151,y6=152,S6=155,Ki=10,Eo=13,Kp=32,Cl=9,Jp=35,_6=40,E6=46,ef=123,XS=125,FS=39,BS=34,zS=92,w6=111,x6=120,C6=78,P6=117,R6=85,A6=new Set([q4,X4,F4,v6,H4,T6,z4,Z4,K4,W4,Y4,qS,O6,g6,V4,G4,k6,y6,S6,b6]);function tf(e){return e==Ki||e==Eo}function nf(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const I6=new Rt((e,t)=>{let n;if(e.next<0)e.acceptToken($4);else if(t.context.flags&Pl)tf(e.next)&&e.acceptToken(D4,1);else if(((n=e.peek(-1))<0||tf(n))&&t.canShift(LS)){let r=0;for(;e.next==Kp||e.next==Cl;)e.advance(),r++;(e.next==Ki||e.next==Eo||e.next==Jp)&&e.acceptToken(LS,-r)}else tf(e.next)&&e.acceptToken(N4,1)},{contextual:!0}),Q6=new Rt((e,t)=>{let n=t.context;if(n.flags)return;let r=e.peek(-1);if(r==Ki||r==Eo){let i=0,s=0;for(;;){if(e.next==Kp)i++;else if(e.next==Cl)i+=8-i%8;else break;e.advance(),s++}i!=n.indent&&e.next!=Ki&&e.next!=Eo&&e.next!=Jp&&(i<n.indent?e.acceptToken($S,-s):e.acceptToken(DS))}}),Pl=1,ZS=2,$r=4,Lr=8,Mr=16,Ur=32;function Rl(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const N6=new Rl(null,0,0);function D6(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)==Cl?8-t%8:1;return t}const jS=new Map([[e6,0],[t6,$r],[n6,Lr],[r6,Lr|$r],[i6,Mr],[s6,Mr|$r],[a6,Mr|Lr],[o6,Mr|Lr|$r],[c6,Ur],[l6,Ur|$r],[u6,Ur|Lr],[d6,Ur|Lr|$r],[h6,Ur|Mr],[p6,Ur|Mr|$r],[f6,Ur|Mr|Lr],[m6,Ur|Mr|Lr|$r]].map(([e,t])=>[e,t|ZS])),$6=new ko({start:N6,reduce(e,t,n,r){return e.flags&Pl&&A6.has(t)||(t==J4||t==qS)&&e.flags&ZS?e.parent:e},shift(e,t,n,r){return t==DS?new Rl(e,D6(r.read(r.pos,n.pos)),0):t==$S?e.parent:t==U4||t==B4||t==j4||t==MS?new Rl(e,0,Pl):jS.has(t)?new Rl(e,0,jS.get(t)|e.flags&Pl):e},hash(e){return e.hash}}),L6=new Rt(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(!(n==Kp||n==Cl)){n!=_6&&n!=E6&&n!=Ki&&n!=Eo&&n!=Jp&&e.acceptToken(Q4);return}}}),M6=new Rt((e,t)=>{let{flags:n}=t.context,r=n&$r?BS:FS,i=(n&Lr)>0,s=!(n&Mr),a=(n&Ur)>0,o=e.pos;for(;!(e.next<0);)if(a&&e.next==ef)if(e.peek(1)==ef)e.advance(2);else{if(e.pos==o){e.acceptToken(MS,1);return}break}else if(s&&e.next==zS){if(e.pos==o){e.advance();let c=e.next;c>=0&&(e.advance(),U6(e,c)),e.acceptToken(M4);return}break}else if(e.next==zS&&!s&&e.peek(1)>-1)e.advance(2);else if(e.next==r&&(!i||e.peek(1)==r&&e.peek(2)==r)){if(e.pos==o){e.acceptToken(US,i?3:1);return}break}else if(e.next==Ki){if(i)e.advance();else if(e.pos==o){e.acceptToken(US);return}break}else e.advance();e.pos>o&&e.acceptToken(L4)});function U6(e,t){if(t==w6)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(t==x6)for(let n=0;n<2&&nf(e.next);n++)e.advance();else if(t==P6)for(let n=0;n<4&&nf(e.next);n++)e.advance();else if(t==R6)for(let n=0;n<8&&nf(e.next);n++)e.advance();else if(t==C6&&e.next==ef){for(e.advance();e.next>=0&&e.next!=XS&&e.next!=FS&&e.next!=BS&&e.next!=Ki;)e.advance();e.next==XS&&e.advance()}}const q6=mi({'async "*" "**" FormatConversion FormatSpec':Q.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":Q.controlKeyword,"in not and or is del":Q.operatorKeyword,"from def class global nonlocal lambda":Q.definitionKeyword,import:Q.moduleKeyword,"with as print":Q.keyword,Boolean:Q.bool,None:Q.null,VariableName:Q.variableName,"CallExpression/VariableName":Q.function(Q.variableName),"FunctionDefinition/VariableName":Q.function(Q.definition(Q.variableName)),"ClassDefinition/VariableName":Q.definition(Q.className),PropertyName:Q.propertyName,"CallExpression/MemberExpression/PropertyName":Q.function(Q.propertyName),Comment:Q.lineComment,Number:Q.number,String:Q.string,FormatString:Q.special(Q.string),Escape:Q.escape,UpdateOp:Q.updateOperator,"ArithOp!":Q.arithmeticOperator,BitOp:Q.bitwiseOperator,CompareOp:Q.compareOperator,AssignOp:Q.definitionOperator,Ellipsis:Q.punctuation,At:Q.meta,"( )":Q.paren,"[ ]":Q.squareBracket,"{ }":Q.brace,".":Q.derefOperator,", ;":Q.separator}),X6={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},F6=Nr.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:$6,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[q6],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[L6,Q6,I6,M6,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>X6[e]||-1}],tokenPrec:7668}),rf=1,B6=2,z6=3,Z6=4,j6=5,V6=36,G6=37,W6=38,Y6=11,H6=13;function K6(e){return e==45||e==46||e==58||e>=65&&e<=90||e==95||e>=97&&e<=122||e>=161}function J6(e){return e==9||e==10||e==13||e==32}let VS=null,GS=null,WS=0;function sf(e,t){let n=e.pos+t;if(GS==e&&WS==n)return VS;for(;J6(e.peek(t));)t++;let r="";for(;;){let i=e.peek(t);if(!K6(i))break;r+=String.fromCharCode(i),t++}return GS=e,WS=n,VS=r||null}function YS(e,t){this.name=e,this.parent=t}const eq=new ko({start:null,shift(e,t,n,r){return t==rf?new YS(sf(r,1)||"",e):e},reduce(e,t){return t==Y6&&e?e.parent:e},reuse(e,t,n,r){let i=t.type.id;return i==rf||i==H6?new YS(sf(r,1)||"",e):e},strict:!1}),tq=new Rt((e,t)=>{if(e.next==60){if(e.advance(),e.next==47){e.advance();let n=sf(e,0);if(!n)return e.acceptToken(j6);if(t.context&&n==t.context.name)return e.acceptToken(B6);for(let r=t.context;r;r=r.parent)if(r.name==n)return e.acceptToken(z6,-2);e.acceptToken(Z6)}else if(e.next!=33&&e.next!=63)return e.acceptToken(rf)}},{contextual:!0});function af(e,t){return new Rt(n=>{let r=0,i=t.charCodeAt(0);e:for(;!(n.next<0);n.advance(),r++)if(n.next==i){for(let s=1;s<t.length;s++)if(n.peek(s)!=t.charCodeAt(s))continue e;break}r&&n.acceptToken(e)})}const nq=af(V6,"-->"),rq=af(G6,"?>"),iq=af(W6,"]]>"),sq=mi({Text:Q.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":Q.angleBracket,TagName:Q.tagName,"MismatchedCloseTag/TagName":[Q.tagName,Q.invalid],AttributeName:Q.attributeName,AttributeValue:Q.attributeValue,Is:Q.definitionOperator,"EntityReference CharacterReference":Q.character,Comment:Q.blockComment,ProcessingInst:Q.processingInstruction,DoctypeDecl:Q.documentMeta,Cdata:Q.special(Q.string)}),aq=Nr.deserialize({version:14,states:",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",stateData:")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",goto:"%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:50,context:eq,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"],["isolate",-6,13,18,19,21,22,24,""]],propSources:[sq],skippedNodes:[0],repeatNodeCount:9,tokenData:"!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",tokenizers:[tq,nq,rq,iq,0,1,2,3,4],topRules:{Document:[0,6]},tokenPrec:0}),ea=63,HS=64,oq=1,cq=2,KS=3,lq=4,JS=5,uq=6,dq=7,e_=65,hq=66,pq=8,fq=9,mq=10,Oq=11,gq=12,t_=13,vq=19,bq=20,Tq=29,kq=33,yq=34,Sq=47,_q=0,of=1,cf=2,wo=3,lf=4;class Ji{constructor(t,n,r){this.parent=t,this.depth=n,this.type=r,this.hash=(t?t.hash+t.hash<<8:0)+n+(n<<4)+r}}Ji.top=new Ji(null,-1,_q);function xo(e,t){for(let n=0,r=t-e.pos-1;;r--,n++){let i=e.peek(r);if(qr(i)||i==-1)return n}}function uf(e){return e==32||e==9}function qr(e){return e==10||e==13}function n_(e){return uf(e)||qr(e)}function es(e){return e<0||n_(e)}const Eq=new ko({start:Ji.top,reduce(e,t){return e.type==wo&&(t==bq||t==yq)?e.parent:e},shift(e,t,n,r){if(t==KS)return new Ji(e,xo(r,r.pos),of);if(t==e_||t==JS)return new Ji(e,xo(r,r.pos),cf);if(t==ea)return e.parent;if(t==vq||t==kq)return new Ji(e,0,wo);if(t==t_&&e.type==lf)return e.parent;if(t==Sq){let i=/[1-9]/.exec(r.read(r.pos,n.pos));if(i)return new Ji(e,e.depth+ +i[0],lf)}return e},hash(e){return e.hash}});function ta(e,t,n=0){return e.peek(n)==t&&e.peek(n+1)==t&&e.peek(n+2)==t&&es(e.peek(n+3))}const wq=new Rt((e,t)=>{if(e.next==-1&&t.canShift(HS))return e.acceptToken(HS);let n=e.peek(-1);if((qr(n)||n<0)&&t.context.type!=wo){if(ta(e,45))if(t.canShift(ea))e.acceptToken(ea);else return e.acceptToken(oq,3);if(ta(e,46))if(t.canShift(ea))e.acceptToken(ea);else return e.acceptToken(cq,3);let r=0;for(;e.next==32;)r++,e.advance();(r<t.context.depth||r==t.context.depth&&t.context.type==of&&(e.next!=45||!es(e.peek(1))))&&e.next!=-1&&!qr(e.next)&&e.next!=35&&e.acceptToken(ea,-r)}},{contextual:!0}),xq=new Rt((e,t)=>{if(t.context.type==wo){e.next==63&&(e.advance(),es(e.next)&&e.acceptToken(dq));return}if(e.next==45)e.advance(),es(e.next)&&e.acceptToken(t.context.type==of&&t.context.depth==xo(e,e.pos-1)?lq:KS);else if(e.next==63)e.advance(),es(e.next)&&e.acceptToken(t.context.type==cf&&t.context.depth==xo(e,e.pos-1)?uq:JS);else{let n=e.pos;for(;;)if(uf(e.next)){if(e.pos==n)return;e.advance()}else if(e.next==33)s_(e);else if(e.next==38)df(e);else if(e.next==42){df(e);break}else if(e.next==39||e.next==34){if(hf(e,!0))break;return}else if(e.next==91||e.next==123){if(!Pq(e))return;break}else{a_(e,!0,!1,0);break}for(;uf(e.next);)e.advance();if(e.next==58){if(e.pos==n&&t.canShift(Tq))return;let r=e.peek(1);es(r)&&e.acceptTokenTo(t.context.type==cf&&t.context.depth==xo(e,n)?hq:e_,n)}}},{contextual:!0});function Cq(e){return e>32&&e<127&&e!=34&&e!=37&&e!=44&&e!=60&&e!=62&&e!=92&&e!=94&&e!=96&&e!=123&&e!=124&&e!=125}function r_(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function i_(e,t){return e.next==37?(e.advance(),r_(e.next)&&e.advance(),r_(e.next)&&e.advance(),!0):Cq(e.next)||t&&e.next==44?(e.advance(),!0):!1}function s_(e){if(e.advance(),e.next==60){for(e.advance();;)if(!i_(e,!0)){e.next==62&&e.advance();break}}else for(;i_(e,!1););}function df(e){for(e.advance();!es(e.next)&&Al(e.tag)!="f";)e.advance()}function hf(e,t){let n=e.next,r=!1,i=e.pos;for(e.advance();;){let s=e.next;if(s<0)break;if(e.advance(),s==n)if(s==39)if(e.next==39)e.advance();else break;else break;else if(s==92&&n==34)e.next>=0&&e.advance();else if(qr(s)){if(t)return!1;r=!0}else if(t&&e.pos>=i+1024)return!1}return!r}function Pq(e){for(let t=[],n=e.pos+1024;;)if(e.next==91||e.next==123)t.push(e.next),e.advance();else if(e.next==39||e.next==34){if(!hf(e,!0))return!1}else if(e.next==93||e.next==125){if(t[t.length-1]!=e.next-2)return!1;if(t.pop(),e.advance(),!t.length)return!0}else{if(e.next<0||e.pos>n||qr(e.next))return!1;e.advance()}}const Rq="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function Al(e){return e<33?"u":e>125?"s":Rq[e-33]}function pf(e,t){let n=Al(e);return n!="u"&&!(t&&n=="f")}function a_(e,t,n,r){if(Al(e.next)=="s"||(e.next==63||e.next==58||e.next==45)&&pf(e.peek(1),n))e.advance();else return!1;let i=e.pos;for(;;){let s=e.next,a=0,o=r+1;for(;n_(s);){if(qr(s)){if(t)return!1;o=0}else o++;s=e.peek(++a)}if(!(s>=0&&(s==58?pf(e.peek(a+1),n):s==35?e.peek(a-1)!=32:pf(s,n)))||!n&&o<=r||o==0&&!n&&(ta(e,45,a)||ta(e,46,a)))break;if(t&&Al(s)=="f")return!1;for(let c=a;c>=0;c--)e.advance();if(t&&e.pos>i+1024)return!1}return!0}const Aq=new Rt((e,t)=>{if(e.next==33)s_(e),e.acceptToken(gq);else if(e.next==38||e.next==42){let n=e.next==38?mq:Oq;df(e),e.acceptToken(n)}else e.next==39||e.next==34?(hf(e,!1),e.acceptToken(fq)):a_(e,!1,t.context.type==wo,t.context.depth)&&e.acceptToken(pq)}),Iq=new Rt((e,t)=>{let n=t.context.type==lf?t.context.depth:-1,r=e.pos;e:for(;;){let i=0,s=e.next;for(;s==32;)s=e.peek(++i);if(!i&&(ta(e,45,i)||ta(e,46,i))||!qr(s)&&(n<0&&(n=Math.max(t.context.depth+1,i)),i<n))break;for(;;){if(e.next<0)break e;let a=qr(e.next);if(e.advance(),a)continue e;r=e.pos}}e.acceptTokenTo(t_,r)}),Qq=mi({DirectiveName:Q.keyword,DirectiveContent:Q.attributeValue,"DirectiveEnd DocEnd":Q.meta,QuotedLiteral:Q.string,BlockLiteralHeader:Q.special(Q.string),BlockLiteralContent:Q.content,Literal:Q.content,"Key/Literal Key/QuotedLiteral":Q.definition(Q.propertyName),"Anchor Alias":Q.labelName,Tag:Q.typeName,Comment:Q.lineComment,": , -":Q.separator,"?":Q.punctuation,"[ ]":Q.squareBracket,"{ }":Q.brace}),Nq=Nr.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:Eq,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[Qq],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[wq,xq,Aq,Iq,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),o_=it({}),Dq={html:FU,js:Sl.configure({dialect:"js"}),jsx:Sl.configure({dialect:"jsx"}),ts:Sl.configure({dialect:"ts"}),tsx:Sl.configure({dialect:"tsx"}),json:T4,md:I4,py:F6,xml:aq,yaml:Nq},$q={html:"html",htm:"html",javascript:"js",js:"js",jsx:"jsx",typescript:"ts",ts:"ts",tsx:"tsx",json:"json",markdown:"md",md:"md",python:"py",py:"py",xml:"xml",yaml:"yaml",yml:"yaml"},Lq=Fe(e=>{const t=cn(o_);if(e.language===void 0||t[e.language]===void 0)return g(Xe,{children:e.code});const n=t[e.language].parse(e.code),r=E3(e.code,n),i=qy(r,{Fragment:Xe,jsx:g,jsxs:g});return g(Xe,{children:i})});function Mq({children:e,className:t,...n}){return g("div",{className:Ee("group relative my-4 self-stretch rounded-bubble bg-base-active shadow-header overflow-hidden",t),...n,children:e})}function Uq({children:e,className:t,...n}){return g("div",{className:Ee("absolute top-1 right-1 z-10 flex items-center gap-1 transition-opacity duration-200 ease-out opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto",t),...n,children:e})}function qq({children:e,className:t,...n}){return g("div",{className:t,...n,children:e})}const Xr=Object.assign(Mq,{Actions:Uq,Content:qq}),c_=it(""),Xq=({code:e,language:t,className:n,...r})=>{const i=$q[t],{isCopied:s,copyToClipboard:a,disabled:o}=Fq({code:e}),c=nt(),l=Ze(!1),u=_A();return g(c_.Provider,{value:e,children:g(Xr,{"data-code-block-container":!0,"data-language":t,children:[g(Xr.Actions,{children:[g(Qt,{"aria-label":c.wrap.value,disabled:o,icon:"wrap",onClick:()=>l.value=!l.value,variant:"md-button",children:c.wrap.value}),g(Qt,{"aria-label":s.value?c.copied.value:c.copy.value,disabled:o,icon:s.value?"check":"copy",onClick:a,variant:"md-button",children:s.value?c.copied.value:c.copy.value})]}),g(Xr.Content,{className:Ee(l.value?"overflow-x-hidden":"overflow-x-auto"),children:g("div",{className:Ee("pt-1.5 pb-2",n),"data-code-block":!0,"data-language":t,"data-syntax-theme":u.value,...r,children:g("pre",{className:Ee("m-0 font-mono text-[13px] px-4 py-1.5",l.value?"whitespace-pre-wrap overflow-x-hidden":"whitespace-pre overflow-x-auto"),children:g("code",{className:Ee("block",l.value?"whitespace-pre-wrap break-all":"whitespace-pre"),children:g(Lq,{code:e,language:i})})})})})]})})};function Fq({code:e,onCopy:t,onError:n,timeout:r=2e3}={}){const i=Ze(!1),s=ue(0),a=cn(c_),{isAnimating:o}=cn(Fl),c=e??a,l=oe(async()=>{var u;if(typeof window>"u"||!((u=navigator==null?void 0:navigator.clipboard)!=null&&u.writeText)){n==null||n(new Error("Clipboard API not available"));return}try{i.value||(await navigator.clipboard.writeText(c),i.value=!0,t==null||t(),s.current=window.setTimeout(()=>{i.value=!1},r))}catch(d){n==null||n(d)}},[c,i,t,n,r]);return ve(()=>()=>{window.clearTimeout(s.current)},[]),{isCopied:i,copyToClipboard:l,disabled:o}}const Bq=(e,t,n)=>{const r=typeof t=="string"?new Blob([t],{type:n}):t,i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)};function zq({src:e,alt:t,onError:n}){const{isAnimating:r}=cn(Fl);return{downloadImage:oe(async()=>{var i;if(e)try{const s=await(await fetch(e.toString())).blob(),a=new URL(e.toString(),window.location.origin).pathname.split("/").pop()||"",o=a.includes(".")&&((i=a.split(".").pop())==null?void 0:i.length)<=4;let c="";if(o)c=a;else{const l=s.type;let u="png";l.includes("jpeg")||l.includes("jpg")?u="jpg":l.includes("png")?u="png":l.includes("svg")?u="svg":l.includes("gif")?u="gif":l.includes("webp")&&(u="webp"),c=`${(t||a||"image").toString().replace(/\.[^/.]+$/,"")}.${u}`}Bq(c,s,s.type)}catch(s){console.error("Failed to download image:",s),n==null||n(s)}},[e,t,n]),disabled:r}}const Zq=({node:e,className:t,src:n,alt:r,...i})=>{const{downloadImage:s,disabled:a}=zq({src:(n==null?void 0:n.toString())||"",alt:r==null?void 0:r.toString()}),o=nt();return n?g(Xr,{className:"inline-block self-auto","data-streamdown":"image-wrapper",children:[g(Xr.Actions,{children:g(Qt,{"aria-label":o.download.value,disabled:a,icon:"download",onClick:s,variant:"md-button",children:o.download.value})}),g(Xr.Content,{children:g("img",{alt:r,className:Ee("max-w-full",t),"data-streamdown":"image",src:n,...i})})]}):null};function jq(e){var s,a;const t=[],n=[],r=e.querySelectorAll("thead th");for(const o of Array.from(r))t.push(((s=o.textContent)==null?void 0:s.trim())||"");const i=e.querySelectorAll("tbody tr");for(const o of Array.from(i)){const c=[],l=o.querySelectorAll("td");for(const u of Array.from(l))c.push(((a=u.textContent)==null?void 0:a.trim())||"");n.push(c)}return{headers:t,rows:n}}function Vq(e){const{headers:t,rows:n}=e;if(t.length===0)return"";const r=[],i=t.map(s=>s.replace(/\|/g,"\\|"));r.push(`| ${i.join(" | ")} |`),r.push(`| ${t.map(()=>"---").join(" | ")} |`);for(const s of n){const a=[...s];for(;a.length<t.length;)a.push("");const o=a.map(c=>c.replace(/\|/g,"\\|"));r.push(`| ${o.join(" | ")} |`)}return r.join(`
`)}function Gq({onCopy:e,onError:t,timeout:n=2e3}={}){const r=Ze(!1),i=ue(0),{isAnimating:s}=cn(Fl),a=async o=>{var c,l,u;if(typeof window>"u"||!((c=navigator==null?void 0:navigator.clipboard)!=null&&c.write)){t==null||t(new Error("Clipboard API not available"));return}try{if(!r.value){const d=(u=(l=o.currentTarget)==null?void 0:l.closest('[data-streamdown="table-wrapper"]'))==null?void 0:u.querySelector("table");if(!d){t==null||t(new Error("Table not found"));return}const h=jq(d),p=new ClipboardItem({"text/plain":Vq(h),"text/html":new Blob([d.outerHTML],{type:"text/html"})});await navigator.clipboard.write([p]),r.value=!0,e==null||e(),i.current=window.setTimeout(()=>r.value=!1,n)}}catch(d){t==null||t(d)}};return ve(()=>()=>{window.clearTimeout(i.current)},[]),{isCopied:r,copyTableData:a,disabled:s}}const Wq=({children:e,className:t,...n})=>{const{isCopied:r,copyTableData:i,disabled:s}=Gq(),a=nt();return g(Xr,{"data-streamdown":"table-wrapper",children:[g(Xr.Actions,{children:g(Qt,{"aria-label":r.value?a.copied.value:a.copy.value,disabled:s,icon:r.value?"check":"copy",onClick:i,variant:"md-button",children:r.value?a.copied.value:a.copy.value})}),g(Xr.Content,{className:"overflow-x-auto",children:g("table",{className:Ee("w-full border-collapse border border-base-border",t),"data-streamdown":"table",...n,children:e})})]})},Yq=/language-([^\s]+)/;function Hq(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&(t!=null&&t.position)))return!1;const n=e.position.start,r=t.position.start,i=e.position.end,s=t.position.end;return(n==null?void 0:n.line)===(r==null?void 0:r.line)&&(n==null?void 0:n.column)===(r==null?void 0:r.column)&&(i==null?void 0:i.line)===(s==null?void 0:s.line)&&(i==null?void 0:i.column)===(s==null?void 0:s.column)}function ot(e,t){return e.className===t.className&&Hq(e.node,t.node)}const ff=Fe(({children:e,className:t,node:n,...r})=>g("ol",{className:Ee("ml-4 mb-2 list-outside list-decimal whitespace-normal text-sm",t),"data-streamdown":"ordered-list",...r,children:e}),(e,t)=>ot(e,t));ff.displayName="MarkdownOl";const l_=Fe(({children:e,className:t,node:n,...r})=>g("li",{className:Ee("py-1",t),"data-streamdown":"list-item",...r,children:e}),(e,t)=>ot(e,t));l_.displayName="MarkdownLi";const u_=Fe(({children:e,className:t,node:n,...r})=>g("ul",{className:Ee("ml-4 list-outside list-disc whitespace-normal text-sm",t),"data-streamdown":"unordered-list",...r,children:e}),(e,t)=>ot(e,t));u_.displayName="MarkdownUl";const d_=Fe(({className:e,node:t,...n})=>g("hr",{className:Ee("my-6 border-base-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>ot(e,t));d_.displayName="MarkdownHr";const h_=Fe(({children:e,className:t,node:n,...r})=>g("span",{className:Ee("font-medium",t),"data-streamdown":"strong",...r,children:e}),(e,t)=>ot(e,t));h_.displayName="MarkdownStrong";const p_=Fe(({children:e,className:t,href:n,node:r,...i})=>{const s=n==="streamdown:incomplete-link";return g("a",{className:Ee("wrap-anywhere font-medium underline",t),"data-incomplete":s,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...i,children:e})},(e,t)=>ot(e,t)&&e.href===t.href);p_.displayName="MarkdownA";const f_=Fe(({children:e,className:t,node:n,...r})=>g("h1",{className:Ee("mt-6 mb-2 text-base-primary font-semibold text-xl",t),"data-streamdown":"heading-1",...r,children:e}),(e,t)=>ot(e,t));f_.displayName="MarkdownH1";const m_=Fe(({children:e,className:t,node:n,...r})=>g("h2",{className:Ee("mt-3 mb-2 text-base-primary font-semibold text-lg",t),"data-streamdown":"heading-2",...r,children:e}),(e,t)=>ot(e,t));m_.displayName="MarkdownH2";const O_=Fe(({children:e,className:t,node:n,...r})=>g("h3",{className:Ee("mt-3 mb-1 text-base-primary font-semibold text-md",t),"data-streamdown":"heading-3",...r,children:e}),(e,t)=>ot(e,t));O_.displayName="MarkdownH3";const g_=Fe(({children:e,className:t,node:n,...r})=>g("h4",{className:Ee("mt-3 mb-1 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-4",...r,children:e}),(e,t)=>ot(e,t));g_.displayName="MarkdownH4";const v_=Fe(({children:e,className:t,node:n,...r})=>g("h5",{className:Ee("mt-3 mb-0.5 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-5",...r,children:e}),(e,t)=>ot(e,t));v_.displayName="MarkdownH5";const b_=Fe(({children:e,className:t,node:n,...r})=>g("h6",{className:Ee("mt-3 text-base-primary font-semibold text-sm",t),"data-streamdown":"heading-6",...r,children:e}),(e,t)=>ot(e,t));b_.displayName="MarkdownH6";const Kq=({node:e,...t})=>g(Wq,{...t}),T_=Fe(Kq,(e,t)=>ot(e,t));T_.displayName="MarkdownTable";const k_=Fe(({children:e,className:t,node:n,...r})=>g("thead",{className:Ee("bg-base-active/80",t),"data-streamdown":"table-header",...r,children:e}),(e,t)=>ot(e,t));k_.displayName="MarkdownThead";const y_=Fe(({children:e,className:t,node:n,...r})=>g("tbody",{className:Ee("divide-y divide-base-border bg-base-active/40",t),"data-streamdown":"table-body",...r,children:e}),(e,t)=>ot(e,t));y_.displayName="MarkdownTbody";const S_=Fe(({children:e,className:t,node:n,...r})=>g("tr",{className:Ee("border-base-border border-b",t),"data-streamdown":"table-row",...r,children:e}),(e,t)=>ot(e,t));S_.displayName="MarkdownTr";const __=Fe(({children:e,className:t,node:n,...r})=>g("th",{className:Ee("whitespace-nowrap px-4 py-2 text-left font-medium text-sm",t),"data-streamdown":"table-header-cell",...r,children:e}),(e,t)=>ot(e,t));__.displayName="MarkdownTh";const E_=Fe(({children:e,className:t,node:n,...r})=>g("td",{className:Ee("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...r,children:e}),(e,t)=>ot(e,t));E_.displayName="MarkdownTd";const w_=Fe(({children:e,className:t,node:n,...r})=>g("blockquote",{className:Ee("my-4 border-base-subtle/30 border-l-4 pl-4 text-base-subtle italic",t),"data-streamdown":"blockquote",...r,children:e}),(e,t)=>ot(e,t));w_.displayName="MarkdownBlockquote";const x_=Fe(({children:e,className:t,node:n,...r})=>g("sup",{className:Ee("text-sm",t),"data-streamdown":"superscript",...r,children:e}),(e,t)=>ot(e,t));x_.displayName="MarkdownSup";const C_=Fe(({children:e,className:t,node:n,...r})=>g("sub",{className:Ee("text-sm",t),"data-streamdown":"subscript",...r,children:e}),(e,t)=>ot(e,t));C_.displayName="MarkdownSub";const P_=Fe(({children:e,className:t,node:n,...r})=>{if("data-footnotes"in r){const i=a=>{var d,h;if(!xt(a))return!1;const o=a,c=Array.isArray(o.props.children)?o.props.children:[o.props.children];let l=!1,u=!1;for(const p of c)if(p){if(typeof p=="string")p.trim()!==""&&(l=!0);else if(xt(p))if(((d=p.props)==null?void 0:d["data-footnote-backref"])!==void 0)u=!0;else{const O=Array.isArray(p.props.children)?p.props.children:[p.props.children];for(const m of O){if(typeof m=="string"&&m.trim()!==""){l=!0;break}if(xt(m)&&((h=m.props)==null?void 0:h["data-footnote-backref"])===void 0){l=!0;break}}}}return u&&!l},s=Array.isArray(e)?e.map(a=>{if(!xt(a))return a;if(a.type===ff){const o=(Array.isArray(a.props.children)?a.props.children:[a.props.children]).filter(c=>!i(c));return o.length===0?null:{...a,props:{...a.props,children:o}}}return a}):e;return(Array.isArray(s)?s.some(a=>a!==null):s!==null)?g("section",{className:t,...r,children:s}):null}return g("section",{className:t,...r,children:e})},(e,t)=>ot(e,t));P_.displayName="MarkdownSection";const Jq=({node:e,className:t,children:n,...r})=>{var a,o,c;if(((a=e==null?void 0:e.position)==null?void 0:a.start.line)===((o=e==null?void 0:e.position)==null?void 0:o.end.line))return g("code",{className:Ee("rounded bg-base-active px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...r,children:n});const i=((c=typeof t=="string"?t.match(Yq):null)==null?void 0:c.at(1))??"";let s="";if(xt(n)){const l=n;l.props&&typeof l.props=="object"&&"children"in l.props&&typeof l.props.children=="string"&&(s=l.props.children)}else typeof n=="string"&&(s=n);return g(Xq,{code:s,"data-language":i,"data-streamdown":"code-block",language:i})},R_=Fe(Jq,(e,t)=>ot(e,t));R_.displayName="MarkdownCode";const A_=Fe(Zq,(e,t)=>ot(e,t));A_.displayName="MarkdownImg";const I_=Fe(({children:e,className:t,node:n,...r})=>{const i=(Array.isArray(e)?e:[e]).filter(s=>s!=null&&s!=="");return i.some(s=>{var a,o;return xt(s)&&((o=(a=s==null?void 0:s.props)==null?void 0:a.node)==null?void 0:o.tagName)==="img"})?i.length===1?g(Xe,{children:e}):g("div",{className:Ee("text-sm",t),...r,children:e}):g("p",{className:Ee("text-sm",t),...r,children:e})},(e,t)=>ot(e,t));I_.displayName="MarkdownParagraph";const e9={ol:ff,li:l_,ul:u_,hr:d_,strong:h_,a:p_,h1:f_,h2:m_,h3:O_,h4:g_,h5:v_,h6:b_,table:T_,thead:k_,tbody:y_,tr:S_,th:__,td:E_,blockquote:w_,code:R_,img:A_,pre:Xe,sup:x_,sub:C_,p:I_,section:P_},t9={tokenize:n9};function n9(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),$e(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return pe(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const r9={tokenize:i9},Q_={tokenize:s9};function i9(e){const t=this,n=[];let r=0,i,s,a;return o;function o(y){if(r<n.length){const T=n[r];return t.containerState=T[1],e.attempt(T[0].continuation,c,l)(y)}return l(y)}function c(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&k();const T=t.events.length;let _=T,S;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){S=t.events[_][1].end;break}v(r);let C=T;for(;C<t.events.length;)t.events[C][1].end={...S},C++;return qt(t.events,_+1,0,t.events.slice(T)),t.events.length=C,l(y)}return o(y)}function l(y){if(r===n.length){if(!i)return h(y);if(i.currentConstruct&&i.currentConstruct.concrete)return O(y);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Q_,u,d)(y)}function u(y){return i&&k(),v(r),h(y)}function d(y){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,O(y)}function h(y){return t.containerState={},e.attempt(Q_,p,O)(y)}function p(y){return r++,n.push([t.currentConstruct,t.containerState]),h(y)}function O(y){if(y===null){i&&k(),v(0),e.consume(y);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(y)}function m(y){if(y===null){b(e.exit("chunkFlow"),!0),v(0),e.consume(y);return}return pe(y)?(e.consume(y),b(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(y),m)}function b(y,T){const _=t.sliceStream(y);if(T&&_.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(_),t.parser.lazy[y.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<a&&(!i.events[S][1].end||i.events[S][1].end.offset>a))return;const C=t.events.length;let N=C,$,x;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){if($){x=t.events[N][1].end;break}$=!0}for(v(r),S=C;S<t.events.length;)t.events[S][1].end={...x},S++;qt(t.events,N+1,0,t.events.slice(C)),t.events.length=S}}function v(y){let T=n.length;for(;T-- >y;){const _=n[T];t.containerState=_[1],_[0].exit.call(t,e)}n.length=y}function k(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function s9(e,t,n){return $e(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const a9={tokenize:o9};function o9(e){const t=this,n=e.attempt(oo,r,e.attempt(this.parser.constructs.flowInitial,i,$e(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ZM,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const c9={resolveAll:D_()},l9=N_("string"),u9=N_("text");function N_(e){return{resolveAll:D_(e==="text"?d9:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(u){return l(u)?s(u):o(u)}function o(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const p=d[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function D_(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function d9(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,c;for(;s--;){const l=i[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)c=!0,o++;else if(l!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const l={type:n===e.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...l.start},r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const h9={42:an,43:an,45:an,48:an,49:an,50:an,51:an,52:an,53:an,54:an,55:an,56:an,57:an,62:oy},p9={91:YM},f9={[-2]:pp,[-1]:pp,32:pp},m9={35:n5,42:dl,45:[gy,dl],60:a5,61:gy,95:dl,96:dy,126:dy},O9={38:ly,92:cy},g9={[-5]:mp,[-4]:mp,[-3]:mp,33:_5,38:ly,42:hp,60:[wM,p5],91:w5,92:[e5,cy],93:fp,95:hp,96:UM},v9={null:[hp,c9]},b9={null:[42,95]},T9={null:[]},k9=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:b9,contentInitial:p9,disable:T9,document:h9,flow:m9,flowInitial:f9,insideSpan:v9,string:O9,text:g9},Symbol.toStringTag,{value:"Module"}));function y9(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const c={attempt:C(_),check:C(S),consume:k,enter:y,exit:T,interrupt:C(S,{interrupt:!0})},l={code:null,containerState:{},defineSkip:m,events:[],now:O,parser:e,previous:null,sliceSerialize:h,sliceStream:p,write:d};let u=t.tokenize.call(l,c);return t.resolveAll&&s.push(t),l;function d(D){return a=Xt(a,D),b(),a[a.length-1]!==null?[]:(N(t,0),l.events=Vs(s,l.events,l),l.events)}function h(D,L){return _9(p(D),L)}function p(D){return S9(a,D)}function O(){const{_bufferIndex:D,_index:L,line:V,column:F,offset:U}=r;return{_bufferIndex:D,_index:L,line:V,column:F,offset:U}}function m(D){i[D.line]=D.column,x()}function b(){let D;for(;r._index<a.length;){const L=a[r._index];if(typeof L=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<L.length;)v(L.charCodeAt(r._bufferIndex));else v(L)}}function v(D){u=u(D)}function k(D){pe(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,x()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=D}function y(D,L){const V=L||{};return V.type=D,V.start=O(),l.events.push(["enter",V,l]),o.push(V),V}function T(D){const L=o.pop();return L.end=O(),l.events.push(["exit",L,l]),L}function _(D,L){N(D,L.from)}function S(D,L){L.restore()}function C(D,L){return V;function V(F,U,H){let se,B,de,A;return Array.isArray(F)?Ae(F):"tokenize"in F?Ae([F]):xe(F);function xe(Ue){return ae;function ae(Re){const Me=Re!==null&&Ue[Re],be=Re!==null&&Ue.null,qe=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(be)?be:be?[be]:[]];return Ae(qe)(Re)}}function Ae(Ue){return se=Ue,B=0,Ue.length===0?H:R(Ue[B])}function R(Ue){return ae;function ae(Re){return A=$(),de=Ue,Ue.partial||(l.currentConstruct=Ue),Ue.name&&l.parser.constructs.disable.null.includes(Ue.name)?Ge():Ue.tokenize.call(L?Object.assign(Object.create(l),L):l,c,Oe,Ge)(Re)}}function Oe(Ue){return D(de,A),U}function Ge(Ue){return A.restore(),++B<se.length?R(se[B]):H}}}function N(D,L){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&qt(l.events,L,l.events.length-L,D.resolve(l.events.slice(L),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function $(){const D=O(),L=l.previous,V=l.currentConstruct,F=l.events.length,U=Array.from(o);return{from:F,restore:H};function H(){r=D,l.previous=L,l.currentConstruct=V,l.events.length=F,o=U,x()}}function x(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function S9(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function _9(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function E9(e){const t={constructs:Hk([k9,...(e||{}).extensions||[]]),content:n(t9),defined:[],document:n(r9),flow:n(a9),lazy:{},string:n(l9),text:n(u9)};return t;function n(r){return i;function i(s){return y9(t,r,s)}}}function w9(e){for(;!hy(e););return e}const $_=/[\0\t\n\r]/g;function x9(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const c=[];let l,u,d,h,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if($_.lastIndex=d,l=$_.exec(s),h=l&&l.index!==void 0?l.index:s.length,p=s.charCodeAt(h),!l){t=s.slice(d);break}if(p===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return o&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const L_={}.hasOwnProperty;function C9(e,t,n){return typeof t!="string"&&(n=t,t=void 0),P9(n)(w9(E9(n).document().write(x9()(e,t,!0))))}function P9(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ls),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(wi),blockQuote:s(be),characterEscape:$,characterReference:$,codeFenced:s(qe),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(qe,a),codeText:s(We,a),codeTextData:$,data:$,codeFlowValue:$,definition:s(Kt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(cs),hardBreakEscape:s(xi),hardBreakTrailing:s(xi),htmlFlow:s(pu,a),htmlFlowData:$,htmlText:s(pu,a),htmlTextData:$,image:s(km),label:a,link:s(ls),listItem:s(k8),listItemValue:h,listOrdered:s(dw,d),listUnordered:s(dw),paragraph:s(y8),reference:R,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(wi),strong:s(S8),thematicBreak:s(E8)},exit:{atxHeading:c(),atxHeadingSequence:_,autolink:c(),autolinkEmail:Me,autolinkProtocol:Re,blockQuote:c(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:Ge,characterReferenceMarkerNumeric:Ge,characterReferenceValue:Ue,characterReference:ae,codeFenced:c(b),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:O,codeFlowValue:x,codeIndented:c(v),codeText:c(U),codeTextData:x,data:x,definition:c(),definitionDestinationString:T,definitionLabelString:k,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(L),hardBreakTrailing:c(L),htmlFlow:c(V),htmlFlowData:x,htmlText:c(F),htmlTextData:x,image:c(se),label:de,labelText:B,lineEnding:D,link:c(H),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Oe,resourceDestinationString:A,resourceTitleString:xe,resource:Ae,setextHeading:c(N),setextHeadingLineSequence:C,setextHeadingText:S,strong:c(),thematicBreak:c()}};M_(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(z){let ee={type:"root",children:[]};const me={stack:[ee],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:u,data:n},tt=[];let ct=-1;for(;++ct<z.length;)if(z[ct][1].type==="listOrdered"||z[ct][1].type==="listUnordered")if(z[ct][0]==="enter")tt.push(ct);else{const Or=tt.pop();ct=i(z,Or,ct)}for(ct=-1;++ct<z.length;){const Or=t[z[ct][0]];L_.call(Or,z[ct][1].type)&&Or[z[ct][1].type].call(Object.assign({sliceSerialize:z[ct][2].sliceSerialize},me),z[ct][1])}if(me.tokenStack.length>0){const Or=me.tokenStack[me.tokenStack.length-1];(Or[1]||U_).call(me,void 0,Or[0])}for(ee.position={start:bi(z.length>0?z[0][1].start:{line:1,column:1,offset:0}),end:bi(z.length>0?z[z.length-2][1].end:{line:1,column:1,offset:0})},ct=-1;++ct<t.transforms.length;)ee=t.transforms[ct](ee)||ee;return ee}function i(z,ee,me){let tt=ee-1,ct=-1,Or=!1,fa,Zr,Mo,Uo;for(;++tt<=me;){const yn=z[tt];switch(yn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{yn[0]==="enter"?ct++:ct--,Uo=void 0;break}case"lineEndingBlank":{yn[0]==="enter"&&(fa&&!Uo&&!ct&&!Mo&&(Mo=tt),Uo=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Uo=void 0}if(!ct&&yn[0]==="enter"&&yn[1].type==="listItemPrefix"||ct===-1&&yn[0]==="exit"&&(yn[1].type==="listUnordered"||yn[1].type==="listOrdered")){if(fa){let ma=tt;for(Zr=void 0;ma--;){const jr=z[ma];if(jr[1].type==="lineEnding"||jr[1].type==="lineEndingBlank"){if(jr[0]==="exit")continue;Zr&&(z[Zr][1].type="lineEndingBlank",Or=!0),jr[1].type="lineEnding",Zr=ma}else if(!(jr[1].type==="linePrefix"||jr[1].type==="blockQuotePrefix"||jr[1].type==="blockQuotePrefixWhitespace"||jr[1].type==="blockQuoteMarker"||jr[1].type==="listItemIndent"))break}Mo&&(!Zr||Mo<Zr)&&(fa._spread=!0),fa.end=Object.assign({},Zr?z[Zr][1].start:yn[1].end),z.splice(Zr||tt,0,["exit",fa,yn[2]]),tt++,me++}if(yn[1].type==="listItemPrefix"){const ma={type:"listItem",_spread:!1,start:Object.assign({},yn[1].start),end:void 0};fa=ma,z.splice(tt,0,["enter",ma,yn[2]]),tt++,me++,Mo=void 0,Uo=!0}}}return z[ee][1]._spread=Or,me}function s(z,ee){return me;function me(tt){o.call(this,z(tt),tt),ee&&ee.call(this,tt)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(z,ee,me){this.stack[this.stack.length-1].children.push(z),this.stack.push(z),this.tokenStack.push([ee,me||void 0]),z.position={start:bi(ee.start),end:void 0}}function c(z){return ee;function ee(me){z&&z.call(this,me),l.call(this,me)}}function l(z,ee){const me=this.stack.pop(),tt=this.tokenStack.pop();if(tt)tt[0].type!==z.type&&(ee?ee.call(this,z,tt[0]):(tt[1]||U_).call(this,z,tt[0]));else throw new Error("Cannot close `"+z.type+"` ("+vo({start:z.start,end:z.end})+"): its not open");me.position.end=bi(z.end)}function u(){return ap(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(z){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(z),10),this.data.expectingFirstListItemValue=void 0}}function p(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=z}function O(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=z}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z.replace(/(\r?\n|\r)$/g,"")}function k(z){const ee=this.resume(),me=this.stack[this.stack.length-1];me.label=ee,me.identifier=Un(this.sliceSerialize(z)).toLowerCase()}function y(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.title=z}function T(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.url=z}function _(z){const ee=this.stack[this.stack.length-1];if(!ee.depth){const me=this.sliceSerialize(z).length;ee.depth=me}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function C(z){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(z).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function $(z){const ee=this.stack[this.stack.length-1].children;let me=ee[ee.length-1];(!me||me.type!=="text")&&(me=_8(),me.position={start:bi(z.start),end:void 0},ee.push(me)),this.stack.push(me)}function x(z){const ee=this.stack.pop();ee.value+=this.sliceSerialize(z),ee.position.end=bi(z.end)}function D(z){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=ee.children[ee.children.length-1];me.position.end=bi(z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ee.type)&&($.call(this,z),x.call(this,z))}function L(){this.data.atHardBreak=!0}function V(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function F(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function U(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.value=z}function H(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=ee,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function se(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=ee,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function B(z){const ee=this.sliceSerialize(z),me=this.stack[this.stack.length-2];me.label=YL(ee),me.identifier=Un(ee).toLowerCase()}function de(){const z=this.stack[this.stack.length-1],ee=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const tt=z.children;me.children=tt}else me.alt=ee}function A(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.url=z}function xe(){const z=this.resume(),ee=this.stack[this.stack.length-1];ee.title=z}function Ae(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function Oe(z){const ee=this.resume(),me=this.stack[this.stack.length-1];me.label=ee,me.identifier=Un(this.sliceSerialize(z)).toLowerCase(),this.data.referenceType="full"}function Ge(z){this.data.characterReferenceType=z.type}function Ue(z){const ee=this.sliceSerialize(z),me=this.data.characterReferenceType;let tt;me?(tt=Vk(ee,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):tt=cp(ee);const ct=this.stack[this.stack.length-1];ct.value+=tt}function ae(z){const ee=this.stack.pop();ee.position.end=bi(z.end)}function Re(z){x.call(this,z);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(z)}function Me(z){x.call(this,z);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(z)}function be(){return{type:"blockquote",children:[]}}function qe(){return{type:"code",lang:null,meta:null,value:""}}function We(){return{type:"inlineCode",value:""}}function Kt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function cs(){return{type:"emphasis",children:[]}}function wi(){return{type:"heading",depth:0,children:[]}}function xi(){return{type:"break"}}function pu(){return{type:"html",value:""}}function km(){return{type:"image",title:null,url:"",alt:null}}function ls(){return{type:"link",title:null,url:"",children:[]}}function dw(z){return{type:"list",ordered:z.type==="listOrdered",start:null,spread:z._spread,children:[]}}function k8(z){return{type:"listItem",spread:z._spread,checked:null,children:[]}}function y8(){return{type:"paragraph",children:[]}}function S8(){return{type:"strong",children:[]}}function _8(){return{type:"text",value:""}}function E8(){return{type:"thematicBreak"}}}function bi(e){return{line:e.line,column:e.column,offset:e.offset}}function M_(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?M_(e,r):R9(e,r)}}function R9(e,t){let n;for(n in t)if(L_.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function U_(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+vo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+vo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+vo({start:t.start,end:t.end})+") is still open")}function A9(e){const t=this;t.parser=n;function n(r){return C9(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function I9(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Q9(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function N9(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function D9(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $9(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function L9(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ws(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function M9(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function U9(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function q_(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function q9(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return q_(e,t);const i={src:Ws(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function X9(e,t){const n={src:Ws(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function F9(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function B9(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return q_(e,t);const i={href:Ws(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function z9(e,t){const n={href:Ws(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Z9(e,t,n){const r=e.all(t),i=n?j9(n):X_(t),s={},a=[];if(typeof t.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const u=r[o];(i||o!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,l),e.applyData(t,l)}function j9(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=X_(n[r])}return t}function X_(e){return e.spread??e.children.length>1}function V9(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function G9(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function W9(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Y9(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function H9(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=tr(t.children[1]),c=Vc(t.children[t.children.length-1]);o&&c&&(a.position={start:o,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function K9(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let o=-1;const c=[];for(;++o<a;){const u=t.children[o],d={},h=s?s[o]:void 0;h&&(d.align=h);let p={type:"element",tagName:i,properties:d,children:[]};u&&(p.children=e.all(u),e.patch(u,p),p=e.applyData(u,p)),c.push(p)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,l),e.applyData(t,l)}function J9(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const F_=9,B_=32;function e7(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(z_(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(z_(t.slice(i),i>0,!1)),s.join("")}function z_(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===F_||s===B_;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===F_||s===B_;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function t7(e,t){const n={type:"text",value:e7(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function n7(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const r7={blockquote:I9,break:Q9,code:N9,delete:D9,emphasis:$9,footnoteReference:L9,heading:M9,html:U9,imageReference:q9,image:X9,inlineCode:F9,linkReference:B9,link:z9,listItem:Z9,list:V9,paragraph:G9,root:W9,strong:Y9,table:H9,tableCell:J9,tableRow:K9,text:t7,thematicBreak:n7,toml:Il,yaml:Il,definition:Il,footnoteDefinition:Il};function Il(){}function i7(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function s7(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function a7(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||i7,r=e.options.footnoteBackLabel||s7,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[c]);if(!l)continue;const u=e.all(l),d=String(l.identifier).toUpperCase(),h=Ws(d.toLowerCase());let p=0;const O=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++p<=m;){O.length>0&&O.push({type:"text",value:" "});let k=typeof n=="string"?n:n(c,p);typeof k=="string"&&(k={type:"text",value:k}),O.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...O)}else u.push(...O);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(u,!0)};e.patch(l,v),o.push(v)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Fi(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const mf={}.hasOwnProperty,o7={};function c7(e,t){const n=t||o7,r=new Map,i=new Map,s=new Map,a={...r7,...n.handlers},o={all:l,applyData:u7,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:l7,wrap:h7};return Bs(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),o;function c(u,d){const h=u.type,p=o.handlers[h];if(mf.call(o.handlers,h)&&p)return p(o,u,d);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in u){const{children:O,...m}=u,b=Fi(m);return b.children=o.all(u),b}return Fi(u)}return(o.options.unknownHandler||d7)(o,u,d)}function l(u){const d=[];if("children"in u){const h=u.children;let p=-1;for(;++p<h.length;){const O=o.one(h[p],u);if(O){if(p&&h[p-1].type==="break"&&(!Array.isArray(O)&&O.type==="text"&&(O.value=Z_(O.value)),!Array.isArray(O)&&O.type==="element")){const m=O.children[0];m&&m.type==="text"&&(m.value=Z_(m.value))}Array.isArray(O)?d.push(...O):d.push(O)}}}return d}}function l7(e,t){e.position&&(t.position=V0(e))}function u7(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Fi(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function d7(e,t){const n=t.data||{},r="value"in t&&!(mf.call(n,"hProperties")||mf.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function h7(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Z_(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function j_(e,t){const n=c7(e,t),r=n.one(e,void 0),i=a7(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function p7(e,t){return e&&"run"in e?async function(n,r){const i=j_(n,{file:r,...t});await e.run(i,r)}:function(n,r){return j_(n,{file:r,...e||t})}}function V_(e){if(e)throw e}var Of,G_;function f7(){if(G_)return Of;G_=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},s=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var l=e.call(c,"constructor"),u=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!l&&!u)return!1;var d;for(d in c);return typeof d>"u"||e.call(c,d)},a=function(c,l){n&&l.name==="__proto__"?n(c,l.name,{enumerable:!0,configurable:!0,value:l.newValue,writable:!0}):c[l.name]=l.newValue},o=function(c,l){if(l==="__proto__")if(e.call(c,l)){if(r)return r(c,l).value}else return;return c[l]};return Of=function c(){var l,u,d,h,p,O,m=arguments[0],b=1,v=arguments.length,k=!1;for(typeof m=="boolean"&&(k=m,m=arguments[1]||{},b=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});b<v;++b)if(l=arguments[b],l!=null)for(u in l)d=o(m,u),h=o(l,u),m!==h&&(k&&h&&(s(h)||(p=i(h)))?(p?(p=!1,O=d&&i(d)?d:[]):O=d&&s(d)?d:{},a(m,{name:u,newValue:c(k,O,h)})):typeof h<"u"&&a(m,{name:u,newValue:h}));return m},Of}var m7=f7();const gf=Iy(m7);function vf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function O7(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(c,...l){const u=e[++s];let d=-1;if(c){a(c);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,u?g7(u,o)(...l):a(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function g7(e,t){let n;return r;function r(...a){const o=e.length>a.length;let c;o&&a.push(i);try{c=e.apply(this,a)}catch(l){const u=l;if(o&&n)throw u;return i(u)}o||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const lr={basename:v7,dirname:b7,extname:T7,join:k7,sep:"/"};function v7(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Co(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function b7(e){if(Co(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function T7(e){Co(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function k7(...e){let t=-1,n;for(;++t<e.length;)Co(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":y7(n)}function y7(e){Co(e);const t=e.codePointAt(0)===47;let n=S7(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function S7(e,t){let n="",r=0,i=-1,s=0,a=-1,o,c;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Co(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _7={cwd:E7};function E7(){return"/"}function bf(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function w7(e){if(typeof e=="string")e=new URL(e);else if(!bf(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return x7(e)}function x7(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Tf=["history","path","basename","stem","extname","dirname"];class C7{constructor(t){let n;t?bf(t)?n={path:t}:typeof t=="string"||P7(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":_7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Tf.length;){const s=Tf[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Tf.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?lr.basename(this.path):void 0}set basename(t){yf(t,"basename"),kf(t,"basename"),this.path=lr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?lr.dirname(this.path):void 0}set dirname(t){W_(this.basename,"dirname"),this.path=lr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?lr.extname(this.path):void 0}set extname(t){if(kf(t,"extname"),W_(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){bf(t)&&(t=w7(t)),yf(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?lr.basename(this.path,this.extname):void 0}set stem(t){yf(t,"stem"),kf(t,"stem"),this.path=lr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Vt(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function kf(e,t){if(e&&e.includes(lr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+lr.sep+"`")}function yf(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function W_(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function P7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const R7=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},A7={}.hasOwnProperty;class Sf extends R7{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=O7()}copy(){const t=new Sf;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(gf(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(wf("data",this.frozen),this.namespace[t]=n,this):A7.call(this.namespace,t)&&this.namespace[t]||void 0:t?(wf("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ql(t),r=this.parser||this.Parser;return _f("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),_f("process",this.parser||this.Parser),Ef("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=Ql(t),c=r.parse(o);r.run(c,o,function(u,d,h){if(u||!d||!h)return l(u);const p=d,O=r.stringify(p,h);N7(O)?h.value=O:h.result=O,l(u,h)});function l(u,d){u||!d?a(u):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),_f("processSync",this.parser||this.Parser),Ef("processSync",this.compiler||this.Compiler),this.process(t,i),H_("processSync","process",n),r;function i(s,a){n=!0,V_(s),r=a}}run(t,n,r){Y_(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const c=Ql(n);i.run(t,c,l);function l(u,d,h){const p=d||t;u?o(u):a?a(p):r(void 0,p,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),H_("runSync","run",r),i;function s(a,o){V_(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=Ql(n),i=this.compiler||this.Compiler;return Ef("stringify",i),Y_(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(wf("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...d]=l;c(u,d)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=gf(!0,i.settings,l.settings))}function o(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const d=l[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===l){h=d;break}if(h===-1)r.push([l,...u]);else if(u.length>0){let[p,...O]=u;const m=r[h][1];vf(m)&&vf(p)&&(p=gf(!0,m,p)),r[h]=[l,p,...O]}}}}const I7=new Sf().freeze();function _f(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Ef(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function wf(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Y_(e){if(!vf(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function H_(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ql(e){return Q7(e)?e:new C7(e)}function Q7(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function N7(e){return typeof e=="string"||D7(e)}function D7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const K_=[],J_={allowDangerousHtml:!0},Nl=new WeakMap;class $7{constructor(){ge(this,"cache",new Map);ge(this,"keyCache",new WeakMap);ge(this,"maxSize",100)}generateCacheKey(t){const n=this.keyCache.get(t);if(n)return n;const r=t.rehypePlugins,i=t.remarkPlugins,s=t.remarkRehypeOptions;if(!(r||i||s)){const d="default";return this.keyCache.set(t,d),d}const a=d=>{if(!d||d.length===0)return"";let h="";for(let p=0;p<d.length;p+=1){const O=d[p];if(p>0&&(h+=","),Array.isArray(O)){const[m,b]=O;if(typeof m=="function"){let v=Nl.get(m);v||(v=m.name||"anonymous",Nl.set(m,v)),h+=v}else h+=String(m);h+=":",h+=JSON.stringify(b)}else if(typeof O=="function"){let m=Nl.get(O);m||(m=O.name||"anonymous",Nl.set(O,m)),h+=m}else h+=String(O)}return h},o=a(r),c=a(i),l=s?JSON.stringify(s):"",u=`${c}::${o}::${l}`;return this.keyCache.set(t,u),u}get(t){const n=this.generateCacheKey(t),r=this.cache.get(n);return r&&(this.cache.delete(n),this.cache.set(n,r)),r}set(t,n){const r=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){const i=this.cache.keys().next().value;i&&this.cache.delete(i)}this.cache.set(r,n)}clear(){this.cache.clear()}}const e1=new $7,L7=e=>{const t=M7(e),n=e.children||"";return q7(t.runSync(t.parse(n),n),e)},M7=e=>{const t=e1.get(e);if(t)return t;const n=U7(e);return e1.set(e,n),n},U7=e=>{const t=e.rehypePlugins||K_,n=e.remarkPlugins||K_,r=e.remarkRehypeOptions?{...J_,...e.remarkRehypeOptions}:J_;return I7().use(A9).use(n).use(p7,r).use(t)},q7=(e,t)=>qy(e,{Fragment:Xe,components:t.components,ignoreInvalidStyle:!0,jsx:g,jsxs:g,passKeys:!0,passNode:!0});function X7(e){return e.startsWith("https://")||e.startsWith("http://")}function F7(e){const{allowedHosts:t,includeWww:n,allowHttp:r}=e;if(t.length===0)return[];if(t.includes("*"))return["*"];const i=new Set;for(const s of t){const a=s.trim();if(!a)continue;if(X7(a)){i.add(a);continue}const o=a.replace(/\.$/,"");i.add(`https://${o}`),r&&i.add(`http://${o}`),n&&!o.startsWith("www.")&&(i.add(`https://www.${o}`),r&&i.add(`http://www.${o}`))}return[...i]}function xf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ts=xf();function t1(e){ts=e}var Po={exec:()=>null};function ze(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(Ht.caret,"$1"),n=n.replace(i,a),r},getRegex:()=>new RegExp(n,t)};return r}var B7=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ht={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},z7=/^(?:[ \t]*(?:\n|$))+/,Z7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,j7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ro=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,V7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Cf=/(?:[*+-]|\d{1,9}[.)])/,n1=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,r1=ze(n1).replace(/bull/g,Cf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),G7=ze(n1).replace(/bull/g,Cf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Pf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,W7=/^[^\n]+/,Rf=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Y7=ze(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Rf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),H7=ze(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Cf).getRegex(),Dl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Af=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,K7=ze("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Af).replace("tag",Dl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),i1=ze(Pf).replace("hr",Ro).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dl).getRegex(),J7=ze(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",i1).getRegex(),If={blockquote:J7,code:Z7,def:Y7,fences:j7,heading:V7,hr:Ro,html:K7,lheading:r1,list:H7,newline:z7,paragraph:i1,table:Po,text:W7},s1=ze("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ro).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dl).getRegex(),eX={...If,lheading:G7,table:s1,paragraph:ze(Pf).replace("hr",Ro).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",s1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dl).getRegex()},tX={...If,html:ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Af).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Po,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ze(Pf).replace("hr",Ro).replace("heading",` *#{1,6} *[^
]`).replace("lheading",r1).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},nX=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rX=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,a1=/^( {2,}|\\)\n(?!\s*$)/,iX=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,$l=/[\p{P}\p{S}]/u,Qf=/[\s\p{P}\p{S}]/u,o1=/[^\s\p{P}\p{S}]/u,sX=ze(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Qf).getRegex(),c1=/(?!~)[\p{P}\p{S}]/u,aX=/(?!~)[\s\p{P}\p{S}]/u,oX=/(?:[^\s\p{P}\p{S}]|~)/u,cX=ze(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",B7?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),l1=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,lX=ze(l1,"u").replace(/punct/g,$l).getRegex(),uX=ze(l1,"u").replace(/punct/g,c1).getRegex(),u1="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",dX=ze(u1,"gu").replace(/notPunctSpace/g,o1).replace(/punctSpace/g,Qf).replace(/punct/g,$l).getRegex(),hX=ze(u1,"gu").replace(/notPunctSpace/g,oX).replace(/punctSpace/g,aX).replace(/punct/g,c1).getRegex(),pX=ze("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,o1).replace(/punctSpace/g,Qf).replace(/punct/g,$l).getRegex(),fX=ze(/\\(punct)/,"gu").replace(/punct/g,$l).getRegex(),mX=ze(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),OX=ze(Af).replace("(?:-->|$)","-->").getRegex(),gX=ze("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",OX).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ll=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,vX=ze(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ll).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),d1=ze(/^!?\[(label)\]\[(ref)\]/).replace("label",Ll).replace("ref",Rf).getRegex(),h1=ze(/^!?\[(ref)\](?:\[\])?/).replace("ref",Rf).getRegex(),bX=ze("reflink|nolink(?!\\()","g").replace("reflink",d1).replace("nolink",h1).getRegex(),p1=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Nf={_backpedal:Po,anyPunctuation:fX,autolink:mX,blockSkip:cX,br:a1,code:rX,del:Po,emStrongLDelim:lX,emStrongRDelimAst:dX,emStrongRDelimUnd:pX,escape:nX,link:vX,nolink:h1,punctuation:sX,reflink:d1,reflinkSearch:bX,tag:gX,text:iX,url:Po},TX={...Nf,link:ze(/^!?\[(label)\]\((.*?)\)/).replace("label",Ll).getRegex(),reflink:ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ll).getRegex()},Df={...Nf,emStrongRDelimAst:hX,emStrongLDelim:uX,url:ze(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",p1).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ze(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",p1).getRegex()},kX={...Df,br:ze(a1).replace("{2,}","*").getRegex(),text:ze(Df.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ml={normal:If,gfm:eX,pedantic:tX},Ao={normal:Nf,gfm:Df,breaks:kX,pedantic:TX},yX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f1=e=>yX[e];function Fr(e,t){if(t){if(Ht.escapeTest.test(e))return e.replace(Ht.escapeReplace,f1)}else if(Ht.escapeTestNoEncode.test(e))return e.replace(Ht.escapeReplaceNoEncode,f1);return e}function m1(e){try{e=encodeURI(e).replace(Ht.percentDecode,"%")}catch{return null}return e}function O1(e,t){var s;let n=e.replace(Ht.findPipe,(a,o,c)=>{let l=!1,u=o;for(;--u>=0&&c[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Ht.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Ht.slashPipe,"|");return r}function Io(e,t,n){let r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function SX(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function g1(e,t,n,r,i){let s=t.href,a=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,c}function _X(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let i=r[1];return t.split(`
`).map(s=>{let a=s.match(n.other.beginningSpace);if(a===null)return s;let[o]=a;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var Ul=class{constructor(e){ge(this,"options");ge(this,"rules");ge(this,"lexer");this.options=e||ts}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Io(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=_X(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Io(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Io(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Io(t[0],`
`).split(`
`),r="",i="",s=[];for(;n.length>0;){let a=!1,o=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))o.push(n[c]),a=!0;else if(!a)o.push(n[c]);else break;n=n.slice(c);let l=o.join(`
`),u=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${l}`:l,i=i?`${i}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;let h=s.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let p=h,O=p.raw+`
`+n.join(`
`),m=this.blockquote(O);s[s.length-1]=m,r=r.substring(0,r.length-p.raw.length)+m.raw,i=i.substring(0,i.length-p.text.length)+m.text;break}else if((h==null?void 0:h.type)==="list"){let p=h,O=p.raw+`
`+n.join(`
`),m=this.list(O);s[s.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,i=i.substring(0,i.length-p.raw.length)+m.raw,n=O.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(e){var n,r;let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim(),s=i.length>1,a={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");let o=this.rules.other.listItemRegex(i),c=!1;for(;e;){let u=!1,d="",h="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;d=t[0],e=e.substring(d.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),O=e.split(`
`,1)[0],m=!p.trim(),b=0;if(this.options.pedantic?(b=2,h=p.trimStart()):m?b=t[1].length+1:(b=t[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,h=p.slice(b),b+=t[1].length),m&&this.rules.other.blankLine.test(O)&&(d+=O+`
`,e=e.substring(O.length+1),u=!0),!u){let v=this.rules.other.nextBulletRegex(b),k=this.rules.other.hrRegex(b),y=this.rules.other.fencesBeginRegex(b),T=this.rules.other.headingBeginRegex(b),_=this.rules.other.htmlBeginRegex(b);for(;e;){let S=e.split(`
`,1)[0],C;if(O=S,this.options.pedantic?(O=O.replace(this.rules.other.listReplaceNesting,"  "),C=O):C=O.replace(this.rules.other.tabCharGlobal,"    "),y.test(O)||T.test(O)||_.test(O)||v.test(O)||k.test(O))break;if(C.search(this.rules.other.nonSpaceChar)>=b||!O.trim())h+=`
`+C.slice(b);else{if(m||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||T.test(p)||k.test(p))break;h+=`
`+O}!m&&!O.trim()&&(m=!0),d+=S+`
`,e=e.substring(S.length+1),p=C.slice(b)}}a.loose||(c?a.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(c=!0)),a.items.push({type:"list_item",raw:d,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=d}let l=a.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let u of a.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),((n=u.tokens[0])==null?void 0:n.type)==="text"||((r=u.tokens[0])==null?void 0:r.type)==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let d=this.rules.other.listTaskCheckbox.exec(u.raw);if(d){let h={type:"checkbox",raw:d[0]+" ",checked:d[0]!=="[ ]"};u.checked=h.checked,a.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=h.raw+u.tokens[0].raw,u.tokens[0].text=h.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(h)):u.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):u.tokens.unshift(h)}}if(!a.loose){let d=u.tokens.filter(p=>p.type==="space"),h=d.length>0&&d.some(p=>this.rules.other.anyLine.test(p.raw));a.loose=h}}if(a.loose)for(let u of a.items){u.loose=!0;for(let d of u.tokens)d.type==="text"&&(d.type="paragraph")}return a}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){var a;let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=O1(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(let o of i)s.rows.push(O1(o,s.header.length).map((c,l)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Io(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=SX(t[2],"()");if(s===-2)return;if(s>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),g1(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return g1(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...r[0]].length-1,s,a,o=i,c=0,l=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);(r=l.exec(t))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(a=[...s].length,r[3]||r[4]){o+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){c+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+c);let u=[...r[0]][0].length,d=e.slice(0,i+r.index+u+a);if(Math.min(i,a)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Cn=class Sm{constructor(t){ge(this,"tokens");ge(this,"options");ge(this,"state");ge(this,"inlineQueue");ge(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ts,this.options.tokenizer=this.options.tokenizer||new Ul,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Ht,block:Ml.normal,inline:Ao.normal};this.options.pedantic?(n.block=Ml.pedantic,n.inline=Ao.pedantic):this.options.gfm&&(n.block=Ml.gfm,this.options.breaks?n.inline=Ao.breaks:n.inline=Ao.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ml,inline:Ao}}static lex(t,n){return new Sm(n).lex(t)}static lexInline(t,n){return new Sm(n).inlineTokens(t)}lex(t){t=t.replace(Ht.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var i,s,a;for(this.options.pedantic&&(t=t.replace(Ht.tabCharGlobal,"    ").replace(Ht.spaceLine,""));t;){let o;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(l=>(o=l.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let l=n.at(-1);o.raw.length===1&&l!==void 0?l.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.at(-1).src=l.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let c=t;if((a=this.options.extensions)!=null&&a.startBlock){let l=1/0,u=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(c=t.substring(0,l+1))}if(this.state.top&&(o=this.tokenizer.paragraph(c))){let l=n.at(-1);r&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(o),r=c.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let l=n.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(o);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var c,l,u,d,h;let r=t,i=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)p.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((l=(c=this.options.hooks)==null?void 0:c.emStrongMask)==null?void 0:l.call({lexer:this},r))??r;let a=!1,o="";for(;t;){a||(o=""),a=!1;let p;if((d=(u=this.options.extensions)==null?void 0:u.inline)!=null&&d.some(m=>(p=m.call({lexer:this},t,n))?(t=t.substring(p.raw.length),n.push(p),!0):!1))continue;if(p=this.tokenizer.escape(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.tag(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.link(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(p.raw.length);let m=n.at(-1);p.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=p.raw,m.text+=p.text):n.push(p);continue}if(p=this.tokenizer.emStrong(t,r,o)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.codespan(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.br(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.del(t)){t=t.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.autolink(t)){t=t.substring(p.raw.length),n.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(t))){t=t.substring(p.raw.length),n.push(p);continue}let O=t;if((h=this.options.extensions)!=null&&h.startInline){let m=1/0,b=t.slice(1),v;this.options.extensions.startInline.forEach(k=>{v=k.call({lexer:this},b),typeof v=="number"&&v>=0&&(m=Math.min(m,v))}),m<1/0&&m>=0&&(O=t.substring(0,m+1))}if(p=this.tokenizer.inlineText(O)){t=t.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(o=p.raw.slice(-1)),a=!0;let m=n.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=p.raw,m.text+=p.text):n.push(p);continue}if(t){let m="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return n}},ql=class{constructor(e){ge(this,"options");ge(this,"parser");this.options=e||ts}space(e){return""}code({text:e,lang:t,escaped:n}){var s;let r=(s=(t||"").match(Ht.notSpaceStart))==null?void 0:s[0],i=e.replace(Ht.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Fr(r)+'">'+(n?i:Fr(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Fr(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let a=0;a<e.items.length;a++){let o=e.items[a];r+=this.listitem(o)}let i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){let s=e.rows[i];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Fr(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=m1(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+Fr(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=m1(e);if(i===null)return Fr(n);e=i;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Fr(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Fr(e.text)}},$f=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Xn=class _m{constructor(t){ge(this,"options");ge(this,"renderer");ge(this,"textRenderer");this.options=t||ts,this.options.renderer=this.options.renderer||new ql,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $f}static parse(t,n){return new _m(n).parse(t)}static parseInline(t,n){return new _m(n).parseInline(t)}parse(t){var r,i;let n="";for(let s=0;s<t.length;s++){let a=t[s];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[a.type]){let c=a,l=this.options.extensions.renderers[c.type].call({parser:this},c);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){n+=l||"";continue}}let o=a;switch(o.type){case"space":{n+=this.renderer.space(o);break}case"hr":{n+=this.renderer.hr(o);break}case"heading":{n+=this.renderer.heading(o);break}case"code":{n+=this.renderer.code(o);break}case"table":{n+=this.renderer.table(o);break}case"blockquote":{n+=this.renderer.blockquote(o);break}case"list":{n+=this.renderer.list(o);break}case"checkbox":{n+=this.renderer.checkbox(o);break}case"html":{n+=this.renderer.html(o);break}case"def":{n+=this.renderer.def(o);break}case"paragraph":{n+=this.renderer.paragraph(o);break}case"text":{n+=this.renderer.text(o);break}default:{let c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(t,n=this.renderer){var i,s;let r="";for(let a=0;a<t.length;a++){let o=t[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=l||"";continue}}let c=o;switch(c.type){case"escape":{r+=n.text(c);break}case"html":{r+=n.html(c);break}case"link":{r+=n.link(c);break}case"image":{r+=n.image(c);break}case"checkbox":{r+=n.checkbox(c);break}case"strong":{r+=n.strong(c);break}case"em":{r+=n.em(c);break}case"codespan":{r+=n.codespan(c);break}case"br":{r+=n.br(c);break}case"del":{r+=n.del(c);break}case"text":{r+=n.text(c);break}default:{let l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},Qo=(hu=class{constructor(e){ge(this,"options");ge(this,"block");this.options=e||ts}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Cn.lex:Cn.lexInline}provideParser(){return this.block?Xn.parse:Xn.parseInline}},ge(hu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),ge(hu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),hu),EX=class{constructor(...e){ge(this,"defaults",xf());ge(this,"options",this.setOptions);ge(this,"parse",this.parseMarkdown(!0));ge(this,"parseInline",this.parseMarkdown(!1));ge(this,"Parser",Xn);ge(this,"Renderer",ql);ge(this,"TextRenderer",$f);ge(this,"Lexer",Cn);ge(this,"Tokenizer",Ul);ge(this,"Hooks",Qo);this.use(...e)}walkTokens(e,t){var r,i;let n=[];for(let s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{let a=s;for(let o of a.header)n=n.concat(this.walkTokens(o.tokens,t));for(let o of a.rows)for(let c of o)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{let a=s;n=n.concat(this.walkTokens(a.items,t));break}default:{let a=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{let c=a[o].flat(1/0);n=n.concat(this.walkTokens(c,t))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=t.renderers[i.name];s?t.renderers[i.name]=function(...a){let o=i.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){let i=this.defaults.renderer||new ql(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let a=s,o=n.renderer[a],c=i[a];i[a]=(...l)=>{let u=o.apply(i,l);return u===!1&&(u=c.apply(i,l)),u||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new Ul(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,o=n.tokenizer[a],c=i[a];i[a]=(...l)=>{let u=o.apply(i,l);return u===!1&&(u=c.apply(i,l)),u}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new Qo;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let a=s,o=n.hooks[a],c=i[a];Qo.passThroughHooks.has(s)?i[a]=l=>{if(this.defaults.async&&Qo.passThroughHooksRespectAsync.has(s))return(async()=>{let d=await o.call(i,l);return c.call(i,d)})();let u=o.call(i,l);return c.call(i,u)}:i[a]=(...l)=>{if(this.defaults.async)return(async()=>{let d=await o.apply(i,l);return d===!1&&(d=await c.apply(i,l)),d})();let u=o.apply(i,l);return u===!1&&(u=c.apply(i,l)),u}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),i&&(o=o.concat(i.call(this,a))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Cn.lex(e,t??this.defaults)}parser(e,t){return Xn.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=e),i.async)return(async()=>{let a=i.hooks?await i.hooks.preprocess(t):t,o=await(i.hooks?await i.hooks.provideLexer():e?Cn.lex:Cn.lexInline)(a,i),c=i.hooks?await i.hooks.processAllTokens(o):o;i.walkTokens&&await Promise.all(this.walkTokens(c,i.walkTokens));let l=await(i.hooks?await i.hooks.provideParser():e?Xn.parse:Xn.parseInline)(c,i);return i.hooks?await i.hooks.postprocess(l):l})().catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));let a=(i.hooks?i.hooks.provideLexer():e?Cn.lex:Cn.lexInline)(t,i);i.hooks&&(a=i.hooks.processAllTokens(a)),i.walkTokens&&this.walkTokens(a,i.walkTokens);let o=(i.hooks?i.hooks.provideParser():e?Xn.parse:Xn.parseInline)(a,i);return i.hooks&&(o=i.hooks.postprocess(o)),o}catch(a){return s(a)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Fr(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},ns=new EX;function Ke(e,t){return ns.parse(e,t)}Ke.options=Ke.setOptions=function(e){return ns.setOptions(e),Ke.defaults=ns.defaults,t1(Ke.defaults),Ke},Ke.getDefaults=xf,Ke.defaults=ts,Ke.use=function(...e){return ns.use(...e),Ke.defaults=ns.defaults,t1(Ke.defaults),Ke},Ke.walkTokens=function(e,t){return ns.walkTokens(e,t)},Ke.parseInline=ns.parseInline,Ke.Parser=Xn,Ke.parser=Xn.parse,Ke.Renderer=ql,Ke.TextRenderer=$f,Ke.Lexer=Cn,Ke.lexer=Cn.lex,Ke.Tokenizer=Ul,Ke.Hooks=Qo,Ke.parse=Ke,Ke.options,Ke.setOptions,Ke.use,Ke.walkTokens,Ke.parseInline,Xn.parse,Cn.lex;const wX=/\[\^[^\]\s]{1,200}\](?!:)/,xX=/\[\^[^\]\s]{1,200}\]:/,CX=/<\/(\w+)>/,PX=/<(\w+)[\s>]/,Lf=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},RX=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},Mf=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},AX=e=>{const t=wX.test(e),n=xX.test(e);if(t||n)return[e];const r=Cn.lex(e,{gfm:!0}),i=[],s=[];for(const a of r){const o=a.raw,c=i.length;if(s.length>0){if(i[c-1]+=o,a.type==="html"){const l=o.match(CX);if(l){const u=l[1];s.at(-1)===u&&s.pop()}}continue}if(a.type==="html"&&a.block){const l=o.match(PX);if(l){const u=l[1];o.includes(`</${u}>`)||s.push(u)}}if(o.trim()==="$$"&&c>0){const l=i[c-1],u=Lf(l),d=Mf(l);if(u&&d%2===1){i[c-1]=l+o;continue}}if(c>0&&RX(o)){const l=i[c-1],u=Lf(l),d=Mf(l),h=Mf(o);if(u&&d%2===1&&!Lf(o)&&h===1){i[c-1]=l+o;continue}}i.push(o)}return i},IX=/(\*\*)([^*]*?)$/,QX=/(__)([^_]*?)$/,NX=/(\*\*\*)([^*]*?)$/,DX=/(\*)([^*]*?)$/,$X=/(_)([^_]*?)$/,LX=/(`)([^`]*?)$/,MX=/(~~)([^~]*?)$/,rs=/^[\s_~*`]*$/,v1=/^[\s]*[-*+][\s]+$/,UX=/[\p{L}\p{N}_]/u,qX=/^```[^`\n]*```?$/,XX=/^\*{4,}$/,Ti=e=>{if(!e)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:UX.test(e)},Xl=e=>{const t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},FX=(e,t)=>{let n=1;for(let r=t-1;r>=0;r-=1)if(e[r]==="]")n+=1;else if(e[r]==="["&&(n-=1,n===0))return r;return-1},BX=(e,t)=>{let n=1;for(let r=t+1;r<e.length;r+=1)if(e[r]==="[")n+=1;else if(e[r]==="]"&&(n-=1,n===0))return r;return-1},Uf=(e,t)=>{let n=!1,r=!1;for(let i=0;i<t;i+=1){if(e.substring(i,i+3)==="```"){r=!r,i+=2;continue}!r&&e[i]==="`"&&(n=!n)}return n||r},zX=e=>{const t=e.lastIndexOf("](");if(t!==-1&&!Uf(e,t)&&!e.substring(t+2).includes(")")){const n=FX(e,t);if(n!==-1&&!Uf(e,n)){const r=n>0&&e[n-1]==="!",i=r?n-1:n,s=e.substring(0,i),a=e.substring(n+1,t);return r?s:`${s}[${a}](streamdown:incomplete-link)`}}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!Uf(e,n)){const r=n>0&&e[n-1]==="!",i=r?n-1:n;if(!e.substring(n+1).includes("]")){const s=e.substring(0,i);return r?s:`${e}](streamdown:incomplete-link)`}if(BX(e,n)===-1){const s=e.substring(0,i);return r?s:`${e}](streamdown:incomplete-link)`}}return e},ZX=e=>{if(Xl(e))return e;const t=e.match(IX);if(t){const n=t[2];if(!n||rs.test(n))return e;const r=e.lastIndexOf(t[1]),i=e.substring(0,r).lastIndexOf(`
`),s=i===-1?0:i+1,a=e.substring(s,r);if(v1.test(a)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},jX=e=>{const t=e.match(QX);if(t){const n=t[2];if(!n||rs.test(n))return e;const r=e.lastIndexOf(t[1]),i=e.substring(0,r).lastIndexOf(`
`),s=i===-1?0:i+1,a=e.substring(s,r);if(v1.test(a)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},VX=e=>{let t=0;const n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="*")continue;const i=r>0?e[r-1]:"",s=r<n-1?e[r+1]:"";if(i==="\\"||i==="*"||s==="*"||i&&s&&Ti(i)&&Ti(s))continue;let a=0;for(let c=r-1;c>=0;c-=1)if(e[c]===`
`){a=c+1;break}let o=!0;for(let c=a;c<r;c+=1)if(e[c]!==" "&&e[c]!=="	"){o=!1;break}o&&(s===" "||s==="	")||(t+=1)}return t},GX=e=>{if(Xl(e))return e;if(e.match(DX)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="*"&&e[r-1]!=="*"&&e[r+1]!=="*"&&e[r-1]!=="\\"){const i=r>0?e[r-1]:"",s=r<e.length-1?e[r+1]:"";if(i&&s&&Ti(i)&&Ti(s))continue;t=r;break}if(t===-1)return e;const n=e.substring(t+1);if(!n||rs.test(n))return e;if(VX(e)%2===1)return`${e}*`}return e},b1=(e,t)=>{let n=!1,r=!1;for(let i=0;i<e.length&&i<t;i+=1){if(e[i]==="\\"&&e[i+1]==="$"){i+=1;continue}e[i]==="$"&&(e[i+1]==="$"?(r=!r,i+=1,n=!1):r||(n=!n))}return n||r},WX=e=>{const t=e.includes("$");let n=0;const r=e.length;for(let i=0;i<r;i+=1){if(e[i]!=="_")continue;const s=i>0?e[i-1]:"",a=i<r-1?e[i+1]:"";s!=="\\"&&(t&&b1(e,i)||s==="_"||a==="_"||s&&a&&Ti(s)&&Ti(a)||(n+=1))}return n},YX=e=>{if(Xl(e))return e;if(e.match($X)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="_"&&e[r-1]!=="_"&&e[r+1]!=="_"&&e[r-1]!=="\\"&&!b1(e,r)){const i=r>0?e[r-1]:"",s=r<e.length-1?e[r+1]:"";if(i&&s&&Ti(i)&&Ti(s))continue;t=r;break}if(t===-1)return e;const n=e.substring(t+1);if(!n||rs.test(n))return e;if(WX(e)%2===1){let r=e.length;for(;r>0&&e[r-1]===`
`;)r-=1;if(r<e.length){const i=e.slice(0,r),s=e.slice(r);return`${i}_${s}`}return`${e}_`}}return e},HX=(e,t)=>{const n=e.substring(t,t+3)==="```",r=t>0&&e.substring(t-1,t+2)==="```",i=t>1&&e.substring(t-2,t+1)==="```";return n||r||i},KX=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!HX(e,n)&&(t+=1);return t},JX=e=>{if(e.match(qX)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;const t=(e.match(/```/g)||[]).length,n=t%2===1;if(t>0&&t%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&t%2===0)return e;const r=e.match(LX);if(r&&!n){const i=r[2];if(!i||rs.test(i))return e;if(KX(e)%2===1)return`${e}\``}return e},eF=e=>{const t=e.match(MX);if(t){const n=t[2];if(!n||rs.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},tF=e=>{let t=0,n=0;for(let r=0;r<e.length;r+=1)e[r]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},nF=e=>{if(Xl(e)||XX.test(e))return e;const t=e.match(NX);if(t){const n=t[2];if(!n||rs.test(n))return e;if(tF(e)%2===1)return`${e}***`}return e},rF=e=>{if(!e||typeof e!="string")return e;let t=e;const n=zX(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=nF(t),t=ZX(t),t=jX(t),t=GX(t),t=YX(t),t=JX(t),t=eF(t),t)};function iF(){if(window.location!==window.parent.location){const{ancestorOrigins:e}=document.location;if(e&&e.length)return e[0];if(document.referrer)try{return new URL(document.referrer).origin}catch{}}return document.location.origin}function sF(e){var r;const t=iF(),n=[t,...F7(e)];return[YD,[_Q,{...Fa,protocols:{...Fa.protocols,src:[...((r=Fa.protocols)==null?void 0:r.src)||[],"data"]}}],[HD,{allowedImagePrefixes:["*"],allowedLinkPrefixes:n,allowedProtocols:["*"],defaultOrigin:t,allowDataImages:!0}]]}const aF=[[o3,{}],[C$,{}],[R$,{}]],Fl=it({isAnimating:!1}),oF=Fe(({content:e,shouldParseIncompleteMarkdown:t,markdownOptions:n})=>{const r=Ne(()=>typeof e=="string"&&t?rF(e.trim()):e,[e,t]);return g(L7,{...n,children:r})},(e,t)=>e.content===t.content&&e.shouldParseIncompleteMarkdown===t.shouldParseIncompleteMarkdown&&e.markdownOptions===t.markdownOptions),cF=Fe(({children:e,parseIncompleteMarkdown:t=!0,className:n,isAnimating:r=!1,linkConfig:i})=>{const s=zo(),a=Ne(()=>AX(typeof e=="string"?e:""),[e]),o=Ne(()=>({components:e9,rehypePlugins:sF(i),remarkPlugins:aF}),[i]);return g(o_.Provider,{value:Dq,children:g(Fl.Provider,{value:{isAnimating:r},children:g("div",{className:Ee("markdown",n),children:a.map((c,l)=>g(oF,{content:c,shouldParseIncompleteMarkdown:t,markdownOptions:o},`${s}-block-${l}`))})})})},(e,t)=>e.children===t.children&&e.isAnimating===t.isAnimating&&e.className===t.className&&e.parseIncompleteMarkdown===t.parseIncompleteMarkdown&&e.linkConfig===t.linkConfig);function lF({entry:e}){const t=SA();return g("div",{className:"pr-8",children:g(cF,{linkConfig:t.value,children:e.message})})}function uF({entry:e}){const{previewUrl:t}=bh();return g("div",{className:at("flex gap-2.5 transition-[opacity,transform] duration-200 data-hidden:opacity-0 data-hidden:scale-75",e.role==="user"?"justify-end pl-16 origin-top-right":"pr-16 origin-top-left"),children:[e.role==="agent"&&g("img",{src:t,alt:"AI agent avatar",className:"bg-base-border shrink-0 w-5 h-5 rounded-full"}),g("div",{dir:"auto",className:at("px-3 py-2.5 rounded-bubble text-sm min-w-0 [overflow-wrap:break-word]",e.role==="user"?"bg-accent text-accent-primary":"bg-base-active text-base-primary"),children:e.message})]})}function dF({entry:e}){const t=nt(),{lastId:n}=St(),r=yA();return g("div",{className:"mt-3 px-8 flex flex-col",children:[r.value==="rating"&&g(uQ,{}),g("div",{className:"text-xs text-base-subtle text-center transition-opacity duration-200 data-hidden:opacity-0",children:[e.role==="user"?t.user_ended_conversation:t.agent_ended_conversation,g("br",{}),n.value&&g("span",{className:"break-all",children:[t.conversation_id,": ",n.value]})]})]})}function hF({entry:e}){const t=nt(),{lastId:n}=St();return g("div",{className:"mt-2 px-8 text-xs text-base-error text-center transition-opacity duration-200 data-hidden:opacity-0",children:[t.error_occurred,g("br",{}),e.message,n.value&&g(Xe,{children:[g("br",{}),g("span",{className:"text-base-subtle break-all",children:[t.conversation_id,": ",n.value]})]})]})}function pF({entry:e}){const t=nt();return g("div",{className:"mt-2 px-8 text-xs text-base-subtle text-center transition-opacity duration-200 data-hidden:opacity-0",children:e.mode==="text"?t.switched_to_text_mode:t.switched_to_voice_mode})}function fF(e,t){return e.type==="disconnection"?g(dF,{entry:e}):e.type==="mode_toggle"?g(pF,{entry:e}):e.type==="error"?g(hF,{entry:e}):e.role==="agent"?g(lF,{entry:e}):g(uF,{entry:e})}function mF({entry:e,animateIn:t}){return g(zt,{initial:!t,active:!0,children:fF(e)})}const OF=16;function gF({scrollPinned:e}){const t=ue(null),n=ue(null),r=ue(!0),i=oe(()=>{const u=t.current;u&&u.scrollTo({top:u.scrollHeight,behavior:"smooth"})},[]),s=oe(u=>{u.deltaY<0&&(e.value=!1)},[e]),a=ue(null),o=oe(u=>{const d=u.touches[0];d&&(a.current=d.clientY)},[]),c=oe(u=>{const d=u.touches[0];d&&a.current!==null&&(d.clientY>a.current&&(e.value=!1),a.current=d.clientY)},[e]),l=oe(()=>{const u=t.current;if(!u)return;const{scrollTop:d,scrollHeight:h,clientHeight:p}=u;h-d-p<=OF&&(e.value=!0)},[e]);return ve(()=>{r.current=!1;const u=n.current,d=t.current;if(!u||!d)return;let h=u.getBoundingClientRect().height;const p=new ResizeObserver(([O])=>{const m=O.contentRect.height,b=m>h;h=m,b&&e.peek()&&i()});return p.observe(u),()=>p.disconnect()},[e,i]),{scrollContainer:t,contentRef:n,handleScroll:l,handleWheel:s,handleTouchStart:o,handleTouchMove:c,firstRender:r}}function vF({scrollPinned:e,transcript:t}){const{scrollContainer:n,contentRef:r,handleScroll:i,handleWheel:s,handleTouchStart:a,handleTouchMove:o,firstRender:c}=gF({scrollPinned:e});return g("div",{ref:n,className:"px-4 pt-20 pb-4 grow overflow-y-auto z-2",onScroll:i,onWheel:s,onTouchStart:a,onTouchMove:o,children:g("div",{ref:r,className:"flex flex-col gap-6",children:t.value.map((l,u)=>g(mF,{entry:l,animateIn:!c.current},`${u}-${l.conversationIndex}`))})})}function bF({className:e,...t}){return g("textarea",{className:at("px-3 py-[calc(theme(spacing.2)-1px)] border text-sm text-base-primary bg-base border-base-border rounded-input focus-ring resize-none [field-sizing:content] placeholder:text-base-subtle",e),...t})}function TF(){const e=nt(),{rating:t,feedbackText:n}=xh(),r=oe(i=>{n.value=i.currentTarget.value},[]);return g("div",{className:"grow flex flex-col overflow-y-auto overflow-x-hidden px-4",children:g("div",{className:"flex flex-col gap-8 min-h-full pt-4 pb-2",children:[g("div",{className:"flex flex-col items-center justify-center gap-3",children:[g(JI,{orbColor:"var(--el-base-subtle)",circleBackgroundColor:"var(--el-base)",starColor:"var(--el-base-primary)",className:"w-20 h-22"}),t.value!==null&&g(U0,{rating:t.value,min:1,max:5}),g("div",{className:"text-center",children:[g("p",{className:"text-sm text-base-primary font-medium",children:e.thanks_for_feedback}),g("p",{className:"text-sm text-base-subtle",children:e.thanks_for_feedback_details})]})]}),g(bF,{className:"w-full min-h-[6lh]",placeholder:e.follow_up_feedback_placeholder,rows:6,value:n,onInput:r})]})})}function kF(){const e=nt(),{currentContent:t}=Ch(),{submitFeedback:n}=xh(),r=oe(()=>{n(),t.value="transcript"},[n]);return g("div",{className:"shrink-0 overflow-hidden flex p-3 items-end justify-end",children:g(Qt,{variant:"primary",onClick:r,children:e.submit})})}function T1(e,[t,n]){return Math.min(n,Math.max(t,e))}function wt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function qf(e,t=[]){let n=[];function r(s,a){const o=it(a),c=n.length;n=[...n,a];const l=d=>{var v;const{scope:h,children:p,...O}=d,m=((v=h==null?void 0:h[e])==null?void 0:v[c])||o,b=Ne(()=>O,Object.values(O));return g(m.Provider,{value:b,children:p})};l.displayName=s+"Provider";function u(d,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||o,O=cn(p);if(O)return O;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(a=>it(a));return function(a){const o=(a==null?void 0:a[e])||s;return Ne(()=>({[`__scope${e}`]:{...a,[e]:o}}),[a,o])}};return i.scopeName=e,[r,yF(i,...t)]}function yF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((a,{useScope:o,scopeName:c})=>{const l=o(i)[`__scope${c}`];return{...a,...l}},{});return Ne(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Bl(e){const t=SF(e),n=_e((r,i)=>{const{children:s,...a}=r,o=ln.toArray(s),c=o.find(EF);if(c){const l=c.props.children,u=o.map(d=>d===c?ln.count(l)>1?ln.only(null):xt(l)?l.props.children:null:d);return g(t,{...a,ref:i,children:xt(l)?Ai(l,void 0,u):null})}return g(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function SF(e){const t=_e((n,r)=>{const{children:i,...s}=n;if(xt(i)){const a=xF(i),o=wF(s,i.props);return i.type!==Xe&&(o.ref=r?kh(r,a):a),Ai(i,o)}return ln.count(i)>1?ln.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _F=Symbol("radix.slottable");function EF(e){return xt(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_F}function wF(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const o=s(...a);return i(...a),o}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function xF(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function CF(e){const t=e+"CollectionProvider",[n,r]=qf(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:b,children:v}=m,k=Tr.useRef(null),y=Tr.useRef(new Map).current;return g(i,{scope:b,itemMap:y,collectionRef:k,children:v})};a.displayName=t;const o=e+"CollectionSlot",c=Bl(o),l=Tr.forwardRef((m,b)=>{const{scope:v,children:k}=m,y=s(o,v),T=Ut(b,y.collectionRef);return g(c,{ref:T,children:k})});l.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=Bl(u),p=Tr.forwardRef((m,b)=>{const{scope:v,children:k,...y}=m,T=Tr.useRef(null),_=Ut(b,T),S=s(u,v);return Tr.useEffect(()=>(S.itemMap.set(T,{ref:T,...y}),()=>void S.itemMap.delete(T))),g(h,{[d]:"",ref:_,children:k})});p.displayName=u;function O(m){const b=s(e+"CollectionConsumer",m);return Tr.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const k=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((y,T)=>k.indexOf(y.ref.current)-k.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:l,ItemSlot:p},O,r]}var PF=it(void 0);function RF(e){const t=cn(PF);return e||t||"ltr"}var AF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kt=AF.reduce((e,t)=>{const n=Bl(`Primitive.${t}`),r=_e((i,s)=>{const{asChild:a,...o}=i,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(c,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function IF(e,t){e&&Go(()=>e.dispatchEvent(t))}function is(e){const t=ue(e);return ve(()=>{t.current=e}),Ne(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function QF(e,t=globalThis==null?void 0:globalThis.document){const n=is(e);ve(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var NF="DismissableLayer",Xf="dismissableLayer.update",DF="dismissableLayer.pointerDownOutside",$F="dismissableLayer.focusOutside",k1,y1=it({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),S1=_e((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,l=cn(y1),[u,d]=fe(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=fe({}),O=Ut(t,C=>d(C)),m=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),k=u?m.indexOf(u):-1,y=l.layersWithOutsidePointerEventsDisabled.size>0,T=k>=v,_=UF(C=>{const N=C.target,$=[...l.branches].some(x=>x.contains(N));!T||$||(i==null||i(C),a==null||a(C),C.defaultPrevented||(o==null||o()))},h),S=qF(C=>{const N=C.target;[...l.branches].some($=>$.contains(N))||(s==null||s(C),a==null||a(C),C.defaultPrevented||(o==null||o()))},h);return QF(C=>{k===l.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&o&&(C.preventDefault(),o()))},h),ve(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(k1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),_1(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=k1)}},[u,h,n,l]),ve(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),_1())},[u,l]),ve(()=>{const C=()=>p({});return document.addEventListener(Xf,C),()=>document.removeEventListener(Xf,C)},[]),g(kt.div,{...c,ref:O,style:{pointerEvents:y?T?"auto":"none":void 0,...e.style},onFocusCapture:wt(e.onFocusCapture,S.onFocusCapture),onBlurCapture:wt(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:wt(e.onPointerDownCapture,_.onPointerDownCapture)})});S1.displayName=NF;var LF="DismissableLayerBranch",MF=_e((e,t)=>{const n=cn(y1),r=ue(null),i=Ut(t,r);return ve(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(kt.div,{...e,ref:i})});MF.displayName=LF;function UF(e,t=globalThis==null?void 0:globalThis.document){const n=is(e),r=ue(!1),i=ue(()=>{});return ve(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){E1(DF,n,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function qF(e,t=globalThis==null?void 0:globalThis.document){const n=is(e),r=ue(!1);return ve(()=>{const i=s=>{s.target&&!r.current&&E1($F,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _1(){const e=new CustomEvent(Xf);document.dispatchEvent(e)}function E1(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?IF(i,s):i.dispatchEvent(s)}var Ff=0;function XF(){ve(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??w1()),document.body.insertAdjacentElement("beforeend",e[1]??w1()),Ff++,()=>{Ff===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ff--}},[])}function w1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Bf="focusScope.autoFocusOnMount",zf="focusScope.autoFocusOnUnmount",x1={bubbles:!1,cancelable:!0},FF="FocusScope",C1=_e((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,c]=fe(null),l=is(i),u=is(s),d=ue(null),h=Ut(t,m=>c(m)),p=ue({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ve(()=>{if(r){let m=function(y){if(p.paused||!o)return;const T=y.target;o.contains(T)?d.current=T:ki(d.current,{select:!0})},b=function(y){if(p.paused||!o)return;const T=y.relatedTarget;T!==null&&(o.contains(T)||ki(d.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const T of y)T.removedNodes.length>0&&ki(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const k=new MutationObserver(v);return o&&k.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),k.disconnect()}}},[r,o,p.paused]),ve(()=>{if(o){A1.add(p);const m=document.activeElement;if(!o.contains(m)){const b=new CustomEvent(Bf,x1);o.addEventListener(Bf,l),o.dispatchEvent(b),b.defaultPrevented||(BF(GF(P1(o)),{select:!0}),document.activeElement===m&&ki(o))}return()=>{o.removeEventListener(Bf,l),setTimeout(()=>{const b=new CustomEvent(zf,x1);o.addEventListener(zf,u),o.dispatchEvent(b),b.defaultPrevented||ki(m??document.body,{select:!0}),o.removeEventListener(zf,u),A1.remove(p)},0)}}},[o,l,u,p]);const O=oe(m=>{if(!n&&!r||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(b&&v){const k=m.currentTarget,[y,T]=zF(k);y&&T?!m.shiftKey&&v===T?(m.preventDefault(),n&&ki(y,{select:!0})):m.shiftKey&&v===y&&(m.preventDefault(),n&&ki(T,{select:!0})):v===k&&m.preventDefault()}},[n,r,p.paused]);return g(kt.div,{tabIndex:-1,...a,ref:h,onKeyDown:O})});C1.displayName=FF;function BF(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ki(r,{select:t}),document.activeElement!==n)return}function zF(e){const t=P1(e),n=R1(t,e),r=R1(t.reverse(),e);return[n,r]}function P1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function R1(e,t){for(const n of e)if(!ZF(n,{upTo:t}))return n}function ZF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function jF(e){return e instanceof HTMLInputElement&&"select"in e}function ki(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&jF(e)&&t&&e.select()}}var A1=VF();function VF(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=I1(e,t),e.unshift(t)},remove(t){var n;e=I1(e,t),(n=e[0])==null||n.resume()}}}function I1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function GF(e){return e.filter(t=>t.tagName!=="A")}var on=globalThis!=null&&globalThis.document?br:()=>{},WF=Lu[" useId ".trim().toString()]||(()=>{}),YF=0;function Zf(e){const[t,n]=fe(WF());return on(()=>{n(r=>r??String(YF++))},[e]),t?`radix-${t}`:""}const HF=["top","right","bottom","left"],yi=Math.min,Tn=Math.max,zl=Math.round,Zl=Math.floor,ur=e=>({x:e,y:e}),KF={left:"right",right:"left",bottom:"top",top:"bottom"},JF={start:"end",end:"start"};function jf(e,t,n){return Tn(e,yi(t,n))}function Br(e,t){return typeof e=="function"?e(t):e}function zr(e){return e.split("-")[0]}function na(e){return e.split("-")[1]}function Vf(e){return e==="x"?"y":"x"}function Gf(e){return e==="y"?"height":"width"}const eB=new Set(["top","bottom"]);function dr(e){return eB.has(zr(e))?"y":"x"}function Wf(e){return Vf(dr(e))}function tB(e,t,n){n===void 0&&(n=!1);const r=na(e),i=Wf(e),s=Gf(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=jl(a)),[a,jl(a)]}function nB(e){const t=jl(e);return[Yf(e),t,Yf(t)]}function Yf(e){return e.replace(/start|end/g,t=>JF[t])}const Q1=["left","right"],N1=["right","left"],rB=["top","bottom"],iB=["bottom","top"];function sB(e,t,n){switch(e){case"top":case"bottom":return n?t?N1:Q1:t?Q1:N1;case"left":case"right":return t?rB:iB;default:return[]}}function aB(e,t,n,r){const i=na(e);let s=sB(zr(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(Yf)))),s}function jl(e){return e.replace(/left|right|bottom|top/g,t=>KF[t])}function oB(e){return{top:0,right:0,bottom:0,left:0,...e}}function D1(e){return typeof e!="number"?oB(e):{top:e,right:e,bottom:e,left:e}}function Vl(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function $1(e,t,n){let{reference:r,floating:i}=e;const s=dr(t),a=Wf(t),o=Gf(a),c=zr(t),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(c){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(na(t)){case"start":p[a]-=h*(n&&l?-1:1);break;case"end":p[a]+=h*(n&&l?-1:1);break}return p}const cB=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=$1(l,r,c),h=r,p={},O=0;for(let m=0;m<o.length;m++){const{name:b,fn:v}=o[m],{x:k,y,data:T,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});u=k??u,d=y??d,p={...p,[b]:{...p[b],...T}},_&&O<=50&&(O++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(l=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:u,y:d}=$1(l,h,c)),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}};async function No(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Br(t,e),O=D1(p),m=o[h?d==="floating"?"reference":"floating":d],b=Vl(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),y=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},T=Vl(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:k,strategy:c}):v);return{top:(b.top-T.top+O.top)/y.y,bottom:(T.bottom-b.bottom+O.bottom)/y.y,left:(b.left-T.left+O.left)/y.x,right:(T.right-b.right+O.right)/y.x}}const lB=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:c}=t,{element:l,padding:u=0}=Br(e,t)||{};if(l==null)return{};const d=D1(u),h={x:n,y:r},p=Wf(i),O=Gf(p),m=await a.getDimensions(l),b=p==="y",v=b?"top":"left",k=b?"bottom":"right",y=b?"clientHeight":"clientWidth",T=s.reference[O]+s.reference[p]-h[p]-s.floating[O],_=h[p]-s.reference[p],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let C=S?S[y]:0;(!C||!await(a.isElement==null?void 0:a.isElement(S)))&&(C=o.floating[y]||s.floating[O]);const N=T/2-_/2,$=C/2-m[O]/2-1,x=yi(d[v],$),D=yi(d[k],$),L=x,V=C-m[O]-D,F=C/2-m[O]/2+N,U=jf(L,F,V),H=!c.arrow&&na(i)!=null&&F!==U&&s.reference[O]/2-(F<L?x:D)-m[O]/2<0,se=H?F<L?F-L:F-V:0;return{[p]:h[p]+se,data:{[p]:U,centerOffset:F-U-se,...H&&{alignmentOffset:se}},reset:H}}}),uB=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:m=!0,...b}=Br(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=zr(i),k=dr(o),y=zr(o)===o,T=await(c.isRTL==null?void 0:c.isRTL(l.floating)),_=h||(y||!m?[jl(o)]:nB(o)),S=O!=="none";!h&&S&&_.push(...aB(o,m,O,T));const C=[o,..._],N=await No(t,b),$=[];let x=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&$.push(N[v]),d){const F=tB(i,a,T);$.push(N[F[0]],N[F[1]])}if(x=[...x,{placement:i,overflows:$}],!$.every(F=>F<=0)){var D,L;const F=(((D=s.flip)==null?void 0:D.index)||0)+1,U=C[F];if(U&&(!(d==="alignment"&&k!==dr(U))||x.every(se=>dr(se.placement)===k?se.overflows[0]>0:!0)))return{data:{index:F,overflows:x},reset:{placement:U}};let H=(L=x.filter(se=>se.overflows[0]<=0).sort((se,B)=>se.overflows[1]-B.overflows[1])[0])==null?void 0:L.placement;if(!H)switch(p){case"bestFit":{var V;const se=(V=x.filter(B=>{if(S){const de=dr(B.placement);return de===k||de==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(de=>de>0).reduce((de,A)=>de+A,0)]).sort((B,de)=>B[1]-de[1])[0])==null?void 0:V[0];se&&(H=se);break}case"initialPlacement":H=o;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function L1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function M1(e){return HF.some(t=>e[t]>=0)}const dB=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Br(e,t);switch(r){case"referenceHidden":{const s=await No(t,{...i,elementContext:"reference"}),a=L1(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:M1(a)}}}case"escaped":{const s=await No(t,{...i,altBoundary:!0}),a=L1(s,n.floating);return{data:{escapedOffsets:a,escaped:M1(a)}}}default:return{}}}}},U1=new Set(["left","top"]);async function hB(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=zr(n),o=na(n),c=dr(n)==="y",l=U1.has(a)?-1:1,u=s&&c?-1:1,d=Br(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:O}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof O=="number"&&(p=o==="end"?O*-1:O),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}const pB=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,c=await hB(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},fB=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:v,y:k}=b;return{x:v,y:k}}},...c}=Br(e,t),l={x:n,y:r},u=await No(t,c),d=dr(zr(i)),h=Vf(d);let p=l[h],O=l[d];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",k=p+u[b],y=p-u[v];p=jf(k,p,y)}if(a){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",k=O+u[b],y=O-u[v];O=jf(k,O,y)}const m=o.fn({...t,[h]:p,[d]:O});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[d]:a}}}}}},mB=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:c=!0,crossAxis:l=!0}=Br(e,t),u={x:n,y:r},d=dr(i),h=Vf(d);let p=u[h],O=u[d];const m=Br(o,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const y=h==="y"?"height":"width",T=s.reference[h]-s.floating[y]+b.mainAxis,_=s.reference[h]+s.reference[y]-b.mainAxis;p<T?p=T:p>_&&(p=_)}if(l){var v,k;const y=h==="y"?"width":"height",T=U1.has(zr(i)),_=s.reference[d]-s.floating[y]+(T&&((v=a.offset)==null?void 0:v[d])||0)+(T?0:b.crossAxis),S=s.reference[d]+s.reference[y]+(T?0:((k=a.offset)==null?void 0:k[d])||0)-(T?b.crossAxis:0);O<_?O=_:O>S&&(O=S)}return{[h]:p,[d]:O}}}},OB=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:c=()=>{},...l}=Br(e,t),u=await No(t,l),d=zr(i),h=na(i),p=dr(i)==="y",{width:O,height:m}=s.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,b=h==="end"?"top":"bottom");const k=m-u.top-u.bottom,y=O-u.left-u.right,T=yi(m-u[b],k),_=yi(O-u[v],y),S=!t.middlewareData.shift;let C=T,N=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=k),S&&!h){const x=Tn(u.left,0),D=Tn(u.right,0),L=Tn(u.top,0),V=Tn(u.bottom,0);p?N=O-2*(x!==0||D!==0?x+D:Tn(u.left,u.right)):C=m-2*(L!==0||V!==0?L+V:Tn(u.top,u.bottom))}await c({...t,availableWidth:N,availableHeight:C});const $=await a.getDimensions(o.floating);return O!==$.width||m!==$.height?{reset:{rects:!0}}:{}}}};function Gl(){return typeof window<"u"}function ra(e){return q1(e)?(e.nodeName||"").toLowerCase():"#document"}function kn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function hr(e){var t;return(t=(q1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function q1(e){return Gl()?e instanceof Node||e instanceof kn(e).Node:!1}function Fn(e){return Gl()?e instanceof Element||e instanceof kn(e).Element:!1}function pr(e){return Gl()?e instanceof HTMLElement||e instanceof kn(e).HTMLElement:!1}function X1(e){return!Gl()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof kn(e).ShadowRoot}const gB=new Set(["inline","contents"]);function Do(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Bn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!gB.has(i)}const vB=new Set(["table","td","th"]);function bB(e){return vB.has(ra(e))}const TB=[":popover-open",":modal"];function Wl(e){return TB.some(t=>{try{return e.matches(t)}catch{return!1}})}const kB=["transform","translate","scale","rotate","perspective"],yB=["transform","translate","scale","rotate","perspective","filter"],SB=["paint","layout","strict","content"];function Hf(e){const t=Kf(),n=Fn(e)?Bn(e):e;return kB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||yB.some(r=>(n.willChange||"").includes(r))||SB.some(r=>(n.contain||"").includes(r))}function _B(e){let t=Si(e);for(;pr(t)&&!ia(t);){if(Hf(t))return t;if(Wl(t))return null;t=Si(t)}return null}function Kf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EB=new Set(["html","body","#document"]);function ia(e){return EB.has(ra(e))}function Bn(e){return kn(e).getComputedStyle(e)}function Yl(e){return Fn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Si(e){if(ra(e)==="html")return e;const t=e.assignedSlot||e.parentNode||X1(e)&&e.host||hr(e);return X1(t)?t.host:t}function F1(e){const t=Si(e);return ia(t)?e.ownerDocument?e.ownerDocument.body:e.body:pr(t)&&Do(t)?t:F1(t)}function $o(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=F1(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=kn(i);if(s){const o=Jf(a);return t.concat(a,a.visualViewport||[],Do(i)?i:[],o&&n?$o(o):[])}return t.concat(i,$o(i,[],n))}function Jf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function B1(e){const t=Bn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=pr(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=zl(n)!==s||zl(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function em(e){return Fn(e)?e:e.contextElement}function sa(e){const t=em(e);if(!pr(t))return ur(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=B1(t);let a=(s?zl(n.width):n.width)/r,o=(s?zl(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const wB=ur(0);function z1(e){const t=kn(e);return!Kf()||!t.visualViewport?wB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xB(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==kn(e)?!1:t}function ss(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=em(e);let a=ur(1);t&&(r?Fn(r)&&(a=sa(r)):a=sa(e));const o=xB(s,n,r)?z1(s):ur(0);let c=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=kn(s),p=r&&Fn(r)?kn(r):r;let O=h,m=Jf(O);for(;m&&r&&p!==O;){const b=sa(m),v=m.getBoundingClientRect(),k=Bn(m),y=v.left+(m.clientLeft+parseFloat(k.paddingLeft))*b.x,T=v.top+(m.clientTop+parseFloat(k.paddingTop))*b.y;c*=b.x,l*=b.y,u*=b.x,d*=b.y,c+=y,l+=T,O=kn(m),m=Jf(O)}}return Vl({width:u,height:d,x:c,y:l})}function Hl(e,t){const n=Yl(e).scrollLeft;return t?t.left+n:ss(hr(e)).left+n}function Z1(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Hl(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function CB(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=hr(r),o=t?Wl(t.floating):!1;if(r===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},l=ur(1);const u=ur(0),d=pr(r);if((d||!d&&!s)&&((ra(r)!=="body"||Do(a))&&(c=Yl(r)),pr(r))){const p=ss(r);l=sa(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=a&&!d&&!s?Z1(a,c):ur(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function PB(e){return Array.from(e.getClientRects())}function RB(e){const t=hr(e),n=Yl(e),r=e.ownerDocument.body,i=Tn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Tn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Hl(e);const o=-n.scrollTop;return Bn(r).direction==="rtl"&&(a+=Tn(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}const j1=25;function AB(e,t){const n=kn(e),r=hr(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){s=i.width,a=i.height;const u=Kf();(!u||u&&t==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}const l=Hl(r);if(l<=0){const u=r.ownerDocument,d=u.body,h=getComputedStyle(d),p=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,O=Math.abs(r.clientWidth-d.clientWidth-p);O<=j1&&(s-=O)}else l<=j1&&(s+=l);return{width:s,height:a,x:o,y:c}}const IB=new Set(["absolute","fixed"]);function QB(e,t){const n=ss(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=pr(e)?sa(e):ur(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:a,height:o,x:c,y:l}}function V1(e,t,n){let r;if(t==="viewport")r=AB(e,n);else if(t==="document")r=RB(hr(e));else if(Fn(t))r=QB(t,n);else{const i=z1(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Vl(r)}function G1(e,t){const n=Si(e);return n===t||!Fn(n)||ia(n)?!1:Bn(n).position==="fixed"||G1(n,t)}function NB(e,t){const n=t.get(e);if(n)return n;let r=$o(e,[],!1).filter(o=>Fn(o)&&ra(o)!=="body"),i=null;const s=Bn(e).position==="fixed";let a=s?Si(e):e;for(;Fn(a)&&!ia(a);){const o=Bn(a),c=Hf(a);!c&&o.position==="fixed"&&(i=null),(s?!c&&!i:!c&&o.position==="static"&&i&&IB.has(i.position)||Do(a)&&!c&&G1(e,a))?r=r.filter(l=>l!==a):i=o,a=Si(a)}return t.set(e,r),r}function DB(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Wl(t)?[]:NB(t,this._c):[].concat(n),r],a=s[0],o=s.reduce((c,l)=>{const u=V1(t,l,i);return c.top=Tn(u.top,c.top),c.right=yi(u.right,c.right),c.bottom=yi(u.bottom,c.bottom),c.left=Tn(u.left,c.left),c},V1(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function $B(e){const{width:t,height:n}=B1(e);return{width:t,height:n}}function LB(e,t,n){const r=pr(t),i=hr(t),s=n==="fixed",a=ss(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=ur(0);function l(){c.x=Hl(i)}if(r||!r&&!s)if((ra(t)!=="body"||Do(i))&&(o=Yl(t)),r){const p=ss(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&l();s&&!r&&i&&l();const u=i&&!r&&!s?Z1(i,o):ur(0),d=a.left+o.scrollLeft-c.x-u.x,h=a.top+o.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function tm(e){return Bn(e).position==="static"}function W1(e,t){if(!pr(e)||Bn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return hr(e)===n&&(n=n.ownerDocument.body),n}function Y1(e,t){const n=kn(e);if(Wl(e))return n;if(!pr(e)){let i=Si(e);for(;i&&!ia(i);){if(Fn(i)&&!tm(i))return i;i=Si(i)}return n}let r=W1(e,t);for(;r&&bB(r)&&tm(r);)r=W1(r,t);return r&&ia(r)&&tm(r)&&!Hf(r)?n:r||_B(e)||n}const MB=async function(e){const t=this.getOffsetParent||Y1,n=this.getDimensions,r=await n(e.floating);return{reference:LB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UB(e){return Bn(e).direction==="rtl"}const qB={convertOffsetParentRelativeRectToViewportRelativeRect:CB,getDocumentElement:hr,getClippingRect:DB,getOffsetParent:Y1,getElementRects:MB,getClientRects:PB,getDimensions:$B,getScale:sa,isElement:Fn,isRTL:UB};function H1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function XB(e,t){let n=null,r;const i=hr(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const l=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=l;if(o||t(),!h||!p)return;const O=Zl(d),m=Zl(i.clientWidth-(u+h)),b=Zl(i.clientHeight-(d+p)),v=Zl(u),k={rootMargin:-O+"px "+-m+"px "+-b+"px "+-v+"px",threshold:Tn(0,yi(1,c))||1};let y=!0;function T(_){const S=_[0].intersectionRatio;if(S!==c){if(!y)return a();S?a(!1,S):r=setTimeout(()=>{a(!1,1e-7)},1e3)}S===1&&!H1(l,e.getBoundingClientRect())&&a(),y=!1}try{n=new IntersectionObserver(T,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,k)}n.observe(e)}return a(!0),s}function FB(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=em(e),u=i||s?[...l?$o(l):[],...$o(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&o?XB(l,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(v=>{let[k]=v;k&&k.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let O,m=c?ss(e):null;c&&b();function b(){const v=ss(e);m&&!H1(m,v)&&n(),m=v,O=requestAnimationFrame(b)}return n(),()=>{var v;u.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(O)}}const BB=pB,zB=fB,ZB=uB,jB=OB,VB=dB,K1=lB,GB=mB,WB=(e,t,n)=>{const r=new Map,i={platform:qB,...n},s={...i.platform,_c:r};return cB(e,t,{...i,platform:s})};var YB=typeof document<"u",HB=function(){},Kl=YB?br:HB;function Jl(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Jl(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!Jl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function J1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function eE(e,t){const n=J1(e);return Math.round(t*n)/n}function nm(e){const t=ue(e);return Kl(()=>{t.current=e}),t}function KB(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:l}=e,[u,d]=fe({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=fe(r);Jl(h,r)||p(r);const[O,m]=fe(null),[b,v]=fe(null),k=oe(B=>{B!==S.current&&(S.current=B,m(B))},[]),y=oe(B=>{B!==C.current&&(C.current=B,v(B))},[]),T=s||O,_=a||b,S=ue(null),C=ue(null),N=ue(u),$=c!=null,x=nm(c),D=nm(i),L=nm(l),V=oe(()=>{if(!S.current||!C.current)return;const B={placement:t,strategy:n,middleware:h};D.current&&(B.platform=D.current),WB(S.current,C.current,B).then(de=>{const A={...de,isPositioned:L.current!==!1};F.current&&!Jl(N.current,A)&&(N.current=A,Go(()=>{d(A)}))})},[h,t,n,D,L]);Kl(()=>{l===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(B=>({...B,isPositioned:!1})))},[l]);const F=ue(!1);Kl(()=>(F.current=!0,()=>{F.current=!1}),[]),Kl(()=>{if(T&&(S.current=T),_&&(C.current=_),T&&_){if(x.current)return x.current(T,_,V);V()}},[T,_,V,x,$]);const U=Ne(()=>({reference:S,floating:C,setReference:k,setFloating:y}),[k,y]),H=Ne(()=>({reference:T,floating:_}),[T,_]),se=Ne(()=>{const B={position:n,left:0,top:0};if(!H.floating)return B;const de=eE(H.floating,u.x),A=eE(H.floating,u.y);return o?{...B,transform:"translate("+de+"px, "+A+"px)",...J1(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:de,top:A}},[n,o,H.floating,u.x,u.y]);return Ne(()=>({...u,update:V,refs:U,elements:H,floatingStyles:se}),[u,V,U,H,se])}const JB=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?K1({element:r.current,padding:i}).fn(n):{}:r?K1({element:r,padding:i}).fn(n):{}}}},ez=(e,t)=>({...BB(e),options:[e,t]}),tz=(e,t)=>({...zB(e),options:[e,t]}),nz=(e,t)=>({...GB(e),options:[e,t]}),rz=(e,t)=>({...ZB(e),options:[e,t]}),iz=(e,t)=>({...jB(e),options:[e,t]}),sz=(e,t)=>({...VB(e),options:[e,t]}),az=(e,t)=>({...JB(e),options:[e,t]});var oz="Arrow",tE=_e((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return g(kt.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});tE.displayName=oz;var cz=tE;function lz(e){const[t,n]=fe(void 0);return on(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,o=l.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var rm="Popper",[nE,rE]=qf(rm),[uz,iE]=nE(rm),sE=e=>{const{__scopePopper:t,children:n}=e,[r,i]=fe(null);return g(uz,{scope:t,anchor:r,onAnchorChange:i,children:n})};sE.displayName=rm;var aE="PopperAnchor",oE=_e((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=iE(aE,n),a=ue(null),o=Ut(t,a),c=ue(null);return ve(()=>{const l=c.current;c.current=(r==null?void 0:r.current)||a.current,l!==c.current&&s.onAnchorChange(c.current)}),r?null:g(kt.div,{...i,ref:o})});oE.displayName=aE;var im="PopperContent",[dz,hz]=nE(im),cE=_e((e,t)=>{var ae,Re,Me,be,qe,We;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:O,...m}=e,b=iE(im,n),[v,k]=fe(null),y=Ut(t,Kt=>k(Kt)),[T,_]=fe(null),S=lz(T),C=(S==null?void 0:S.width)??0,N=(S==null?void 0:S.height)??0,$=r+(s!=="center"?"-"+s:""),x=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(l)?l:[l],L=D.length>0,V={padding:x,boundary:D.filter(fz),altBoundary:L},{refs:F,floatingStyles:U,placement:H,isPositioned:se,middlewareData:B}=KB({strategy:"fixed",placement:$,whileElementsMounted:(...Kt)=>FB(...Kt,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[ez({mainAxis:i+N,alignmentAxis:a}),c&&tz({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?nz():void 0,...V}),c&&rz({...V}),iz({...V,apply:({elements:Kt,rects:cs,availableWidth:wi,availableHeight:xi})=>{const{width:pu,height:km}=cs.reference,ls=Kt.floating.style;ls.setProperty("--radix-popper-available-width",`${wi}px`),ls.setProperty("--radix-popper-available-height",`${xi}px`),ls.setProperty("--radix-popper-anchor-width",`${pu}px`),ls.setProperty("--radix-popper-anchor-height",`${km}px`)}}),T&&az({element:T,padding:o}),mz({arrowWidth:C,arrowHeight:N}),h&&sz({strategy:"referenceHidden",...V})]}),[de,A]=dE(H),xe=is(O);on(()=>{se&&(xe==null||xe())},[se,xe]);const Ae=(ae=B.arrow)==null?void 0:ae.x,R=(Re=B.arrow)==null?void 0:Re.y,Oe=((Me=B.arrow)==null?void 0:Me.centerOffset)!==0,[Ge,Ue]=fe();return on(()=>{v&&Ue(window.getComputedStyle(v).zIndex)},[v]),g("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:se?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ge,"--radix-popper-transform-origin":[(be=B.transformOrigin)==null?void 0:be.x,(qe=B.transformOrigin)==null?void 0:qe.y].join(" "),...((We=B.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(dz,{scope:n,placedSide:de,onArrowChange:_,arrowX:Ae,arrowY:R,shouldHideArrow:Oe,children:g(kt.div,{"data-side":de,"data-align":A,...m,ref:y,style:{...m.style,animation:se?void 0:"none"}})})})});cE.displayName=im;var lE="PopperArrow",pz={top:"bottom",right:"left",bottom:"top",left:"right"},uE=_e(function(e,t){const{__scopePopper:n,...r}=e,i=hz(lE,n),s=pz[i.placedSide];return g("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g(cz,{...r,ref:t,style:{...r.style,display:"block"}})})});uE.displayName=lE;function fz(e){return e!==null}var mz=e=>({name:"transformOrigin",options:e,fn(t){var m,b,v;const{placement:n,rects:r,middlewareData:i}=t,s=((m=i.arrow)==null?void 0:m.centerOffset)!==0,a=s?0:e.arrowWidth,o=s?0:e.arrowHeight,[c,l]=dE(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((b=i.arrow)==null?void 0:b.x)??0)+a/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+o/2;let p="",O="";return c==="bottom"?(p=s?u:`${d}px`,O=`${-o}px`):c==="top"?(p=s?u:`${d}px`,O=`${r.floating.height+o}px`):c==="right"?(p=`${-o}px`,O=s?u:`${h}px`):c==="left"&&(p=`${r.floating.width+o}px`,O=s?u:`${h}px`),{data:{x:p,y:O}}}});function dE(e){const[t,n="center"]=e.split("-");return[t,n]}var Oz=sE,gz=oE,vz=cE,bz=uE,Tz="Portal",hE=_e((e,t)=>{var o;const{container:n,...r}=e,[i,s]=fe(!1);on(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?Tr.createPortal(g(kt.div,{...r,ref:t}),a):null});hE.displayName=Tz;var kz=Lu[" useInsertionEffect ".trim().toString()]||on;function pE({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=yz({defaultProp:t,onChange:n}),o=e!==void 0,c=o?e:i;{const u=ue(e!==void 0);ve(()=>{const d=u.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const l=oe(u=>{var d;if(o){const h=Sz(u)?u(e):u;h!==e&&((d=a.current)==null||d.call(a,h))}else s(u)},[o,e,s,a]);return[c,l]}function yz({defaultProp:e,onChange:t}){const[n,r]=fe(e),i=ue(n),s=ue(t);return kz(()=>{s.current=t},[t]),ve(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Sz(e){return typeof e=="function"}function _z(e){const t=ue({value:e,previous:e});return Ne(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var fE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ez="VisuallyHidden",wz=_e((e,t)=>g(kt.span,{...e,ref:t,style:{...fE,...e.style}}));wz.displayName=Ez;var xz=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},aa=new WeakMap,eu=new WeakMap,tu={},sm=0,mE=function(e){return e&&(e.host||mE(e.parentNode))},Cz=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=mE(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Pz=function(e,t,n,r){var i=Cz(t,Array.isArray(e)?e:[e]);tu[n]||(tu[n]=new WeakMap);var s=tu[n],a=[],o=new Set,c=new Set(i),l=function(d){!d||o.has(d)||(o.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var p=h.getAttribute(r),O=p!==null&&p!=="false",m=(aa.get(h)||0)+1,b=(s.get(h)||0)+1;aa.set(h,m),s.set(h,b),a.push(h),m===1&&O&&eu.set(h,!0),b===1&&h.setAttribute(n,"true"),O||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(t),o.clear(),sm++,function(){a.forEach(function(d){var h=aa.get(d)-1,p=s.get(d)-1;aa.set(d,h),s.set(d,p),h||(eu.has(d)||d.removeAttribute(r),eu.delete(d)),p||d.removeAttribute(n)}),sm--,sm||(aa=new WeakMap,aa=new WeakMap,eu=new WeakMap,tu={})}},Rz=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=xz(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Pz(r,i,n,"aria-hidden")):function(){return null}},fr=function(){return fr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fr.apply(this,arguments)};function OE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Az(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var nu="right-scroll-bar-position",ru="width-before-scroll-bar",Iz="with-scroll-bars-hidden",Qz="--removed-body-scroll-bar-size";function am(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Nz(e,t){var n=fe(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var Dz=typeof window<"u"?br:ve,gE=new WeakMap;function $z(e,t){var n=Nz(null,function(r){return e.forEach(function(i){return am(i,r)})});return Dz(function(){var r=gE.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||am(o,null)}),s.forEach(function(o){i.has(o)||am(o,a)})}gE.set(n,e)},[e]),n}function Lz(e){return e}function Mz(e,t){t===void 0&&(t=Lz);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var u=a;a=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),n}}}};return i}function Uz(e){e===void 0&&(e={});var t=Mz(null);return t.options=fr({async:!0,ssr:!1},e),t}var vE=function(e){var t=e.sideCar,n=OE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return lt(r,fr({},n))};vE.isSideCarExport=!0;function qz(e,t){return e.useMedium(t),vE}var bE=Uz(),om=function(){},iu=_e(function(e,t){var n=ue(null),r=fe({onScrollCapture:om,onWheelCapture:om,onTouchMoveCapture:om}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,O=e.noIsolation,m=e.inert,b=e.allowPinchZoom,v=e.as,k=v===void 0?"div":v,y=e.gapMode,T=OE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=$z([n,t]),C=fr(fr({},T),i);return lt(Xe,null,u&&lt(_,{sideCar:bE,removeScrollBar:l,shards:d,noRelative:p,noIsolation:O,inert:m,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:y}),a?Ai(ln.only(o),fr(fr({},C),{ref:S})):lt(k,fr({},C,{className:c,ref:S}),o))});iu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},iu.classNames={fullWidth:ru,zeroRight:nu};var Xz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Fz(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xz();return t&&e.setAttribute("nonce",t),e}function Bz(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zz(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Zz=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Fz())&&(Bz(t,n),zz(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jz=function(){var e=Zz();return function(t,n){ve(function(){return e.add(t),function(){e.remove()}},[t&&n])}},TE=function(){var e=jz(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Vz={left:0,top:0,right:0,gap:0},cm=function(e){return parseInt(e||"",10)||0},Gz=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[cm(n),cm(r),cm(i)]},Wz=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Vz;var t=Gz(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Yz=TE(),oa="data-scroll-locked",Hz=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Iz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(oa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nu,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ru,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(nu," .").concat(nu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ru," .").concat(ru,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(oa,`] {
    `).concat(Qz,": ").concat(o,`px;
  }
`)},kE=function(){var e=parseInt(document.body.getAttribute(oa)||"0",10);return isFinite(e)?e:0},Kz=function(){ve(function(){return document.body.setAttribute(oa,(kE()+1).toString()),function(){var e=kE()-1;e<=0?document.body.removeAttribute(oa):document.body.setAttribute(oa,e.toString())}},[])},Jz=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Kz();var s=Ne(function(){return Wz(i)},[i]);return lt(Yz,{styles:Hz(s,!t,i,n?"":"!important")})},lm=!1;if(typeof window<"u")try{var su=Object.defineProperty({},"passive",{get:function(){return lm=!0,!0}});window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{lm=!1}var ca=lm?{passive:!1}:!1,eZ=function(e){return e.tagName==="TEXTAREA"},yE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!eZ(e)&&n[t]==="visible")},tZ=function(e){return yE(e,"overflowY")},nZ=function(e){return yE(e,"overflowX")},SE=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=_E(e,r);if(i){var s=EE(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rZ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},iZ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_E=function(e,t){return e==="v"?tZ(t):nZ(t)},EE=function(e,t){return e==="v"?rZ(t):iZ(t)},sZ=function(e,t){return e==="h"&&t==="rtl"?-1:1},aZ=function(e,t,n,r,i){var s=sZ(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,c=t.contains(o),l=!1,u=a>0,d=0,h=0;do{if(!o)break;var p=EE(e,o),O=p[0],m=p[1],b=p[2],v=m-b-s*O;(O||v)&&_E(e,o)&&(d+=v,h+=O);var k=o.parentNode;o=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},au=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wE=function(e){return[e.deltaX,e.deltaY]},xE=function(e){return e&&"current"in e?e.current:e},oZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cZ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lZ=0,la=[];function uZ(e){var t=ue([]),n=ue([0,0]),r=ue(),i=fe(lZ++)[0],s=fe(TE)[0],a=ue(e);ve(function(){a.current=e},[e]),ve(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Az([e.lockRef.current],(e.shards||[]).map(xE)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=oe(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=au(m),k=n.current,y="deltaX"in m?m.deltaX:k[0]-v[0],T="deltaY"in m?m.deltaY:k[1]-v[1],_,S=m.target,C=Math.abs(y)>Math.abs(T)?"h":"v";if("touches"in m&&C==="h"&&S.type==="range")return!1;var N=window.getSelection(),$=N&&N.anchorNode,x=$?$===S||$.contains(S):!1;if(x)return!1;var D=SE(C,S);if(!D)return!0;if(D?_=C:(_=C==="v"?"h":"v",D=SE(C,S)),!D)return!1;if(!r.current&&"changedTouches"in m&&(y||T)&&(r.current=_),!_)return!0;var L=r.current||_;return aZ(L,b,m,L==="h"?y:T)},[]),c=oe(function(m){var b=m;if(!(!la.length||la[la.length-1]!==s)){var v="deltaY"in b?wE(b):au(b),k=t.current.filter(function(_){return _.name===b.type&&(_.target===b.target||b.target===_.shadowParent)&&oZ(_.delta,v)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var y=(a.current.shards||[]).map(xE).filter(Boolean).filter(function(_){return _.contains(b.target)}),T=y.length>0?o(b,y[0]):!a.current.noIsolation;T&&b.cancelable&&b.preventDefault()}}},[]),l=oe(function(m,b,v,k){var y={name:m,delta:b,target:v,should:k,shadowParent:dZ(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(T){return T!==y})},1)},[]),u=oe(function(m){n.current=au(m),r.current=void 0},[]),d=oe(function(m){l(m.type,wE(m),m.target,o(m,e.lockRef.current))},[]),h=oe(function(m){l(m.type,au(m),m.target,o(m,e.lockRef.current))},[]);ve(function(){return la.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ca),document.addEventListener("touchmove",c,ca),document.addEventListener("touchstart",u,ca),function(){la=la.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,ca),document.removeEventListener("touchmove",c,ca),document.removeEventListener("touchstart",u,ca)}},[]);var p=e.removeScrollBar,O=e.inert;return lt(Xe,null,O?lt(s,{styles:cZ(i)}):null,p?lt(Jz,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dZ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hZ=qz(bE,uZ);var CE=_e(function(e,t){return lt(iu,fr({},e,{ref:t,sideCar:hZ}))});CE.classNames=iu.classNames;var pZ=[" ","Enter","ArrowUp","ArrowDown"],fZ=[" ","Enter"],as="Select",[ou,cu,mZ]=CF(as),[ua]=qf(as,[mZ,rE]),lu=rE(),[OZ,_i]=ua(as),[gZ,vZ]=ua(as),PE=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:h,required:p,form:O}=e,m=lu(t),[b,v]=fe(null),[k,y]=fe(null),[T,_]=fe(!1),S=RF(l),[C,N]=pE({prop:r,defaultProp:i??!1,onChange:s,caller:as}),[$,x]=pE({prop:a,defaultProp:o,onChange:c,caller:as}),D=ue(null),L=b?O||!!b.closest("form"):!0,[V,F]=fe(new Set),U=Array.from(V).map(H=>H.props.value).join(";");return g(Oz,{...m,children:g(OZ,{required:p,scope:t,trigger:b,onTriggerChange:v,valueNode:k,onValueNodeChange:y,valueNodeHasChildren:T,onValueNodeHasChildrenChange:_,contentId:Zf(),value:$,onValueChange:x,open:C,onOpenChange:N,dir:S,triggerPointerDownPosRef:D,disabled:h,children:[g(ou.Provider,{scope:t,children:g(gZ,{scope:e.__scopeSelect,onNativeOptionAdd:oe(H=>{F(se=>new Set(se).add(H))},[]),onNativeOptionRemove:oe(H=>{F(se=>{const B=new Set(se);return B.delete(H),B})},[]),children:n})}),L?g(YE,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:$,onChange:H=>x(H.target.value),disabled:h,form:O,children:[$===void 0?g("option",{value:""}):null,Array.from(V)]},U):null]})})};PE.displayName=as;var RE="SelectTrigger",AE=_e((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=lu(n),a=_i(RE,n),o=a.disabled||r,c=Ut(t,a.onTriggerChange),l=cu(n),u=ue("touch"),[d,h,p]=KE(m=>{const b=l().filter(y=>!y.disabled),v=b.find(y=>y.value===a.value),k=JE(b,m,v);k!==void 0&&a.onValueChange(k.value)}),O=m=>{o||(a.onOpenChange(!0),p()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return g(gz,{asChild:!0,...s,children:g(kt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":HE(a.value)?"":void 0,...i,ref:c,onClick:wt(i.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&O(m)}),onPointerDown:wt(i.onPointerDown,m=>{u.current=m.pointerType;const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(O(m),m.preventDefault())}),onKeyDown:wt(i.onKeyDown,m=>{const b=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(b&&m.key===" ")&&pZ.includes(m.key)&&(O(),m.preventDefault())})})})});AE.displayName=RE;var IE="SelectValue",bZ=_e((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,c=_i(IE,n),{onValueNodeHasChildrenChange:l}=c,u=s!==void 0,d=Ut(t,c.onValueNodeChange);return on(()=>{l(u)},[l,u]),g(kt.span,{...o,ref:d,style:{pointerEvents:"none"},children:HE(c.value)?g(Xe,{children:a}):s})});bZ.displayName=IE;var TZ="SelectIcon",QE=_e((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return g(kt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});QE.displayName=TZ;var kZ="SelectPortal",NE=e=>g(hE,{asChild:!0,...e});NE.displayName=kZ;var os="SelectContent",DE=_e((e,t)=>{const n=_i(os,e.__scopeSelect),[r,i]=fe();if(on(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Vo(g($E,{scope:e.__scopeSelect,children:g(ou.Slot,{scope:e.__scopeSelect,children:g("div",{children:e.children})})}),s):null}return g(LE,{...e,ref:t})});DE.displayName=os;var zn=10,[$E,Ei]=ua(os),yZ="SelectContentImpl",SZ=Bl("SelectContent.RemoveScroll"),LE=_e((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:O,hideWhenDetached:m,avoidCollisions:b,...v}=e,k=_i(os,n),[y,T]=fe(null),[_,S]=fe(null),C=Ut(t,ae=>T(ae)),[N,$]=fe(null),[x,D]=fe(null),L=cu(n),[V,F]=fe(!1),U=ue(!1);ve(()=>{if(y)return Rz(y)},[y]),XF();const H=oe(ae=>{const[Re,...Me]=L().map(We=>We.ref.current),[be]=Me.slice(-1),qe=document.activeElement;for(const We of ae)if(We===qe||(We==null||We.scrollIntoView({block:"nearest"}),We===Re&&_&&(_.scrollTop=0),We===be&&_&&(_.scrollTop=_.scrollHeight),We==null||We.focus(),document.activeElement!==qe))return},[L,_]),se=oe(()=>H([N,y]),[H,N,y]);ve(()=>{V&&se()},[V,se]);const{onOpenChange:B,triggerPointerDownPosRef:de}=k;ve(()=>{if(y){let ae={x:0,y:0};const Re=be=>{var qe,We;ae={x:Math.abs(Math.round(be.pageX)-(((qe=de.current)==null?void 0:qe.x)??0)),y:Math.abs(Math.round(be.pageY)-(((We=de.current)==null?void 0:We.y)??0))}},Me=be=>{ae.x<=10&&ae.y<=10?be.preventDefault():y.contains(be.target)||B(!1),document.removeEventListener("pointermove",Re),de.current=null};return de.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Me,{capture:!0})}}},[y,B,de]),ve(()=>{const ae=()=>B(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[B]);const[A,xe]=KE(ae=>{const Re=L().filter(qe=>!qe.disabled),Me=Re.find(qe=>qe.ref.current===document.activeElement),be=JE(Re,ae,Me);be&&setTimeout(()=>be.ref.current.focus())}),Ae=oe((ae,Re,Me)=>{const be=!U.current&&!Me;(k.value!==void 0&&k.value===Re||be)&&($(ae),be&&(U.current=!0))},[k.value]),R=oe(()=>y==null?void 0:y.focus(),[y]),Oe=oe((ae,Re,Me)=>{const be=!U.current&&!Me;(k.value!==void 0&&k.value===Re||be)&&D(ae)},[k.value]),Ge=r==="popper"?um:ME,Ue=Ge===um?{side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:O,hideWhenDetached:m,avoidCollisions:b}:{};return g($E,{scope:n,content:y,viewport:_,onViewportChange:S,itemRefCallback:Ae,selectedItem:N,onItemLeave:R,itemTextRefCallback:Oe,focusSelectedItem:se,selectedItemText:x,position:r,isPositioned:V,searchRef:A,children:g(CE,{as:SZ,allowPinchZoom:!0,children:g(C1,{asChild:!0,trapped:k.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:wt(i,ae=>{var Re;(Re=k.trigger)==null||Re.focus({preventScroll:!0}),ae.preventDefault()}),children:g(S1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:g(Ge,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:ae=>ae.preventDefault(),...v,...Ue,onPlaced:()=>F(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:wt(v.onKeyDown,ae=>{const Re=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Re&&ae.key.length===1&&xe(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Me=L().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const be=ae.target,qe=Me.indexOf(be);Me=Me.slice(qe+1)}setTimeout(()=>H(Me)),ae.preventDefault()}})})})})})})});LE.displayName=yZ;var _Z="SelectItemAlignedPosition",ME=_e((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=_i(os,n),a=Ei(os,n),[o,c]=fe(null),[l,u]=fe(null),d=Ut(t,C=>u(C)),h=cu(n),p=ue(!1),O=ue(!0),{viewport:m,selectedItem:b,selectedItemText:v,focusSelectedItem:k}=a,y=oe(()=>{if(s.trigger&&s.valueNode&&o&&l&&m&&b&&v){const C=s.trigger.getBoundingClientRect(),N=l.getBoundingClientRect(),$=s.valueNode.getBoundingClientRect(),x=v.getBoundingClientRect();if(s.dir!=="rtl"){const be=x.left-N.left,qe=$.left-be,We=C.left-qe,Kt=C.width+We,cs=Math.max(Kt,N.width),wi=window.innerWidth-zn,xi=T1(qe,[zn,Math.max(zn,wi-cs)]);o.style.minWidth=Kt+"px",o.style.left=xi+"px"}else{const be=N.right-x.right,qe=window.innerWidth-$.right-be,We=window.innerWidth-C.right-qe,Kt=C.width+We,cs=Math.max(Kt,N.width),wi=window.innerWidth-zn,xi=T1(qe,[zn,Math.max(zn,wi-cs)]);o.style.minWidth=Kt+"px",o.style.right=xi+"px"}const D=h(),L=window.innerHeight-zn*2,V=m.scrollHeight,F=window.getComputedStyle(l),U=parseInt(F.borderTopWidth,10),H=parseInt(F.paddingTop,10),se=parseInt(F.borderBottomWidth,10),B=parseInt(F.paddingBottom,10),de=U+H+V+B+se,A=Math.min(b.offsetHeight*5,de),xe=window.getComputedStyle(m),Ae=parseInt(xe.paddingTop,10),R=parseInt(xe.paddingBottom,10),Oe=C.top+C.height/2-zn,Ge=L-Oe,Ue=b.offsetHeight/2,ae=b.offsetTop+Ue,Re=U+H+ae,Me=de-Re;if(Re<=Oe){const be=D.length>0&&b===D[D.length-1].ref.current;o.style.bottom="0px";const qe=l.clientHeight-m.offsetTop-m.offsetHeight,We=Math.max(Ge,Ue+(be?R:0)+qe+se),Kt=Re+We;o.style.height=Kt+"px"}else{const be=D.length>0&&b===D[0].ref.current;o.style.top="0px";const qe=Math.max(Oe,U+m.offsetTop+(be?Ae:0)+Ue)+Me;o.style.height=qe+"px",m.scrollTop=Re-Oe+m.offsetTop}o.style.margin=`${zn}px 0`,o.style.minHeight=A+"px",o.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,o,l,m,b,v,s.dir,r]);on(()=>y(),[y]);const[T,_]=fe();on(()=>{l&&_(window.getComputedStyle(l).zIndex)},[l]);const S=oe(C=>{C&&O.current===!0&&(y(),k==null||k(),O.current=!1)},[y,k]);return g(wZ,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:g("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:g(kt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});ME.displayName=_Z;var EZ="SelectPopperPosition",um=_e((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=zn,...s}=e,a=lu(n);return g(vz,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});um.displayName=EZ;var[wZ,dm]=ua(os,{}),hm="SelectViewport",UE=_e((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=Ei(hm,n),a=dm(hm,n),o=Ut(t,s.onViewportChange),c=ue(0);return g(Xe,{children:[g("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),g(ou.Slot,{scope:n,children:g(kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:wt(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const O=window.innerHeight-zn*2,m=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),v=Math.max(m,b);if(v<O){const k=v+p,y=Math.min(O,k),T=k-y;d.style.height=y+"px",d.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});UE.displayName=hm;var qE="SelectGroup",[xZ,CZ]=ua(qE),PZ=_e((e,t)=>{const{__scopeSelect:n,...r}=e,i=Zf();return g(xZ,{scope:n,id:i,children:g(kt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});PZ.displayName=qE;var XE="SelectLabel",RZ=_e((e,t)=>{const{__scopeSelect:n,...r}=e,i=CZ(XE,n);return g(kt.div,{id:i.id,...r,ref:t})});RZ.displayName=XE;var uu="SelectItem",[AZ,FE]=ua(uu),BE=_e((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=_i(uu,n),c=Ei(uu,n),l=o.value===r,[u,d]=fe(s??""),[h,p]=fe(!1),O=Ut(t,k=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,k,r,i)}),m=Zf(),b=ue("touch"),v=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g(AZ,{scope:n,value:r,disabled:i,textId:m,isSelected:l,onItemTextChange:oe(k=>{d(y=>y||((k==null?void 0:k.textContent)??"").trim())},[]),children:g(ou.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:g(kt.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":l&&h,"data-state":l?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:O,onFocus:wt(a.onFocus,()=>p(!0)),onBlur:wt(a.onBlur,()=>p(!1)),onClick:wt(a.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:wt(a.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:wt(a.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:wt(a.onPointerMove,k=>{var y;b.current=k.pointerType,i?(y=c.onItemLeave)==null||y.call(c):b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:wt(a.onPointerLeave,k=>{var y;k.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:wt(a.onKeyDown,k=>{var y;((y=c.searchRef)==null?void 0:y.current)!==""&&k.key===" "||(fZ.includes(k.key)&&v(),k.key===" "&&k.preventDefault())})})})})});BE.displayName=uu;var Lo="SelectItemText",zE=_e((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=_i(Lo,n),o=Ei(Lo,n),c=FE(Lo,n),l=vZ(Lo,n),[u,d]=fe(null),h=Ut(t,v=>d(v),c.onItemTextChange,v=>{var k;return(k=o.itemTextRefCallback)==null?void 0:k.call(o,v,c.value,c.disabled)}),p=u==null?void 0:u.textContent,O=Ne(()=>g("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=l;return on(()=>(m(O),()=>b(O)),[m,b,O]),g(Xe,{children:[g(kt.span,{id:c.textId,...s,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Vo(s.children,a.valueNode):null]})});zE.displayName=Lo;var ZE="SelectItemIndicator",jE=_e((e,t)=>{const{__scopeSelect:n,...r}=e;return FE(ZE,n).isSelected?g(kt.span,{"aria-hidden":!0,...r,ref:t}):null});jE.displayName=ZE;var pm="SelectScrollUpButton",VE=_e((e,t)=>{const n=Ei(pm,e.__scopeSelect),r=dm(pm,e.__scopeSelect),[i,s]=fe(!1),a=Ut(t,r.onScrollButtonChange);return on(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollTop>0;s(l)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?g(WE,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});VE.displayName=pm;var fm="SelectScrollDownButton",GE=_e((e,t)=>{const n=Ei(fm,e.__scopeSelect),r=dm(fm,e.__scopeSelect),[i,s]=fe(!1),a=Ut(t,r.onScrollButtonChange);return on(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;s(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?g(WE,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});GE.displayName=fm;var WE=_e((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=Ei("SelectScrollButton",n),a=ue(null),o=cu(n),c=oe(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return ve(()=>()=>c(),[c]),on(()=>{var l,u;(u=(l=o().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),g(kt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:wt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:wt(i.onPointerMove,()=>{var l;(l=s.onItemLeave)==null||l.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:wt(i.onPointerLeave,()=>{c()})})}),IZ="SelectSeparator",QZ=_e((e,t)=>{const{__scopeSelect:n,...r}=e;return g(kt.div,{"aria-hidden":!0,...r,ref:t})});QZ.displayName=IZ;var mm="SelectArrow",NZ=_e((e,t)=>{const{__scopeSelect:n,...r}=e,i=lu(n),s=_i(mm,n),a=Ei(mm,n);return s.open&&a.position==="popper"?g(bz,{...i,...r,ref:t}):null});NZ.displayName=mm;var DZ="SelectBubbleInput",YE=_e(({__scopeSelect:e,value:t,...n},r)=>{const i=ue(null),s=Ut(r,i),a=_z(t);return ve(()=>{const o=i.current;if(!o)return;const c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&l){const u=new Event("change",{bubbles:!0});l.call(o,t),o.dispatchEvent(u)}},[a,t]),g(kt.select,{...n,style:{...fE,...n.style},ref:s,defaultValue:t})});YE.displayName=DZ;function HE(e){return e===""||e===void 0}function KE(e){const t=is(e),n=ue(""),r=ue(0),i=oe(a=>{const o=n.current+a;t(o),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),s=oe(()=>{n.current="",window.clearTimeout(r.current)},[]);return ve(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function JE(e,t,n){const r=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=$Z(e,Math.max(i,0));r.length===1&&(s=s.filter(o=>o!==n));const a=s.find(o=>o.textValue.toLowerCase().startsWith(r.toLowerCase()));return a!==n?a:void 0}function $Z(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var LZ=PE,ew=AE,tw=QE,MZ=NE,UZ=DE,qZ=UE,XZ=BE,FZ=zE,BZ=jE,zZ=VE,ZZ=GE;const jZ={sm:"w-4 h-4",md:"w-6 h-6"};function Om({size:e="md",flagCode:t,className:n,...r}){return g("img",{className:at("rounded-full object-cover",jZ[e],n),src:`https://storage.googleapis.com/eleven-public-cdn/images/flags/circle-flags/${t}.svg`,alt:`${t.toUpperCase()} flag`,...r})}function nw({children:e,...t}){const[n,r]=fe(!1),{language:i,setLanguage:s,options:a}=Is(),o=NA();return g(LZ,{open:n,value:i.value.languageCode,onValueChange:c=>{s(c),r(!1)},onOpenChange:c=>{c&&r(!0)},children:[e,g(MZ,{container:o,children:g(UZ,{className:"overflow-hidden bg-base border border-base-border rounded-dropdown-sheet max-h-[min(384px,var(--radix-select-content-available-height))] min-w-[var(--radix-select-trigger-width)] z-10",position:"popper",sideOffset:8,align:"end",side:"top",onPointerDownOutside:()=>r(!1),onCloseAutoFocus:()=>r(!1),onEscapeKeyDown:()=>r(!1),...t,children:[g(zZ,{className:"flex items-center justify-center h-6 bg-base text-base-subtle cursor-default",children:g(er,{size:"sm",name:"chevron-up"})}),g(qZ,{className:"p-1.5",children:a.value.map(c=>g(XZ,{value:c.languageCode,className:"flex select-none items-center p-1.5 pr-3 gap-2 cursor-pointer rounded-input relative focus-visible:outline-none data-[highlighted]:bg-base-active text-sm",children:[g(Om,{flagCode:c.flagCode}),g(FZ,{children:c.name}),g(BZ,{className:"text-base-primary p-1.5 -mr-1.5 ml-auto",children:g(er,{size:"sm",name:"check"})})]},c.languageCode))}),g(ZZ,{className:"flex items-center justify-center h-6 bg-base text-base-subtle cursor-default",children:g(er,{size:"sm",name:"chevron-down"})})]})})]})}function VZ({className:e,...t}){const n=nt(),{language:r,showPicker:i}=Is();return i.value?g(nw,{align:"center",children:g(ew,{className:at("h-9 min-w-max rounded-button focus-ring px-2 flex gap-2 items-center text-base-primary bg-base hover:bg-base-hover active:bg-base-active font-medium",e),"aria-label":n.change_language,...t,children:[g(Om,{size:"sm",flagCode:r.value.flagCode}),r.value.name,g(tw,{className:"text-base-subtle",asChild:!0,children:g(er,{size:"sm",name:"chevron-down"})})]})}):null}function gm({className:e,...t}){const{status:n,isSpeaking:r}=St(),i=Ma(),s=nt(),a=Te(()=>n.value!=="connected"?s.connecting_status.value:i.value?s.chatting_status.value:r.value?s.speaking_status.value:s.listening_status.value),[o,c]=fe(a.peek());return jn(()=>{const l=a.value;if(n.value==="connected"&&r.value)c(l);else{const u=setTimeout(()=>{c(l)},500);return()=>clearTimeout(u)}}),g("div",{className:at("py-1.5 px-3 bg-base-active overflow-hidden rounded-bubble text-sm",e),...t,children:g(zt,{initial:!1,active:!0,children:g("div",{className:"animate-text whitespace-nowrap transition-[opacity,transform] ease-out duration-200 data-hidden:opacity-0 transform data-hidden:translate-y-2",children:o})},o)})}const rw=it(void 0),iw=768;function GZ({children:e,initialVariant:t="compact"}){const n=Ze(t!=="compact"),r=Ze(typeof window<"u"?window.innerWidth<iw:!1);ve(()=>{const o=()=>{r.value=window.innerWidth<iw};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const i=oe(()=>{n.value=!n.value},[n]),s=Te(()=>n.value?r.value?"fullscreen":"expanded":"compact"),a=Ne(()=>({variant:s,toggleSize:i}),[s,i]);return g(rw.Provider,{value:a,children:e})}function sw(){return Bt(rw)}function WZ(e){const t=nt(),{mode:n,setMode:r,isTextMode:i}=vh(),s=oe(()=>{const a=n.peek()==="text"?"voice":"text";r(a)},[r,n]);return g(Qt,{"aria-label":i.value?t.voice_mode:t.text_mode,icon:i.value?"soundwave":"chat",onClick:s,...e})}function YZ({showBackButton:e,onBackClick:t,showStatusLabel:n,showLanguageSelector:r,showConversationModeToggle:i,showExpandButton:s}){const a=nt(),{toggleSize:o,variant:c}=sw(),l=Te(()=>c.value==="compact"?"Expand widget":"Collapse widget");return g("div",{className:"w-full relative shrink-0 z-10",children:[g("div",{className:"h-16 absolute top-0 w-full bg-base"}),g("div",{className:"h-4 absolute top-16 w-full bg-gradient-to-b from-base to-transparent backdrop-blur-[1px] [mask-image:linear-gradient(to_bottom,black,transparent)] shadow-scroll-fade-bottom"}),g("div",{className:"h-16 top-0 absolute flex flex-row items-center justify-center w-full",children:[g("div",{className:"absolute start-3 flex gap-2 items-center",children:[e?g(Qt,{variant:"ghost",onClick:t,"aria-label":a.go_back,className:"h-8 w-8",children:g(er,{name:"chevron-up",className:"-rotate-90",size:"xs"})}):g("div",{className:"relative w-8 h-8"}),g(zt,{active:n,children:g(gm,{className:"transition-opacity data-hidden:opacity-0"})})]}),g("div",{className:"absolute flex flex-row items-center gap-2 ms-auto end-3",children:[g(zt,{active:r,children:g("div",{className:"transition-[opacity,transform] duration-200 data-hidden:opacity-0 data-hidden:-translate-y-4",children:g(VZ,{})})}),g(zt,{active:i,children:g(WZ,{variant:"ghost",className:"h-8 w-8 transition-opacity data-hidden:opacity-0"})}),g(zt,{active:s,children:g(Qt,{variant:"ghost",onClick:o,"aria-label":l,className:"h-8 w-8 transition-opacity data-hidden:opacity-0",children:g(er,{name:c.value==="compact"?"maximize":"minimize",size:"sm"})})})]})]})]})}function vm({iconOnly:e,isDisconnected:t,children:n,...r}){const{endSession:i,startSession:s}=St(),a=nt();return g(Qt,{variant:t?"primary":"secondary",icon:t?"phone":"phone-off",onClick:t?o=>s(o.currentTarget):i,"aria-label":t?a.start_call:a.end_call,...r,children:e?void 0:n??(t?a.start_call:a.end_call)})}function bm(e){const t=nt(),{isMuted:n,isMutingEnabled:r,setIsMuted:i}=AA(),s=oe(()=>{i(!n.peek())},[i]);return r.value?g(Qt,{"aria-label":t.mute_microphone,"aria-pressed":n.value,icon:n.value?"mic-off":"mic",onClick:s,...e}):null}function HZ({showTranscript:e,scrollPinned:t}){const n=gh(),r=Ze(""),i=Ze(!1),{isDisconnected:s,startSession:a,sendUserMessage:o}=St(),c=oe(async l=>{l.preventDefault();const u=r.value.trim();u&&(t.value=!0,r.value="",s.value?await a(l.currentTarget,u):o(u))},[r,t,s,a,o]);return g("div",{className:"sticky bottom-0 pointer-events-none z-10 max-h-[50%] flex flex-col",children:[g("div",{className:"absolute top-0 left-0 right-0 h-4 -translate-y-full bg-gradient-to-t from-base to-transparent pointer-events-none backdrop-blur-[1px] [mask-image:linear-gradient(to_top,black,transparent)] shadow-scroll-fade-top"}),g("div",{className:"relative w-full px-3 pb-3 flex flex-col items-center pointer-events-auto min-h-0",children:[n.value&&g("div",{className:Ee("bg-base relative flex flex-col min-h-0 rounded-[calc(var(--el-sheet-radius)-8px)] border border-base-border w-full transition-shadow overflow-hidden",i.value&&"ring-2 ring-accent"),children:[g(KZ,{userMessage:r,isFocused:i,onSendMessage:c}),g("div",{className:"absolute bottom-0 left-0 right-0 flex gap-1.5 items-center justify-end px-3 pb-3 pt-2 pointer-events-none",children:g("div",{className:"pointer-events-auto flex gap-1.5 items-center",children:g(aw,{userMessage:r,onSendMessage:c,showTranscript:e})})})]}),!n.value&&g("div",{className:"w-full flex gap-1.5 items-center justify-end",children:g(aw,{userMessage:r,onSendMessage:c,showTranscript:e})})]})]})}function KZ({userMessage:e,isFocused:t,onSendMessage:n}){const r=nt(),i=Ma(),{isDisconnected:s,conversationIndex:a,sendUserActivity:o}=St(),c=oe(h=>{e.value=h.currentTarget.value},[e]),l=oe(async h=>{h.key==="Enter"&&!h.shiftKey&&await n(h)},[n]),u=oe(()=>{t.value=!0},[t]),d=oe(()=>{t.value=!1},[t]);return g("textarea",{"aria-label":r.input_label,value:e.value,onInput:o,onChange:c,onKeyDown:l,onFocus:u,onBlur:d,placeholder:i.value?s.value&&a.value>0?r.input_placeholder_new_conversation.value:r.input_placeholder_text_only.value:r.input_placeholder.value,className:"w-full h-full resize-none bg-base leading-5 outline-none text-sm text-base-primary placeholder:text-base-subtle p-3 pb-[60px] min-h-[4.5rem] max-h-full [field-sizing:content]"})}function aw({userMessage:e,onSendMessage:t,showTranscript:n=!1}){const r=nt(),i=Ma(),s=gh(),{isDisconnected:a,status:o}=St(),{isTextMode:c}=vh(),l=Te(()=>!!e.value.trim()),u=Te(()=>s.value),d=Te(()=>!a.value||!i.value&&n),h=Te(()=>!i.value&&!a.value&&!c.value);return g(Xe,{children:[g(Ln,{visible:h.value,children:g(bm,{className:"bg-base text-base-primary hover:bg-base-hover active:bg-base-active"})}),g(Ln,{visible:d.value,children:g(vm,{iconOnly:!0,isDisconnected:a.value,disabled:o.value==="disconnecting"||o.value==="connecting",className:"bg-base text-base-primary hover:bg-base-hover active:bg-base-active"})}),u.value&&g(Qt,{icon:"send",onClick:t,variant:"primary",disabled:!l.value,"aria-label":r.send_message.value})]})}const JZ=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uOffsets[7];
uniform vec3 uColor1;
uniform vec3 uColor2;
uniform sampler2D uPerlinTexture;

in vec2 vUv;

out vec4 outColor;

const float PI = 3.14159265358979323846;

// Draw a single oval with soft edges and calculate its gradient color
bool drawOval(vec2 polarUv, vec2 polarCenter, float a, float b, bool reverseGradient, float softness, out vec4 color) {
    vec2 p = polarUv - polarCenter;
    float oval = (p.x * p.x) / (a * a) + (p.y * p.y) / (b * b);
    
    float edge = smoothstep(1.0, 1.0 - softness, oval);
    
    if (edge > 0.0) {
        float gradient = reverseGradient ? (1.0 - (p.x / a + 1.0) / 2.0) : ((p.x / a + 1.0) / 2.0);
        color = vec4(vec3(gradient), 0.8 * edge);
        return true;
    }
    return false;
}

// Map grayscale value to a 4-color ramp (color1, color2, color3, color4)
vec3 colorRamp(float grayscale, vec3 color1, vec3 color2, vec3 color3, vec3 color4) {
    if (grayscale < 0.33) {
        return mix(color1, color2, grayscale * 3.0);
    } else if (grayscale < 0.66) {
        return mix(color2, color3, (grayscale - 0.33) * 3.0);
    } else {
        return mix(color3, color4, (grayscale - 0.66) * 3.0);
    }
}

vec2 hash2(vec2 p) {
    return fract(sin(vec2(dot(p, vec2(127.1, 311.7)), dot(p, vec2(269.5, 183.3)))) * 43758.5453);
}

// 2D noise for the ring
float noise2D(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    
    vec2 u = f * f * (3.0 - 2.0 * f);
    float n = mix(
        mix(dot(hash2(i + vec2(0.0, 0.0)), f - vec2(0.0, 0.0)),
            dot(hash2(i + vec2(1.0, 0.0)), f - vec2(1.0, 0.0)), u.x),
        mix(dot(hash2(i + vec2(0.0, 1.0)), f - vec2(0.0, 1.0)),
            dot(hash2(i + vec2(1.0, 1.0)), f - vec2(1.0, 1.0)), u.x),
        u.y
    );

    return 0.5 + 0.5 * n;
}

float sharpRing(vec2 uv, float theta, float time) {
    float ringStart = 1.0;
    float ringWidth = 0.5;
    float noiseScale = 5.0;
    
    vec2 noiseCoord = vec2(theta / (2.0 * PI), time * 0.1);
    noiseCoord *= noiseScale;
    
    float noise = noise2D(noiseCoord);
    noise = (noise - 0.5) * 4.0;
    
    return ringStart + noise * ringWidth * 1.5;
}

float smoothRing(vec2 uv, float time) {
    float angle = atan(uv.y, uv.x);
    if (angle < 0.0) angle += 2.0 * PI;
    
    vec2 noiseCoord = vec2(angle / (2.0 * PI), time * 0.1);
    noiseCoord *= 6.0;
    
    float noise = noise2D(noiseCoord);
    noise = (noise - 0.5) * 8.0;
    
    float ringStart = 0.9;
    float ringWidth = 0.3;
    
    return ringStart + noise * ringWidth;
}

void main() {
    // Normalize vUv to be centered around (0.0, 0.0)
    vec2 uv = vUv * 2.0 - 1.0;

    // Convert uv to polar coordinates
    float radius = length(uv);
    float theta = atan(uv.y, uv.x);
    if (theta < 0.0) theta += 2.0 * PI; // Normalize theta to [0, 2*PI]

    // Initialize the base color to white
    vec4 color = vec4(1.0, 1.0, 1.0, 1.0);

    // Original parameters for the ovals in polar coordinates
    float originalCenters[7] = float[7](0.0, 0.5 * PI, 1.0 * PI, 1.5 * PI, 2.0 * PI, 2.5 * PI, 3.0 * PI);

    // Parameters for the animated centers in polar coordinates
    float centers[7];
    for (int i = 0; i < 7; i++) {
        centers[i] = originalCenters[i] + 0.5 * sin(uTime / 20.0 + uOffsets[i]);
    }

    float a, b;
    vec4 ovalColor;

    // Check if the pixel is inside any of the ovals
    for (int i = 0; i < 7; i++) {
        float noise = texture(uPerlinTexture, vec2(mod(centers[i] + uTime * 0.05, 1.0), 0.5)).r;
        a = noise * 1.5; // Increased variance: goes from 0.0 to 1.0
        b = noise * 4.5; // Tall semi-minor axis
        bool reverseGradient = (i % 2 == 1); // Reverse gradient for every second oval

        // Calculate the distance in polar coordinates
        float distTheta = abs(theta - centers[i]);
        if (distTheta > PI) distTheta = 2.0 * PI - distTheta; // Shortest distance on circle
        float distRadius = radius;

        float softness = 0.4; // Controls edge softness (e.g. how much blur is applied to the ovals)

        // Check if the pixel is inside the oval in polar coordinates
        if (drawOval(vec2(distTheta, distRadius), vec2(0.0, 0.0), a, b, reverseGradient, softness, ovalColor)) {
            // Blend the oval color with the existing color
            color.rgb = mix(color.rgb, ovalColor.rgb, ovalColor.a);
            color.a = max(color.a, ovalColor.a); // Max alpha
        }
    }
    
    // Calculate both noisy rings
    float ringRadius1 = sharpRing(uv, theta, uTime);
    float ringRadius2 = smoothRing(uv, uTime);
    
    // Blend both rings
    float ringAlpha1 = (radius >= ringRadius1) ? 0.3 : 0.0;
    float ringAlpha2 = smoothstep(ringRadius2 - 0.05, ringRadius2 + 0.05, radius) * 0.25;
    
    float totalRingAlpha = max(ringAlpha1, ringAlpha2);
    
    // Apply screen blend mode for combined rings
    vec3 ringColor = vec3(1.0); // White ring color
    color.rgb = 1.0 - (1.0 - color.rgb) * (1.0 - ringColor * totalRingAlpha);

    // Define colours to ramp against greyscale (could increase the amount of colours in the ramp)
    vec3 color1 = vec3(0.0, 0.0, 0.0); // Black
    vec3 color2 = uColor1; // Darker Color
    vec3 color3 = uColor2; // Lighter Color
    vec3 color4 = vec3(1.0, 1.0, 1.0); // White

    // Convert grayscale color to the color ramp
    float luminance = color.r; 
    color.rgb = colorRamp(luminance, color1, color2, color3, color4); // Apply the color ramp

    outColor = color;
}
`,e8=`#version 300 es
precision highp float;

in vec2 position;

out vec2 vUv;

void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0, 1);
}
`,ow=0,t8=new Float32Array([-1,1,-1,-1,1,1,1,-1]),n8="https://storage.googleapis.com/eleven-public-cdn/images/perlin-noise.png",mr=class mr{constructor(t){ge(this,"gl");ge(this,"program");ge(this,"startTime");ge(this,"targetSpeed",0);ge(this,"speed",.5);ge(this,"rafId",null);ge(this,"resizeObserver");ge(this,"colorA",[0,0,0]);ge(this,"colorB",[0,0,0]);ge(this,"offsets",new Float32Array(7).map(()=>Math.random()*Math.PI*2));ge(this,"copyNoiseImage",()=>{this.gl&&(this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,mr.noiseImage),this.gl.generateMipmap(this.gl.TEXTURE_2D))});ge(this,"toDataURL",()=>this.gl.canvas.toDataURL("image/png"));ge(this,"render",()=>{if(!this.gl){this.rafId=null;return}const t=(performance.now()-this.startTime)/1e3;this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uTime"),t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.rafId=requestAnimationFrame(this.render)});const n=t.getContext("webgl2",{depth:!1,stencil:!1});this.gl=n,this.program=this.setupProgram(JZ,e8);const r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([128,128,128,255])),mr.noiseImage||(mr.noiseImage=new Image,mr.noiseImage.crossOrigin="anonymous",mr.noiseImage.src=n8),mr.noiseImage.complete?this.copyNoiseImage():mr.noiseImage.addEventListener("load",this.copyNoiseImage);const i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,t8,n.STATIC_DRAW),n.vertexAttribPointer(ow,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(ow),this.updateColors("#2792DC","#9CE6E6"),this.resizeObserver=new ResizeObserver(a=>{const o=a[0],c=o.devicePixelContentBoxSize?o.devicePixelContentBoxSize[0]:o.contentBoxSize[0];t.width=Math.min(512,c.inlineSize),t.height=Math.min(512,c.blockSize),this.updateViewport()});const s=t.parentElement;if(s)try{this.resizeObserver.observe(s,{box:"device-pixel-content-box"})}catch{this.resizeObserver.observe(s)}this.startTime=performance.now(),this.rafId=requestAnimationFrame(this.render)}dispose(){var t;this.rafId!==null&&cancelAnimationFrame(this.rafId),(t=this.resizeObserver)==null||t.disconnect(),this.gl=null,this.program=null}updateViewport(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}updateColors(t,n){this.gl&&(this.colorA=this.updateColor("uColor1",t)??this.colorA,this.colorB=this.updateColor("uColor2",n)??this.colorB)}updateVolume(t,n){this.targetSpeed=.2+(1-Math.pow(n-1,2))*1.8,this.targetSpeed>this.speed&&(this.speed=this.targetSpeed),this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uInputVolume"),t),this.gl.uniform1f(this.gl.getUniformLocation(this.program,"uOutputVolume"),n)}updateColor(t,n){try{const r=parseInt(n.slice(1,3),16)/255,i=parseInt(n.slice(3,5),16)/255,s=parseInt(n.slice(5,7),16)/255,a=[Math.pow(r,2.2),Math.pow(i,2.2),Math.pow(s,2.2)];return this.gl.uniform3fv(this.gl.getUniformLocation(this.program,t),a),a}catch(r){console.error(`[ConversationalAI] Failed to parse ${n} as color:`,r)}}setupProgram(t,n){const r=this.getShader(this.gl.FRAGMENT_SHADER,t),i=this.getShader(this.gl.VERTEX_SHADER,n);if(!r||!i)throw new Error("Failed to compile shaders");if(this.program=this.gl.createProgram(),this.gl.attachShader(this.program,r),this.gl.attachShader(this.program,i),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error("Failed to link program");return this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"uPerlinTexture"),0),this.gl.uniform1fv(this.gl.getUniformLocation(this.program,"uOffsets"),this.offsets),this.gl.uniform3fv(this.gl.getUniformLocation(this.program,"uColor1"),this.colorA),this.gl.uniform3fv(this.gl.getUniformLocation(this.program,"uColor2"),this.colorB),this.program}getShader(t,n){const r=this.gl.createShader(t);return this.gl.shaderSource(r,n),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(this.gl.deleteShader(r),null)}};ge(mr,"noiseImage");let Tm=mr;const r8={sm:"w-9 h-9",lg:"w-48 h-48"};function da({size:e="sm",className:t}){const{getInputVolume:n,getOutputVolume:r,isSpeaking:i,isDisconnected:s}=St(),{config:a}=bh(),o=ue(null),c=ue(null);jn(()=>{if(s.value){o.current.style.transform="",c.current.style.transform="";return}let u;function d(){const h=n(),p=r(),O=i.peek()?1:1-h*.4,m=i.peek()?1+p*.4:1;o.current.style.transform=`scale(${m})`,c.current.style.transform=`scale(${O})`,u=requestAnimationFrame(d)}return d(),()=>{cancelAnimationFrame(u)}});const l=Te(()=>({backgroundImage:a.value.type==="image"?`url(${a.value.url})`:a.value.type==="url"?`url(${a.value.custom_url})`:void 0}));return g("div",{className:at("relative shrink-0",r8[e],t),children:[g("div",{ref:o,className:"absolute inset-0 rounded-full bg-base-border"}),g("div",{ref:c,style:l,className:"absolute inset-0 rounded-full overflow-hidden bg-base bg-cover",children:a.value.type==="orb"&&g(i8,{color1:a.value.color_1,color2:a.value.color_2})})]})}function i8({color1:e,color2:t}){const{canvasUrl:n}=bh(),[r,i]=fe(null);ve(()=>{r&&(r.updateColors(e,t),r.render(),n.value=r.toDataURL())},[r,e,t]);const s=oe(a=>{if(a){const o=new Tm(a);return i(o),()=>o.dispose()}else i(null)},[i]);return g("canvas",{className:"w-full h-full",ref:s})}function s8({showAvatar:e,showTranscript:t,isDisconnected:n,onStartSession:r}){const i=nt(),s=gh(),a=Mc(),o=Te(()=>Ee("absolute origin-top-left transition-[transform,left,top,opacity,scale] duration-200 z-10","data-hidden:opacity-0",t.value?"top-4 left-4 scale-[0.1667]":s.value?"top-[40%] left-1/2 -translate-x-1/2 -translate-y-1/2 scale-100":"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 scale-100")),c=Te(()=>!t.value&&n.value&&!a.value),l=Te(()=>!t.value&&!n.value);return g(zt,{active:e,children:g("div",{className:o,children:[g(da,{size:"lg"}),g(zt,{active:c,children:g("div",{className:"absolute bottom-0 p-1 rounded-[calc(var(--el-button-radius)+4px)] bg-base left-1/2 -translate-x-1/2 translate-y-1/2 transition-[opacity,transform] data-hidden:opacity-0 data-hidden:scale-100 scale-150",children:g(Qt,{"aria-label":i.start_call,variant:"primary",icon:"phone",onClick:u=>r(u.currentTarget)})})}),g(zt,{active:l,children:g("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 translate-y-full transition-[opacity,transform] data-hidden:opacity-0 data-hidden:scale-75",children:g(gm,{})})})]})})}const a8={"top-left":"origin-top-left",top:"origin-top","top-right":"origin-top-right","bottom-left":"origin-bottom-left","bottom-right":"origin-bottom-right",bottom:"origin-bottom"};function cw({open:e}){const t=Mc(),n=Ma(),r=bt(),i=r.value.placement,{isDisconnected:s,startSession:a,transcript:o,conversationIndex:c}=St(),l=s0(),{currentContent:u,currentConfig:d}=Ch(),{variant:h}=sw(),p=Te(()=>{var _;return t.value||n.value?!l.value||!t.value?o.value:[{type:"message",role:"agent",message:l.value,isText:!0,conversationIndex:((_=o.value[0])==null?void 0:_.conversationIndex)??c.peek()},...o.value]:r.value.transcript_enabled?o.value:o.value.filter(S=>S.type!=="message"||S.isText)}),O=Te(()=>p.value.length>0||!s.value&&r.value.transcript_enabled),m=Ze(!0),b=Te(()=>u.value!=="feedback"),v=Te(()=>O.value&&!s.value),k=Te(()=>u.value!=="feedback"&&(!O.value||s.value)),y=Te(()=>!!r.value.conversation_mode_toggle_enabled&&!n.value&&!s.value),T=Te(()=>O.value);return g(zt,{initial:!1,active:e,children:g("div",{"data-variant":h.value,className:Ee("sheet","flex flex-col overflow-hidden absolute bg-base shadow-lg pointer-events-auto z-2","transition-[width,height,max-width,max-height,transform,border-radius,opacity,inset,bottom,top,left,right,margin,padding] duration-200","data-hidden:scale-90 data-hidden:opacity-0",a8[i],i.startsWith("top")?r.value.always_expanded?"top-0":"top-20":r.value.always_expanded?"bottom-0":"bottom-20"),children:[g(YZ,{showBackButton:d.showHeaderBack,onBackClick:d.onHeaderBack,showStatusLabel:v,showLanguageSelector:k,showConversationModeToggle:y,showExpandButton:T}),g(zt,{active:u.value==="transcript",children:g("div",{className:"grow flex flex-col min-h-0 relative transition-opacity duration-300 ease-out data-hidden:opacity-0",children:[g(vF,{transcript:p,scrollPinned:m}),g(HZ,{showTranscript:O.value,scrollPinned:m})]})}),g(zt,{active:u.value==="feedback",children:g("div",{className:"absolute inset-0 top-[88px] flex flex-col bg-base transition-transform duration-300 ease-out data-hidden:translate-x-full",children:[g(TF,{}),g(kF,{})]})}),g(s8,{showAvatar:b,showTranscript:O,isDisconnected:s,onStartSession:a})]})})}function lw({expanded:e}){const t=Ma(),n=bt().value.variant,{isDisconnected:r}=St(),i=nt(),s=oe(()=>{e.value=!e.value},[e]);return g(Xe,{children:[n==="full"&&g(Ln,{visible:!e.value&&!r.value,className:"p-1",children:g(da,{})}),g(Ln,{grow:n!=="tiny",visible:!t.value&&!e.value&&!r.value,className:"p-1",children:g(vm,{iconOnly:!0,isDisconnected:!1})}),g(Ln,{visible:!t.value&&!e.value&&!r.value,className:"p-1",children:g(bm,{})}),g(Ln,{grow:r.value,visible:!0,className:"p-1",children:g(Qt,{className:"w-full",variant:"primary",iconClassName:at((e.value||!r.value)&&"transition-transform duration-200",e.value&&"-rotate-180"),icon:e.value?"chevron-up":r.value?t.value?"chat":"phone":"chevron-up","aria-label":e.value?i.collapse:r.value?t.value?i.start_chat:i.start_call:i.expand,onClick:!e.value&&!r.value?s:void 0,children:!e.value&&r.value&&n!=="tiny"?t.value?i.start_chat:i.start_call:void 0})})]})}function o8({expanded:e,className:t,...n}){const{isDisconnected:r}=St(),i=nt();return g("div",{className:at("transition-[border-radius] flex flex-col p-2",!e.value&&r.value?"rounded-sheet":"rounded-compact-sheet",t),...n,children:[g(Ln,{visible:!e.value&&r.value,className:"p-1 !min-w-60",children:g("div",{className:"flex items-center gap-2",children:[g(da,{}),g("div",{className:"text-sm max-w-64",children:i.main_label})]})}),g("div",{className:"flex items-center",children:g(lw,{expanded:e})})]})}function c8({expanded:e,className:t,...n}){return g("div",{className:at("rounded-compact-sheet flex items-center p-2",t),...n,children:[g(Ln,{visible:!e.value,className:"p-1",children:g(da,{})}),g(lw,{expanded:e})]})}function l8({visible:e,className:t,...n}){const r=nt(),{language:i,showPicker:s}=Is();return s.value?g(Ln,{visible:e,className:"p-1",children:g(nw,{children:g(ew,{className:at("h-9 min-w-max border border-base-border rounded-button focus-ring px-1.5 flex gap-1 items-center transition-colors duration-200 hover:bg-base-hover active:bg-base-active",t),"aria-label":r.change_language,...n,children:[g(Om,{flagCode:i.value.flagCode}),g(tw,{className:"px-1 text-base-subtle",asChild:!0,children:g(er,{size:"sm",name:"chevron-down"})})]})})}):null}function uw(){const e=bt().value.variant,{isDisconnected:t,status:n}=St();return g(Xe,{children:[g(vm,{isDisconnected:t.value,iconOnly:e==="tiny",className:"w-full m-1 z-1",disabled:n.value==="disconnecting"||n.value==="connecting"}),g(l8,{visible:t.value}),g(Ln,{visible:!t.value,className:"p-1",children:g(bm,{})})]})}function u8({className:e,...t}){const{isDisconnected:n}=St(),r=nt();return g("div",{className:at("flex flex-col p-2 rounded-sheet",e),...t,children:[g("div",{className:"flex items-center p-1 gap-2 min-w-60",children:[g(da,{}),g("div",{className:"relative text-sm max-w-64",children:[g("span",{className:at("block transition-[transform,opacity] duration-200",!n.value&&"opacity-0 scale-90"),children:r.main_label}),g(zt,{active:!n.value,children:g(gm,{className:"absolute top-1/2 -translate-y-1/2 transition-[transform,opacity] duration-200 data-hidden:opacity-0 data-hidden:scale-90"})})]})]}),g("div",{className:"flex items-center",children:g(uw,{})})]})}function d8({className:e,...t}){return g("div",{className:at("rounded-compact-sheet flex items-center p-2",e),...t,children:[g(da,{className:"mx-1"}),g(uw,{})]})}function h8({expandable:e,expanded:t}){const n=bt().value.variant,r=Lc(),{isDisconnected:i}=St(),s=oe(async()=>{await r.requestTerms(),t.value=!t.peek()},[t]),a=n==="full";return e?g(a?o8:c8,{expanded:t,className:at("bg-base shadow-md pointer-events-auto overflow-hidden",(i.value||t.value)&&"cursor-pointer"),onClick:i.value||t.value?s:void 0}):g(a?u8:d8,{className:"bg-base shadow-md pointer-events-auto overflow-hidden"})}function p8(){const e=nt(),t=bt(),{dismissTerms:n,acceptTerms:r}=Lc();return g("div",{className:"max-w-[400px] flex flex-col gap-2 bg-base shadow-md pointer-events-auto rounded-sheet p-3 text-sm",children:[g("div",{className:"flex flex-col gap-1 terms p-2 pt-1",dangerouslySetInnerHTML:{__html:t.value.terms_html??""}}),g("div",{className:"flex justify-end gap-2",children:[g(Qt,{onClick:n,children:e.dismiss_terms}),g(Qt,{onClick:r,variant:"primary",children:e.accept_terms})]})]})}function f8({copyText:e,children:t}){const n=nt(),[r,i]=fe(!1);ve(()=>{if(r){const a=setTimeout(()=>{i(!1)},2e3);return()=>{clearTimeout(a)}}},[r]);const s=oe(()=>{const a=h0(e);a&&(navigator.clipboard.writeText(a),i(!0))},[]);return g(Qt,{onClick:s,children:r?n.copied:t})}function m8({sawError:e}){const t=nt(),{error:n,lastId:r}=St(),i=oe(()=>{e.value=!0},[]);return g("div",{className:"max-w-[400px] flex flex-col gap-2 bg-base shadow-md pointer-events-auto rounded-sheet p-3 text-sm",children:[g("div",{className:"p-2 pt-1",children:[g("h1",{className:"text-md font-medium pb-1",children:t.error_occurred}),n.value,r.value&&g(Xe,{children:[g("br",{}),g("span",{className:"text-base-subtle",children:[t.conversation_id,": ",r.value]})]})]}),g("div",{className:"flex justify-end gap-2",children:[g(f8,{copyText:r,children:t.copy_id}),g(Qt,{variant:"primary",onClick:i,children:"Close"})]})]})}function O8(){const e=bt();return e.value.disable_banner?null:g("p",{className:at("whitespace-nowrap [line-height:var(--el-overlay-padding)] text-[10px] px-3",e.value.placement.startsWith("top")?"-translate-y-[calc(var(--el-overlay-padding))]":"translate-y-[calc(var(--el-overlay-padding))]"),children:[g("span",{className:"opacity-30",children:["Powered by"," ",g("a",{href:e.value.override_link||"https://askbenny.ca/",className:"underline cursor-pointer pointer-events-auto focus-visible:outline-none opacity-30 hover:opacity-50 focus-visible:opacity-100 focus-visible:underline-offset-2",target:"_blank",children:"AskBenny"})]})," "]})}const ha={left:"items-start",center:"items-center",right:"items-end"},pa={top:"flex-col-reverse justify-end",bottom:"flex-col justify-end"},g8={"top-left":`${pa.top} ${ha.left}`,top:`${pa.top} ${ha.center}`,"top-right":`${pa.top} ${ha.right}`,"bottom-left":`${pa.bottom} ${ha.left}`,bottom:`${pa.bottom} ${ha.center}`,"bottom-right":`${pa.bottom} ${ha.right}`},du={display:"none"},v8=Fe(function(){const e=bt(),t=Ze(e.peek().default_expanded),n=Ze(!1),{error:r}=St(),i=Lc(),s=Te(()=>e.value.transcript_enabled||e.value.text_input_enabled),a=n0(),o=Te(()=>at("overlay !flex transition-opacity duration-200 data-hidden:opacity-0",g8[e.value.placement]));jn(()=>{r.value&&(s.value?(n.value=!0,t.value=!0):n.value=!1)}),jn(()=>{const h=O=>{!O.detail||O.detail._convaiEventHandled||(O.detail._convaiEventHandled=!0,O.detail.action==="expand"?t.value=!0:O.detail.action==="collapse"?t.value=!1:O.detail.action==="toggle"&&(t.value=!t.value))},p=a.value;return document.addEventListener("askbenny-agent:expand",h),p==null||p.addEventListener("askbenny-agent:expand",h),()=>{document.removeEventListener("askbenny-agent:expand",h),p==null||p.removeEventListener("askbenny-agent:expand",h)}});const c=Te(()=>!s.value&&r.value&&!n.value?"error":!i.termsAccepted.value&&i.termsShown.value?"terms":"conversation"),l=Te(()=>c.value==="error"),u=Te(()=>c.value==="terms"),d=Te(()=>c.value==="conversation");return g(Xe,{children:[g(zt,{initial:!1,active:d,children:g(Uc,{className:o,style:du,children:e.value.always_expanded?g(cw,{open:!0}):g(Xe,{children:[s.value&&g(cw,{open:t}),g(h8,{expandable:s.value,expanded:t})]})})}),g(zt,{initial:!1,active:u,children:g(Uc,{className:o,style:du,children:g(p8,{})})}),g(zt,{initial:!1,active:l,children:g(Uc,{className:o,style:du,children:g(m8,{sawError:n})})}),g(Uc,{className:o,style:du,children:g(O8,{})})]})});function b8(e){return g(mA,{children:g(sA,{value:e,children:g(oA,{children:g(TA,{children:g(GZ,{children:g(cA,{children:g(fA,{children:g(hA,{children:g(gA,{children:g(PA,{children:g(RA,{children:g(IA,{children:g(QA,{children:g($I,{children:g(DI,{children:[g(wA,{}),g(v8,{})]})})})})})})})})})})})})})})})}function T8(e="askbenny-convai"){bw(b8,e,[...uh],{shadow:!0})}T8()})();
